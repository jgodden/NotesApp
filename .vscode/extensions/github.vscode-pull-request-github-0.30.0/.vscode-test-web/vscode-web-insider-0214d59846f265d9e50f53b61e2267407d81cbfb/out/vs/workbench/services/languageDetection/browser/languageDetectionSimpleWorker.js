/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var u=["vs/workbench/services/languageDetection/browser/languageDetectionSimpleWorker","require","exports","vs/base/common/stopwatch","vs/editor/common/services/editorSimpleWorker"],f=function(l){for(var r=[],a=0,d=l.length;a<d;a++)r[a]=u[l[a]];return r};define(u[0],f([1,2,3,4]),function(l,r,a,d){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LanguageDetectionSimpleWorker=r.create=void 0;function h(g){return new s(g,null)}r.create=h;class s extends d.EditorSimpleWorker{constructor(){super(...arguments);this._loadFailed=!1}async detectLanguage(c){const o=[],n=[],e=new a.StopWatch(!0);for await(const t of this.detectLanguagesImpl(c))o.push(t.languageId),n.push(t.confidence);if(e.stop(),o.length)return this._host.fhr("sendTelemetryEvent",[o,n,e.elapsed()]),o[0]}async getModelOperations(){if(this._modelOperations)return this._modelOperations;const c=await this._host.fhr("getIndexJsUri",[]),{ModelOperations:o}=await new Promise((n,e)=>{l([c],n,e)});return this._modelOperations=new o({modelJsonLoaderFunc:async()=>{const n=await fetch(await this._host.fhr("getModelJsonUri",[]));try{return await n.json()}catch(e){const t="Failed to parse model JSON.";throw new Error(t)}},weightsLoaderFunc:async()=>await(await fetch(await this._host.fhr("getWeightsUri",[]))).arrayBuffer()}),this._modelOperations}async*detectLanguagesImpl(c){if(this._loadFailed)return;let o;try{o=await this.getModelOperations()}catch(i){console.log(i),this._loadFailed=!0;return}const n=this._getModel(c);if(!n)return;const e=await o.runModel(n.getValue());if(!e||e.length===0||e[0].confidence<s.expectedRelativeConfidence)return;const t=[e[0]];for(let i of e){if(i===e[0])continue;if(t[t.length-1].confidence-i.confidence>=s.expectedRelativeConfidence){for(;t.length;)yield t.shift();if(i.confidence>s.expectedRelativeConfidence){t.push(i);continue}return}else{if(i.confidence>s.expectedRelativeConfidence){t.push(i);continue}return}}}}r.LanguageDetectionSimpleWorker=s,s.expectedRelativeConfidence=.2})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/0214d59846f265d9e50f53b61e2267407d81cbfb/core/vs/workbench/services/languageDetection/browser/languageDetectionSimpleWorker.js.map
