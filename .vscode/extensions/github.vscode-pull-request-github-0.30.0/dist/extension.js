(()=>{var Cp={9669:(u,Y,x)=>{u.exports=x(1609)},7970:(u,Y,x)=>{"use strict";var V=x(4867),W=x(6026),ee=x(4097),F=x(5327),I=x(8605),M=x(7211),N=x(938).http,C=x(938).https,L=x(8835),$=x(8761),j=x(696),O=x(5061),U=x(481),H=/https:?/;function G(re,ie,ye){if(re.hostname=ie.host,re.host=ie.host,re.port=ie.port,re.path=ye,ie.auth){var J=Buffer.from(ie.auth.username+":"+ie.auth.password,"utf8").toString("base64");re.headers["Proxy-Authorization"]="Basic "+J}re.beforeRedirect=function(ae){ae.headers.host=ae.host,G(ae,ie,ae.href)}}u.exports=function(ie){return new Promise(function(J,be){var ae=function(et){J(et)},ce=function(et){be(et)},se=ie.data,ne=ie.headers;if(!ne["User-Agent"]&&!ne["user-agent"]&&(ne["User-Agent"]="axios/"+j.version),se&&!V.isStream(se)){if(!Buffer.isBuffer(se))if(V.isArrayBuffer(se))se=Buffer.from(new Uint8Array(se));else if(V.isString(se))se=Buffer.from(se,"utf-8");else return ce(O("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",ie));ne["Content-Length"]=se.length}var K=void 0;if(ie.auth){var ue=ie.auth.username||"",me=ie.auth.password||"";K=ue+":"+me}var ve=ee(ie.baseURL,ie.url),we=L.parse(ve),ke=we.protocol||"http:";if(!K&&we.auth){var Be=we.auth.split(":"),We=Be[0]||"",it=Be[1]||"";K=We+":"+it}K&&delete ne.Authorization;var at=H.test(ke),Nt=at?ie.httpsAgent:ie.httpAgent,Tt={path:F(we.path,ie.params,ie.paramsSerializer).replace(/^\?/,""),method:ie.method.toUpperCase(),headers:ne,agent:Nt,agents:{http:ie.httpAgent,https:ie.httpsAgent},auth:K};ie.socketPath?Tt.socketPath=ie.socketPath:(Tt.hostname=we.hostname,Tt.port=we.port);var xt=ie.proxy;if(!xt&&xt!==!1){var Ft=ke.slice(0,-1)+"_proxy",ar=process.env[Ft]||process.env[Ft.toUpperCase()];if(ar){var Er=L.parse(ar),rn=process.env.no_proxy||process.env.NO_PROXY,Di=!0;if(rn){var ls=rn.split(",").map(function(et){return et.trim()});Di=!ls.some(function(et){return et?et==="*"||et[0]==="."&&we.hostname.substr(we.hostname.length-et.length)===et?!0:we.hostname===et:!1})}if(Di&&(xt={host:Er.hostname,port:Er.port,protocol:Er.protocol},Er.auth)){var Mi=Er.auth.split(":");xt.auth={username:Mi[0],password:Mi[1]}}}}xt&&(Tt.headers.host=we.hostname+(we.port?":"+we.port:""),G(Tt,xt,ke+"//"+we.hostname+(we.port?":"+we.port:"")+Tt.path));var ui,Gn=at&&(xt?H.test(xt.protocol):!0);ie.transport?ui=ie.transport:ie.maxRedirects===0?ui=Gn?M:I:(ie.maxRedirects&&(Tt.maxRedirects=ie.maxRedirects),ui=Gn?C:N),ie.maxBodyLength>-1&&(Tt.maxBodyLength=ie.maxBodyLength);var Ut=ui.request(Tt,function(et){if(!Ut.aborted){var Or=et,kr=et.req||Ut;if(et.statusCode!==204&&kr.method!=="HEAD"&&ie.decompress!==!1)switch(et.headers["content-encoding"]){case"gzip":case"compress":case"deflate":Or=Or.pipe($.createUnzip()),delete et.headers["content-encoding"];break}var Hn={status:et.statusCode,statusText:et.statusMessage,headers:et.headers,config:ie,request:kr};if(ie.responseType==="stream")Hn.data=Or,W(ae,ce,Hn);else{var li=[];Or.on("data",function(Dr){li.push(Dr),ie.maxContentLength>-1&&Buffer.concat(li).length>ie.maxContentLength&&(Or.destroy(),ce(O("maxContentLength size of "+ie.maxContentLength+" exceeded",ie,null,kr)))}),Or.on("error",function(Dr){Ut.aborted||ce(U(Dr,ie,null,kr))}),Or.on("end",function(){var Dr=Buffer.concat(li);ie.responseType!=="arraybuffer"&&(Dr=Dr.toString(ie.responseEncoding),(!ie.responseEncoding||ie.responseEncoding==="utf8")&&(Dr=V.stripBOM(Dr))),Hn.data=Dr,W(ae,ce,Hn)})}}});Ut.on("error",function(et){Ut.aborted&&et.code!=="ERR_FR_TOO_MANY_REDIRECTS"||ce(U(et,ie,null,Ut))}),ie.timeout&&Ut.setTimeout(ie.timeout,function(){Ut.abort(),ce(O("timeout of "+ie.timeout+"ms exceeded",ie,"ECONNABORTED",Ut))}),ie.cancelToken&&ie.cancelToken.promise.then(function(et){Ut.aborted||(Ut.abort(),ce(et))}),V.isStream(se)?se.on("error",function(et){ce(U(et,ie,null,Ut))}).pipe(Ut):Ut.end(se)})}},5448:(u,Y,x)=>{"use strict";var V=x(4867),W=x(6026),ee=x(4372),F=x(5327),I=x(4097),M=x(4109),N=x(7985),C=x(5061);u.exports=function($){return new Promise(function(O,U){var H=$.data,G=$.headers;V.isFormData(H)&&delete G["Content-Type"];var re=new XMLHttpRequest;if($.auth){var ie=$.auth.username||"",ye=$.auth.password?unescape(encodeURIComponent($.auth.password)):"";G.Authorization="Basic "+btoa(ie+":"+ye)}var J=I($.baseURL,$.url);if(re.open($.method.toUpperCase(),F(J,$.params,$.paramsSerializer),!0),re.timeout=$.timeout,re.onreadystatechange=function(){if(!(!re||re.readyState!==4)&&!(re.status===0&&!(re.responseURL&&re.responseURL.indexOf("file:")===0))){var ce="getAllResponseHeaders"in re?M(re.getAllResponseHeaders()):null,se=!$.responseType||$.responseType==="text"?re.responseText:re.response,ne={data:se,status:re.status,statusText:re.statusText,headers:ce,config:$,request:re};W(O,U,ne),re=null}},re.onabort=function(){!re||(U(C("Request aborted",$,"ECONNABORTED",re)),re=null)},re.onerror=function(){U(C("Network Error",$,null,re)),re=null},re.ontimeout=function(){var ce="timeout of "+$.timeout+"ms exceeded";$.timeoutErrorMessage&&(ce=$.timeoutErrorMessage),U(C(ce,$,"ECONNABORTED",re)),re=null},V.isStandardBrowserEnv()){var be=($.withCredentials||N(J))&&$.xsrfCookieName?ee.read($.xsrfCookieName):void 0;be&&(G[$.xsrfHeaderName]=be)}if("setRequestHeader"in re&&V.forEach(G,function(ce,se){typeof H=="undefined"&&se.toLowerCase()==="content-type"?delete G[se]:re.setRequestHeader(se,ce)}),V.isUndefined($.withCredentials)||(re.withCredentials=!!$.withCredentials),$.responseType)try{re.responseType=$.responseType}catch(ae){if($.responseType!=="json")throw ae}typeof $.onDownloadProgress=="function"&&re.addEventListener("progress",$.onDownloadProgress),typeof $.onUploadProgress=="function"&&re.upload&&re.upload.addEventListener("progress",$.onUploadProgress),$.cancelToken&&$.cancelToken.promise.then(function(ce){!re||(re.abort(),U(ce),re=null)}),H||(H=null),re.send(H)})}},1609:(u,Y,x)=>{"use strict";var V=x(4867),W=x(1849),ee=x(321),F=x(7185),I=x(5655);function M(C){var L=new ee(C),$=W(ee.prototype.request,L);return V.extend($,ee.prototype,L),V.extend($,L),$}var N=M(I);N.Axios=ee,N.create=function(L){return M(F(N.defaults,L))},N.Cancel=x(5263),N.CancelToken=x(4972),N.isCancel=x(6502),N.all=function(L){return Promise.all(L)},N.spread=x(8713),N.isAxiosError=x(6268),u.exports=N,u.exports.default=N},5263:u=>{"use strict";function Y(x){this.message=x}Y.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Y.prototype.__CANCEL__=!0,u.exports=Y},4972:(u,Y,x)=>{"use strict";var V=x(5263);function W(ee){if(typeof ee!="function")throw new TypeError("executor must be a function.");var F;this.promise=new Promise(function(N){F=N});var I=this;ee(function(N){I.reason||(I.reason=new V(N),F(I.reason))})}W.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},W.source=function(){var F,I=new W(function(N){F=N});return{token:I,cancel:F}},u.exports=W},6502:u=>{"use strict";u.exports=function(x){return!!(x&&x.__CANCEL__)}},321:(u,Y,x)=>{"use strict";var V=x(4867),W=x(5327),ee=x(782),F=x(3572),I=x(7185);function M(N){this.defaults=N,this.interceptors={request:new ee,response:new ee}}M.prototype.request=function(C){typeof C=="string"?(C=arguments[1]||{},C.url=arguments[0]):C=C||{},C=I(this.defaults,C),C.method?C.method=C.method.toLowerCase():this.defaults.method?C.method=this.defaults.method.toLowerCase():C.method="get";var L=[F,void 0],$=Promise.resolve(C);for(this.interceptors.request.forEach(function(O){L.unshift(O.fulfilled,O.rejected)}),this.interceptors.response.forEach(function(O){L.push(O.fulfilled,O.rejected)});L.length;)$=$.then(L.shift(),L.shift());return $},M.prototype.getUri=function(C){return C=I(this.defaults,C),W(C.url,C.params,C.paramsSerializer).replace(/^\?/,"")},V.forEach(["delete","get","head","options"],function(C){M.prototype[C]=function(L,$){return this.request(I($||{},{method:C,url:L,data:($||{}).data}))}}),V.forEach(["post","put","patch"],function(C){M.prototype[C]=function(L,$,j){return this.request(I(j||{},{method:C,url:L,data:$}))}}),u.exports=M},782:(u,Y,x)=>{"use strict";var V=x(4867);function W(){this.handlers=[]}W.prototype.use=function(F,I){return this.handlers.push({fulfilled:F,rejected:I}),this.handlers.length-1},W.prototype.eject=function(F){this.handlers[F]&&(this.handlers[F]=null)},W.prototype.forEach=function(F){V.forEach(this.handlers,function(M){M!==null&&F(M)})},u.exports=W},4097:(u,Y,x)=>{"use strict";var V=x(1793),W=x(9002);u.exports=function(F,I){return F&&!V(I)?W(F,I):I}},5061:(u,Y,x)=>{"use strict";var V=x(481);u.exports=function(ee,F,I,M,N){var C=new Error(ee);return V(C,F,I,M,N)}},3572:(u,Y,x)=>{"use strict";var V=x(4867),W=x(8527),ee=x(6502),F=x(5655);function I(M){M.cancelToken&&M.cancelToken.throwIfRequested()}u.exports=function(N){I(N),N.headers=N.headers||{},N.data=W(N.data,N.headers,N.transformRequest),N.headers=V.merge(N.headers.common||{},N.headers[N.method]||{},N.headers),V.forEach(["delete","get","head","post","put","patch","common"],function($){delete N.headers[$]});var C=N.adapter||F.adapter;return C(N).then(function($){return I(N),$.data=W($.data,$.headers,N.transformResponse),$},function($){return ee($)||(I(N),$&&$.response&&($.response.data=W($.response.data,$.response.headers,N.transformResponse))),Promise.reject($)})}},481:u=>{"use strict";u.exports=function(x,V,W,ee,F){return x.config=V,W&&(x.code=W),x.request=ee,x.response=F,x.isAxiosError=!0,x.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},x}},7185:(u,Y,x)=>{"use strict";var V=x(4867);u.exports=function(ee,F){F=F||{};var I={},M=["url","method","data"],N=["headers","auth","proxy","params"],C=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],L=["validateStatus"];function $(H,G){return V.isPlainObject(H)&&V.isPlainObject(G)?V.merge(H,G):V.isPlainObject(G)?V.merge({},G):V.isArray(G)?G.slice():G}function j(H){V.isUndefined(F[H])?V.isUndefined(ee[H])||(I[H]=$(void 0,ee[H])):I[H]=$(ee[H],F[H])}V.forEach(M,function(G){V.isUndefined(F[G])||(I[G]=$(void 0,F[G]))}),V.forEach(N,j),V.forEach(C,function(G){V.isUndefined(F[G])?V.isUndefined(ee[G])||(I[G]=$(void 0,ee[G])):I[G]=$(void 0,F[G])}),V.forEach(L,function(G){G in F?I[G]=$(ee[G],F[G]):G in ee&&(I[G]=$(void 0,ee[G]))});var O=M.concat(N).concat(C).concat(L),U=Object.keys(ee).concat(Object.keys(F)).filter(function(G){return O.indexOf(G)===-1});return V.forEach(U,j),I}},6026:(u,Y,x)=>{"use strict";var V=x(5061);u.exports=function(ee,F,I){var M=I.config.validateStatus;!I.status||!M||M(I.status)?ee(I):F(V("Request failed with status code "+I.status,I.config,null,I.request,I))}},8527:(u,Y,x)=>{"use strict";var V=x(4867);u.exports=function(ee,F,I){return V.forEach(I,function(N){ee=N(ee,F)}),ee}},5655:(u,Y,x)=>{"use strict";var V=x(4867),W=x(6016),ee={"Content-Type":"application/x-www-form-urlencoded"};function F(N,C){!V.isUndefined(N)&&V.isUndefined(N["Content-Type"])&&(N["Content-Type"]=C)}function I(){var N;return typeof XMLHttpRequest!="undefined"?N=x(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(N=x(7970)),N}var M={adapter:I(),transformRequest:[function(C,L){return W(L,"Accept"),W(L,"Content-Type"),V.isFormData(C)||V.isArrayBuffer(C)||V.isBuffer(C)||V.isStream(C)||V.isFile(C)||V.isBlob(C)?C:V.isArrayBufferView(C)?C.buffer:V.isURLSearchParams(C)?(F(L,"application/x-www-form-urlencoded;charset=utf-8"),C.toString()):V.isObject(C)?(F(L,"application/json;charset=utf-8"),JSON.stringify(C)):C}],transformResponse:[function(C){if(typeof C=="string")try{C=JSON.parse(C)}catch(L){}return C}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(C){return C>=200&&C<300}};M.headers={common:{Accept:"application/json, text/plain, */*"}},V.forEach(["delete","get","head"],function(C){M.headers[C]={}}),V.forEach(["post","put","patch"],function(C){M.headers[C]=V.merge(ee)}),u.exports=M},1849:u=>{"use strict";u.exports=function(x,V){return function(){for(var ee=new Array(arguments.length),F=0;F<ee.length;F++)ee[F]=arguments[F];return x.apply(V,ee)}}},5327:(u,Y,x)=>{"use strict";var V=x(4867);function W(ee){return encodeURIComponent(ee).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}u.exports=function(F,I,M){if(!I)return F;var N;if(M)N=M(I);else if(V.isURLSearchParams(I))N=I.toString();else{var C=[];V.forEach(I,function(j,O){j===null||typeof j=="undefined"||(V.isArray(j)?O=O+"[]":j=[j],V.forEach(j,function(H){V.isDate(H)?H=H.toISOString():V.isObject(H)&&(H=JSON.stringify(H)),C.push(W(O)+"="+W(H))}))}),N=C.join("&")}if(N){var L=F.indexOf("#");L!==-1&&(F=F.slice(0,L)),F+=(F.indexOf("?")===-1?"?":"&")+N}return F}},9002:u=>{"use strict";u.exports=function(x,V){return V?x.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):x}},4372:(u,Y,x)=>{"use strict";var V=x(4867);u.exports=V.isStandardBrowserEnv()?function(){return{write:function(F,I,M,N,C,L){var $=[];$.push(F+"="+encodeURIComponent(I)),V.isNumber(M)&&$.push("expires="+new Date(M).toGMTString()),V.isString(N)&&$.push("path="+N),V.isString(C)&&$.push("domain="+C),L===!0&&$.push("secure"),document.cookie=$.join("; ")},read:function(F){var I=document.cookie.match(new RegExp("(^|;\\s*)("+F+")=([^;]*)"));return I?decodeURIComponent(I[3]):null},remove:function(F){this.write(F,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:u=>{"use strict";u.exports=function(x){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(x)}},6268:u=>{"use strict";u.exports=function(x){return typeof x=="object"&&x.isAxiosError===!0}},7985:(u,Y,x)=>{"use strict";var V=x(4867);u.exports=V.isStandardBrowserEnv()?function(){var ee=/(msie|trident)/i.test(navigator.userAgent),F=document.createElement("a"),I;function M(N){var C=N;return ee&&(F.setAttribute("href",C),C=F.href),F.setAttribute("href",C),{href:F.href,protocol:F.protocol?F.protocol.replace(/:$/,""):"",host:F.host,search:F.search?F.search.replace(/^\?/,""):"",hash:F.hash?F.hash.replace(/^#/,""):"",hostname:F.hostname,port:F.port,pathname:F.pathname.charAt(0)==="/"?F.pathname:"/"+F.pathname}}return I=M(window.location.href),function(C){var L=V.isString(C)?M(C):C;return L.protocol===I.protocol&&L.host===I.host}}():function(){return function(){return!0}}()},6016:(u,Y,x)=>{"use strict";var V=x(4867);u.exports=function(ee,F){V.forEach(ee,function(M,N){N!==F&&N.toUpperCase()===F.toUpperCase()&&(ee[F]=M,delete ee[N])})}},4109:(u,Y,x)=>{"use strict";var V=x(4867),W=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];u.exports=function(F){var I={},M,N,C;return F&&V.forEach(F.split(`
`),function($){if(C=$.indexOf(":"),M=V.trim($.substr(0,C)).toLowerCase(),N=V.trim($.substr(C+1)),M){if(I[M]&&W.indexOf(M)>=0)return;M==="set-cookie"?I[M]=(I[M]?I[M]:[]).concat([N]):I[M]=I[M]?I[M]+", "+N:N}}),I}},8713:u=>{"use strict";u.exports=function(x){return function(W){return x.apply(null,W)}}},4867:(u,Y,x)=>{"use strict";var V=x(1849),W=Object.prototype.toString;function ee(K){return W.call(K)==="[object Array]"}function F(K){return typeof K=="undefined"}function I(K){return K!==null&&!F(K)&&K.constructor!==null&&!F(K.constructor)&&typeof K.constructor.isBuffer=="function"&&K.constructor.isBuffer(K)}function M(K){return W.call(K)==="[object ArrayBuffer]"}function N(K){return typeof FormData!="undefined"&&K instanceof FormData}function C(K){var ue;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ue=ArrayBuffer.isView(K):ue=K&&K.buffer&&K.buffer instanceof ArrayBuffer,ue}function L(K){return typeof K=="string"}function $(K){return typeof K=="number"}function j(K){return K!==null&&typeof K=="object"}function O(K){if(W.call(K)!=="[object Object]")return!1;var ue=Object.getPrototypeOf(K);return ue===null||ue===Object.prototype}function U(K){return W.call(K)==="[object Date]"}function H(K){return W.call(K)==="[object File]"}function G(K){return W.call(K)==="[object Blob]"}function re(K){return W.call(K)==="[object Function]"}function ie(K){return j(K)&&re(K.pipe)}function ye(K){return typeof URLSearchParams!="undefined"&&K instanceof URLSearchParams}function J(K){return K.replace(/^\s*/,"").replace(/\s*$/,"")}function be(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function ae(K,ue){if(!(K===null||typeof K=="undefined"))if(typeof K!="object"&&(K=[K]),ee(K))for(var me=0,ve=K.length;me<ve;me++)ue.call(null,K[me],me,K);else for(var we in K)Object.prototype.hasOwnProperty.call(K,we)&&ue.call(null,K[we],we,K)}function ce(){var K={};function ue(we,ke){O(K[ke])&&O(we)?K[ke]=ce(K[ke],we):O(we)?K[ke]=ce({},we):ee(we)?K[ke]=we.slice():K[ke]=we}for(var me=0,ve=arguments.length;me<ve;me++)ae(arguments[me],ue);return K}function se(K,ue,me){return ae(ue,function(we,ke){me&&typeof we=="function"?K[ke]=V(we,me):K[ke]=we}),K}function ne(K){return K.charCodeAt(0)===65279&&(K=K.slice(1)),K}u.exports={isArray:ee,isArrayBuffer:M,isBuffer:I,isFormData:N,isArrayBufferView:C,isString:L,isNumber:$,isObject:j,isPlainObject:O,isUndefined:F,isDate:U,isFile:H,isBlob:G,isFunction:re,isStream:ie,isURLSearchParams:ye,isStandardBrowserEnv:be,forEach:ae,merge:ce,extend:se,trim:J,stripBOM:ne}},696:u=>{"use strict";u.exports=JSON.parse('{"name":"axios","version":"0.21.1","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(u,Y,x)=>{var V=x(3698),W=x(2505),ee=x(5382),F=Function.bind,I=F.bind(F);function M(j,O,U){var H=I(ee,null).apply(null,U?[O,U]:[O]);j.api={remove:H},j.remove=H,["before","error","after","wrap"].forEach(function(G){var re=U?[O,G,U]:[O,G];j[G]=j.api[G]=I(W,null).apply(null,re)})}function N(){var j="h",O={registry:{}},U=V.bind(null,O,j);return M(U,O,j),U}function C(){var j={registry:{}},O=V.bind(null,j);return M(O,j),O}var L=!1;function $(){return L||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),L=!0),C()}$.Singular=N.bind(),$.Collection=C.bind(),u.exports=$,u.exports.Hook=$,u.exports.Singular=$.Singular,u.exports.Collection=$.Collection},2505:u=>{u.exports=Y;function Y(x,V,W,ee){var F=ee;x.registry[W]||(x.registry[W]=[]),V==="before"&&(ee=function(I,M){return Promise.resolve().then(F.bind(null,M)).then(I.bind(null,M))}),V==="after"&&(ee=function(I,M){var N;return Promise.resolve().then(I.bind(null,M)).then(function(C){return N=C,F(N,M)}).then(function(){return N})}),V==="error"&&(ee=function(I,M){return Promise.resolve().then(I.bind(null,M)).catch(function(N){return F(N,M)})}),x.registry[W].push({hook:ee,orig:F})}},3698:u=>{u.exports=Y;function Y(x,V,W,ee){if(typeof W!="function")throw new Error("method for before hook must be a function");return ee||(ee={}),Array.isArray(V)?V.reverse().reduce(function(F,I){return Y.bind(null,x,I,F,ee)},W)():Promise.resolve().then(function(){return x.registry[V]?x.registry[V].reduce(function(F,I){return I.hook.bind(null,F,ee)},W)():W(ee)})}},5382:u=>{u.exports=Y;function Y(x,V,W){if(!!x.registry[V]){var ee=x.registry[V].map(function(F){return F.orig}).indexOf(W);ee!==-1&&x.registry[V].splice(ee,1)}}},5175:u=>{"use strict";function Y(x){if(!/^data:/i.test(x))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');x=x.replace(/\r?\n/g,"");const V=x.indexOf(",");if(V===-1||V<=4)throw new TypeError("malformed data: URI");const W=x.substring(5,V).split(";");let ee="",F=!1;const I=W[0]||"text/plain";let M=I;for(let $=1;$<W.length;$++)W[$]==="base64"?F=!0:(M+=`;${W[$]}`,W[$].indexOf("charset=")===0&&(ee=W[$].substring(8)));!W[0]&&!ee.length&&(M+=";charset=US-ASCII",ee="US-ASCII");const N=F?"base64":"ascii",C=unescape(x.substring(V+1)),L=Buffer.from(C,N);return L.type=I,L.typeFull=M,L.charset=ee,L}u.exports=Y},7484:function(u){(function(Y,x){u.exports=x()})(this,function(){"use strict";var Y="millisecond",x="second",V="minute",W="hour",ee="day",F="week",I="month",M="quarter",N="year",C="date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},O=function(ce,se,ne){var K=String(ce);return!K||K.length>=se?ce:""+Array(se+1-K.length).join(ne)+ce},U={s:O,z:function(ce){var se=-ce.utcOffset(),ne=Math.abs(se),K=Math.floor(ne/60),ue=ne%60;return(se<=0?"+":"-")+O(K,2,"0")+":"+O(ue,2,"0")},m:function ce(se,ne){if(se.date()<ne.date())return-ce(ne,se);var K=12*(ne.year()-se.year())+(ne.month()-se.month()),ue=se.clone().add(K,I),me=ne-ue<0,ve=se.clone().add(K+(me?-1:1),I);return+(-(K+(ne-ue)/(me?ue-ve:ve-ue))||0)},a:function(ce){return ce<0?Math.ceil(ce)||0:Math.floor(ce)},p:function(ce){return{M:I,y:N,w:F,d:ee,D:C,h:W,m:V,s:x,ms:Y,Q:M}[ce]||String(ce||"").toLowerCase().replace(/s$/,"")},u:function(ce){return ce===void 0}},H="en",G={};G[H]=j;var re=function(ce){return ce instanceof be},ie=function(ce,se,ne){var K;if(!ce)return H;if(typeof ce=="string")G[ce]&&(K=ce),se&&(G[ce]=se,K=ce);else{var ue=ce.name;G[ue]=ce,K=ue}return!ne&&K&&(H=K),K||!ne&&H},ye=function(ce,se){if(re(ce))return ce.clone();var ne=typeof se=="object"?se:{};return ne.date=ce,ne.args=arguments,new be(ne)},J=U;J.l=ie,J.i=re,J.w=function(ce,se){return ye(ce,{locale:se.$L,utc:se.$u,x:se.$x,$offset:se.$offset})};var be=function(){function ce(ne){this.$L=ie(ne.locale,null,!0),this.parse(ne)}var se=ce.prototype;return se.parse=function(ne){this.$d=function(K){var ue=K.date,me=K.utc;if(ue===null)return new Date(NaN);if(J.u(ue))return new Date;if(ue instanceof Date)return new Date(ue);if(typeof ue=="string"&&!/Z$/i.test(ue)){var ve=ue.match(L);if(ve){var we=ve[2]-1||0,ke=(ve[7]||"0").substring(0,3);return me?new Date(Date.UTC(ve[1],we,ve[3]||1,ve[4]||0,ve[5]||0,ve[6]||0,ke)):new Date(ve[1],we,ve[3]||1,ve[4]||0,ve[5]||0,ve[6]||0,ke)}}return new Date(ue)}(ne),this.$x=ne.x||{},this.init()},se.init=function(){var ne=this.$d;this.$y=ne.getFullYear(),this.$M=ne.getMonth(),this.$D=ne.getDate(),this.$W=ne.getDay(),this.$H=ne.getHours(),this.$m=ne.getMinutes(),this.$s=ne.getSeconds(),this.$ms=ne.getMilliseconds()},se.$utils=function(){return J},se.isValid=function(){return this.$d.toString()!=="Invalid Date"},se.isSame=function(ne,K){var ue=ye(ne);return this.startOf(K)<=ue&&ue<=this.endOf(K)},se.isAfter=function(ne,K){return ye(ne)<this.startOf(K)},se.isBefore=function(ne,K){return this.endOf(K)<ye(ne)},se.$g=function(ne,K,ue){return J.u(ne)?this[K]:this.set(ue,ne)},se.unix=function(){return Math.floor(this.valueOf()/1e3)},se.valueOf=function(){return this.$d.getTime()},se.startOf=function(ne,K){var ue=this,me=!!J.u(K)||K,ve=J.p(ne),we=function(xt,Ft){var ar=J.w(ue.$u?Date.UTC(ue.$y,Ft,xt):new Date(ue.$y,Ft,xt),ue);return me?ar:ar.endOf(ee)},ke=function(xt,Ft){return J.w(ue.toDate()[xt].apply(ue.toDate("s"),(me?[0,0,0,0]:[23,59,59,999]).slice(Ft)),ue)},Be=this.$W,We=this.$M,it=this.$D,at="set"+(this.$u?"UTC":"");switch(ve){case N:return me?we(1,0):we(31,11);case I:return me?we(1,We):we(0,We+1);case F:var Nt=this.$locale().weekStart||0,Tt=(Be<Nt?Be+7:Be)-Nt;return we(me?it-Tt:it+(6-Tt),We);case ee:case C:return ke(at+"Hours",0);case W:return ke(at+"Minutes",1);case V:return ke(at+"Seconds",2);case x:return ke(at+"Milliseconds",3);default:return this.clone()}},se.endOf=function(ne){return this.startOf(ne,!1)},se.$set=function(ne,K){var ue,me=J.p(ne),ve="set"+(this.$u?"UTC":""),we=(ue={},ue[ee]=ve+"Date",ue[C]=ve+"Date",ue[I]=ve+"Month",ue[N]=ve+"FullYear",ue[W]=ve+"Hours",ue[V]=ve+"Minutes",ue[x]=ve+"Seconds",ue[Y]=ve+"Milliseconds",ue)[me],ke=me===ee?this.$D+(K-this.$W):K;if(me===I||me===N){var Be=this.clone().set(C,1);Be.$d[we](ke),Be.init(),this.$d=Be.set(C,Math.min(this.$D,Be.daysInMonth())).$d}else we&&this.$d[we](ke);return this.init(),this},se.set=function(ne,K){return this.clone().$set(ne,K)},se.get=function(ne){return this[J.p(ne)]()},se.add=function(ne,K){var ue,me=this;ne=Number(ne);var ve=J.p(K),we=function(We){var it=ye(me);return J.w(it.date(it.date()+Math.round(We*ne)),me)};if(ve===I)return this.set(I,this.$M+ne);if(ve===N)return this.set(N,this.$y+ne);if(ve===ee)return we(1);if(ve===F)return we(7);var ke=(ue={},ue[V]=6e4,ue[W]=36e5,ue[x]=1e3,ue)[ve]||1,Be=this.$d.getTime()+ne*ke;return J.w(Be,this)},se.subtract=function(ne,K){return this.add(-1*ne,K)},se.format=function(ne){var K=this;if(!this.isValid())return"Invalid Date";var ue=ne||"YYYY-MM-DDTHH:mm:ssZ",me=J.z(this),ve=this.$locale(),we=this.$H,ke=this.$m,Be=this.$M,We=ve.weekdays,it=ve.months,at=function(Ft,ar,Er,rn){return Ft&&(Ft[ar]||Ft(K,ue))||Er[ar].substr(0,rn)},Nt=function(Ft){return J.s(we%12||12,Ft,"0")},Tt=ve.meridiem||function(Ft,ar,Er){var rn=Ft<12?"AM":"PM";return Er?rn.toLowerCase():rn},xt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Be+1,MM:J.s(Be+1,2,"0"),MMM:at(ve.monthsShort,Be,it,3),MMMM:at(it,Be),D:this.$D,DD:J.s(this.$D,2,"0"),d:String(this.$W),dd:at(ve.weekdaysMin,this.$W,We,2),ddd:at(ve.weekdaysShort,this.$W,We,3),dddd:We[this.$W],H:String(we),HH:J.s(we,2,"0"),h:Nt(1),hh:Nt(2),a:Tt(we,ke,!0),A:Tt(we,ke,!1),m:String(ke),mm:J.s(ke,2,"0"),s:String(this.$s),ss:J.s(this.$s,2,"0"),SSS:J.s(this.$ms,3,"0"),Z:me};return ue.replace($,function(Ft,ar){return ar||xt[Ft]||me.replace(":","")})},se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},se.diff=function(ne,K,ue){var me,ve=J.p(K),we=ye(ne),ke=6e4*(we.utcOffset()-this.utcOffset()),Be=this-we,We=J.m(this,we);return We=(me={},me[N]=We/12,me[I]=We,me[M]=We/3,me[F]=(Be-ke)/6048e5,me[ee]=(Be-ke)/864e5,me[W]=Be/36e5,me[V]=Be/6e4,me[x]=Be/1e3,me)[ve]||Be,ue?We:J.a(We)},se.daysInMonth=function(){return this.endOf(I).$D},se.$locale=function(){return G[this.$L]},se.locale=function(ne,K){if(!ne)return this.$L;var ue=this.clone(),me=ie(ne,K,!0);return me&&(ue.$L=me),ue},se.clone=function(){return J.w(this.$d,this)},se.toDate=function(){return new Date(this.valueOf())},se.toJSON=function(){return this.isValid()?this.toISOString():null},se.toISOString=function(){return this.$d.toISOString()},se.toString=function(){return this.$d.toUTCString()},ce}(),ae=be.prototype;return ye.prototype=ae,[["$ms",Y],["$s",x],["$m",V],["$H",W],["$W",ee],["$M",I],["$y",N],["$D",C]].forEach(function(ce){ae[ce[1]]=function(se){return this.$g(se,ce[0],ce[1])}}),ye.extend=function(ce,se){return ce.$i||(ce(se,be,ye),ce.$i=!0),ye},ye.locale=ie,ye.isDayjs=re,ye.unix=function(ce){return ye(1e3*ce)},ye.en=G[H],ye.Ls=G,ye.p={},ye})},4110:function(u){(function(Y,x){u.exports=x()})(this,function(){"use strict";return function(Y,x,V){Y=Y||{};var W=x.prototype,ee={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function F(M,N,C,L){return W.fromToBase(M,N,C,L)}V.en.relativeTime=ee,W.fromToBase=function(M,N,C,L,$){for(var j,O,U,H=C.$locale().relativeTime||ee,G=Y.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],re=G.length,ie=0;ie<re;ie+=1){var ye=G[ie];ye.d&&(j=L?V(M).diff(C,ye.d,!0):C.diff(M,ye.d,!0));var J=(Y.rounding||Math.round)(Math.abs(j));if(U=j>0,J<=ye.r||!ye.r){J<=1&&ie>0&&(ye=G[ie-1]);var be=H[ye.l];$&&(J=$(""+J)),O=typeof be=="string"?be.replace("%d",J):be(J,N,ye.l,U);break}}if(N)return O;var ae=U?H.future:H.past;return typeof ae=="function"?ae(O):ae.replace("%s",O)},W.to=function(M,N){return F(M,N,this,!0)},W.from=function(M,N){return F(M,N,this)};var I=function(M){return M.$u?V.utc():V()};W.toNow=function(M){return this.to(I(this),M)},W.fromNow=function(M){return this.from(I(this),M)}}})},660:function(u){(function(Y,x){u.exports=x()})(this,function(){"use strict";return function(Y,x,V){V.updateLocale=function(W,ee){var F=V.Ls[W];if(F)return(ee?Object.keys(ee):[]).forEach(function(I){F[I]=ee[I]}),F}}})},9435:u=>{var Y=1e3,x=Y*60,V=x*60,W=V*24,ee=W*7,F=W*365.25;u.exports=function(L,$){$=$||{};var j=typeof L;if(j==="string"&&L.length>0)return I(L);if(j==="number"&&isFinite(L))return $.long?N(L):M(L);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(L))};function I(L){if(L=String(L),!(L.length>100)){var $=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(L);if(!!$){var j=parseFloat($[1]),O=($[2]||"ms").toLowerCase();switch(O){case"years":case"year":case"yrs":case"yr":case"y":return j*F;case"weeks":case"week":case"w":return j*ee;case"days":case"day":case"d":return j*W;case"hours":case"hour":case"hrs":case"hr":case"h":return j*V;case"minutes":case"minute":case"mins":case"min":case"m":return j*x;case"seconds":case"second":case"secs":case"sec":case"s":return j*Y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return j;default:return}}}}function M(L){var $=Math.abs(L);return $>=W?Math.round(L/W)+"d":$>=V?Math.round(L/V)+"h":$>=x?Math.round(L/x)+"m":$>=Y?Math.round(L/Y)+"s":L+"ms"}function N(L){var $=Math.abs(L);return $>=W?C(L,$,W,"day"):$>=V?C(L,$,V,"hour"):$>=x?C(L,$,x,"minute"):$>=Y?C(L,$,Y,"second"):L+" ms"}function C(L,$,j,O){var U=$>=j*1.5;return Math.round(L/j)+" "+O+(U?"s":"")}},1227:(u,Y,x)=>{Y.formatArgs=W,Y.save=ee,Y.load=F,Y.useColors=V,Y.storage=I(),Y.destroy=(()=>{let N=!1;return()=>{N||(N=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),Y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function V(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function W(N){if(N[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+N[0]+(this.useColors?"%c ":" ")+"+"+u.exports.humanize(this.diff),!this.useColors)return;const C="color: "+this.color;N.splice(1,0,C,"color: inherit");let L=0,$=0;N[0].replace(/%[a-zA-Z%]/g,j=>{j!=="%%"&&(L++,j==="%c"&&($=L))}),N.splice($,0,C)}Y.log=console.debug||console.log||(()=>{});function ee(N){try{N?Y.storage.setItem("debug",N):Y.storage.removeItem("debug")}catch(C){}}function F(){let N;try{N=Y.storage.getItem("debug")}catch(C){}return!N&&typeof process!="undefined"&&"env"in process&&(N=process.env.DEBUG),N}function I(){try{return localStorage}catch(N){}}u.exports=x(2447)(Y);const{formatters:M}=u.exports;M.j=function(N){try{return JSON.stringify(N)}catch(C){return"[UnexpectedJSONParseError]: "+C.message}}},2447:(u,Y,x)=>{function V(W){F.debug=F,F.default=F,F.coerce=$,F.disable=N,F.enable=M,F.enabled=C,F.humanize=x(9435),F.destroy=j,Object.keys(W).forEach(O=>{F[O]=W[O]}),F.names=[],F.skips=[],F.formatters={};function ee(O){let U=0;for(let H=0;H<O.length;H++)U=(U<<5)-U+O.charCodeAt(H),U|=0;return F.colors[Math.abs(U)%F.colors.length]}F.selectColor=ee;function F(O){let U,H=null;function G(...re){if(!G.enabled)return;const ie=G,ye=Number(new Date),J=ye-(U||ye);ie.diff=J,ie.prev=U,ie.curr=ye,U=ye,re[0]=F.coerce(re[0]),typeof re[0]!="string"&&re.unshift("%O");let be=0;re[0]=re[0].replace(/%([a-zA-Z%])/g,(ce,se)=>{if(ce==="%%")return"%";be++;const ne=F.formatters[se];if(typeof ne=="function"){const K=re[be];ce=ne.call(ie,K),re.splice(be,1),be--}return ce}),F.formatArgs.call(ie,re),(ie.log||F.log).apply(ie,re)}return G.namespace=O,G.useColors=F.useColors(),G.color=F.selectColor(O),G.extend=I,G.destroy=F.destroy,Object.defineProperty(G,"enabled",{enumerable:!0,configurable:!1,get:()=>H===null?F.enabled(O):H,set:re=>{H=re}}),typeof F.init=="function"&&F.init(G),G}function I(O,U){const H=F(this.namespace+(typeof U=="undefined"?":":U)+O);return H.log=this.log,H}function M(O){F.save(O),F.names=[],F.skips=[];let U;const H=(typeof O=="string"?O:"").split(/[\s,]+/),G=H.length;for(U=0;U<G;U++)!H[U]||(O=H[U].replace(/\*/g,".*?"),O[0]==="-"?F.skips.push(new RegExp("^"+O.substr(1)+"$")):F.names.push(new RegExp("^"+O+"$")))}function N(){const O=[...F.names.map(L),...F.skips.map(L).map(U=>"-"+U)].join(",");return F.enable(""),O}function C(O){if(O[O.length-1]==="*")return!0;let U,H;for(U=0,H=F.skips.length;U<H;U++)if(F.skips[U].test(O))return!1;for(U=0,H=F.names.length;U<H;U++)if(F.names[U].test(O))return!0;return!1}function L(O){return O.toString().substring(2,O.toString().length-2).replace(/\.\*\?$/,"*")}function $(O){return O instanceof Error?O.stack||O.message:O}function j(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return F.enable(F.load()),F}u.exports=V},5158:(u,Y,x)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?u.exports=x(1227):u.exports=x(39)},39:(u,Y,x)=>{const V=x(3867),W=x(1669);Y.init=L,Y.log=M,Y.formatArgs=F,Y.save=N,Y.load=C,Y.useColors=ee,Y.destroy=W.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),Y.colors=[6,2,3,4,5,1];try{const j=x(2130);j&&(j.stderr||j).level>=2&&(Y.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(j){}Y.inspectOpts=Object.keys(process.env).filter(j=>/^debug_/i.test(j)).reduce((j,O)=>{const U=O.substring(6).toLowerCase().replace(/_([a-z])/g,(G,re)=>re.toUpperCase());let H=process.env[O];return/^(yes|on|true|enabled)$/i.test(H)?H=!0:/^(no|off|false|disabled)$/i.test(H)?H=!1:H==="null"?H=null:H=Number(H),j[U]=H,j},{});function ee(){return"colors"in Y.inspectOpts?Boolean(Y.inspectOpts.colors):V.isatty(process.stderr.fd)}function F(j){const{namespace:O,useColors:U}=this;if(U){const H=this.color,G="[3"+(H<8?H:"8;5;"+H),re=`  ${G};1m${O} [0m`;j[0]=re+j[0].split(`
`).join(`
`+re),j.push(G+"m+"+u.exports.humanize(this.diff)+"[0m")}else j[0]=I()+O+" "+j[0]}function I(){return Y.inspectOpts.hideDate?"":new Date().toISOString()+" "}function M(...j){return process.stderr.write(W.format(...j)+`
`)}function N(j){j?process.env.DEBUG=j:delete process.env.DEBUG}function C(){return process.env.DEBUG}function L(j){j.inspectOpts={};const O=Object.keys(Y.inspectOpts);for(let U=0;U<O.length;U++)j.inspectOpts[O[U]]=Y.inspectOpts[O[U]]}u.exports=x(2447)(Y);const{formatters:$}=u.exports;$.o=function(j){return this.inspectOpts.colors=this.useColors,W.inspect(j,this.inspectOpts).split(`
`).map(O=>O.trim()).join(" ")},$.O=function(j){return this.inspectOpts.colors=this.useColors,W.inspect(j,this.inspectOpts)}},4063:u=>{"use strict";u.exports=function Y(x,V){if(x===V)return!0;if(x&&V&&typeof x=="object"&&typeof V=="object"){if(x.constructor!==V.constructor)return!1;var W,ee,F;if(Array.isArray(x)){if(W=x.length,W!=V.length)return!1;for(ee=W;ee--!=0;)if(!Y(x[ee],V[ee]))return!1;return!0}if(x.constructor===RegExp)return x.source===V.source&&x.flags===V.flags;if(x.valueOf!==Object.prototype.valueOf)return x.valueOf()===V.valueOf();if(x.toString!==Object.prototype.toString)return x.toString()===V.toString();if(F=Object.keys(x),W=F.length,W!==Object.keys(V).length)return!1;for(ee=W;ee--!=0;)if(!Object.prototype.hasOwnProperty.call(V,F[ee]))return!1;for(ee=W;ee--!=0;){var I=F[ee];if(!Y(x[I],V[I]))return!1}return!0}return x!==x&&V!==V}},5035:u=>{"use strict";u.exports=function(Y,x){x||(x={}),typeof x=="function"&&(x={cmp:x});var V=typeof x.cycles=="boolean"?x.cycles:!1,W=x.cmp&&function(F){return function(I){return function(M,N){var C={key:M,value:I[M]},L={key:N,value:I[N]};return F(C,L)}}}(x.cmp),ee=[];return function F(I){if(I&&I.toJSON&&typeof I.toJSON=="function"&&(I=I.toJSON()),I!==void 0){if(typeof I=="number")return isFinite(I)?""+I:"null";if(typeof I!="object")return JSON.stringify(I);var M,N;if(Array.isArray(I)){for(N="[",M=0;M<I.length;M++)M&&(N+=","),N+=F(I[M])||"null";return N+"]"}if(I===null)return"null";if(ee.indexOf(I)!==-1){if(V)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var C=ee.push(I)-1,L=Object.keys(I).sort(W&&W(I));for(N="",M=0;M<L.length;M++){var $=L[M],j=F(I[$]);!j||(N&&(N+=","),N+=JSON.stringify($)+":"+j)}return ee.splice(C,1),"{"+N+"}"}}(Y)}},6030:(u,Y,x)=>{const{Readable:V}=x(2413),W=new WeakMap;async function*ee(I){for(const M of I)"stream"in M?yield*M.stream():yield M}class F{constructor(M=[],N={type:""}){let C=0;const L=M.map(j=>{let O;return j instanceof Buffer?O=j:ArrayBuffer.isView(j)?O=Buffer.from(j.buffer,j.byteOffset,j.byteLength):j instanceof ArrayBuffer?O=Buffer.from(j):j instanceof F?O=j:O=Buffer.from(typeof j=="string"?j:String(j)),C+=O.length||O.size||0,O}),$=N.type===void 0?"":String(N.type).toLowerCase();W.set(this,{type:/[^\u0020-\u007E]/.test($)?"":$,size:C,parts:L})}get size(){return W.get(this).size}get type(){return W.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const M=new Uint8Array(this.size);let N=0;for await(const C of this.stream())M.set(C,N),N+=C.length;return M.buffer}stream(){return V.from(ee(W.get(this).parts))}slice(M=0,N=this.size,C=""){const{size:L}=this;let $=M<0?Math.max(L+M,0):Math.min(M,L),j=N<0?Math.max(L+N,0):Math.min(N,L);const O=Math.max(j-$,0),U=W.get(this).parts.values(),H=[];let G=0;for(const ie of U){const ye=ArrayBuffer.isView(ie)?ie.byteLength:ie.size;if($&&ye<=$)$-=ye,j-=ye;else{const J=ie.slice($,Math.min(ye,j));if(H.push(J),G+=ArrayBuffer.isView(J)?J.byteLength:J.size,$=0,G>=O)break}}const re=new F([],{type:C});return Object.assign(W.get(re),{size:O,parts:H}),re}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](M){return typeof M=="object"&&typeof M.stream=="function"&&M.stream.length===0&&typeof M.constructor=="function"&&/^(Blob|File)$/.test(M[Symbol.toStringTag])}}Object.defineProperties(F.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),u.exports=F},2261:(u,Y,x)=>{var V;u.exports=function(){if(!V)try{V=x(5158)("follow-redirects")}catch(W){V=function(){}}V.apply(null,arguments)}},938:(u,Y,x)=>{var V=x(8835),W=V.URL,ee=x(8605),F=x(7211),I=x(2413).Writable,M=x(2357),N=x(2261),C=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach(function(J){C[J]=function(be,ae,ce){this._redirectable.emit(J,be,ae,ce)}});var L=ye("ERR_FR_REDIRECTION_FAILURE",""),$=ye("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),j=ye("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),O=ye("ERR_STREAM_WRITE_AFTER_END","write after end");function U(J,be){I.call(this),this._sanitizeOptions(J),this._options=J,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],be&&this.on("response",be);var ae=this;this._onNativeResponse=function(ce){ae._processResponse(ce)},this._performRequest()}U.prototype=Object.create(I.prototype),U.prototype.abort=function(){this._currentRequest.removeAllListeners(),this._currentRequest.on("error",G),this._currentRequest.abort(),this.emit("abort"),this.removeAllListeners()},U.prototype.write=function(J,be,ae){if(this._ending)throw new O;if(!(typeof J=="string"||typeof J=="object"&&"length"in J))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof be=="function"&&(ae=be,be=null),J.length===0){ae&&ae();return}this._requestBodyLength+J.length<=this._options.maxBodyLength?(this._requestBodyLength+=J.length,this._requestBodyBuffers.push({data:J,encoding:be}),this._currentRequest.write(J,be,ae)):(this.emit("error",new j),this.abort())},U.prototype.end=function(J,be,ae){if(typeof J=="function"?(ae=J,J=be=null):typeof be=="function"&&(ae=be,be=null),!J)this._ended=this._ending=!0,this._currentRequest.end(null,null,ae);else{var ce=this,se=this._currentRequest;this.write(J,be,function(){ce._ended=!0,se.end(null,null,ae)}),this._ending=!0}},U.prototype.setHeader=function(J,be){this._options.headers[J]=be,this._currentRequest.setHeader(J,be)},U.prototype.removeHeader=function(J){delete this._options.headers[J],this._currentRequest.removeHeader(J)},U.prototype.setTimeout=function(J,be){var ae=this;be&&this.on("timeout",be);function ce(){ae._timeout&&clearTimeout(ae._timeout),ae._timeout=setTimeout(function(){ae.emit("timeout"),se()},J)}function se(){clearTimeout(this._timeout),be&&ae.removeListener("timeout",be),this.socket||ae._currentRequest.removeListener("socket",ce)}return this.socket?ce():this._currentRequest.once("socket",ce),this.once("response",se),this.once("error",se),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(J){U.prototype[J]=function(be,ae){return this._currentRequest[J](be,ae)}}),["aborted","connection","socket"].forEach(function(J){Object.defineProperty(U.prototype,J,{get:function(){return this._currentRequest[J]}})}),U.prototype._sanitizeOptions=function(J){if(J.headers||(J.headers={}),J.host&&(J.hostname||(J.hostname=J.host),delete J.host),!J.pathname&&J.path){var be=J.path.indexOf("?");be<0?J.pathname=J.path:(J.pathname=J.path.substring(0,be),J.search=J.path.substring(be))}},U.prototype._performRequest=function(){var J=this._options.protocol,be=this._options.nativeProtocols[J];if(!be){this.emit("error",new TypeError("Unsupported protocol "+J));return}if(this._options.agents){var ae=J.substr(0,J.length-1);this._options.agent=this._options.agents[ae]}var ce=this._currentRequest=be.request(this._options,this._onNativeResponse);this._currentUrl=V.format(this._options),ce._redirectable=this;for(var se in C)se&&ce.on(se,C[se]);if(this._isRedirect){var ne=0,K=this,ue=this._requestBodyBuffers;(function me(ve){if(ce===K._currentRequest)if(ve)K.emit("error",ve);else if(ne<ue.length){var we=ue[ne++];ce.finished||ce.write(we.data,we.encoding,me)}else K._ended&&ce.end()})()}},U.prototype._processResponse=function(J){var be=J.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:J.headers,statusCode:be});var ae=J.headers.location;if(ae&&this._options.followRedirects!==!1&&be>=300&&be<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",G),this._currentRequest.abort(),J.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new $);return}((be===301||be===302)&&this._options.method==="POST"||be===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ie(/^content-/i,this._options.headers));var ce=ie(/^host$/i,this._options.headers)||V.parse(this._currentUrl).hostname,se=V.resolve(this._currentUrl,ae);N("redirecting to",se),this._isRedirect=!0;var ne=V.parse(se);if(Object.assign(this._options,ne),ne.hostname!==ce&&ie(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var K={headers:J.headers};try{this._options.beforeRedirect.call(null,this._options,K)}catch(me){this.emit("error",me);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(me){var ue=new L("Redirected request failed: "+me.message);ue.cause=me,this.emit("error",ue)}}else J.responseUrl=this._currentUrl,J.redirects=this._redirects,this.emit("response",J),this._requestBodyBuffers=[]};function H(J){var be={maxRedirects:21,maxBodyLength:10*1024*1024},ae={};return Object.keys(J).forEach(function(ce){var se=ce+":",ne=ae[se]=J[ce],K=be[ce]=Object.create(ne);function ue(ve,we,ke){if(typeof ve=="string"){var Be=ve;try{ve=re(new W(Be))}catch(We){ve=V.parse(Be)}}else W&&ve instanceof W?ve=re(ve):(ke=we,we=ve,ve={protocol:se});return typeof we=="function"&&(ke=we,we=null),we=Object.assign({maxRedirects:be.maxRedirects,maxBodyLength:be.maxBodyLength},ve,we),we.nativeProtocols=ae,M.equal(we.protocol,se,"protocol mismatch"),N("options",we),new U(we,ke)}function me(ve,we,ke){var Be=K.request(ve,we,ke);return Be.end(),Be}Object.defineProperties(K,{request:{value:ue,configurable:!0,enumerable:!0,writable:!0},get:{value:me,configurable:!0,enumerable:!0,writable:!0}})}),be}function G(){}function re(J){var be={protocol:J.protocol,hostname:J.hostname.startsWith("[")?J.hostname.slice(1,-1):J.hostname,hash:J.hash,search:J.search,pathname:J.pathname,path:J.pathname+J.search,href:J.href};return J.port!==""&&(be.port=Number(J.port)),be}function ie(J,be){var ae;for(var ce in be)J.test(ce)&&(ae=be[ce],delete be[ce]);return ae}function ye(J,be){function ae(ce){Error.captureStackTrace(this,this.constructor),this.message=ce||be}return ae.prototype=new Error,ae.prototype.constructor=ae,ae.prototype.name="Error ["+J+"]",ae.prototype.code=J,ae}u.exports=H({http:ee,https:F}),u.exports.wrap=H},9967:u=>{var Y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewThread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerViewedState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ResolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnresolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnresolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unresolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmarkFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:14578}};Y.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
				email
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

fragment ReviewThread on PullRequestReviewThread {
	id
	isResolved
	viewerCanResolve
	viewerCanUnresolve
	path
	diffSide
	line
	originalLine
	isOutdated
	comments(first: 100) {
		nodes {
			...ReviewComment
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					id
					isResolved
					viewerCanResolve
					viewerCanUnresolve
					path
					diffSide
					line
					originalLine
					isOutdated
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			headRefName
			headRefOid
			headRepository {
				owner {
					login
				}
				url
			}
			baseRef {
				...Ref
			}
			baseRefName
			baseRefOid
			baseRepository {
				owner {
					login
				}
				url
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestFiles($owner: String!, $name: String!, $number: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			files(first: 100, after: $after) {
				nodes {
					path
					viewerViewedState
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation AddReviewThread($input: AddPullRequestReviewThreadInput!) {
	addPullRequestReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
								email
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
							... on User {
								email
							}
							... on Organization {
								email
							}
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										avatarUrl
										email
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
									... on User {
										email
									}
									... on Organization {
										email
									}
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							avatarUrl
							email
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner {
				login
			}
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

mutation ResolveReviewThread($input: ResolveReviewThreadInput!) {
	resolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation UnresolveReviewThread($input: UnresolveReviewThreadInput!) {
	unresolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation MarkFileAsViewed($input: MarkFileAsViewedInput!) {
	markFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}

mutation UnmarkFileAsViewed($input: UnmarkFileAsViewedInput!) {
	unmarkFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};var x={};function V(M){return M.filter(function(N){if(N.kind!=="FragmentDefinition")return!0;var C=N.name.value;return x[C]?!1:(x[C]=!0,!0)})}function W(M,N){if(M.kind==="FragmentSpread")N.add(M.name.value);else if(M.kind==="VariableDefinition"){var C=M.type;C.kind==="NamedType"&&N.add(C.name.value)}M.selectionSet&&M.selectionSet.selections.forEach(function(L){W(L,N)}),M.variableDefinitions&&M.variableDefinitions.forEach(function(L){W(L,N)}),M.definitions&&M.definitions.forEach(function(L){W(L,N)})}var ee={};(function(){Y.definitions.forEach(function(N){if(N.name){var C=new Set;W(N,C),ee[N.name.value]=C}})})();function F(M,N){for(var C=0;C<M.definitions.length;C++){var L=M.definitions[C];if(L.name&&L.name.value==N)return L}}function I(M,N){var C={kind:M.kind,definitions:[F(M,N)]};M.hasOwnProperty("loc")&&(C.loc=M.loc);var L=ee[N]||new Set,$=new Set,j=new Set;for(L.forEach(function(U){j.add(U)});j.size>0;){var O=j;j=new Set,O.forEach(function(U){if(!$.has(U)){$.add(U);var H=ee[U]||new Set;H.forEach(function(G){j.add(G)})}})}return $.forEach(function(U){var H=F(M,U);H&&C.definitions.push(H)}),C}u.exports=Y,u.exports.TimelineEvents=I(Y,"TimelineEvents"),u.exports.IssueTimelineEvents=I(Y,"IssueTimelineEvents"),u.exports.GetPendingReviewId=I(Y,"GetPendingReviewId"),u.exports.PullRequestComments=I(Y,"PullRequestComments"),u.exports.PullRequest=I(Y,"PullRequest"),u.exports.PullRequestFiles=I(Y,"PullRequestFiles"),u.exports.Issue=I(Y,"Issue"),u.exports.IssueWithComments=I(Y,"IssueWithComments"),u.exports.GetUser=I(Y,"GetUser"),u.exports.PullRequestMergeability=I(Y,"PullRequestMergeability"),u.exports.PullRequestState=I(Y,"PullRequestState"),u.exports.AddComment=I(Y,"AddComment"),u.exports.AddReviewThread=I(Y,"AddReviewThread"),u.exports.EditComment=I(Y,"EditComment"),u.exports.ReadyForReview=I(Y,"ReadyForReview"),u.exports.StartReview=I(Y,"StartReview"),u.exports.SubmitReview=I(Y,"SubmitReview"),u.exports.DeleteReview=I(Y,"DeleteReview"),u.exports.AddReaction=I(Y,"AddReaction"),u.exports.DeleteReaction=I(Y,"DeleteReaction"),u.exports.UpdatePullRequest=I(Y,"UpdatePullRequest"),u.exports.AddIssueComment=I(Y,"AddIssueComment"),u.exports.EditIssueComment=I(Y,"EditIssueComment"),u.exports.GetMentionableUsers=I(Y,"GetMentionableUsers"),u.exports.GetAssignableUsers=I(Y,"GetAssignableUsers"),u.exports.IssuesWithoutMilestone=I(Y,"IssuesWithoutMilestone"),u.exports.MaxIssue=I(Y,"MaxIssue"),u.exports.GetMilestones=I(Y,"GetMilestones"),u.exports.Issues=I(Y,"Issues"),u.exports.GetViewerPermission=I(Y,"GetViewerPermission"),u.exports.GetRepositoryForkDetails=I(Y,"GetRepositoryForkDetails"),u.exports.GetChecks=I(Y,"GetChecks"),u.exports.ResolveReviewThread=I(Y,"ResolveReviewThread"),u.exports.UnresolveReviewThread=I(Y,"UnresolveReviewThread"),u.exports.MarkFileAsViewed=I(Y,"MarkFileAsViewed"),u.exports.UnmarkFileAsViewed=I(Y,"UnmarkFileAsViewed")},972:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=F;var V=ee(x(7706)),W=ee(x(8554));function ee(I){return I&&I.__esModule?I:{default:I}}function F(I){var M=I.prototype.toJSON;typeof M=="function"||(0,V.default)(0),I.prototype.inspect=M,W.default&&(I.prototype[W.default]=M)}},8002:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=M;var V=W(x(8554));function W(U){return U&&U.__esModule?U:{default:U}}function ee(U){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ee=function(G){return typeof G}:ee=function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},ee(U)}var F=10,I=2;function M(U){return N(U,[])}function N(U,H){switch(ee(U)){case"string":return JSON.stringify(U);case"function":return U.name?"[function ".concat(U.name,"]"):"[function]";case"object":return U===null?"null":C(U,H);default:return String(U)}}function C(U,H){if(H.indexOf(U)!==-1)return"[Circular]";var G=[].concat(H,[U]),re=j(U);if(re!==void 0){var ie=re.call(U);if(ie!==U)return typeof ie=="string"?ie:N(ie,G)}else if(Array.isArray(U))return $(U,G);return L(U,G)}function L(U,H){var G=Object.keys(U);if(G.length===0)return"{}";if(H.length>I)return"["+O(U)+"]";var re=G.map(function(ie){var ye=N(U[ie],H);return ie+": "+ye});return"{ "+re.join(", ")+" }"}function $(U,H){if(U.length===0)return"[]";if(H.length>I)return"[Array]";for(var G=Math.min(F,U.length),re=U.length-G,ie=[],ye=0;ye<G;++ye)ie.push(N(U[ye],H));return re===1?ie.push("... 1 more item"):re>1&&ie.push("... ".concat(re," more items")),"["+ie.join(", ")+"]"}function j(U){var H=U[String(V.default)];if(typeof H=="function")return H;if(typeof U.inspect=="function")return U.inspect}function O(U){var H=Object.prototype.toString.call(U).replace(/^\[object /,"").replace(/]$/,"");if(H==="Object"&&typeof U.constructor=="function"){var G=U.constructor.name;if(typeof G=="string"&&G!=="")return G}return H}},7706:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=x;function x(V,W){var ee=Boolean(V);if(!ee)throw new Error(W!=null?W:"Unexpected invariant triggered.")}},8554:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=void 0;var x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,V=x;Y.default=V},1807:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.isNode=I,Y.Token=Y.Location=void 0;var V=W(x(972));function W(M){return M&&M.__esModule?M:{default:M}}var ee=function(){function M(C,L,$){this.start=C.start,this.end=L.end,this.startToken=C,this.endToken=L,this.source=$}var N=M.prototype;return N.toJSON=function(){return{start:this.start,end:this.end}},M}();Y.Location=ee,(0,V.default)(ee);var F=function(){function M(C,L,$,j,O,U,H){this.kind=C,this.start=L,this.end=$,this.line=j,this.column=O,this.value=H,this.prev=U,this.next=null}var N=M.prototype;return N.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},M}();Y.Token=F,(0,V.default)(F);function I(M){return M!=null&&typeof M.kind=="string"}},849:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.dedentBlockStringValue=x,Y.getBlockStringIndentation=W,Y.printBlockString=ee;function x(F){var I=F.split(/\r\n|[\n\r]/g),M=W(F);if(M!==0)for(var N=1;N<I.length;N++)I[N]=I[N].slice(M);for(var C=0;C<I.length&&V(I[C]);)++C;for(var L=I.length;L>C&&V(I[L-1]);)--L;return I.slice(C,L).join(`
`)}function V(F){for(var I=0;I<F.length;++I)if(F[I]!==" "&&F[I]!=="	")return!1;return!0}function W(F){for(var I,M=!0,N=!0,C=0,L=null,$=0;$<F.length;++$)switch(F.charCodeAt($)){case 13:F.charCodeAt($+1)===10&&++$;case 10:M=!1,N=!0,C=0;break;case 9:case 32:++C;break;default:N&&!M&&(L===null||C<L)&&(L=C),N=!1}return(I=L)!==null&&I!==void 0?I:0}function ee(F){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,N=F.indexOf(`
`)===-1,C=F[0]===" "||F[0]==="	",L=F[F.length-1]==='"',$=F[F.length-1]==="\\",j=!N||L||$||M,O="";return j&&!(N&&C)&&(O+=`
`+I),O+=I?F.replace(/\n/g,`
`+I):F,j&&(O+=`
`),'"""'+O.replace(/"""/g,'\\"""')+'"""'}},3033:(u,Y,x)=>{"use strict";var V;V={value:!0},Y.S=F;var W=x(285),ee=x(849);function F(H){return(0,W.visit)(H,{leave:M})}var I=80,M={Name:function(G){return G.value},Variable:function(G){return"$"+G.name},Document:function(G){return C(G.definitions,`

`)+`
`},OperationDefinition:function(G){var re=G.operation,ie=G.name,ye=$("(",C(G.variableDefinitions,", "),")"),J=C(G.directives," "),be=G.selectionSet;return!ie&&!J&&!ye&&re==="query"?be:C([re,C([ie,ye]),J,be]," ")},VariableDefinition:function(G){var re=G.variable,ie=G.type,ye=G.defaultValue,J=G.directives;return re+": "+ie+$(" = ",ye)+$(" ",C(J," "))},SelectionSet:function(G){var re=G.selections;return L(re)},Field:function(G){var re=G.alias,ie=G.name,ye=G.arguments,J=G.directives,be=G.selectionSet,ae=$("",re,": ")+ie,ce=ae+$("(",C(ye,", "),")");return ce.length>I&&(ce=ae+$(`(
`,j(C(ye,`
`)),`
)`)),C([ce,C(J," "),be]," ")},Argument:function(G){var re=G.name,ie=G.value;return re+": "+ie},FragmentSpread:function(G){var re=G.name,ie=G.directives;return"..."+re+$(" ",C(ie," "))},InlineFragment:function(G){var re=G.typeCondition,ie=G.directives,ye=G.selectionSet;return C(["...",$("on ",re),C(ie," "),ye]," ")},FragmentDefinition:function(G){var re=G.name,ie=G.typeCondition,ye=G.variableDefinitions,J=G.directives,be=G.selectionSet;return"fragment ".concat(re).concat($("(",C(ye,", "),")")," ")+"on ".concat(ie," ").concat($("",C(J," ")," "))+be},IntValue:function(G){var re=G.value;return re},FloatValue:function(G){var re=G.value;return re},StringValue:function(G,re){var ie=G.value,ye=G.block;return ye?(0,ee.printBlockString)(ie,re==="description"?"":"  "):JSON.stringify(ie)},BooleanValue:function(G){var re=G.value;return re?"true":"false"},NullValue:function(){return"null"},EnumValue:function(G){var re=G.value;return re},ListValue:function(G){var re=G.values;return"["+C(re,", ")+"]"},ObjectValue:function(G){var re=G.fields;return"{"+C(re,", ")+"}"},ObjectField:function(G){var re=G.name,ie=G.value;return re+": "+ie},Directive:function(G){var re=G.name,ie=G.arguments;return"@"+re+$("(",C(ie,", "),")")},NamedType:function(G){var re=G.name;return re},ListType:function(G){var re=G.type;return"["+re+"]"},NonNullType:function(G){var re=G.type;return re+"!"},SchemaDefinition:N(function(H){var G=H.directives,re=H.operationTypes;return C(["schema",C(G," "),L(re)]," ")}),OperationTypeDefinition:function(G){var re=G.operation,ie=G.type;return re+": "+ie},ScalarTypeDefinition:N(function(H){var G=H.name,re=H.directives;return C(["scalar",G,C(re," ")]," ")}),ObjectTypeDefinition:N(function(H){var G=H.name,re=H.interfaces,ie=H.directives,ye=H.fields;return C(["type",G,$("implements ",C(re," & ")),C(ie," "),L(ye)]," ")}),FieldDefinition:N(function(H){var G=H.name,re=H.arguments,ie=H.type,ye=H.directives;return G+(U(re)?$(`(
`,j(C(re,`
`)),`
)`):$("(",C(re,", "),")"))+": "+ie+$(" ",C(ye," "))}),InputValueDefinition:N(function(H){var G=H.name,re=H.type,ie=H.defaultValue,ye=H.directives;return C([G+": "+re,$("= ",ie),C(ye," ")]," ")}),InterfaceTypeDefinition:N(function(H){var G=H.name,re=H.interfaces,ie=H.directives,ye=H.fields;return C(["interface",G,$("implements ",C(re," & ")),C(ie," "),L(ye)]," ")}),UnionTypeDefinition:N(function(H){var G=H.name,re=H.directives,ie=H.types;return C(["union",G,C(re," "),ie&&ie.length!==0?"= "+C(ie," | "):""]," ")}),EnumTypeDefinition:N(function(H){var G=H.name,re=H.directives,ie=H.values;return C(["enum",G,C(re," "),L(ie)]," ")}),EnumValueDefinition:N(function(H){var G=H.name,re=H.directives;return C([G,C(re," ")]," ")}),InputObjectTypeDefinition:N(function(H){var G=H.name,re=H.directives,ie=H.fields;return C(["input",G,C(re," "),L(ie)]," ")}),DirectiveDefinition:N(function(H){var G=H.name,re=H.arguments,ie=H.repeatable,ye=H.locations;return"directive @"+G+(U(re)?$(`(
`,j(C(re,`
`)),`
)`):$("(",C(re,", "),")"))+(ie?" repeatable":"")+" on "+C(ye," | ")}),SchemaExtension:function(G){var re=G.directives,ie=G.operationTypes;return C(["extend schema",C(re," "),L(ie)]," ")},ScalarTypeExtension:function(G){var re=G.name,ie=G.directives;return C(["extend scalar",re,C(ie," ")]," ")},ObjectTypeExtension:function(G){var re=G.name,ie=G.interfaces,ye=G.directives,J=G.fields;return C(["extend type",re,$("implements ",C(ie," & ")),C(ye," "),L(J)]," ")},InterfaceTypeExtension:function(G){var re=G.name,ie=G.interfaces,ye=G.directives,J=G.fields;return C(["extend interface",re,$("implements ",C(ie," & ")),C(ye," "),L(J)]," ")},UnionTypeExtension:function(G){var re=G.name,ie=G.directives,ye=G.types;return C(["extend union",re,C(ie," "),ye&&ye.length!==0?"= "+C(ye," | "):""]," ")},EnumTypeExtension:function(G){var re=G.name,ie=G.directives,ye=G.values;return C(["extend enum",re,C(ie," "),L(ye)]," ")},InputObjectTypeExtension:function(G){var re=G.name,ie=G.directives,ye=G.fields;return C(["extend input",re,C(ie," "),L(ye)]," ")}};function N(H){return function(G){return C([G.description,H(G)],`
`)}}function C(H){var G,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(G=H==null?void 0:H.filter(function(ie){return ie}).join(re))!==null&&G!==void 0?G:""}function L(H){return $(`{
`,j(C(H,`
`)),`
}`)}function $(H,G){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return G!=null&&G!==""?H+G+re:""}function j(H){return $("  ",H.replace(/\n/g,`
  `))}function O(H){return H.indexOf(`
`)!==-1}function U(H){return H!=null&&H.some(O)}},285:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0}),Y.visit=M,Y.visitInParallel=N,Y.getVisitFn=C,Y.BREAK=Y.QueryDocumentKeys=void 0;var V=ee(x(8002)),W=x(1807);function ee(L){return L&&L.__esModule?L:{default:L}}var F={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};Y.QueryDocumentKeys=F;var I=Object.freeze({});Y.BREAK=I;function M(L,$){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F,O=void 0,U=Array.isArray(L),H=[L],G=-1,re=[],ie=void 0,ye=void 0,J=void 0,be=[],ae=[],ce=L;do{G++;var se=G===H.length,ne=se&&re.length!==0;if(se){if(ye=ae.length===0?void 0:be[be.length-1],ie=J,J=ae.pop(),ne){if(U)ie=ie.slice();else{for(var K={},ue=0,me=Object.keys(ie);ue<me.length;ue++){var ve=me[ue];K[ve]=ie[ve]}ie=K}for(var we=0,ke=0;ke<re.length;ke++){var Be=re[ke][0],We=re[ke][1];U&&(Be-=we),U&&We===null?(ie.splice(Be,1),we++):ie[Be]=We}}G=O.index,H=O.keys,re=O.edits,U=O.inArray,O=O.prev}else{if(ye=J?U?G:H[G]:void 0,ie=J?J[ye]:ce,ie==null)continue;J&&be.push(ye)}var it=void 0;if(!Array.isArray(ie)){if(!(0,W.isNode)(ie))throw new Error("Invalid AST Node: ".concat((0,V.default)(ie),"."));var at=C($,ie.kind,se);if(at){if(it=at.call($,ie,ye,J,be,ae),it===I)break;if(it===!1){if(!se){be.pop();continue}}else if(it!==void 0&&(re.push([ye,it]),!se))if((0,W.isNode)(it))ie=it;else{be.pop();continue}}}if(it===void 0&&ne&&re.push([ye,ie]),se)be.pop();else{var Nt;O={inArray:U,index:G,keys:H,edits:re,prev:O},U=Array.isArray(ie),H=U?ie:(Nt=j[ie.kind])!==null&&Nt!==void 0?Nt:[],G=-1,re=[],J&&ae.push(J),J=ie}}while(O!==void 0);return re.length!==0&&(ce=re[re.length-1][1]),ce}function N(L){var $=new Array(L.length);return{enter:function(O){for(var U=0;U<L.length;U++)if($[U]==null){var H=C(L[U],O.kind,!1);if(H){var G=H.apply(L[U],arguments);if(G===!1)$[U]=O;else if(G===I)$[U]=I;else if(G!==void 0)return G}}},leave:function(O){for(var U=0;U<L.length;U++)if($[U]==null){var H=C(L[U],O.kind,!0);if(H){var G=H.apply(L[U],arguments);if(G===I)$[U]=I;else if(G!==void 0&&G!==!1)return G}}else $[U]===O&&($[U]=null)}}}function C(L,$,j){var O=L[$];if(O){if(!j&&typeof O=="function")return O;var U=j?O.leave:O.enter;if(typeof U=="function")return U}else{var H=j?L.leave:L.enter;if(H){if(typeof H=="function")return H;var G=H[$];if(typeof G=="function")return G}}}},6560:u=>{"use strict";u.exports=(Y,x=process.argv)=>{const V=Y.startsWith("-")?"":Y.length===1?"-":"--",W=x.indexOf(V+Y),ee=x.indexOf("--");return W!==-1&&(ee===-1||W<ee)}},9593:(u,Y,x)=>{"use strict";const V=x(4411),W=Symbol("max"),ee=Symbol("length"),F=Symbol("lengthCalculator"),I=Symbol("allowStale"),M=Symbol("maxAge"),N=Symbol("dispose"),C=Symbol("noDisposeOnSet"),L=Symbol("lruList"),$=Symbol("cache"),j=Symbol("updateAgeOnGet"),O=()=>1;class U{constructor(ae){if(typeof ae=="number"&&(ae={max:ae}),ae||(ae={}),ae.max&&(typeof ae.max!="number"||ae.max<0))throw new TypeError("max must be a non-negative number");const ce=this[W]=ae.max||Infinity,se=ae.length||O;if(this[F]=typeof se!="function"?O:se,this[I]=ae.stale||!1,ae.maxAge&&typeof ae.maxAge!="number")throw new TypeError("maxAge must be a number");this[M]=ae.maxAge||0,this[N]=ae.dispose,this[C]=ae.noDisposeOnSet||!1,this[j]=ae.updateAgeOnGet||!1,this.reset()}set max(ae){if(typeof ae!="number"||ae<0)throw new TypeError("max must be a non-negative number");this[W]=ae||Infinity,re(this)}get max(){return this[W]}set allowStale(ae){this[I]=!!ae}get allowStale(){return this[I]}set maxAge(ae){if(typeof ae!="number")throw new TypeError("maxAge must be a non-negative number");this[M]=ae,re(this)}get maxAge(){return this[M]}set lengthCalculator(ae){typeof ae!="function"&&(ae=O),ae!==this[F]&&(this[F]=ae,this[ee]=0,this[L].forEach(ce=>{ce.length=this[F](ce.value,ce.key),this[ee]+=ce.length})),re(this)}get lengthCalculator(){return this[F]}get length(){return this[ee]}get itemCount(){return this[L].length}rforEach(ae,ce){ce=ce||this;for(let se=this[L].tail;se!==null;){const ne=se.prev;J(this,ae,se,ce),se=ne}}forEach(ae,ce){ce=ce||this;for(let se=this[L].head;se!==null;){const ne=se.next;J(this,ae,se,ce),se=ne}}keys(){return this[L].toArray().map(ae=>ae.key)}values(){return this[L].toArray().map(ae=>ae.value)}reset(){this[N]&&this[L]&&this[L].length&&this[L].forEach(ae=>this[N](ae.key,ae.value)),this[$]=new Map,this[L]=new V,this[ee]=0}dump(){return this[L].map(ae=>G(this,ae)?!1:{k:ae.key,v:ae.value,e:ae.now+(ae.maxAge||0)}).toArray().filter(ae=>ae)}dumpLru(){return this[L]}set(ae,ce,se){if(se=se||this[M],se&&typeof se!="number")throw new TypeError("maxAge must be a number");const ne=se?Date.now():0,K=this[F](ce,ae);if(this[$].has(ae)){if(K>this[W])return ie(this,this[$].get(ae)),!1;const ve=this[$].get(ae).value;return this[N]&&(this[C]||this[N](ae,ve.value)),ve.now=ne,ve.maxAge=se,ve.value=ce,this[ee]+=K-ve.length,ve.length=K,this.get(ae),re(this),!0}const ue=new ye(ae,ce,K,ne,se);return ue.length>this[W]?(this[N]&&this[N](ae,ce),!1):(this[ee]+=ue.length,this[L].unshift(ue),this[$].set(ae,this[L].head),re(this),!0)}has(ae){if(!this[$].has(ae))return!1;const ce=this[$].get(ae).value;return!G(this,ce)}get(ae){return H(this,ae,!0)}peek(ae){return H(this,ae,!1)}pop(){const ae=this[L].tail;return ae?(ie(this,ae),ae.value):null}del(ae){ie(this,this[$].get(ae))}load(ae){this.reset();const ce=Date.now();for(let se=ae.length-1;se>=0;se--){const ne=ae[se],K=ne.e||0;if(K===0)this.set(ne.k,ne.v);else{const ue=K-ce;ue>0&&this.set(ne.k,ne.v,ue)}}}prune(){this[$].forEach((ae,ce)=>H(this,ce,!1))}}const H=(be,ae,ce)=>{const se=be[$].get(ae);if(se){const ne=se.value;if(G(be,ne)){if(ie(be,se),!be[I])return}else ce&&(be[j]&&(se.value.now=Date.now()),be[L].unshiftNode(se));return ne.value}},G=(be,ae)=>{if(!ae||!ae.maxAge&&!be[M])return!1;const ce=Date.now()-ae.now;return ae.maxAge?ce>ae.maxAge:be[M]&&ce>be[M]},re=be=>{if(be[ee]>be[W])for(let ae=be[L].tail;be[ee]>be[W]&&ae!==null;){const ce=ae.prev;ie(be,ae),ae=ce}},ie=(be,ae)=>{if(ae){const ce=ae.value;be[N]&&be[N](ce.key,ce.value),be[ee]-=ce.length,be[$].delete(ce.key),be[L].removeNode(ae)}};class ye{constructor(ae,ce,se,ne,K){this.key=ae,this.value=ce,this.length=se,this.now=ne,this.maxAge=K||0}}const J=(be,ae,ce,se)=>{let ne=ce.value;G(be,ne)&&(ie(be,ce),be[I]||(ne=void 0)),ne&&ae.call(se,ne.value,ne.key,be)};u.exports=U},7468:(u,Y,x)=>{const V=x(9930),{defaults:W}=x(8644),{inline:ee}=x(9709),{findClosingBracket:F,escape:I}=x(621);u.exports=class co{constructor(N,C){if(this.options=C||W,this.links=N,this.rules=ee.normal,this.options.renderer=this.options.renderer||new V,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=ee.pedantic:this.options.gfm&&(this.options.breaks?this.rules=ee.breaks:this.rules=ee.gfm)}static get rules(){return ee}static output(N,C,L){return new co(C,L).output(N)}output(N){let C="",L,$,j,O,U,H;for(;N;){if(U=this.rules.escape.exec(N)){N=N.substring(U[0].length),C+=I(U[1]);continue}if(U=this.rules.tag.exec(N)){!this.inLink&&/^<a /i.test(U[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(U[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(U[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(U[0])&&(this.inRawBlock=!1),N=N.substring(U[0].length),C+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(U[0]):I(U[0]):U[0]);continue}if(U=this.rules.link.exec(N)){const G=F(U[2],"()");if(G>-1){const ie=(U[0].indexOf("!")===0?5:4)+U[1].length+G;U[2]=U[2].substring(0,G),U[0]=U[0].substring(0,ie).trim(),U[3]=""}N=N.substring(U[0].length),this.inLink=!0,j=U[2],this.options.pedantic?(L=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(j),L?(j=L[1],O=L[3]):O=""):O=U[3]?U[3].slice(1,-1):"",j=j.trim().replace(/^<([\s\S]*)>$/,"$1"),C+=this.outputLink(U,{href:co.escapes(j),title:co.escapes(O)}),this.inLink=!1;continue}if((U=this.rules.reflink.exec(N))||(U=this.rules.nolink.exec(N))){if(N=N.substring(U[0].length),L=(U[2]||U[1]).replace(/\s+/g," "),L=this.links[L.toLowerCase()],!L||!L.href){C+=U[0].charAt(0),N=U[0].substring(1)+N;continue}this.inLink=!0,C+=this.outputLink(U,L),this.inLink=!1;continue}if(U=this.rules.strong.exec(N)){N=N.substring(U[0].length),C+=this.renderer.strong(this.output(U[4]||U[3]||U[2]||U[1]));continue}if(U=this.rules.em.exec(N)){N=N.substring(U[0].length),C+=this.renderer.em(this.output(U[6]||U[5]||U[4]||U[3]||U[2]||U[1]));continue}if(U=this.rules.code.exec(N)){N=N.substring(U[0].length),C+=this.renderer.codespan(I(U[2].trim(),!0));continue}if(U=this.rules.br.exec(N)){N=N.substring(U[0].length),C+=this.renderer.br();continue}if(U=this.rules.del.exec(N)){N=N.substring(U[0].length),C+=this.renderer.del(this.output(U[1]));continue}if(U=this.rules.autolink.exec(N)){N=N.substring(U[0].length),U[2]==="@"?($=I(this.mangle(U[1])),j="mailto:"+$):($=I(U[1]),j=$),C+=this.renderer.link(j,null,$);continue}if(!this.inLink&&(U=this.rules.url.exec(N))){if(U[2]==="@")$=I(U[0]),j="mailto:"+$;else{do H=U[0],U[0]=this.rules._backpedal.exec(U[0])[0];while(H!==U[0]);$=I(U[0]),U[1]==="www."?j="http://"+$:j=$}N=N.substring(U[0].length),C+=this.renderer.link(j,null,$);continue}if(U=this.rules.text.exec(N)){N=N.substring(U[0].length),this.inRawBlock?C+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(U[0]):I(U[0]):U[0]):C+=this.renderer.text(I(this.smartypants(U[0])));continue}if(N)throw new Error("Infinite loop on byte: "+N.charCodeAt(0))}return C}static escapes(N){return N&&N.replace(co.rules._escapes,"$1")}outputLink(N,C){const L=C.href,$=C.title?I(C.title):null;return N[0].charAt(0)!=="!"?this.renderer.link(L,$,this.output(N[1])):this.renderer.image(L,$,I(N[1]))}smartypants(N){return this.options.smartypants?N.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):N}mangle(N){if(!this.options.mangle)return N;const C=N.length;let L="",$=0,j;for(;$<C;$++)j=N.charCodeAt($),Math.random()>.5&&(j="x"+j.toString(16)),L+="&#"+j+";";return L}}},1092:(u,Y,x)=>{const{defaults:V}=x(8644),{block:W}=x(9709),{rtrim:ee,splitCells:F,escape:I}=x(621);u.exports=class Tp{constructor(N){this.tokens=[],this.tokens.links=Object.create(null),this.options=N||V,this.rules=W.normal,this.options.pedantic?this.rules=W.pedantic:this.options.gfm&&(this.rules=W.gfm)}static get rules(){return W}static lex(N,C){return new Tp(C).lex(N)}lex(N){return N=N.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(N,!0)}token(N,C){N=N.replace(/^ +$/gm,"");let L,$,j,O,U,H,G,re,ie,ye,J,be,ae,ce,se,ne;for(;N;){if((j=this.rules.newline.exec(N))&&(N=N.substring(j[0].length),j[0].length>1&&this.tokens.push({type:"space"})),j=this.rules.code.exec(N)){const K=this.tokens[this.tokens.length-1];N=N.substring(j[0].length),K&&K.type==="paragraph"?K.text+=`
`+j[0].trimRight():(j=j[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?j:ee(j,`
`)}));continue}if(j=this.rules.fences.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:"code",lang:j[2]?j[2].trim():j[2],text:j[3]||""});continue}if(j=this.rules.heading.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:"heading",depth:j[1].length,text:j[2]});continue}if((j=this.rules.nptable.exec(N))&&(H={type:"table",header:F(j[1].replace(/^ *| *\| *$/g,"")),align:j[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:j[3]?j[3].replace(/\n$/,"").split(`
`):[]},H.header.length===H.align.length)){for(N=N.substring(j[0].length),J=0;J<H.align.length;J++)/^ *-+: *$/.test(H.align[J])?H.align[J]="right":/^ *:-+: *$/.test(H.align[J])?H.align[J]="center":/^ *:-+ *$/.test(H.align[J])?H.align[J]="left":H.align[J]=null;for(J=0;J<H.cells.length;J++)H.cells[J]=F(H.cells[J],H.header.length);this.tokens.push(H);continue}if(j=this.rules.hr.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:"hr"});continue}if(j=this.rules.blockquote.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:"blockquote_start"}),j=j[0].replace(/^ *> ?/gm,""),this.token(j,C),this.tokens.push({type:"blockquote_end"});continue}if(j=this.rules.list.exec(N)){for(N=N.substring(j[0].length),O=j[2],ce=O.length>1,G={type:"list_start",ordered:ce,start:ce?+O:"",loose:!1},this.tokens.push(G),j=j[0].match(this.rules.item),re=[],L=!1,ae=j.length,J=0;J<ae;J++)H=j[J],ye=H.length,H=H.replace(/^ *([*+-]|\d+\.) */,""),~H.indexOf(`
 `)&&(ye-=H.length,H=this.options.pedantic?H.replace(/^ {1,4}/gm,""):H.replace(new RegExp("^ {1,"+ye+"}","gm"),"")),J!==ae-1&&(U=W.bullet.exec(j[J+1])[0],(O.length>1?U.length===1:U.length>1||this.options.smartLists&&U!==O)&&(N=j.slice(J+1).join(`
`)+N,J=ae-1)),$=L||/\n\n(?!\s*$)/.test(H),J!==ae-1&&(L=H.charAt(H.length-1)===`
`,$||($=L)),$&&(G.loose=!0),se=/^\[[ xX]\] /.test(H),ne=void 0,se&&(ne=H[1]!==" ",H=H.replace(/^\[[ xX]\] +/,"")),ie={type:"list_item_start",task:se,checked:ne,loose:$},re.push(ie),this.tokens.push(ie),this.token(H,!1),this.tokens.push({type:"list_item_end"});if(G.loose)for(ae=re.length,J=0;J<ae;J++)re[J].loose=!0;this.tokens.push({type:"list_end"});continue}if(j=this.rules.html.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(j[1]==="pre"||j[1]==="script"||j[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(j[0]):I(j[0]):j[0]});continue}if(C&&(j=this.rules.def.exec(N))){N=N.substring(j[0].length),j[3]&&(j[3]=j[3].substring(1,j[3].length-1)),be=j[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[be]||(this.tokens.links[be]={href:j[2],title:j[3]});continue}if((j=this.rules.table.exec(N))&&(H={type:"table",header:F(j[1].replace(/^ *| *\| *$/g,"")),align:j[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:j[3]?j[3].replace(/\n$/,"").split(`
`):[]},H.header.length===H.align.length)){for(N=N.substring(j[0].length),J=0;J<H.align.length;J++)/^ *-+: *$/.test(H.align[J])?H.align[J]="right":/^ *:-+: *$/.test(H.align[J])?H.align[J]="center":/^ *:-+ *$/.test(H.align[J])?H.align[J]="left":H.align[J]=null;for(J=0;J<H.cells.length;J++)H.cells[J]=F(H.cells[J].replace(/^ *\| *| *\| *$/g,""),H.header.length);this.tokens.push(H);continue}if(j=this.rules.lheading.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:"heading",depth:j[2].charAt(0)==="="?1:2,text:j[1]});continue}if(C&&(j=this.rules.paragraph.exec(N))){N=N.substring(j[0].length),this.tokens.push({type:"paragraph",text:j[1].charAt(j[1].length-1)===`
`?j[1].slice(0,-1):j[1]});continue}if(j=this.rules.text.exec(N)){N=N.substring(j[0].length),this.tokens.push({type:"text",text:j[0]});continue}if(N)throw new Error("Infinite loop on byte: "+N.charCodeAt(0))}return this.tokens}}},9170:(u,Y,x)=>{const V=x(9930),W=x(1846),ee=x(7468),F=x(1477),{defaults:I}=x(8644),{merge:M,unescape:N}=x(621);u.exports=class Rp{constructor(L){this.tokens=[],this.token=null,this.options=L||I,this.options.renderer=this.options.renderer||new V,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new W}static parse(L,$){return new Rp($).parse(L)}parse(L){this.inline=new ee(L.links,this.options),this.inlineText=new ee(L.links,M({},this.options,{renderer:new F})),this.tokens=L.reverse();let $="";for(;this.next();)$+=this.tok();return $}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let L=this.token.text;for(;this.peek().type==="text";)L+=`
`+this.next().text;return this.inline.output(L)}tok(){let L="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,N(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let $="",j,O,U,H;for(U="",j=0;j<this.token.header.length;j++)U+=this.renderer.tablecell(this.inline.output(this.token.header[j]),{header:!0,align:this.token.align[j]});for($+=this.renderer.tablerow(U),j=0;j<this.token.cells.length;j++){for(O=this.token.cells[j],U="",H=0;H<O.length;H++)U+=this.renderer.tablecell(this.inline.output(O[H]),{header:!1,align:this.token.align[H]});L+=this.renderer.tablerow(U)}return this.renderer.table($,L)}case"blockquote_start":{for(L="";this.next().type!=="blockquote_end";)L+=this.tok();return this.renderer.blockquote(L)}case"list_start":{L="";const $=this.token.ordered,j=this.token.start;for(;this.next().type!=="list_end";)L+=this.tok();return this.renderer.list(L,$,j)}case"list_item_start":{L="";const $=this.token.loose,j=this.token.checked,O=this.token.task;if(this.token.task)if($)if(this.peek().type==="text"){const U=this.peek();U.text=this.renderer.checkbox(j)+" "+U.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(j)});else L+=this.renderer.checkbox(j);for(;this.next().type!=="list_item_end";)L+=!$&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(L,O,j)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const $='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log($);else throw new Error($)}}}}},9930:(u,Y,x)=>{const{defaults:V}=x(8644),{cleanUrl:W,escape:ee}=x(621);u.exports=class{constructor(I){this.options=I||V}code(I,M,N){const C=(M||"").match(/\S*/)[0];if(this.options.highlight){const L=this.options.highlight(I,C);L!=null&&L!==I&&(N=!0,I=L)}return C?'<pre><code class="'+this.options.langPrefix+ee(C,!0)+'">'+(N?I:ee(I,!0))+`</code></pre>
`:"<pre><code>"+(N?I:ee(I,!0))+"</code></pre>"}blockquote(I){return`<blockquote>
`+I+`</blockquote>
`}html(I){return I}heading(I,M,N,C){return this.options.headerIds?"<h"+M+' id="'+this.options.headerPrefix+C.slug(N)+'">'+I+"</h"+M+`>
`:"<h"+M+">"+I+"</h"+M+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(I,M,N){const C=M?"ol":"ul",L=M&&N!==1?' start="'+N+'"':"";return"<"+C+L+`>
`+I+"</"+C+`>
`}listitem(I){return"<li>"+I+`</li>
`}checkbox(I){return"<input "+(I?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(I){return"<p>"+I+`</p>
`}table(I,M){return M&&(M="<tbody>"+M+"</tbody>"),`<table>
<thead>
`+I+`</thead>
`+M+`</table>
`}tablerow(I){return`<tr>
`+I+`</tr>
`}tablecell(I,M){const N=M.header?"th":"td";return(M.align?"<"+N+' align="'+M.align+'">':"<"+N+">")+I+"</"+N+`>
`}strong(I){return"<strong>"+I+"</strong>"}em(I){return"<em>"+I+"</em>"}codespan(I){return"<code>"+I+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(I){return"<del>"+I+"</del>"}link(I,M,N){if(I=W(this.options.sanitize,this.options.baseUrl,I),I===null)return N;let C='<a href="'+ee(I)+'"';return M&&(C+=' title="'+M+'"'),C+=">"+N+"</a>",C}image(I,M,N){if(I=W(this.options.sanitize,this.options.baseUrl,I),I===null)return N;let C='<img src="'+I+'" alt="'+N+'"';return M&&(C+=' title="'+M+'"'),C+=this.options.xhtml?"/>":">",C}text(I){return I}}},1846:u=>{u.exports=class{constructor(){this.seen={}}slug(x){let V=x.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(V)){const W=V;do this.seen[W]++,V=W+"-"+this.seen[W];while(this.seen.hasOwnProperty(V))}return this.seen[V]=0,V}}},1477:u=>{u.exports=class{strong(x){return x}em(x){return x}codespan(x){return x}del(x){return x}html(x){return x}text(x){return x}link(x,V,W){return""+W}image(x,V,W){return""+W}br(){return""}}},8644:u=>{function Y(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function x(V){u.exports.defaults=V}u.exports={defaults:Y(),getDefaults:Y,changeDefaults:x}},621:u=>{const Y=/[&<>"']/,x=/[&<>"']/g,V=/[<>"']|&(?!#?\w+;)/,W=/[<>"']|&(?!#?\w+;)/g,ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},F=ne=>ee[ne];function I(ne,K){if(K){if(Y.test(ne))return ne.replace(x,F)}else if(V.test(ne))return ne.replace(W,F);return ne}const M=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function N(ne){return ne.replace(M,(K,ue)=>(ue=ue.toLowerCase(),ue==="colon"?":":ue.charAt(0)==="#"?ue.charAt(1)==="x"?String.fromCharCode(parseInt(ue.substring(2),16)):String.fromCharCode(+ue.substring(1)):""))}const C=/(^|[^\[])\^/g;function L(ne,K){ne=ne.source||ne,K=K||"";const ue={replace:(me,ve)=>(ve=ve.source||ve,ve=ve.replace(C,"$1"),ne=ne.replace(me,ve),ue),getRegex:()=>new RegExp(ne,K)};return ue}const $=/[^\w:]/g,j=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function O(ne,K,ue){if(ne){let me;try{me=decodeURIComponent(N(ue)).replace($,"").toLowerCase()}catch(ve){return null}if(me.indexOf("javascript:")===0||me.indexOf("vbscript:")===0||me.indexOf("data:")===0)return null}K&&!j.test(ue)&&(ue=ie(K,ue));try{ue=encodeURI(ue).replace(/%25/g,"%")}catch(me){return null}return ue}const U={},H=/^[^:]+:\/*[^/]*$/,G=/^([^:]+:)[\s\S]*$/,re=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ie(ne,K){U[" "+ne]||(H.test(ne)?U[" "+ne]=ne+"/":U[" "+ne]=ae(ne,"/",!0)),ne=U[" "+ne];const ue=ne.indexOf(":")===-1;return K.substring(0,2)==="//"?ue?K:ne.replace(G,"$1")+K:K.charAt(0)==="/"?ue?K:ne.replace(re,"$1")+K:ne+K}const ye={exec:function(){}};function J(ne){let K=1,ue,me;for(;K<arguments.length;K++){ue=arguments[K];for(me in ue)Object.prototype.hasOwnProperty.call(ue,me)&&(ne[me]=ue[me])}return ne}function be(ne,K){const ue=ne.replace(/\|/g,(we,ke,Be)=>{let We=!1,it=ke;for(;--it>=0&&Be[it]==="\\";)We=!We;return We?"|":" |"}),me=ue.split(/ \|/);let ve=0;if(me.length>K)me.splice(K);else for(;me.length<K;)me.push("");for(;ve<me.length;ve++)me[ve]=me[ve].trim().replace(/\\\|/g,"|");return me}function ae(ne,K,ue){const me=ne.length;if(me===0)return"";let ve=0;for(;ve<me;){const we=ne.charAt(me-ve-1);if(we===K&&!ue)ve++;else if(we!==K&&ue)ve++;else break}return ne.substr(0,me-ve)}function ce(ne,K){if(ne.indexOf(K[1])===-1)return-1;const ue=ne.length;let me=0,ve=0;for(;ve<ue;ve++)if(ne[ve]==="\\")ve++;else if(ne[ve]===K[0])me++;else if(ne[ve]===K[1]&&(me--,me<0))return ve;return-1}function se(ne){ne&&ne.sanitize&&!ne.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}u.exports={escape:I,unescape:N,edit:L,cleanUrl:O,resolveUrl:ie,noopTest:ye,merge:J,splitCells:be,rtrim:ae,findClosingBracket:ce,checkSanitizeDeprecation:se}},7228:(u,Y,x)=>{const V=x(1092),W=x(9170),ee=x(9930),F=x(1477),I=x(7468),M=x(1846),{merge:N,checkSanitizeDeprecation:C,escape:L}=x(621),{getDefaults:$,changeDefaults:j,defaults:O}=x(8644);function U(H,G,re){if(typeof H=="undefined"||H===null)throw new Error("marked(): input parameter is undefined or null");if(typeof H!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(H)+", string expected");if(re||typeof G=="function"){re||(re=G,G=null),G=N({},U.defaults,G||{}),C(G);const ie=G.highlight;let ye,J,be=0;try{ye=V.lex(H,G)}catch(ce){return re(ce)}J=ye.length;const ae=function(ce){if(ce)return G.highlight=ie,re(ce);let se;try{se=W.parse(ye,G)}catch(ne){ce=ne}return G.highlight=ie,ce?re(ce):re(null,se)};if(!ie||ie.length<3||(delete G.highlight,!J))return ae();for(;be<ye.length;be++)(function(ce){return ce.type!=="code"?--J||ae():ie(ce.text,ce.lang,function(se,ne){if(se)return ae(se);if(ne==null||ne===ce.text)return--J||ae();ce.text=ne,ce.escaped=!0,--J||ae()})})(ye[be]);return}try{return G=N({},U.defaults,G||{}),C(G),W.parse(V.lex(H,G),G)}catch(ie){if(ie.message+=`
Please report this to https://github.com/markedjs/marked.`,(G||U.defaults).silent)return"<p>An error occurred:</p><pre>"+L(ie.message+"",!0)+"</pre>";throw ie}}U.options=U.setOptions=function(H){return N(U.defaults,H),j(U.defaults),U},U.getDefaults=$,U.defaults=O,U.Parser=W,U.parser=W.parse,U.Renderer=ee,U.TextRenderer=F,U.Lexer=V,U.lexer=V.lex,U.InlineLexer=I,U.inlineLexer=I.output,U.Slugger=M,U.parse=U,u.exports=U},9709:(u,Y,x)=>{const{noopTest:V,edit:W,merge:ee}=x(621),F={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:V,table:V,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};F._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,F._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,F.def=W(F.def).replace("label",F._label).replace("title",F._title).getRegex(),F.bullet=/(?:[*+-]|\d{1,9}\.)/,F.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,F.item=W(F.item,"gm").replace(/bull/g,F.bullet).getRegex(),F.list=W(F.list).replace(/bull/g,F.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+F.def.source+")").getRegex(),F._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",F._comment=/<!--(?!-?>)[\s\S]*?-->/,F.html=W(F.html,"i").replace("comment",F._comment).replace("tag",F._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),F.paragraph=W(F._paragraph).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",F._tag).getRegex(),F.blockquote=W(F.blockquote).replace("paragraph",F.paragraph).getRegex(),F.normal=ee({},F),F.gfm=ee({},F.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),F.gfm.nptable=W(F.gfm.nptable).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",F._tag).getRegex(),F.gfm.table=W(F.gfm.table).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",F._tag).getRegex(),F.pedantic=ee({},F.normal,{html:W(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",F._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:V,paragraph:W(F.normal._paragraph).replace("hr",F.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",F.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const I={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:V,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:V,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};I._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,I.em=W(I.em).replace(/punctuation/g,I._punctuation).getRegex(),I._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,I._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,I._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,I.autolink=W(I.autolink).replace("scheme",I._scheme).replace("email",I._email).getRegex(),I._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,I.tag=W(I.tag).replace("comment",F._comment).replace("attribute",I._attribute).getRegex(),I._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,I._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,I._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,I.link=W(I.link).replace("label",I._label).replace("href",I._href).replace("title",I._title).getRegex(),I.reflink=W(I.reflink).replace("label",I._label).getRegex(),I.normal=ee({},I),I.pedantic=ee({},I.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:W(/^!?\[(label)\]\((.*?)\)/).replace("label",I._label).getRegex(),reflink:W(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",I._label).getRegex()}),I.gfm=ee({},I.normal,{escape:W(I.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),I.gfm.url=W(I.gfm.url,"i").replace("email",I.gfm._extended_email).getRegex(),I.breaks=ee({},I.gfm,{br:W(I.br).replace("{2,}","*").getRegex(),text:W(I.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),u.exports={block:F,inline:I}},778:(u,Y,x)=>{var V=x(2479);u.exports=V(W),u.exports.strict=V(ee),W.proto=W(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return W(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ee(this)},configurable:!0})});function W(F){var I=function(){return I.called?I.value:(I.called=!0,I.value=F.apply(this,arguments))};return I.called=!1,I}function ee(F){var I=function(){if(I.called)throw new Error(I.onceError);return I.called=!0,I.value=F.apply(this,arguments)},M=F.name||"Function wrapped with `once`";return I.onceError=M+" shouldn't be called more than once",I.called=!1,I}},6200:(u,Y,x)=>{"use strict";const V=x(1669),W=x(1003),ee=/\s/,F=/\r|\n/,I=/^(Host|Match)$/i,M=1,N=2;function C($,j){return j.hasOwnProperty($.param)&&j[$.param]===$.value}class L extends Array{compute(j){const O={},U=(H,G)=>{H==="IdentityFile"?(O[H]||(O[H]=[])).push(G):O[H]==null&&(O[H]=G)};for(const H of this)H.type===M&&(H.param==="Host"?W(H.value,j)&&(U(H.param,H.value),H.config.filter(G=>G.type===M).forEach(G=>U(G.param,G.value))):H.param==="Match"||U(H.param,H.value));return O}find(j={}){if(typeof j=="function")return super.find(j);if(!(j&&("Host"in j||"Match"in j)))throw new Error("Can only find by Host or Match");return super.find(O=>C(O,j))}remove(j={}){if(!(j&&("Host"in j||"Match"in j)))throw new Error("Can only remove by Host or Match");const O=typeof j=="function"?super.findIndex(j):super.findIndex(U=>C(U,j));if(O>=0)return this.splice(O,1)}toString(){return this.constructor.stringify(this)}append(j){let O="  ";e:for(const G of this)if(I.test(G.param)){for(const re of G.config)if(re.before){O=re.before;break e}}if(this.length>0){let G=this[this.length-1];G.config&&(G=G.config[G.config.length-1]),G.after=`
`}let U=this,H=this;for(const G in j){const re={type:M,param:G,separator:" ",value:j[G],before:"",after:`
`};I.test(G)?(U=H,U.push(re),U=re.config=new L):(re.before=U===H?"":O,U.push(re))}return H}static stringify(j){let O="";const U=(G,re)=>Array.isArray(G)?G.map(ie=>U(ie,ee.test(ie))).join(" "):re?`"${G}"`:G,H=G=>{if(O+=G.before,G.type===N)O+=G.content;else if(G.type===M){const re=G.quoted||/IdentityFile/i.test(G.param)&&ee.test(G.value),ie=U(G.value,re);O+=`${G.param}${G.separator}${ie}`}O+=G.after,G.config&&G.config.forEach(H)};return j.forEach(H),O}static get DIRECTIVE(){return M}static get COMMENT(){return N}static parse(j){let O=0,U=re(),H=new L,G=H;function re(){return j[O++]}function ie(){let ue="";for(;ee.test(U);)ue+=U,U=re();return ue}function ye(){let ue="";for(;F.test(U);)ue+=U,U=re();return ue}function J(){let ue="";for(;U&&/[^ \t=]/.test(U);)ue+=U,U=re();return ue}function be(){let ue=ie();return U==="="&&(ue+=U,U=re()),ue+ie()}function ae(){let ue="",me=!1,ve=!1;for(;U&&!F.test(U);)ve?(ue+=U==='"'?U:`\\${U}`,ve=!1):U==='"'&&(!ue||me)?me=!me:U==="\\"?ve=!0:ue+=U,U=re();if(me||ve)throw new Error(`Unexpected line break at ${ue}`);return ue.trim()}function ce(){const ue=N;let me="";for(;U&&!F.test(U);)me+=U,U=re();return{type:ue,content:me}}function se(){const ue=[];let me="",ve=!1,we=!1;for(;U&&!F.test(U);)we?(me+=U==='"'?U:`\\${U}`,we=!1):U==='"'?ve=!ve:U==="\\"?we=!0:ve?me+=U:/[ \t]/.test(U)?me&&(ue.push(me),me=""):me+=U,U=re();if(ve||we)throw new Error(`Unexpected line break at ${ue.concat(me).join(" ")}`);return ue.push(me),ue.length>1?ue:ue[0]}function ne(){const ue=M,me=J(),ve=me.toLowerCase()=="host",we={type:ue,param:me,separator:be(),quoted:!ve&&U==='"',value:ve?se():ae()};return we.quoted||delete we.quoted,we}function K(){const ue=ie(),me=U==="#"?ce():ne(),ve=ye();return me.before=ue,me.after=ve,me}for(;U;){let ue=K();ue.type===M&&I.test(ue.param)?(H=G,H.push(ue),H=ue.config=new L):H.push(ue)}return G}}L.find=V.deprecate(($,j)=>{const O=$.find(j);return O?[O,$.indexOf(O)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),u.exports=L},1003:u=>{"use strict";function Y(V,W){return V=V.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+V+")$").test(W)}function x(V,W){const ee=Array.isArray(V)?V:V.split(/,/);let F=!1;for(const I of ee){if(I[0]=="!"&&Y(I.slice(1),W))return!1;Y(I,W)&&(F=!0)}return F}u.exports=x},2130:(u,Y,x)=>{"use strict";const V=x(2087),W=x(3867),ee=x(6560),{env:F}=process;let I;ee("no-color")||ee("no-colors")||ee("color=false")||ee("color=never")?I=0:(ee("color")||ee("colors")||ee("color=true")||ee("color=always"))&&(I=1),"FORCE_COLOR"in F&&(F.FORCE_COLOR==="true"?I=1:F.FORCE_COLOR==="false"?I=0:I=F.FORCE_COLOR.length===0?1:Math.min(parseInt(F.FORCE_COLOR,10),3));function M(L){return L===0?!1:{level:L,hasBasic:!0,has256:L>=2,has16m:L>=3}}function N(L,$){if(I===0)return 0;if(ee("color=16m")||ee("color=full")||ee("color=truecolor"))return 3;if(ee("color=256"))return 2;if(L&&!$&&I===void 0)return 0;const j=I||0;if(F.TERM==="dumb")return j;if(process.platform==="win32"){const O=V.release().split(".");return Number(O[0])>=10&&Number(O[2])>=10586?Number(O[2])>=14931?3:2:1}if("CI"in F)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(O=>O in F)||F.CI_NAME==="codeship"?1:j;if("TEAMCITY_VERSION"in F)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(F.TEAMCITY_VERSION)?1:0;if(F.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in F){const O=parseInt((F.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(F.TERM_PROGRAM){case"iTerm.app":return O>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(F.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(F.TERM)||"COLORTERM"in F?1:j}function C(L){const $=N(L,L&&L.isTTY);return M($)}u.exports={supportsColor:C,stdout:M(N(!0,W.isatty(1))),stderr:M(N(!0,W.isatty(2)))}},7121:(u,Y,x)=>{"use strict";x.d(Y,{Z:()=>F});function V(I){var M,N=I.Symbol;return typeof N=="function"?N.observable?M=N.observable:(M=N("observable"),N.observable=M):M="@@observable",M}u=x.hmd(u);var W;typeof self!="undefined"?W=self:typeof window!="undefined"?W=window:typeof global!="undefined"?W=global:W=u;var ee=V(W);const F=ee},4802:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});var V=x(6363);Y.ExperimentationService=V.ExperimentationService},6363:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(4067),W=x(4234),ee=x(5975);class F extends ee.ExperimentationServiceAutoPolling{constructor(M){super(M.telemetry,M.filterProviders||[],M.refetchInterval!=null?M.refetchInterval:0,M.featuresTelemetryPropertyName,M.assignmentContextTelemetryPropertyName,M.telemetryEventName,M.storageKey,M.keyValueStorage);this.options=M,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new V.TasApiFeatureProvider(new W.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}Y.ExperimentationService=F,F.REFRESH_RATE_IN_MINUTES=30},5975:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(3663),W=x(3334);class ee extends V.ExperimentationServiceBase{constructor(I,M,N,C,L,$,j,O){super(I,C,L,$,j,O);if(this.telemetry=I,this.filterProviders=M,this.refreshRateMs=N,this.featuresTelemetryPropertyName=C,this.assignmentContextTelemetryPropertyName=L,this.telemetryEventName=$,this.storageKey=j,this.storage=O,N<1e3&&N!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");N>0&&(this.pollingService=new W.PollingService(N),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(I=!1){if(this.pollingService){this.pollingService.StopPolling();let M=await super.getFeaturesAsync(I);return this.pollingService.StartPolling(),M}else return await super.getFeaturesAsync(I)}}Y.ExperimentationServiceAutoPolling=ee},3663:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(7002);class W{constructor(F,I,M,N,C,L){this.telemetry=F,this.featuresTelemetryPropertyName=I,this.assignmentContextTelemetryPropertyName=M,this.telemetryEventName=N,this.storageKey=C,this.storage=L,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(L=new V.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(F){this._features=F,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(F=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async M=>await M.getFeatures()));let I=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(I,F),this.features}updateFeatures(F,I=!1){let M={features:[],assignmentContext:"",configs:[]};for(let N of F){for(let C of N.features)M.features.includes(C)||M.features.push(C);for(let C of N.configs){const L=M.configs.find($=>$.Id===C.Id);L?L.Parameters=Object.assign(Object.assign({},L.Parameters),C.Parameters):M.configs.push(C)}M.assignmentContext+=N.assignmentContext}(I||!this.featuresConsumed)&&(this.features=M),this.storage&&this.storage.setValue(this.storageKey,M)}async loadCachedFeatureData(){let F;this.storage&&(F=await this.storage.getValue(this.storageKey),F!==void 0&&F.configs===void 0&&(F.configs=[])),this.features.features.length===0&&(this.features=F||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(F){return this.featuresConsumed=!0,this.PostEventToTelemetry(F),this.features.features.includes(F)}async isCachedFlightEnabled(F){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(F),this.features.features.includes(F)}async isFlightEnabledAsync(F){const I=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(F),I.features.includes(F)}getTreatmentVariable(F,I){var M;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${F}.${I}`),(M=this.features.configs.find(C=>C.Id===F))===null||M===void 0?void 0:M.Parameters[I]}async getTreatmentVariableAsync(F,I){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(F,I)}PostEventToTelemetry(F){this.cachedTelemetryEvents.includes(F)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",F]])),this.cachedTelemetryEvents.push(F))}invokeInit(){this.init()}addFeatureProvider(...F){if(!(F==null||this.featureProviders==null))for(let I of F)this.featureProviders.push(I)}}Y.ExperimentationServiceBase=W},69:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});class x{constructor(W){this.telemetry=W,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let W=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,W}}Y.BaseFeatureProvider=x},4e3:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(69);class W extends V.BaseFeatureProvider{constructor(F,I){super(F);this.telemetry=F,this.filterProviders=I,this.cachedTelemetryEvents=[]}getFilters(){let F=new Map;for(let I of this.filterProviders){let M=I.getFilters();for(let N of M.keys()){let C=M.get(N);F.set(N,C)}}return F}PostEventToTelemetry(F){if(this.cachedTelemetryEvents.includes(F))return;const I=JSON.stringify(F);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",I]])),this.cachedTelemetryEvents.push(F)}}Y.FilteredFeatureProvider=W},4067:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(4e3);class W extends V.FilteredFeatureProvider{constructor(F,I,M){super(I,M);this.httpClient=F,this.telemetry=I,this.filterProviders=M}async fetch(){let F=this.getFilters(),I={};for(let $ of F.keys()){const j=F.get($);I[$]=j}let M=await this.httpClient.get({headers:I});F.keys.length>0&&this.PostEventToTelemetry(I);let N=M.data,C=N.Configs,L=[];for(let $ of C)if(!!$.Parameters)for(let j of Object.keys($.Parameters)){const O=j+($.Parameters[j]?"":"cf");L.includes(O)||L.push(O)}return{features:L,assignmentContext:N.AssignmentContext,configs:C}}}Y.TasApiFeatureProvider=W},4234:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(9669);class W{constructor(F){this.endpoint=F}get(F){return V.default.get(this.endpoint,Object.assign(Object.assign({},F),{proxy:!1}))}}Y.AxiosHttpClient=W},7002:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});class x{constructor(){this.storage=new Map}async getValue(W,ee){return this.storage.has(W)?await Promise.resolve(this.storage.get(W)):await Promise.resolve(ee||void 0)}setValue(W,ee){this.storage.set(W,ee)}}Y.MemoryKeyValueStorage=x},3334:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});class x{constructor(W){this.fetchInterval=W}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(W){this.onTick=W}StartPolling(W=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(W&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}Y.PollingService=x},6149:(u,Y,x)=>{u.exports=x(5468)},5468:(u,Y,x)=>{"use strict";var V,W=x(1631),ee=x(4016),F=x(8605),I=x(7211),M=x(8614),N=x(2357),C=x(1669);V=L,Y.httpsOverHttp=$,V=j,V=O;function L(ye){var J=new U(ye);return J.request=F.request,J}function $(ye){var J=new U(ye);return J.request=F.request,J.createSocket=H,J.defaultPort=443,J}function j(ye){var J=new U(ye);return J.request=I.request,J}function O(ye){var J=new U(ye);return J.request=I.request,J.createSocket=H,J.defaultPort=443,J}function U(ye){var J=this;J.options=ye||{},J.proxyOptions=J.options.proxy||{},J.maxSockets=J.options.maxSockets||F.Agent.defaultMaxSockets,J.requests=[],J.sockets=[],J.on("free",function(ae,ce,se,ne){for(var K=G(ce,se,ne),ue=0,me=J.requests.length;ue<me;++ue){var ve=J.requests[ue];if(ve.host===K.host&&ve.port===K.port){J.requests.splice(ue,1),ve.request.onSocket(ae);return}}ae.destroy(),J.removeSocket(ae)})}C.inherits(U,M.EventEmitter),U.prototype.addRequest=function(J,be,ae,ce){var se=this,ne=re({request:J},se.options,G(be,ae,ce));if(se.sockets.length>=this.maxSockets){se.requests.push(ne);return}se.createSocket(ne,function(K){K.on("free",ue),K.on("close",me),K.on("agentRemove",me),J.onSocket(K);function ue(){se.emit("free",K,ne)}function me(ve){se.removeSocket(K),K.removeListener("free",ue),K.removeListener("close",me),K.removeListener("agentRemove",me)}})},U.prototype.createSocket=function(J,be){var ae=this,ce={};ae.sockets.push(ce);var se=re({},ae.proxyOptions,{method:"CONNECT",path:J.host+":"+J.port,agent:!1,headers:{host:J.host+":"+J.port}});J.localAddress&&(se.localAddress=J.localAddress),se.proxyAuth&&(se.headers=se.headers||{},se.headers["Proxy-Authorization"]="Basic "+new Buffer(se.proxyAuth).toString("base64")),ie("making CONNECT request");var ne=ae.request(se);ne.useChunkedEncodingByDefault=!1,ne.once("response",K),ne.once("upgrade",ue),ne.once("connect",me),ne.once("error",ve),ne.end();function K(we){we.upgrade=!0}function ue(we,ke,Be){process.nextTick(function(){me(we,ke,Be)})}function me(we,ke,Be){if(ne.removeAllListeners(),ke.removeAllListeners(),we.statusCode!==200){ie("tunneling socket could not be established, statusCode=%d",we.statusCode),ke.destroy();var We=new Error("tunneling socket could not be established, statusCode="+we.statusCode);We.code="ECONNRESET",J.request.emit("error",We),ae.removeSocket(ce);return}if(Be.length>0){ie("got illegal response body from proxy"),ke.destroy();var We=new Error("got illegal response body from proxy");We.code="ECONNRESET",J.request.emit("error",We),ae.removeSocket(ce);return}return ie("tunneling connection has established"),ae.sockets[ae.sockets.indexOf(ce)]=ke,be(ke)}function ve(we){ne.removeAllListeners(),ie(`tunneling socket could not be established, cause=%s
`,we.message,we.stack);var ke=new Error("tunneling socket could not be established, cause="+we.message);ke.code="ECONNRESET",J.request.emit("error",ke),ae.removeSocket(ce)}},U.prototype.removeSocket=function(J){var be=this.sockets.indexOf(J);if(be!==-1){this.sockets.splice(be,1);var ae=this.requests.shift();ae&&this.createSocket(ae,function(ce){ae.request.onSocket(ce)})}};function H(ye,J){var be=this;U.prototype.createSocket.call(be,ye,function(ae){var ce=ye.request.getHeader("host"),se=re({},be.options,{socket:ae,servername:ce?ce.replace(/:.*$/,""):ye.host}),ne=ee.connect(0,se);be.sockets[be.sockets.indexOf(ae)]=ne,J(ne)})}function G(ye,J,be){return typeof ye=="string"?{host:ye,port:J,localAddress:be}:ye}function re(ye){for(var J=1,be=arguments.length;J<be;++J){var ae=arguments[J];if(typeof ae=="object")for(var ce=Object.keys(ae),se=0,ne=ce.length;se<ne;++se){var K=ce[se];ae[K]!==void 0&&(ye[K]=ae[K])}}return ye}var ie;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ie=function(){var ye=Array.prototype.slice.call(arguments);typeof ye[0]=="string"?ye[0]="TUNNEL: "+ye[0]:ye.unshift("TUNNEL:"),console.error.apply(console,ye)}:ie=function(){},V=ie},8361:(u,Y,x)=>{var V=Object.create,W=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,L=(s,T,d)=>T in s?W(s,T,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[T]=d,$=(s,T)=>{for(var d in T||(T={}))N.call(T,d)&&L(s,d,T[d]);if(I)for(var d of I(T))C.call(T,d)&&L(s,d,T[d]);return s},j=s=>W(s,"__esModule",{value:!0}),O=(s,T)=>()=>(T||s((T={exports:{}}).exports,T),T.exports),U=(s,T)=>{j(s);for(var d in T)W(s,d,{get:T[d],enumerable:!0})},H=(s,T,d)=>{if(T&&typeof T=="object"||typeof T=="function")for(let v of F(T))!N.call(s,v)&&v!=="default"&&W(s,v,{get:()=>T[v],enumerable:!(d=ee(T,v))||d.enumerable});return s},G=s=>H(j(W(s!=null?V(M(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),re=O((s,T)=>{"use strict";var d=function(){function v(){}return v.info=function(_){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];v.enableDebug&&console.info(v.TAG+_,c)},v.warn=function(_){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];v.disableWarnings||console.warn(v.TAG+_,c)},v.enableDebug=!1,v.disableWarnings=!1,v.disableErrors=!1,v.TAG="ApplicationInsights:",v}();T.exports=d}),ie=O(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(c){for(var l,h=1,p=arguments.length;h<p;h++){l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])}return c},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AsyncScopeManager=s.OpenTelemetryScopeManagerWrapper=void 0;var d=_i(),v=x(8614),_=function(){function c(){}return c.prototype.active=function(){var l=this,h=d.CorrelationContextManager.getCurrentContext();return T(T({},h),{getValue:function(p){return l._activeSymbol?p===l._activeSymbol?h:!1:(l._activeSymbol=p,h)},setValue:function(){}})},c.prototype.with=function(l,h){var p=l.parentSpanId,g=l.name,y=c._spanToContext(l,p,g);return d.CorrelationContextManager.runWithContext(y,h)()},c.prototype.bind=function(l){return typeof l=="function"?d.CorrelationContextManager.wrapCallback(l):(l instanceof v.EventEmitter&&d.CorrelationContextManager.wrapEmitter(l),l)},c.prototype.enable=function(){return d.CorrelationContextManager.enable(),this},c.prototype.disable=function(){return d.CorrelationContextManager.disable(),this},c._spanToContext=function(l,h,p){var g=h?"|"+l.spanContext().traceId+"."+h+".":l.spanContext().traceId,y=T(T({},l.spanContext()),{traceFlags:l.spanContext().traceFlags}),m=d.CorrelationContextManager.spanToContextObject(y,g,p);return m},c}();s.OpenTelemetryScopeManagerWrapper=_,s.AsyncScopeManager=new _}),ye=O((s,T)=>{s=T.exports=lt;var d;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?d=function(){var Z=Array.prototype.slice.call(arguments,0);Z.unshift("SEMVER"),console.log.apply(console,Z)}:d=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,c=16,l=s.re=[],h=s.src=[],p=0,g=p++;h[g]="0|[1-9]\\d*";var y=p++;h[y]="[0-9]+";var m=p++;h[m]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var b=p++;h[b]="("+h[g]+")\\.("+h[g]+")\\.("+h[g]+")";var w=p++;h[w]="("+h[y]+")\\.("+h[y]+")\\.("+h[y]+")";var k=p++;h[k]="(?:"+h[g]+"|"+h[m]+")";var R=p++;h[R]="(?:"+h[y]+"|"+h[m]+")";var A=p++;h[A]="(?:-("+h[k]+"(?:\\."+h[k]+")*))";var D=p++;h[D]="(?:-?("+h[R]+"(?:\\."+h[R]+")*))";var B=p++;h[B]="[0-9A-Za-z-]+";var X=p++;h[X]="(?:\\+("+h[B]+"(?:\\."+h[B]+")*))";var Q=p++,oe="v?"+h[b]+h[A]+"?"+h[X]+"?";h[Q]="^"+oe+"$";var ge="[v=\\s]*"+h[w]+h[D]+"?"+h[X]+"?",Se=p++;h[Se]="^"+ge+"$";var Te=p++;h[Te]="((?:<|>)?=?)";var Ne=p++;h[Ne]=h[y]+"|x|X|\\*";var Re=p++;h[Re]=h[g]+"|x|X|\\*";var Ue=p++;h[Ue]="[v=\\s]*("+h[Re]+")(?:\\.("+h[Re]+")(?:\\.("+h[Re]+")(?:"+h[A]+")?"+h[X]+"?)?)?";var ze=p++;h[ze]="[v=\\s]*("+h[Ne]+")(?:\\.("+h[Ne]+")(?:\\.("+h[Ne]+")(?:"+h[D]+")?"+h[X]+"?)?)?";var ot=p++;h[ot]="^"+h[Te]+"\\s*"+h[Ue]+"$";var tt=p++;h[tt]="^"+h[Te]+"\\s*"+h[ze]+"$";var qt=p++;h[qt]="(?:^|[^\\d])(\\d{1,"+c+"})(?:\\.(\\d{1,"+c+"}))?(?:\\.(\\d{1,"+c+"}))?(?:$|[^\\d])";var ct=p++;h[ct]="(?:~>?)";var Ie=p++;h[Ie]="(\\s*)"+h[ct]+"\\s+",l[Ie]=new RegExp(h[Ie],"g");var qe="$1~",Le=p++;h[Le]="^"+h[ct]+h[Ue]+"$";var je=p++;h[je]="^"+h[ct]+h[ze]+"$";var Ke=p++;h[Ke]="(?:\\^)";var ut=p++;h[ut]="(\\s*)"+h[Ke]+"\\s+",l[ut]=new RegExp(h[ut],"g");var Qe="$1^",kt=p++;h[kt]="^"+h[Ke]+h[Ue]+"$";var Yt=p++;h[Yt]="^"+h[Ke]+h[ze]+"$";var Gt=p++;h[Gt]="^"+h[Te]+"\\s*("+ge+")$|^$";var Ot=p++;h[Ot]="^"+h[Te]+"\\s*("+oe+")$|^$";var wt=p++;h[wt]="(\\s*)"+h[Te]+"\\s*("+ge+"|"+h[Ue]+")",l[wt]=new RegExp(h[wt],"g");var er="$1$2$3",Rr=p++;h[Rr]="^\\s*("+h[Ue]+")\\s+-\\s+("+h[Ue]+")\\s*$";var Ze=p++;h[Ze]="^\\s*("+h[ze]+")\\s+-\\s+("+h[ze]+")\\s*$";var Ye=p++;h[Ye]="(<|>)?=?\\s*\\*";for(var vt=0;vt<p;vt++)d(vt,h[vt]),l[vt]||(l[vt]=new RegExp(h[vt]));s.parse=tr;function tr(Z,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),Z instanceof lt)return Z;if(typeof Z!="string"||Z.length>v)return null;var _e=de.loose?l[Se]:l[Q];if(!_e.test(Z))return null;try{return new lt(Z,de)}catch(xe){return null}}s.valid=ka;function ka(Z,de){var _e=tr(Z,de);return _e?_e.version:null}s.clean=An;function An(Z,de){var _e=tr(Z.trim().replace(/^[=v]+/,""),de);return _e?_e.version:null}s.SemVer=lt;function lt(Z,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),Z instanceof lt){if(Z.loose===de.loose)return Z;Z=Z.version}else if(typeof Z!="string")throw new TypeError("Invalid Version: "+Z);if(Z.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof lt))return new lt(Z,de);d("SemVer",Z,de),this.options=de,this.loose=!!de.loose;var _e=Z.trim().match(de.loose?l[Se]:l[Q]);if(!_e)throw new TypeError("Invalid Version: "+Z);if(this.raw=Z,this.major=+_e[1],this.minor=+_e[2],this.patch=+_e[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");_e[4]?this.prerelease=_e[4].split(".").map(function(xe){if(/^[0-9]+$/.test(xe)){var Fe=+xe;if(Fe>=0&&Fe<_)return Fe}return xe}):this.prerelease=[],this.build=_e[5]?_e[5].split("."):[],this.format()}lt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},lt.prototype.toString=function(){return this.version},lt.prototype.compare=function(Z){return d("SemVer.compare",this.version,this.options,Z),Z instanceof lt||(Z=new lt(Z,this.options)),this.compareMain(Z)||this.comparePre(Z)},lt.prototype.compareMain=function(Z){return Z instanceof lt||(Z=new lt(Z,this.options)),fr(this.major,Z.major)||fr(this.minor,Z.minor)||fr(this.patch,Z.patch)},lt.prototype.comparePre=function(Z){if(Z instanceof lt||(Z=new lt(Z,this.options)),this.prerelease.length&&!Z.prerelease.length)return-1;if(!this.prerelease.length&&Z.prerelease.length)return 1;if(!this.prerelease.length&&!Z.prerelease.length)return 0;var de=0;do{var _e=this.prerelease[de],xe=Z.prerelease[de];if(d("prerelease compare",de,_e,xe),_e===void 0&&xe===void 0)return 0;if(xe===void 0)return 1;if(_e===void 0)return-1;if(_e!==xe)return fr(_e,xe)}while(++de)},lt.prototype.inc=function(Z,de){switch(Z){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",de);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",de);break;case"prepatch":this.prerelease.length=0,this.inc("patch",de),this.inc("pre",de);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",de),this.inc("pre",de);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var _e=this.prerelease.length;--_e>=0;)typeof this.prerelease[_e]=="number"&&(this.prerelease[_e]++,_e=-2);_e===-1&&this.prerelease.push(0)}de&&(this.prerelease[0]===de?isNaN(this.prerelease[1])&&(this.prerelease=[de,0]):this.prerelease=[de,0]);break;default:throw new Error("invalid increment argument: "+Z)}return this.format(),this.raw=this.version,this},s.inc=Sa;function Sa(Z,de,_e,xe){typeof _e=="string"&&(xe=_e,_e=void 0);try{return new lt(Z,_e).inc(de,xe).version}catch(Fe){return null}}s.diff=Ss;function Ss(Z,de){if(ki(Z,de))return null;var _e=tr(Z),xe=tr(de),Fe="";if(_e.prerelease.length||xe.prerelease.length){Fe="pre";var $e="prerelease"}for(var Ve in _e)if((Ve==="major"||Ve==="minor"||Ve==="patch")&&_e[Ve]!==xe[Ve])return Fe+Ve;return $e}s.compareIdentifiers=fr;var cn=/^[0-9]+$/;function fr(Z,de){var _e=cn.test(Z),xe=cn.test(de);return _e&&xe&&(Z=+Z,de=+de),Z===de?0:_e&&!xe?-1:xe&&!_e?1:Z<de?-1:1}s.rcompareIdentifiers=Cr;function Cr(Z,de){return fr(de,Z)}s.major=gr;function gr(Z,de){return new lt(Z,de).major}s.minor=Kn;function Kn(Z,de){return new lt(Z,de).minor}s.patch=Yn;function Yn(Z,de){return new lt(Z,de).patch}s.compare=Vr;function Vr(Z,de,_e){return new lt(Z,_e).compare(new lt(de,_e))}s.compareLoose=Ta;function Ta(Z,de){return Vr(Z,de,!0)}s.rcompare=Xn;function Xn(Z,de,_e){return Vr(de,Z,_e)}s.sort=Ts;function Ts(Z,de){return Z.sort(function(_e,xe){return s.compare(_e,xe,de)})}s.rsort=Ei;function Ei(Z,de){return Z.sort(function(_e,xe){return s.rcompare(_e,xe,de)})}s.gt=In;function In(Z,de,_e){return Vr(Z,de,_e)>0}s.lt=Zr;function Zr(Z,de,_e){return Vr(Z,de,_e)<0}s.eq=ki;function ki(Z,de,_e){return Vr(Z,de,_e)===0}s.neq=Rs;function Rs(Z,de,_e){return Vr(Z,de,_e)!==0}s.gte=Qi;function Qi(Z,de,_e){return Vr(Z,de,_e)>=0}s.lte=Lr;function Lr(Z,de,_e){return Vr(Z,de,_e)<=0}s.cmp=jr;function jr(Z,de,_e,xe){switch(de){case"===":return typeof Z=="object"&&(Z=Z.version),typeof _e=="object"&&(_e=_e.version),Z===_e;case"!==":return typeof Z=="object"&&(Z=Z.version),typeof _e=="object"&&(_e=_e.version),Z!==_e;case"":case"=":case"==":return ki(Z,_e,xe);case"!=":return Rs(Z,_e,xe);case">":return In(Z,_e,xe);case">=":return Qi(Z,_e,xe);case"<":return Zr(Z,_e,xe);case"<=":return Lr(Z,_e,xe);default:throw new TypeError("Invalid operator: "+de)}}s.Comparator=Pr;function Pr(Z,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),Z instanceof Pr){if(Z.loose===!!de.loose)return Z;Z=Z.value}if(!(this instanceof Pr))return new Pr(Z,de);d("comparator",Z,de),this.options=de,this.loose=!!de.loose,this.parse(Z),this.semver===vr?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}var vr={};Pr.prototype.parse=function(Z){var de=this.options.loose?l[Gt]:l[Ot],_e=Z.match(de);if(!_e)throw new TypeError("Invalid comparator: "+Z);this.operator=_e[1],this.operator==="="&&(this.operator=""),_e[2]?this.semver=new lt(_e[2],this.options.loose):this.semver=vr},Pr.prototype.toString=function(){return this.value},Pr.prototype.test=function(Z){return d("Comparator.test",Z,this.options.loose),this.semver===vr?!0:(typeof Z=="string"&&(Z=new lt(Z,this.options)),jr(Z,this.operator,this.semver,this.options))},Pr.prototype.intersects=function(Z,de){if(!(Z instanceof Pr))throw new TypeError("a Comparator is required");(!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1});var _e;if(this.operator==="")return _e=new pt(Z.value,de),pn(this.value,_e,de);if(Z.operator==="")return _e=new pt(this.value,de),pn(Z.semver,_e,de);var xe=(this.operator===">="||this.operator===">")&&(Z.operator===">="||Z.operator===">"),Fe=(this.operator==="<="||this.operator==="<")&&(Z.operator==="<="||Z.operator==="<"),$e=this.semver.version===Z.semver.version,Ve=(this.operator===">="||this.operator==="<=")&&(Z.operator===">="||Z.operator==="<="),rt=jr(this.semver,"<",Z.semver,de)&&(this.operator===">="||this.operator===">")&&(Z.operator==="<="||Z.operator==="<"),st=jr(this.semver,">",Z.semver,de)&&(this.operator==="<="||this.operator==="<")&&(Z.operator===">="||Z.operator===">");return xe||Fe||$e&&Ve||rt||st},s.Range=pt;function pt(Z,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),Z instanceof pt)return Z.loose===!!de.loose&&Z.includePrerelease===!!de.includePrerelease?Z:new pt(Z.raw,de);if(Z instanceof Pr)return new pt(Z.value,de);if(!(this instanceof pt))return new pt(Z,de);if(this.options=de,this.loose=!!de.loose,this.includePrerelease=!!de.includePrerelease,this.raw=Z,this.set=Z.split(/\s*\|\|\s*/).map(function(_e){return this.parseRange(_e.trim())},this).filter(function(_e){return _e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+Z);this.format()}pt.prototype.format=function(){return this.range=this.set.map(function(Z){return Z.join(" ").trim()}).join("||").trim(),this.range},pt.prototype.toString=function(){return this.range},pt.prototype.parseRange=function(Z){var de=this.options.loose;Z=Z.trim();var _e=de?l[Ze]:l[Rr];Z=Z.replace(_e,Pa),d("hyphen replace",Z),Z=Z.replace(l[wt],er),d("comparator trim",Z,l[wt]),Z=Z.replace(l[Ie],qe),Z=Z.replace(l[ut],Qe),Z=Z.split(/\s+/).join(" ");var xe=de?l[Gt]:l[Ot],Fe=Z.split(" ").map(function($e){return dn($e,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Fe=Fe.filter(function($e){return!!$e.match(xe)})),Fe=Fe.map(function($e){return new Pr($e,this.options)},this),Fe},pt.prototype.intersects=function(Z,de){if(!(Z instanceof pt))throw new TypeError("a Range is required");return this.set.some(function(_e){return _e.every(function(xe){return Z.set.some(function(Fe){return Fe.every(function($e){return xe.intersects($e,de)})})})})},s.toComparators=Ra;function Ra(Z,de){return new pt(Z,de).set.map(function(_e){return _e.map(function(xe){return xe.value}).join(" ").trim().split(" ")})}function dn(Z,de){return d("comp",Z,de),Z=Wi(Z,de),d("caret",Z),Z=hn(Z,de),d("tildes",Z),Z=Ki(Z,de),d("xrange",Z),Z=qr(Z,de),d("stars",Z),Z}function Ht(Z){return!Z||Z.toLowerCase()==="x"||Z==="*"}function hn(Z,de){return Z.trim().split(/\s+/).map(function(_e){return Ca(_e,de)}).join(" ")}function Ca(Z,de){var _e=de.loose?l[je]:l[Le];return Z.replace(_e,function(xe,Fe,$e,Ve,rt){d("tilde",Z,xe,Fe,$e,Ve,rt);var st;return Ht(Fe)?st="":Ht($e)?st=">="+Fe+".0.0 <"+(+Fe+1)+".0.0":Ht(Ve)?st=">="+Fe+"."+$e+".0 <"+Fe+"."+(+$e+1)+".0":rt?(d("replaceTilde pr",rt),st=">="+Fe+"."+$e+"."+Ve+"-"+rt+" <"+Fe+"."+(+$e+1)+".0"):st=">="+Fe+"."+$e+"."+Ve+" <"+Fe+"."+(+$e+1)+".0",d("tilde return",st),st})}function Wi(Z,de){return Z.trim().split(/\s+/).map(function(_e){return Si(_e,de)}).join(" ")}function Si(Z,de){d("caret",Z,de);var _e=de.loose?l[Yt]:l[kt];return Z.replace(_e,function(xe,Fe,$e,Ve,rt){d("caret",Z,xe,Fe,$e,Ve,rt);var st;return Ht(Fe)?st="":Ht($e)?st=">="+Fe+".0.0 <"+(+Fe+1)+".0.0":Ht(Ve)?Fe==="0"?st=">="+Fe+"."+$e+".0 <"+Fe+"."+(+$e+1)+".0":st=">="+Fe+"."+$e+".0 <"+(+Fe+1)+".0.0":rt?(d("replaceCaret pr",rt),Fe==="0"?$e==="0"?st=">="+Fe+"."+$e+"."+Ve+"-"+rt+" <"+Fe+"."+$e+"."+(+Ve+1):st=">="+Fe+"."+$e+"."+Ve+"-"+rt+" <"+Fe+"."+(+$e+1)+".0":st=">="+Fe+"."+$e+"."+Ve+"-"+rt+" <"+(+Fe+1)+".0.0"):(d("no pr"),Fe==="0"?$e==="0"?st=">="+Fe+"."+$e+"."+Ve+" <"+Fe+"."+$e+"."+(+Ve+1):st=">="+Fe+"."+$e+"."+Ve+" <"+Fe+"."+(+$e+1)+".0":st=">="+Fe+"."+$e+"."+Ve+" <"+(+Fe+1)+".0.0"),d("caret return",st),st})}function Ki(Z,de){return d("replaceXRanges",Z,de),Z.split(/\s+/).map(function(_e){return Zo(_e,de)}).join(" ")}function Zo(Z,de){Z=Z.trim();var _e=de.loose?l[tt]:l[ot];return Z.replace(_e,function(xe,Fe,$e,Ve,rt,st){d("xRange",Z,xe,Fe,$e,Ve,rt,st);var yr=Ht($e),sr=yr||Ht(Ve),ur=sr||Ht(rt),rr=ur;return Fe==="="&&rr&&(Fe=""),yr?Fe===">"||Fe==="<"?xe="<0.0.0":xe="*":Fe&&rr?(sr&&(Ve=0),rt=0,Fe===">"?(Fe=">=",sr?($e=+$e+1,Ve=0,rt=0):(Ve=+Ve+1,rt=0)):Fe==="<="&&(Fe="<",sr?$e=+$e+1:Ve=+Ve+1),xe=Fe+$e+"."+Ve+"."+rt):sr?xe=">="+$e+".0.0 <"+(+$e+1)+".0.0":ur&&(xe=">="+$e+"."+Ve+".0 <"+$e+"."+(+Ve+1)+".0"),d("xRange return",xe),xe})}function qr(Z,de){return d("replaceStars",Z,de),Z.trim().replace(l[Ye],"")}function Pa(Z,de,_e,xe,Fe,$e,Ve,rt,st,yr,sr,ur,rr){return Ht(_e)?de="":Ht(xe)?de=">="+_e+".0.0":Ht(Fe)?de=">="+_e+"."+xe+".0":de=">="+de,Ht(st)?rt="":Ht(yr)?rt="<"+(+st+1)+".0.0":Ht(sr)?rt="<"+st+"."+(+yr+1)+".0":ur?rt="<="+st+"."+yr+"."+sr+"-"+ur:rt="<="+rt,(de+" "+rt).trim()}pt.prototype.test=function(Z){if(!Z)return!1;typeof Z=="string"&&(Z=new lt(Z,this.options));for(var de=0;de<this.set.length;de++)if(Cs(this.set[de],Z,this.options))return!0;return!1};function Cs(Z,de,_e){for(var xe=0;xe<Z.length;xe++)if(!Z[xe].test(de))return!1;if(de.prerelease.length&&!_e.includePrerelease){for(xe=0;xe<Z.length;xe++)if(d(Z[xe].semver),Z[xe].semver!==vr&&Z[xe].semver.prerelease.length>0){var Fe=Z[xe].semver;if(Fe.major===de.major&&Fe.minor===de.minor&&Fe.patch===de.patch)return!0}return!1}return!0}s.satisfies=pn;function pn(Z,de,_e){try{de=new pt(de,_e)}catch(xe){return!1}return de.test(Z)}s.maxSatisfying=Yi;function Yi(Z,de,_e){var xe=null,Fe=null;try{var $e=new pt(de,_e)}catch(Ve){return null}return Z.forEach(function(Ve){$e.test(Ve)&&(!xe||Fe.compare(Ve)===-1)&&(xe=Ve,Fe=new lt(xe,_e))}),xe}s.minSatisfying=Ps;function Ps(Z,de,_e){var xe=null,Fe=null;try{var $e=new pt(de,_e)}catch(Ve){return null}return Z.forEach(function(Ve){$e.test(Ve)&&(!xe||Fe.compare(Ve)===1)&&(xe=Ve,Fe=new lt(xe,_e))}),xe}s.minVersion=On;function On(Z,de){Z=new pt(Z,de);var _e=new lt("0.0.0");if(Z.test(_e)||(_e=new lt("0.0.0-0"),Z.test(_e)))return _e;_e=null;for(var xe=0;xe<Z.set.length;++xe){var Fe=Z.set[xe];Fe.forEach(function($e){var Ve=new lt($e.semver.version);switch($e.operator){case">":Ve.prerelease.length===0?Ve.patch++:Ve.prerelease.push(0),Ve.raw=Ve.format();case"":case">=":(!_e||In(_e,Ve))&&(_e=Ve);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$e.operator)}})}return _e&&Z.test(_e)?_e:null}s.validRange=Na;function Na(Z,de){try{return new pt(Z,de).range||"*"}catch(_e){return null}}s.ltr=Aa;function Aa(Z,de,_e){return Ti(Z,de,"<",_e)}s.gtr=Ns;function Ns(Z,de,_e){return Ti(Z,de,">",_e)}s.outside=Ti;function Ti(Z,de,_e,xe){Z=new lt(Z,xe),de=new pt(de,xe);var Fe,$e,Ve,rt,st;switch(_e){case">":Fe=In,$e=Lr,Ve=Zr,rt=">",st=">=";break;case"<":Fe=Zr,$e=Qi,Ve=In,rt="<",st="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pn(Z,de,xe))return!1;for(var yr=0;yr<de.set.length;++yr){var sr=de.set[yr],ur=null,rr=null;if(sr.forEach(function(Ur){Ur.semver===vr&&(Ur=new Pr(">=0.0.0")),ur=ur||Ur,rr=rr||Ur,Fe(Ur.semver,ur.semver,xe)?ur=Ur:Ve(Ur.semver,rr.semver,xe)&&(rr=Ur)}),ur.operator===rt||ur.operator===st||(!rr.operator||rr.operator===rt)&&$e(Z,rr.semver)||rr.operator===st&&Ve(Z,rr.semver))return!1}return!0}s.prerelease=eu;function eu(Z,de){var _e=tr(Z,de);return _e&&_e.prerelease.length?_e.prerelease:null}s.intersects=Dn;function Dn(Z,de,_e){return Z=new pt(Z,_e),de=new pt(de,_e),Z.intersects(de)}s.coerce=Ia;function Ia(Z){if(Z instanceof lt)return Z;if(typeof Z!="string")return null;var de=Z.match(l[qt]);return de==null?null:tr(de[1]+"."+(de[2]||"0")+"."+(de[3]||"0"))}}),J=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.makePatchingRequire=void 0;var T=x(5622),d=ye(),v=x(2282),_=Object.keys(process.binding("natives")),c=v.prototype.require;function l(h){var p={};return function(g){var y=c.apply(this,arguments);if(h[g]){var m=v._resolveFilename(g,this);if(p.hasOwnProperty(m))return p[m];var b=void 0;if(_.indexOf(g)<0)try{b=c.call(this,T.join(g,"package.json")).version}catch(B){return y}else b=process.version.substring(1);var w=b.indexOf("-");w>=0&&(b=b.substring(0,w));for(var k=y,R=0,A=h[g];R<A.length;R++){var D=A[R];d.satisfies(b,D.versionSpecifier)&&(k=D.patch(k,m))}return p[m]=k}return y}}s.makePatchingRequire=l}),be=O((s,T)=>{T.exports={_args:[["diagnostic-channel@1.0.0","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"diagnostic-channel@1.0.0",_id:"diagnostic-channel@1.0.0",_inBundle:!1,_integrity:"sha512-v7Clmg5HG9XwIhqgbBRfwFzwZhxjvESZ33uu1cgcCLkdb9ZxgtY78eAgQMEQ39UecQ//4K5W75iq6LFBtAQD8w==",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@1.0.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"1.0.0",saveSpec:null,fetchSpec:"1.0.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-1.0.0.tgz",_spec:"1.0.0",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"1.0.0"}}),ae=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.channel=s.makePatchingRequire=void 0;var T=J(),d=J();Object.defineProperty(s,"makePatchingRequire",{enumerable:!0,get:function(){return d.makePatchingRequire}});var v=function(l){return!0},_=function(){function l(){this.version=be().version,this.subscribers={},this.contextPreservationFunction=function(h){return h},this.knownPatches={},this.currentlyPublishing=!1}return l.prototype.shouldPublish=function(h){var p=this.subscribers[h];return p?p.some(function(g){var y=g.filter;return!y||y(!1)}):!1},l.prototype.publish=function(h,p){if(!this.currentlyPublishing){var g=this.subscribers[h];if(g){var y={timestamp:Date.now(),data:p};this.currentlyPublishing=!0,g.forEach(function(m){var b=m.listener,w=m.filter;try{w&&w(!0)&&b(y)}catch(k){}}),this.currentlyPublishing=!1}}},l.prototype.subscribe=function(h,p,g){g===void 0&&(g=v),this.subscribers[h]||(this.subscribers[h]=[]),this.subscribers[h].push({listener:p,filter:g})},l.prototype.unsubscribe=function(h,p,g){g===void 0&&(g=v);var y=this.subscribers[h];if(y){for(var m=0;m<y.length;++m)if(y[m].listener===p&&y[m].filter===g)return y.splice(m,1),!0}return!1},l.prototype.reset=function(){var h=this;this.subscribers={},this.contextPreservationFunction=function(p){return p},Object.getOwnPropertyNames(this.knownPatches).forEach(function(p){return delete h.knownPatches[p]})},l.prototype.bindToContext=function(h){return this.contextPreservationFunction(h)},l.prototype.addContextPreservation=function(h){var p=this.contextPreservationFunction;this.contextPreservationFunction=function(g){return h(p(g))}},l.prototype.registerMonkeyPatch=function(h,p){this.knownPatches[h]||(this.knownPatches[h]=[]),this.knownPatches[h].push(p)},l.prototype.getPatchesObject=function(){return this.knownPatches},l}();global.diagnosticsSource||(global.diagnosticsSource=new _,c=x(2282),c.prototype.require=T.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var c;s.channel=global.diagnosticsSource}),ce=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),se=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BaggageImpl=void 0;var T=function(){function d(v){this._entries=v?new Map(v):new Map}return d.prototype.getEntry=function(v){var _=this._entries.get(v);if(_)return Object.assign({},_)},d.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(v){var _=v[0],c=v[1];return[_,c]})},d.prototype.setEntry=function(v,_){var c=new d(this._entries);return c._entries.set(v,_),c},d.prototype.removeEntry=function(v){var _=new d(this._entries);return _._entries.delete(v),_},d.prototype.removeEntries=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];for(var c=new d(this._entries),l=0,h=v;l<h.length;l++){var p=h[l];c._entries.delete(p)}return c},d.prototype.clear=function(){return new d},d}();s.BaggageImpl=T}),ne=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataSymbol=void 0,s.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),K=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataFromString=s.createBaggage=void 0;var T=_t(),d=se(),v=ne();function _(l){return l===void 0&&(l={}),new d.BaggageImpl(new Map(Object.entries(l)))}s.createBaggage=_;function c(l){return typeof l!="string"&&(T.diag.error("Cannot create baggage metadata from unknown type: "+typeof l),l=""),{__TYPE__:v.baggageEntryMetadataSymbol,toString:function(){return l}}}s.baggageEntryMetadataFromString=c}),ue=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),me=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ve=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagConsoleLogger=void 0;var T=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],d=function(){function v(){function _(l){return function(){var h=arguments;if(console){var p=console[l];if(typeof p!="function"&&(p=console.log),typeof p=="function")return p.apply(console,h)}}}for(var c=0;c<T.length;c++)this[T[c].n]=_(T[c].c)}return v}();s.DiagConsoleLogger=d}),we=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagLogLevel=void 0;var T;(function(d){d[d.NONE=0]="NONE",d[d.ERROR=30]="ERROR",d[d.WARN=50]="WARN",d[d.INFO=60]="INFO",d[d.DEBUG=70]="DEBUG",d[d.VERBOSE=80]="VERBOSE",d[d.ALL=9999]="ALL"})(T=s.DiagLogLevel||(s.DiagLogLevel={}))}),ke=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ve(),s),d(we(),s)}),Be=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultTextMapSetter=s.defaultTextMapGetter=void 0,s.defaultTextMapGetter={get:function(T,d){if(T!=null)return T[d]},keys:function(T){return T==null?[]:Object.keys(T)}},s.defaultTextMapSetter={set:function(T,d,v){T!=null&&(T[d]=v)}}}),We=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),it=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),at=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ROOT_CONTEXT=s.createContextKey=void 0;function T(v){return Symbol.for(v)}s.createContextKey=T;var d=function(){function v(_){var c=this;c._currentContext=_?new Map(_):new Map,c.getValue=function(l){return c._currentContext.get(l)},c.setValue=function(l,h){var p=new v(c._currentContext);return p._currentContext.set(l,h),p},c.deleteValue=function(l){var h=new v(c._currentContext);return h._currentContext.delete(l),h}}return v}();s.ROOT_CONTEXT=new d}),Nt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceFlags=void 0;var T;(function(d){d[d.NONE=0]="NONE",d[d.SAMPLED=1]="SAMPLED"})(T=s.TraceFlags||(s.TraceFlags={}))}),Tt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.wrapSpanContext=s.isSpanContextValid=s.isValidSpanId=s.isValidTraceId=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=void 0;var T=xt(),d=Nt(),v=/^([0-9a-f]{32})$/i,_=/^[0-9a-f]{16}$/i;s.INVALID_SPANID="0000000000000000",s.INVALID_TRACEID="00000000000000000000000000000000",s.INVALID_SPAN_CONTEXT={traceId:s.INVALID_TRACEID,spanId:s.INVALID_SPANID,traceFlags:d.TraceFlags.NONE};function c(g){return v.test(g)&&g!==s.INVALID_TRACEID}s.isValidTraceId=c;function l(g){return _.test(g)&&g!==s.INVALID_SPANID}s.isValidSpanId=l;function h(g){return c(g.traceId)&&l(g.spanId)}s.isSpanContextValid=h;function p(g){return new T.NonRecordingSpan(g)}s.wrapSpanContext=p}),xt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NonRecordingSpan=void 0;var T=Tt(),d=function(){function v(_){_===void 0&&(_=T.INVALID_SPAN_CONTEXT),this._spanContext=_}return v.prototype.spanContext=function(){return this._spanContext},v.prototype.setAttribute=function(_,c){return this},v.prototype.setAttributes=function(_){return this},v.prototype.addEvent=function(_,c){return this},v.prototype.setStatus=function(_){return this},v.prototype.updateName=function(_){return this},v.prototype.end=function(_){},v.prototype.isRecording=function(){return!1},v.prototype.recordException=function(_,c){},v}();s.NonRecordingSpan=d}),Ft=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSpanContext=s.setSpanContext=s.deleteSpan=s.setSpan=s.getSpan=void 0;var T=at(),d=xt(),v=T.createContextKey("OpenTelemetry Context Key SPAN");function _(g){return g.getValue(v)||void 0}s.getSpan=_;function c(g,y){return g.setValue(v,y)}s.setSpan=c;function l(g){return g.deleteValue(v)}s.deleteSpan=l;function h(g,y){return c(g,new d.NonRecordingSpan(y))}s.setSpanContext=h;function p(g){var y;return(y=_(g))===null||y===void 0?void 0:y.spanContext()}s.getSpanContext=p}),ar=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracer=void 0;var T=_t(),d=Ft(),v=xt(),_=Tt(),c=function(){function h(){}return h.prototype.startSpan=function(p,g,y){var m=Boolean(g==null?void 0:g.root);if(m)return new v.NonRecordingSpan;var b=y&&d.getSpanContext(y);return l(b)&&_.isSpanContextValid(b)?new v.NonRecordingSpan(b):new v.NonRecordingSpan},h.prototype.startActiveSpan=function(p,g,y,m){var b,w,k;if(!(arguments.length<2)){arguments.length===2?k=g:arguments.length===3?(b=g,k=y):(b=g,w=y,k=m);var R=w!=null?w:T.context.active(),A=this.startSpan(p,b,R),D=d.setSpan(R,A);return T.context.with(D,k,void 0,A)}},h}();s.NoopTracer=c;function l(h){return typeof h=="object"&&typeof h.spanId=="string"&&typeof h.traceId=="string"&&typeof h.traceFlags=="number"}}),Er=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracer=void 0;var T=ar(),d=function(){function v(_,c,l){this._provider=_,this.name=c,this.version=l}return v.prototype.startSpan=function(_,c,l){return this._getTracer().startSpan(_,c,l)},v.prototype.startActiveSpan=function(_,c,l,h){var p=this._getTracer();return Reflect.apply(p.startActiveSpan,p,arguments)},v.prototype._getTracer=function(){if(this._delegate)return this._delegate;var _=this._provider.getDelegateTracer(this.name,this.version);return _?(this._delegate=_,this._delegate):new T.NoopTracer},v}();s.ProxyTracer=d}),rn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracerProvider=void 0;var T=ar(),d=function(){function v(){}return v.prototype.getTracer=function(_,c){return new T.NoopTracer},v}();s.NoopTracerProvider=d}),Di=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracerProvider=void 0;var T=Er(),d=rn(),v=new d.NoopTracerProvider,_=function(){function c(){}return c.prototype.getTracer=function(l,h){var p;return(p=this.getDelegateTracer(l,h))!==null&&p!==void 0?p:new T.ProxyTracer(this,l,h)},c.prototype.getDelegate=function(){var l;return(l=this._delegate)!==null&&l!==void 0?l:v},c.prototype.setDelegate=function(l){this._delegate=l},c.prototype.getDelegateTracer=function(l,h){var p;return(p=this._delegate)===null||p===void 0?void 0:p.getTracer(l,h)},c}();s.ProxyTracerProvider=_}),ls=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Mi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SamplingDecision=void 0;var T;(function(d){d[d.NOT_RECORD=0]="NOT_RECORD",d[d.RECORD=1]="RECORD",d[d.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(T=s.SamplingDecision||(s.SamplingDecision={}))}),ui=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Gn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanKind=void 0;var T;(function(d){d[d.INTERNAL=0]="INTERNAL",d[d.SERVER=1]="SERVER",d[d.CLIENT=2]="CLIENT",d[d.PRODUCER=3]="PRODUCER",d[d.CONSUMER=4]="CONSUMER"})(T=s.SpanKind||(s.SpanKind={}))}),Ut=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Yr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),et=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanStatusCode=void 0;var T;(function(d){d[d.UNSET=0]="UNSET",d[d.OK=1]="OK",d[d.ERROR=2]="ERROR"})(T=s.SpanStatusCode||(s.SpanStatusCode={}))}),Or=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),kr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Hn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),li=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ci=O(s=>{"use strict";var T=s&&s.__spreadArray||function(_,c){for(var l=0,h=c.length,p=_.length;l<h;l++,p++)_[p]=c[l];return _};Object.defineProperty(s,"__esModule",{value:!0}),s.NoopContextManager=void 0;var d=at(),v=function(){function _(){}return _.prototype.active=function(){return d.ROOT_CONTEXT},_.prototype.with=function(c,l,h){for(var p=[],g=3;g<arguments.length;g++)p[g-3]=arguments[g];return l.call.apply(l,T([h],p))},_.prototype.bind=function(c,l){return l},_.prototype.enable=function(){return this},_.prototype.disable=function(){return this},_}();s.NoopContextManager=v}),Dr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s._globalThis=void 0,s._globalThis=typeof globalThis=="object"?globalThis:global}),ho=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Dr(),s)}),En=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ho(),s)}),po=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="1.0.1"}),mo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isCompatible=s._makeCompatibilityCheck=void 0;var T=po(),d=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function v(_){var c=new Set([_]),l=new Set,h=_.match(d);if(!h)return function(){return!1};var p={major:+h[1],minor:+h[2],patch:+h[3]};function g(m){return l.add(m),!1}function y(m){return c.add(m),!0}return function(m){if(c.has(m))return!0;if(l.has(m))return!1;var b=m.match(d);if(!b)return g(m);var w={major:+b[1],minor:+b[2],patch:+b[3]};return p.major!==w.major?g(m):p.major===0?p.minor===w.minor&&p.patch<=w.patch?y(m):g(m):p.minor<=w.minor?y(m):g(m)}}s._makeCompatibilityCheck=v,s.isCompatible=v(T.VERSION)}),Mr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unregisterGlobal=s.getGlobal=s.registerGlobal=void 0;var T=En(),d=po(),v=mo(),_=d.VERSION.split(".")[0],c=Symbol.for("opentelemetry.js.api."+_),l=T._globalThis;function h(y,m,b,w){var k;w===void 0&&(w=!1);var R=l[c]=(k=l[c])!==null&&k!==void 0?k:{version:d.VERSION};if(!w&&R[y]){var A=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+y);return b.error(A.stack||A.message),!1}if(R.version!==d.VERSION){var A=new Error("@opentelemetry/api: All API registration versions must match");return b.error(A.stack||A.message),!1}return R[y]=m,b.debug("@opentelemetry/api: Registered a global for "+y+" v"+d.VERSION+"."),!0}s.registerGlobal=h;function p(y){var m,b,w=(m=l[c])===null||m===void 0?void 0:m.version;if(!(!w||!v.isCompatible(w)))return(b=l[c])===null||b===void 0?void 0:b[y]}s.getGlobal=p;function g(y,m){m.debug("@opentelemetry/api: Unregistering a global for "+y+" v"+d.VERSION+".");var b=l[c];b&&delete b[y]}s.unregisterGlobal=g}),cs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagComponentLogger=void 0;var T=Mr(),d=function(){function _(c){this._namespace=c.namespace||"DiagComponentLogger"}return _.prototype.debug=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("debug",this._namespace,c)},_.prototype.error=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("error",this._namespace,c)},_.prototype.info=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("info",this._namespace,c)},_.prototype.warn=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("warn",this._namespace,c)},_.prototype.verbose=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("verbose",this._namespace,c)},_}();s.DiagComponentLogger=d;function v(_,c,l){var h=T.getGlobal("diag");if(h)return l.unshift(c),h[_].apply(h,l)}}),di=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.createLogLevelDiagLogger=void 0;var T=we();function d(v,_){v<T.DiagLogLevel.NONE?v=T.DiagLogLevel.NONE:v>T.DiagLogLevel.ALL&&(v=T.DiagLogLevel.ALL),_=_||{};function c(l,h){var p=_[l];return typeof p=="function"&&v>=h?p.bind(_):function(){}}return{error:c("error",T.DiagLogLevel.ERROR),warn:c("warn",T.DiagLogLevel.WARN),info:c("info",T.DiagLogLevel.INFO),debug:c("debug",T.DiagLogLevel.DEBUG),verbose:c("verbose",T.DiagLogLevel.VERBOSE)}}s.createLogLevelDiagLogger=d}),Zt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagAPI=void 0;var T=cs(),d=di(),v=we(),_=Mr(),c="diag",l=function(){function h(){function p(y){return function(){var m=_.getGlobal("diag");if(m)return m[y].apply(m,arguments)}}var g=this;g.setLogger=function(y,m){var b,w;if(m===void 0&&(m=v.DiagLogLevel.INFO),y===g){var k=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return g.error((b=k.stack)!==null&&b!==void 0?b:k.message),!1}var R=_.getGlobal("diag"),A=d.createLogLevelDiagLogger(m,y);if(R){var D=(w=new Error().stack)!==null&&w!==void 0?w:"<failed to generate stacktrace>";R.warn("Current logger will be overwritten from "+D),A.warn("Current logger will overwrite one already registered from "+D)}return _.registerGlobal("diag",A,g,!0)},g.disable=function(){_.unregisterGlobal(c,g)},g.createComponentLogger=function(y){return new T.DiagComponentLogger(y)},g.verbose=p("verbose"),g.debug=p("debug"),g.info=p("info"),g.warn=p("warn"),g.error=p("error")}return h.instance=function(){return this._instance||(this._instance=new h),this._instance},h}();s.DiagAPI=l}),Hu=O(s=>{"use strict";var T=s&&s.__spreadArray||function(p,g){for(var y=0,m=g.length,b=p.length;y<m;y++,b++)p[b]=g[y];return p};Object.defineProperty(s,"__esModule",{value:!0}),s.ContextAPI=void 0;var d=ci(),v=Mr(),_=Zt(),c="context",l=new d.NoopContextManager,h=function(){function p(){}return p.getInstance=function(){return this._instance||(this._instance=new p),this._instance},p.prototype.setGlobalContextManager=function(g){return v.registerGlobal(c,g,_.DiagAPI.instance())},p.prototype.active=function(){return this._getContextManager().active()},p.prototype.with=function(g,y,m){for(var b,w=[],k=3;k<arguments.length;k++)w[k-3]=arguments[k];return(b=this._getContextManager()).with.apply(b,T([g,y,m],w))},p.prototype.bind=function(g,y){return this._getContextManager().bind(g,y)},p.prototype._getContextManager=function(){return v.getGlobal(c)||l},p.prototype.disable=function(){this._getContextManager().disable(),v.unregisterGlobal(c,_.DiagAPI.instance())},p}();s.ContextAPI=h}),Bu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceAPI=void 0;var T=Mr(),d=Di(),v=Tt(),_=Ft(),c=Zt(),l="trace",h=function(){function p(){this._proxyTracerProvider=new d.ProxyTracerProvider,this.wrapSpanContext=v.wrapSpanContext,this.isSpanContextValid=v.isSpanContextValid,this.deleteSpan=_.deleteSpan,this.getSpan=_.getSpan,this.getSpanContext=_.getSpanContext,this.setSpan=_.setSpan,this.setSpanContext=_.setSpanContext}return p.getInstance=function(){return this._instance||(this._instance=new p),this._instance},p.prototype.setGlobalTracerProvider=function(g){return this._proxyTracerProvider.setDelegate(g),T.registerGlobal(l,this._proxyTracerProvider,c.DiagAPI.instance())},p.prototype.getTracerProvider=function(){return T.getGlobal(l)||this._proxyTracerProvider},p.prototype.getTracer=function(g,y){return this.getTracerProvider().getTracer(g,y)},p.prototype.disable=function(){T.unregisterGlobal(l,c.DiagAPI.instance()),this._proxyTracerProvider=new d.ProxyTracerProvider},p}();s.TraceAPI=h}),fo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTextMapPropagator=void 0;var T=function(){function d(){}return d.prototype.inject=function(v,_){},d.prototype.extract=function(v,_){return v},d.prototype.fields=function(){return[]},d}();s.NoopTextMapPropagator=T}),Zs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.deleteBaggage=s.setBaggage=s.getBaggage=void 0;var T=at(),d=T.createContextKey("OpenTelemetry Baggage Key");function v(l){return l.getValue(d)||void 0}s.getBaggage=v;function _(l,h){return l.setValue(d,h)}s.setBaggage=_;function c(l){return l.deleteValue(d)}s.deleteBaggage=c}),Xr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropagationAPI=void 0;var T=Mr(),d=fo(),v=Be(),_=Zs(),c=K(),l=Zt(),h="propagation",p=new d.NoopTextMapPropagator,g=function(){function y(){this.createBaggage=c.createBaggage,this.getBaggage=_.getBaggage,this.setBaggage=_.setBaggage,this.deleteBaggage=_.deleteBaggage}return y.getInstance=function(){return this._instance||(this._instance=new y),this._instance},y.prototype.setGlobalPropagator=function(m){return T.registerGlobal(h,m,l.DiagAPI.instance())},y.prototype.inject=function(m,b,w){return w===void 0&&(w=v.defaultTextMapSetter),this._getGlobalPropagator().inject(m,b,w)},y.prototype.extract=function(m,b,w){return w===void 0&&(w=v.defaultTextMapGetter),this._getGlobalPropagator().extract(m,b,w)},y.prototype.fields=function(){return this._getGlobalPropagator().fields()},y.prototype.disable=function(){T.unregisterGlobal(h,l.DiagAPI.instance())},y.prototype._getGlobalPropagator=function(){return T.getGlobal(h)||p},y}();s.PropagationAPI=g}),_t=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(g,y,m,b){b===void 0&&(b=m),Object.defineProperty(g,b,{enumerable:!0,get:function(){return y[m]}})}:function(g,y,m,b){b===void 0&&(b=m),g[b]=y[m]}),d=s&&s.__exportStar||function(g,y){for(var m in g)m!=="default"&&!Object.prototype.hasOwnProperty.call(y,m)&&T(y,g,m)};Object.defineProperty(s,"__esModule",{value:!0}),s.diag=s.propagation=s.trace=s.context=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.baggageEntryMetadataFromString=void 0,d(ce(),s);var v=K();Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return v.baggageEntryMetadataFromString}}),d(ue(),s),d(me(),s),d(ke(),s),d(Be(),s),d(We(),s),d(it(),s),d(Er(),s),d(Di(),s),d(ls(),s),d(Mi(),s),d(ui(),s),d(Gn(),s),d(Ut(),s),d(Yr(),s),d(et(),s),d(Nt(),s),d(Or(),s),d(kr(),s),d(Hn(),s);var _=Tt();Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return _.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return _.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return _.INVALID_SPAN_CONTEXT}}),Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}}),d(at(),s),d(li(),s);var c=Hu();s.context=c.ContextAPI.getInstance();var l=Bu();s.trace=l.TraceAPI.getInstance();var h=Xr();s.propagation=h.PropagationAPI.getInstance();var p=Zt();s.diag=p.DiagAPI.instance(),s.default={trace:s.trace,context:s.context,propagation:s.propagation,diag:s.diag}}),xi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTracingSuppressed=s.unsuppressTracing=s.suppressTracing=void 0;var T=_t(),d=T.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function v(l){return l.setValue(d,!0)}s.suppressTracing=v;function _(l){return l.deleteValue(d)}s.unsuppressTracing=_;function c(l){return l.getValue(d)===!0}s.isTracingSuppressed=c}),Bn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BAGGAGE_MAX_TOTAL_LENGTH=s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=s.BAGGAGE_MAX_NAME_VALUE_PAIRS=s.BAGGAGE_HEADER=s.BAGGAGE_ITEMS_SEPARATOR=s.BAGGAGE_PROPERTIES_SEPARATOR=s.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,s.BAGGAGE_KEY_PAIR_SEPARATOR="=",s.BAGGAGE_PROPERTIES_SEPARATOR=";",s.BAGGAGE_ITEMS_SEPARATOR=",",s.BAGGAGE_HEADER="baggage",s.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,s.BAGGAGE_MAX_TOTAL_LENGTH=8192}),ds=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseKeyPairsIntoRecord=s.parsePairKeyValue=s.getKeyPairs=s.serializeKeyPairs=void 0;var T=_t(),d=Bn(),v=h=>h.reduce((p,g)=>{let y=`${p}${p!==""?d.BAGGAGE_ITEMS_SEPARATOR:""}${g}`;return y.length>d.BAGGAGE_MAX_TOTAL_LENGTH?p:y},"");s.serializeKeyPairs=v;var _=h=>h.getAllEntries().map(([p,g])=>`${encodeURIComponent(p)}=${encodeURIComponent(g.value)}`);s.getKeyPairs=_;var c=h=>{let p=h.split(d.BAGGAGE_PROPERTIES_SEPARATOR);if(p.length<=0)return;let g=p.shift();if(!g)return;let y=g.split(d.BAGGAGE_KEY_PAIR_SEPARATOR);if(y.length!==2)return;let m=decodeURIComponent(y[0].trim()),b=decodeURIComponent(y[1].trim()),w;return p.length>0&&(w=T.baggageEntryMetadataFromString(p.join(d.BAGGAGE_PROPERTIES_SEPARATOR))),{key:m,value:b,metadata:w}};s.parsePairKeyValue=c;var l=h=>typeof h!="string"||h.length===0?{}:h.split(d.BAGGAGE_ITEMS_SEPARATOR).map(p=>s.parsePairKeyValue(p)).filter(p=>p!==void 0&&p.value.length>0).reduce((p,g)=>(p[g.key]=g.value,p),{});s.parseKeyPairsIntoRecord=l}),Vn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpBaggagePropagator=void 0;var T=_t(),d=xi(),v=Bn(),_=ds(),c=class{inject(l,h,p){let g=T.propagation.getBaggage(l);if(!g||d.isTracingSuppressed(l))return;let y=_.getKeyPairs(g).filter(b=>b.length<=v.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,v.BAGGAGE_MAX_NAME_VALUE_PAIRS),m=_.serializeKeyPairs(y);m.length>0&&p.set(h,v.BAGGAGE_HEADER,m)}extract(l,h,p){let g=p.get(h,v.BAGGAGE_HEADER);if(!g)return l;let y={};return g.length===0||(g.split(v.BAGGAGE_ITEMS_SEPARATOR).forEach(m=>{let b=_.parsePairKeyValue(m);if(b){let w={value:b.value};b.metadata&&(w.metadata=b.metadata),y[b.key]=w}}),Object.entries(y).length===0)?l:T.propagation.setBaggage(l,T.propagation.createBaggage(y))}fields(){return[v.BAGGAGE_HEADER]}};s.HttpBaggagePropagator=c}),Vu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isAttributeValue=s.sanitizeAttributes=void 0;function T(c){let l={};if(c==null||typeof c!="object")return l;for(let[h,p]of Object.entries(c))d(p)&&(Array.isArray(p)?l[h]=p.slice():l[h]=p);return l}s.sanitizeAttributes=T;function d(c){return c==null?!0:Array.isArray(c)?v(c):_(c)}s.isAttributeValue=d;function v(c){let l;for(let h of c)if(h!=null){if(!l){if(_(h)){l=typeof h;continue}return!1}if(typeof h!==l)return!1}return!0}function _(c){switch(typeof c){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),go=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.loggingErrorHandler=void 0;var T=_t();function d(){return c=>{T.diag.error(v(c))}}s.loggingErrorHandler=d;function v(c){return typeof c=="string"?c:JSON.stringify(_(c))}function _(c){let l={},h=c;for(;h!==null;)Object.getOwnPropertyNames(h).forEach(p=>{if(l[p])return;let g=h[p];g&&(l[p]=String(g))}),h=Object.getPrototypeOf(h);return l}}),kn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.globalErrorHandler=s.setGlobalErrorHandler=void 0;var T=go(),d=T.loggingErrorHandler();function v(c){d=c}s.setGlobalErrorHandler=v;var _=c=>{try{d(c)}catch(l){}};s.globalErrorHandler=_}),hs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TracesSamplerValues=void 0;var T;(function(d){d.AlwaysOff="always_off",d.AlwaysOn="always_on",d.ParentBasedAlwaysOff="parentbased_always_off",d.ParentBasedAlwaysOn="parentbased_always_on",d.ParentBasedTraceIdRatio="parentbased_traceidratio",d.TraceIdRatio="traceidratio"})(T=s.TracesSamplerValues||(s.TracesSamplerValues={}))}),ea=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseEnvironment=s.DEFAULT_ENVIRONMENT=void 0;var T=_t(),d=hs(),v=",",_=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function c(w){return _.indexOf(w)>-1}var l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function h(w){return l.indexOf(w)>-1}s.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:T.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:d.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function p(w,k,R,A=-1/0,D=1/0){if(typeof R[w]!="undefined"){let B=Number(R[w]);isNaN(B)||(B<A?k[w]=A:B>D?k[w]=D:k[w]=B)}}function g(w,k,R,A=v){let D=R[w];typeof D=="string"&&(k[w]=D.split(A).map(B=>B.trim()))}var y={ALL:T.DiagLogLevel.ALL,VERBOSE:T.DiagLogLevel.VERBOSE,DEBUG:T.DiagLogLevel.DEBUG,INFO:T.DiagLogLevel.INFO,WARN:T.DiagLogLevel.WARN,ERROR:T.DiagLogLevel.ERROR,NONE:T.DiagLogLevel.NONE};function m(w,k,R){let A=R[w];if(typeof A=="string"){let D=y[A.toUpperCase()];D!=null&&(k[w]=D)}}function b(w){let k={};for(let R in s.DEFAULT_ENVIRONMENT){let A=R;switch(A){case"OTEL_LOG_LEVEL":m(A,k,w);break;default:if(c(A))p(A,k,w);else if(h(A))g(A,k,w);else{let D=w[A];typeof D!="undefined"&&D!==null&&(k[A]=String(D))}}}return k}s.parseEnvironment=b}),vo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getEnv=void 0;var T=x(2087),d=ea();function v(){let _=d.parseEnvironment(process.env);return Object.assign({HOSTNAME:T.hostname()},d.DEFAULT_ENVIRONMENT,_)}s.getEnv=v}),yo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBase64=void 0;function T(d){let v=d.length,_="";for(let c=0;c<v;c+=2){let l=d.substring(c,c+2),h=parseInt(l,16);_+=String.fromCharCode(h)}return Buffer.from(_,"ascii").toString("base64")}s.hexToBase64=T}),hi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RandomIdGenerator=void 0;var T=8,d=16,v=class{constructor(){this.generateTraceId=c(d),this.generateSpanId=c(T)}};s.RandomIdGenerator=v;var _=Buffer.allocUnsafe(d);function c(l){return function(){for(let h=0;h<l/4;h++)_.writeUInt32BE(Math.random()*2**32>>>0,h*4);for(let h=0;h<l&&!(_[h]>0);h++)h===l-1&&(_[l-1]=1);return _.toString("hex",0,l)}}}),bo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.otperformance=void 0;var T=x(630);s.otperformance=T.performance}),ta=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="0.23.0"}),ju=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RpcGrpcStatusCodeValues=s.MessagingOperationValues=s.MessagingDestinationKindValues=s.HttpFlavorValues=s.NetTransportValues=s.FaasInvokedProviderValues=s.FaasDocumentOperationValues=s.FaasTriggerValues=s.DbCassandraConsistencyLevelValues=s.DbSystemValues=s.SemanticAttributes=void 0,s.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var T;(function(m){m.OTHER_SQL="other_sql",m.MSSQL="mssql",m.MYSQL="mysql",m.ORACLE="oracle",m.DB2="db2",m.POSTGRESQL="postgresql",m.REDSHIFT="redshift",m.HIVE="hive",m.CLOUDSCAPE="cloudscape",m.HSQLDB="hsqldb",m.PROGRESS="progress",m.MAXDB="maxdb",m.HANADB="hanadb",m.INGRES="ingres",m.FIRSTSQL="firstsql",m.EDB="edb",m.CACHE="cache",m.ADABAS="adabas",m.FIREBIRD="firebird",m.DERBY="derby",m.FILEMAKER="filemaker",m.INFORMIX="informix",m.INSTANTDB="instantdb",m.INTERBASE="interbase",m.MARIADB="mariadb",m.NETEZZA="netezza",m.PERVASIVE="pervasive",m.POINTBASE="pointbase",m.SQLITE="sqlite",m.SYBASE="sybase",m.TERADATA="teradata",m.VERTICA="vertica",m.H2="h2",m.COLDFUSION="coldfusion",m.CASSANDRA="cassandra",m.HBASE="hbase",m.MONGODB="mongodb",m.REDIS="redis",m.COUCHBASE="couchbase",m.COUCHDB="couchdb",m.COSMOSDB="cosmosdb",m.DYNAMODB="dynamodb",m.NEO4J="neo4j",m.GEODE="geode",m.ELASTICSEARCH="elasticsearch",m.MEMCACHED="memcached",m.COCKROACHDB="cockroachdb"})(T=s.DbSystemValues||(s.DbSystemValues={}));var d;(function(m){m.ALL="all",m.EACH_QUORUM="each_quorum",m.QUORUM="quorum",m.LOCAL_QUORUM="local_quorum",m.ONE="one",m.TWO="two",m.THREE="three",m.LOCAL_ONE="local_one",m.ANY="any",m.SERIAL="serial",m.LOCAL_SERIAL="local_serial"})(d=s.DbCassandraConsistencyLevelValues||(s.DbCassandraConsistencyLevelValues={}));var v;(function(m){m.DATASOURCE="datasource",m.HTTP="http",m.PUBSUB="pubsub",m.TIMER="timer",m.OTHER="other"})(v=s.FaasTriggerValues||(s.FaasTriggerValues={}));var _;(function(m){m.INSERT="insert",m.EDIT="edit",m.DELETE="delete"})(_=s.FaasDocumentOperationValues||(s.FaasDocumentOperationValues={}));var c;(function(m){m.AWS="aws",m.AZURE="azure",m.GCP="gcp"})(c=s.FaasInvokedProviderValues||(s.FaasInvokedProviderValues={}));var l;(function(m){m.IP_TCP="ip_tcp",m.IP_UDP="ip_udp",m.IP="ip",m.UNIX="unix",m.PIPE="pipe",m.INPROC="inproc",m.OTHER="other"})(l=s.NetTransportValues||(s.NetTransportValues={}));var h;(function(m){m.HTTP_1_0="1.0",m.HTTP_1_1="1.1",m.HTTP_2_0="2.0",m.SPDY="SPDY",m.QUIC="QUIC"})(h=s.HttpFlavorValues||(s.HttpFlavorValues={}));var p;(function(m){m.QUEUE="queue",m.TOPIC="topic"})(p=s.MessagingDestinationKindValues||(s.MessagingDestinationKindValues={}));var g;(function(m){m.RECEIVE="receive",m.PROCESS="process"})(g=s.MessagingOperationValues||(s.MessagingOperationValues={}));var y;(function(m){m[m.OK=0]="OK",m[m.CANCELLED=1]="CANCELLED",m[m.UNKNOWN=2]="UNKNOWN",m[m.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",m[m.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",m[m.NOT_FOUND=5]="NOT_FOUND",m[m.ALREADY_EXISTS=6]="ALREADY_EXISTS",m[m.PERMISSION_DENIED=7]="PERMISSION_DENIED",m[m.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",m[m.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",m[m.ABORTED=10]="ABORTED",m[m.OUT_OF_RANGE=11]="OUT_OF_RANGE",m[m.UNIMPLEMENTED=12]="UNIMPLEMENTED",m[m.INTERNAL=13]="INTERNAL",m[m.UNAVAILABLE=14]="UNAVAILABLE",m[m.DATA_LOSS=15]="DATA_LOSS",m[m.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(y=s.RpcGrpcStatusCodeValues||(s.RpcGrpcStatusCodeValues={}))}),Rt=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ju(),s)}),Sr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetrySdkLanguageValues=s.OsTypeValues=s.HostArchValues=s.AwsEcsLaunchtypeValues=s.CloudPlatformValues=s.CloudProviderValues=s.ResourceAttributes=void 0,s.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var T;(function(h){h.AWS="aws",h.AZURE="azure",h.GCP="gcp"})(T=s.CloudProviderValues||(s.CloudProviderValues={}));var d;(function(h){h.AWS_EC2="aws_ec2",h.AWS_ECS="aws_ecs",h.AWS_EKS="aws_eks",h.AWS_LAMBDA="aws_lambda",h.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",h.AZURE_VM="azure_vm",h.AZURE_CONTAINER_INSTANCES="azure_container_instances",h.AZURE_AKS="azure_aks",h.AZURE_FUNCTIONS="azure_functions",h.AZURE_APP_SERVICE="azure_app_service",h.GCP_COMPUTE_ENGINE="gcp_compute_engine",h.GCP_CLOUD_RUN="gcp_cloud_run",h.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",h.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",h.GCP_APP_ENGINE="gcp_app_engine"})(d=s.CloudPlatformValues||(s.CloudPlatformValues={}));var v;(function(h){h.EC2="ec2",h.FARGATE="fargate"})(v=s.AwsEcsLaunchtypeValues||(s.AwsEcsLaunchtypeValues={}));var _;(function(h){h.AMD64="amd64",h.ARM32="arm32",h.ARM64="arm64",h.IA64="ia64",h.PPC32="ppc32",h.PPC64="ppc64",h.X86="x86"})(_=s.HostArchValues||(s.HostArchValues={}));var c;(function(h){h.WINDOWS="windows",h.LINUX="linux",h.DARWIN="darwin",h.FREEBSD="freebsd",h.NETBSD="netbsd",h.OPENBSD="openbsd",h.DRAGONFLYBSD="dragonflybsd",h.HPUX="hpux",h.AIX="aix",h.SOLARIS="solaris",h.Z_OS="z_os"})(c=s.OsTypeValues||(s.OsTypeValues={}));var l;(function(h){h.CPP="cpp",h.DOTNET="dotnet",h.ERLANG="erlang",h.GO="go",h.JAVA="java",h.NODEJS="nodejs",h.PHP="php",h.PYTHON="python",h.RUBY="ruby",h.WEBJS="webjs"})(l=s.TelemetrySdkLanguageValues||(s.TelemetrySdkLanguageValues={}))}),Je=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Sr(),s)}),pi=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Rt(),s),d(Je(),s)}),_o=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SDK_INFO=void 0;var T=ta(),d=pi();s.SDK_INFO={[d.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[d.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[d.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:d.TelemetrySdkLanguageValues.NODEJS,[d.ResourceAttributes.TELEMETRY_SDK_VERSION]:T.VERSION}}),zu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unrefTimer=void 0;function T(d){d.unref()}s.unrefTimer=T}),Qu=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(vo(),s),d(yo(),s),d(hi(),s),d(bo(),s),d(_o(),s),d(zu(),s)}),pr=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Qu(),s)}),wo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTimeInput=s.isTimeInputHrTime=s.hrTimeToMicroseconds=s.hrTimeToMilliseconds=s.hrTimeToNanoseconds=s.hrTimeToTimeStamp=s.hrTimeDuration=s.timeInputToHrTime=s.hrTime=void 0;var T=pr(),d=9,v=Math.pow(10,d);function _(R){let A=R/1e3,D=Math.trunc(A),B=Number((A-D).toFixed(d))*v;return[D,B]}function c(){let R=T.otperformance.timeOrigin;if(typeof R!="number"){let A=T.otperformance;R=A.timing&&A.timing.fetchStart}return R}function l(R){let A=_(c()),D=_(typeof R=="number"?R:T.otperformance.now()),B=A[0]+D[0],X=A[1]+D[1];return X>v&&(X-=v,B+=1),[B,X]}s.hrTime=l;function h(R){if(w(R))return R;if(typeof R=="number")return R<c()?l(R):_(R);if(R instanceof Date)return _(R.getTime());throw TypeError("Invalid input type")}s.timeInputToHrTime=h;function p(R,A){let D=A[0]-R[0],B=A[1]-R[1];return B<0&&(D-=1,B+=v),[D,B]}s.hrTimeDuration=p;function g(R){let A=d,D=`${"0".repeat(A)}${R[1]}Z`,B=D.substr(D.length-A-1);return new Date(R[0]*1e3).toISOString().replace("000Z",B)}s.hrTimeToTimeStamp=g;function y(R){return R[0]*v+R[1]}s.hrTimeToNanoseconds=y;function m(R){return Math.round(R[0]*1e3+R[1]/1e6)}s.hrTimeToMilliseconds=m;function b(R){return Math.round(R[0]*1e6+R[1]/1e3)}s.hrTimeToMicroseconds=b;function w(R){return Array.isArray(R)&&R.length===2&&typeof R[0]=="number"&&typeof R[1]=="number"}s.isTimeInputHrTime=w;function k(R){return w(R)||typeof R=="number"||R instanceof Date}s.isTimeInput=k}),Wu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ku=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExportResultCode=void 0;var T;(function(d){d[d.SUCCESS=0]="SUCCESS",d[d.FAILED=1]="FAILED"})(T=s.ExportResultCode||(s.ExportResultCode={}))}),Eo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CompositePropagator=void 0;var T=_t(),d=class{constructor(v={}){var _;this._propagators=(_=v.propagators)!==null&&_!==void 0?_:[],this._fields=Array.from(new Set(this._propagators.map(c=>typeof c.fields=="function"?c.fields():[]).reduce((c,l)=>c.concat(l),[])))}inject(v,_,c){for(let l of this._propagators)try{l.inject(v,_,c)}catch(h){T.diag.warn(`Failed to inject with ${l.constructor.name}. Err: ${h.message}`)}}extract(v,_,c){return this._propagators.reduce((l,h)=>{try{return h.extract(l,_,c)}catch(p){T.diag.warn(`Failed to inject with ${h.constructor.name}. Err: ${p.message}`)}return l},v)}fields(){return this._fields.slice()}};s.CompositePropagator=d}),Yu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.validateValue=s.validateKey=void 0;var T="[_0-9a-z-*/]",d=`[a-z]${T}{0,255}`,v=`[a-z0-9]${T}{0,240}@[a-z]${T}{0,13}`,_=new RegExp(`^(?:${d}|${v})$`),c=/^[ -~]{0,255}[!-~]$/,l=/,|=/;function h(g){return _.test(g)}s.validateKey=h;function p(g){return c.test(g)&&!l.test(g)}s.validateValue=p}),ko=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceState=void 0;var T=Yu(),d=32,v=512,_=",",c="=",l=class{constructor(h){this._internalState=new Map,h&&this._parse(h)}set(h,p){let g=this._clone();return g._internalState.has(h)&&g._internalState.delete(h),g._internalState.set(h,p),g}unset(h){let p=this._clone();return p._internalState.delete(h),p}get(h){return this._internalState.get(h)}serialize(){return this._keys().reduce((h,p)=>(h.push(p+c+this.get(p)),h),[]).join(_)}_parse(h){h.length>v||(this._internalState=h.split(_).reverse().reduce((p,g)=>{let y=g.trim(),m=y.indexOf(c);if(m!==-1){let b=y.slice(0,m),w=y.slice(m+1,g.length);T.validateKey(b)&&T.validateValue(w)&&p.set(b,w)}return p},new Map),this._internalState.size>d&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,d))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let h=new l;return h._internalState=new Map(this._internalState),h}};s.TraceState=l}),Fi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpTraceContextPropagator=s.parseTraceParent=s.TRACE_STATE_HEADER=s.TRACE_PARENT_HEADER=void 0;var T=_t(),d=xi(),v=ko();s.TRACE_PARENT_HEADER="traceparent",s.TRACE_STATE_HEADER="tracestate";var _="00",c="(?!ff)[\\da-f]{2}",l="(?![0]{32})[\\da-f]{32}",h="(?![0]{16})[\\da-f]{16}",p="[\\da-f]{2}",g=new RegExp(`^\\s?(${c})-(${l})-(${h})-(${p})(-.*)?\\s?$`);function y(b){let w=g.exec(b);return!w||w[1]==="00"&&w[5]?null:{traceId:w[2],spanId:w[3],traceFlags:parseInt(w[4],16)}}s.parseTraceParent=y;var m=class{inject(b,w,k){let R=T.trace.getSpanContext(b);if(!R||d.isTracingSuppressed(b)||!T.isSpanContextValid(R))return;let A=`${_}-${R.traceId}-${R.spanId}-0${Number(R.traceFlags||T.TraceFlags.NONE).toString(16)}`;k.set(w,s.TRACE_PARENT_HEADER,A),R.traceState&&k.set(w,s.TRACE_STATE_HEADER,R.traceState.serialize())}extract(b,w,k){let R=k.get(w,s.TRACE_PARENT_HEADER);if(!R)return b;let A=Array.isArray(R)?R[0]:R;if(typeof A!="string")return b;let D=y(A);if(!D)return b;D.isRemote=!0;let B=k.get(w,s.TRACE_STATE_HEADER);if(B){let X=Array.isArray(B)?B.join(","):B;D.traceState=new v.TraceState(typeof X=="string"?X:void 0)}return T.trace.setSpanContext(b,D)}fields(){return[s.TRACE_PARENT_HEADER,s.TRACE_STATE_HEADER]}};s.HttpTraceContextPropagator=m}),ra=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Xu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getRPCMetadata=s.deleteRPCMetadata=s.setRPCMetadata=s.RPCType=void 0;var T=_t(),d=T.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),v;(function(h){h.HTTP="http"})(v=s.RPCType||(s.RPCType={}));function _(h,p){return h.setValue(d,p)}s.setRPCMetadata=_;function c(h){return h.deleteValue(d)}s.deleteRPCMetadata=c;function l(h){return h.getValue(d)}s.getRPCMetadata=l}),ps=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOffSampler=void 0;var T=_t(),d=class{shouldSample(){return{decision:T.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};s.AlwaysOffSampler=d}),ms=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOnSampler=void 0;var T=_t(),d=class{shouldSample(){return{decision:T.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};s.AlwaysOnSampler=d}),Ju=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ParentBasedSampler=void 0;var T=_t(),d=kn(),v=ps(),_=ms(),c=class{constructor(l){var h,p,g,y;this._root=l.root,this._root||(d.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new _.AlwaysOnSampler),this._remoteParentSampled=(h=l.remoteParentSampled)!==null&&h!==void 0?h:new _.AlwaysOnSampler,this._remoteParentNotSampled=(p=l.remoteParentNotSampled)!==null&&p!==void 0?p:new v.AlwaysOffSampler,this._localParentSampled=(g=l.localParentSampled)!==null&&g!==void 0?g:new _.AlwaysOnSampler,this._localParentNotSampled=(y=l.localParentNotSampled)!==null&&y!==void 0?y:new v.AlwaysOffSampler}shouldSample(l,h,p,g,y,m){let b=T.trace.getSpanContext(l);return!b||!T.isSpanContextValid(b)?this._root.shouldSample(l,h,p,g,y,m):b.isRemote?b.traceFlags&T.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(l,h,p,g,y,m):this._remoteParentNotSampled.shouldSample(l,h,p,g,y,m):b.traceFlags&T.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(l,h,p,g,y,m):this._localParentNotSampled.shouldSample(l,h,p,g,y,m)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};s.ParentBasedSampler=c}),Zu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceIdRatioBasedSampler=void 0;var T=_t(),d=class{constructor(v=0){this._ratio=v,this._ratio=this._normalize(v),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(v,_){return{decision:T.isValidTraceId(_)&&this._accumulate(_)<this._upperBound?T.SamplingDecision.RECORD_AND_SAMPLED:T.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(v){return typeof v!="number"||isNaN(v)?0:v>=1?1:v<=0?0:v}_accumulate(v){let _=0;for(let c=0;c<v.length/8;c++){let l=c*8,h=parseInt(v.slice(l,l+8),16);_=(_^h)>>>0}return _}};s.TraceIdRatioBasedSampler=d}),el=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isUrlIgnored=s.urlMatches=void 0;function T(v,_){return typeof _=="string"?v===_:_.test(v)}s.urlMatches=T;function d(v,_){if(!_)return!1;for(let c of _)if(T(v,c))return!0;return!1}s.isUrlIgnored=d}),tl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isWrapped=void 0;function T(d){return typeof d=="function"&&typeof d.__original=="function"&&typeof d.__unwrap=="function"&&d.__wrapped===!0}s.isWrapped=T}),xr=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),s.baggageUtils=void 0,d(Vn(),s),d(Vu(),s),d(kn(),s),d(go(),s),d(wo(),s),d(Wu(),s),d(Ku(),s),d(ta(),s),s.baggageUtils=ds(),d(pr(),s),d(Eo(),s),d(Fi(),s),d(ra(),s),d(Xu(),s),d(ps(),s),d(ms(),s),d(Ju(),s),d(Zu(),s),d(xi(),s),d(ko(),s),d(ea(),s),d(hs(),s),d(el(),s),d(tl(),s),d(ta(),s)}),rl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExceptionEventName=void 0,s.ExceptionEventName="exception"}),So=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Span=void 0;var T=_t(),d=xr(),v=pi(),_=rl(),c=class{constructor(l,h,p,g,y,m,b=[],w=d.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:T.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=p,this._spanContext=g,this.parentSpanId=m,this.kind=y,this.links=b,this.startTime=d.timeInputToHrTime(w),this.resource=l.resource,this.instrumentationLibrary=l.instrumentationLibrary,this._spanLimits=l.getSpanLimits(),this._spanProcessor=l.getActiveSpanProcessor(),this._spanProcessor.onStart(this,h)}spanContext(){return this._spanContext}setAttribute(l,h){return h==null||this._isSpanEnded()?this:l.length===0?(T.diag.warn(`Invalid attribute key: ${l}`),this):d.isAttributeValue(h)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,l)?this:(this.attributes[l]=h,this):(T.diag.warn(`Invalid attribute value set for key: ${l}`),this)}setAttributes(l){for(let[h,p]of Object.entries(l))this.setAttribute(h,p);return this}addEvent(l,h,p){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(T.diag.warn("Dropping extra events."),this.events.shift()),d.isTimeInput(h)&&(typeof p=="undefined"&&(p=h),h=void 0),typeof p=="undefined"&&(p=d.hrTime()),this.events.push({name:l,attributes:h,time:d.timeInputToHrTime(p)}),this)}setStatus(l){return this._isSpanEnded()?this:(this.status=l,this)}updateName(l){return this._isSpanEnded()?this:(this.name=l,this)}end(l=d.hrTime()){if(this._isSpanEnded()){T.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=d.timeInputToHrTime(l),this._duration=d.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&T.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(l,h=d.hrTime()){let p={};typeof l=="string"?p[v.SemanticAttributes.EXCEPTION_MESSAGE]=l:l&&(l.code?p[v.SemanticAttributes.EXCEPTION_TYPE]=l.code.toString():l.name&&(p[v.SemanticAttributes.EXCEPTION_TYPE]=l.name),l.message&&(p[v.SemanticAttributes.EXCEPTION_MESSAGE]=l.message),l.stack&&(p[v.SemanticAttributes.EXCEPTION_STACKTRACE]=l.stack)),p[v.SemanticAttributes.EXCEPTION_TYPE]||p[v.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(_.ExceptionEventName,p,h):T.diag.warn(`Failed to record an exception ${l}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&T.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};s.Span=c}),na=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.buildSamplerFromEnv=s.DEFAULT_CONFIG=void 0;var T=_t(),d=xr(),v=d.getEnv(),_=d.TracesSamplerValues.AlwaysOn;s.DEFAULT_CONFIG={sampler:c(v),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:d.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:d.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:d.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function c(p=d.getEnv()){switch(p.OTEL_TRACES_SAMPLER){case d.TracesSamplerValues.AlwaysOn:return new d.AlwaysOnSampler;case d.TracesSamplerValues.AlwaysOff:return new d.AlwaysOffSampler;case d.TracesSamplerValues.ParentBasedAlwaysOn:return new d.ParentBasedSampler({root:new d.AlwaysOnSampler});case d.TracesSamplerValues.ParentBasedAlwaysOff:return new d.ParentBasedSampler({root:new d.AlwaysOffSampler});case d.TracesSamplerValues.TraceIdRatio:return new d.TraceIdRatioBasedSampler(h(p));case d.TracesSamplerValues.ParentBasedTraceIdRatio:return new d.ParentBasedSampler({root:new d.TraceIdRatioBasedSampler(h(p))});default:return T.diag.error(`OTEL_TRACES_SAMPLER value "${p.OTEL_TRACES_SAMPLER} invalid, defaulting to ${_}".`),new d.AlwaysOnSampler}}s.buildSamplerFromEnv=c;var l=1;function h(p){if(p.OTEL_TRACES_SAMPLER_ARG===void 0||p.OTEL_TRACES_SAMPLER_ARG==="")return T.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${l}.`),l;let g=Number(p.OTEL_TRACES_SAMPLER_ARG);return isNaN(g)?(T.diag.error(`OTEL_TRACES_SAMPLER_ARG=${p.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${l}.`),l):g<0||g>1?(T.diag.error(`OTEL_TRACES_SAMPLER_ARG=${p.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${l}.`),l):g}}),od=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.mergeConfig=void 0;var T=na();function d(v){let _={sampler:T.buildSamplerFromEnv()},c=Object.assign({},T.DEFAULT_CONFIG,_,v);return c.spanLimits=Object.assign({},T.DEFAULT_CONFIG.spanLimits,v.spanLimits||{}),c}s.mergeConfig=d}),fs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Tracer=void 0;var T=_t(),d=xr(),v=So(),_=od(),c=class{constructor(h,p,g){this._tracerProvider=g;let y=_.mergeConfig(p);this._sampler=y.sampler,this._spanLimits=y.spanLimits,this._idGenerator=p.idGenerator||new d.RandomIdGenerator,this.resource=g.resource,this.instrumentationLibrary=h}startSpan(h,p={},g=T.context.active()){var y,m;if(d.isTracingSuppressed(g))return T.diag.debug("Instrumentation suppressed, returning Noop Span"),T.trace.wrapSpanContext(T.INVALID_SPAN_CONTEXT);let b=l(p,g),w=this._idGenerator.generateSpanId(),k,R,A;!b||!T.trace.isSpanContextValid(b)?k=this._idGenerator.generateTraceId():(k=b.traceId,R=b.traceState,A=b.spanId);let D=(y=p.kind)!==null&&y!==void 0?y:T.SpanKind.INTERNAL,B=(m=p.links)!==null&&m!==void 0?m:[],X=d.sanitizeAttributes(p.attributes),Q=this._sampler.shouldSample(p.root?T.trace.setSpanContext(g,T.INVALID_SPAN_CONTEXT):g,k,h,D,X,B),oe=Q.decision===T.SamplingDecision.RECORD_AND_SAMPLED?T.TraceFlags.SAMPLED:T.TraceFlags.NONE,ge={traceId:k,spanId:w,traceFlags:oe,traceState:R};if(Q.decision===T.SamplingDecision.NOT_RECORD)return T.diag.debug("Recording is off, propagating context in a non-recording span"),T.trace.wrapSpanContext(ge);let Se=new v.Span(this,g,h,ge,D,A,B,p.startTime);return Se.setAttributes(Object.assign(X,Q.attributes)),Se}startActiveSpan(h,p,g,y){let m,b,w;if(arguments.length<2)return;arguments.length===2?w=p:arguments.length===3?(m=p,w=g):(m=p,b=g,w=y);let k=b!=null?b:T.context.active(),R=this.startSpan(h,m,k),A=T.trace.setSpan(k,R);return T.context.with(A,w,void 0,R)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};s.Tracer=c;function l(h,p){if(!h.root)return T.trace.getSpanContext(p)}}),ia=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultServiceName=void 0;function T(){return`unknown_service:${process.argv0}`}s.defaultServiceName=T}),sa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.detectResources=void 0;var T=gs(),d=_t(),v=x(1669),_=async(l={})=>{let h=Object.assign(l),p=await Promise.all((h.detectors||[]).map(async g=>{try{let y=await g.detect(h);return d.diag.debug(`${g.constructor.name} found resource.`,y),y}catch(y){return d.diag.debug(`${g.constructor.name} failed: ${y.message}`),T.Resource.empty()}}));return c(p),p.reduce((g,y)=>g.merge(y),T.Resource.empty())};s.detectResources=_;var c=l=>{l.forEach(h=>{if(Object.keys(h.attributes).length>0){let p=v.inspect(h.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});d.diag.verbose(p)}})}}),To=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.envDetector=void 0;var T=_t(),d=xr(),v=pi(),_=ua(),c=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(l){let h={},p=d.getEnv(),g=p.OTEL_RESOURCE_ATTRIBUTES,y=p.OTEL_SERVICE_NAME;if(g)try{let m=this._parseResourceAttributes(g);Object.assign(h,m)}catch(m){T.diag.debug(`EnvDetector failed: ${m.message}`)}return y&&(h[v.ResourceAttributes.SERVICE_NAME]=y),new _.Resource(h)}_parseResourceAttributes(l){if(!l)return{};let h={},p=l.split(this._COMMA_SEPARATOR,-1);for(let g of p){let y=g.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(y.length!==2)continue;let[m,b]=y;if(m=m.trim(),b=b.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(m))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(b))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);h[m]=b}return h}_isValid(l){return l.length<=this._MAX_LENGTH&&this._isPrintableString(l)}_isPrintableString(l){for(let h=0;h<l.length;h++){let p=l.charAt(h);if(p<=" "||p>="~")return!1}return!0}_isValidAndNotEmpty(l){return l.length>0&&this._isValid(l)}};s.envDetector=new c}),aa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.processDetector=void 0;var T=_t(),d=pi(),v=ua(),_=class{async detect(c){let l={[d.ResourceAttributes.PROCESS_PID]:process.pid,[d.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[d.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[d.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(l,c)}_getResourceAttributes(c,l){return c[d.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||c[d.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||c[d.ResourceAttributes.PROCESS_COMMAND]===""||c[d.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(T.diag.debug("ProcessDetector failed: Unable to find required process resources. "),v.Resource.empty()):new v.Resource(Object.assign({},c))}};s.processDetector=new _}),nl=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(To(),s),d(aa(),s)}),Ro=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ia(),s),d(sa(),s),d(nl(),s)}),oa=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Ro(),s)}),gs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Resource=void 0;var T=pi(),d=xr(),v=oa(),_=class{constructor(c){this.attributes=c}static empty(){return _.EMPTY}static default(){return new _({[T.ResourceAttributes.SERVICE_NAME]:v.defaultServiceName(),[T.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:d.SDK_INFO[T.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[T.ResourceAttributes.TELEMETRY_SDK_NAME]:d.SDK_INFO[T.ResourceAttributes.TELEMETRY_SDK_NAME],[T.ResourceAttributes.TELEMETRY_SDK_VERSION]:d.SDK_INFO[T.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(c){if(!c||!Object.keys(c.attributes).length)return this;let l=Object.assign({},this.attributes,c.attributes);return new _(l)}};s.Resource=_,_.EMPTY=new _({})}),il=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),sl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ua=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(gs(),s),d(oa(),s),d(il(),s),d(sl(),s)}),Li=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.MultiSpanProcessor=void 0;var T=xr(),d=class{constructor(v){this._spanProcessors=v}forceFlush(){let v=[];for(let _ of this._spanProcessors)v.push(_.forceFlush());return new Promise(_=>{Promise.all(v).then(()=>{_()}).catch(c=>{T.globalErrorHandler(c||new Error("MultiSpanProcessor: forceFlush failed")),_()})})}onStart(v,_){for(let c of this._spanProcessors)c.onStart(v,_)}onEnd(v){for(let _ of this._spanProcessors)_.onEnd(v)}shutdown(){let v=[];for(let _ of this._spanProcessors)v.push(_.shutdown());return new Promise((_,c)=>{Promise.all(v).then(()=>{_()},c)})}};s.MultiSpanProcessor=d}),la=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopSpanProcessor=void 0;var T=class{onStart(d,v){}onEnd(d){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};s.NoopSpanProcessor=T}),Sn=O((s,T)=>{var d=200,v="__lodash_hash_undefined__",_=800,c=16,l=9007199254740991,h="[object Arguments]",p="[object Array]",g="[object AsyncFunction]",y="[object Boolean]",m="[object Date]",b="[object Error]",w="[object Function]",k="[object GeneratorFunction]",R="[object Map]",A="[object Number]",D="[object Null]",B="[object Object]",X="[object Proxy]",Q="[object RegExp]",oe="[object Set]",ge="[object String]",Se="[object Undefined]",Te="[object WeakMap]",Ne="[object ArrayBuffer]",Re="[object DataView]",Ue="[object Float32Array]",ze="[object Float64Array]",ot="[object Int8Array]",tt="[object Int16Array]",qt="[object Int32Array]",ct="[object Uint8Array]",Ie="[object Uint8ClampedArray]",qe="[object Uint16Array]",Le="[object Uint32Array]",je=/[\\^$.*+?()[\]{}|]/g,Ke=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,Qe={};Qe[Ue]=Qe[ze]=Qe[ot]=Qe[tt]=Qe[qt]=Qe[ct]=Qe[Ie]=Qe[qe]=Qe[Le]=!0,Qe[h]=Qe[p]=Qe[Ne]=Qe[y]=Qe[Re]=Qe[m]=Qe[b]=Qe[w]=Qe[R]=Qe[A]=Qe[B]=Qe[Q]=Qe[oe]=Qe[ge]=Qe[Te]=!1;var kt=typeof global=="object"&&global&&global.Object===Object&&global,Yt=typeof self=="object"&&self&&self.Object===Object&&self,Gt=kt||Yt||Function("return this")(),Ot=typeof s=="object"&&s&&!s.nodeType&&s,wt=Ot&&typeof T=="object"&&T&&!T.nodeType&&T,er=wt&&wt.exports===Ot,Rr=er&&kt.process,Ze=function(){try{var te=wt&&wt.require&&wt.require("util").types;return te||Rr&&Rr.binding&&Rr.binding("util")}catch(pe){}}(),Ye=Ze&&Ze.isTypedArray;function vt(te,pe,Ee){switch(Ee.length){case 0:return te.call(pe);case 1:return te.call(pe,Ee[0]);case 2:return te.call(pe,Ee[0],Ee[1]);case 3:return te.call(pe,Ee[0],Ee[1],Ee[2])}return te.apply(pe,Ee)}function tr(te,pe){for(var Ee=-1,He=Array(te);++Ee<te;)He[Ee]=pe(Ee);return He}function ka(te){return function(pe){return te(pe)}}function An(te,pe){return te==null?void 0:te[pe]}function lt(te,pe){return function(Ee){return te(pe(Ee))}}var Sa=Array.prototype,Ss=Function.prototype,cn=Object.prototype,fr=Gt["__core-js_shared__"],Cr=Ss.toString,gr=cn.hasOwnProperty,Kn=function(){var te=/[^.]+$/.exec(fr&&fr.keys&&fr.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),Yn=cn.toString,Vr=Cr.call(Object),Ta=RegExp("^"+Cr.call(gr).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xn=er?Gt.Buffer:void 0,Ts=Gt.Symbol,Ei=Gt.Uint8Array,In=Xn?Xn.allocUnsafe:void 0,Zr=lt(Object.getPrototypeOf,Object),ki=Object.create,Rs=cn.propertyIsEnumerable,Qi=Sa.splice,Lr=Ts?Ts.toStringTag:void 0,jr=function(){try{var te=xa(Object,"defineProperty");return te({},"",{}),te}catch(pe){}}(),Pr=Xn?Xn.isBuffer:void 0,vr=Math.max,pt=Date.now,Ra=xa(Gt,"Map"),dn=xa(Object,"create"),Ht=function(){function te(){}return function(pe){if(!Mn(pe))return{};if(ki)return ki(pe);te.prototype=pe;var Ee=new te;return te.prototype=void 0,Ee}}();function hn(te){var pe=-1,Ee=te==null?0:te.length;for(this.clear();++pe<Ee;){var He=te[pe];this.set(He[0],He[1])}}function Ca(){this.__data__=dn?dn(null):{},this.size=0}function Wi(te){var pe=this.has(te)&&delete this.__data__[te];return this.size-=pe?1:0,pe}function Si(te){var pe=this.__data__;if(dn){var Ee=pe[te];return Ee===v?void 0:Ee}return gr.call(pe,te)?pe[te]:void 0}function Ki(te){var pe=this.__data__;return dn?pe[te]!==void 0:gr.call(pe,te)}function Zo(te,pe){var Ee=this.__data__;return this.size+=this.has(te)?0:1,Ee[te]=dn&&pe===void 0?v:pe,this}hn.prototype.clear=Ca,hn.prototype.delete=Wi,hn.prototype.get=Si,hn.prototype.has=Ki,hn.prototype.set=Zo;function qr(te){var pe=-1,Ee=te==null?0:te.length;for(this.clear();++pe<Ee;){var He=te[pe];this.set(He[0],He[1])}}function Pa(){this.__data__=[],this.size=0}function Cs(te){var pe=this.__data__,Ee=rt(pe,te);if(Ee<0)return!1;var He=pe.length-1;return Ee==He?pe.pop():Qi.call(pe,Ee,1),--this.size,!0}function pn(te){var pe=this.__data__,Ee=rt(pe,te);return Ee<0?void 0:pe[Ee][1]}function Yi(te){return rt(this.__data__,te)>-1}function Ps(te,pe){var Ee=this.__data__,He=rt(Ee,te);return He<0?(++this.size,Ee.push([te,pe])):Ee[He][1]=pe,this}qr.prototype.clear=Pa,qr.prototype.delete=Cs,qr.prototype.get=pn,qr.prototype.has=Yi,qr.prototype.set=Ps;function On(te){var pe=-1,Ee=te==null?0:te.length;for(this.clear();++pe<Ee;){var He=te[pe];this.set(He[0],He[1])}}function Na(){this.size=0,this.__data__={hash:new hn,map:new(Ra||qr),string:new hn}}function Aa(te){var pe=As(this,te).delete(te);return this.size-=pe?1:0,pe}function Ns(te){return As(this,te).get(te)}function Ti(te){return As(this,te).has(te)}function eu(te,pe){var Ee=As(this,te),He=Ee.size;return Ee.set(te,pe),this.size+=Ee.size==He?0:1,this}On.prototype.clear=Na,On.prototype.delete=Aa,On.prototype.get=Ns,On.prototype.has=Ti,On.prototype.set=eu;function Dn(te){var pe=this.__data__=new qr(te);this.size=pe.size}function Ia(){this.__data__=new qr,this.size=0}function Z(te){var pe=this.__data__,Ee=pe.delete(te);return this.size=pe.size,Ee}function de(te){return this.__data__.get(te)}function _e(te){return this.__data__.has(te)}function xe(te,pe){var Ee=this.__data__;if(Ee instanceof qr){var He=Ee.__data__;if(!Ra||He.length<d-1)return He.push([te,pe]),this.size=++Ee.size,this;Ee=this.__data__=new On(He)}return Ee.set(te,pe),this.size=Ee.size,this}Dn.prototype.clear=Ia,Dn.prototype.delete=Z,Dn.prototype.get=de,Dn.prototype.has=_e,Dn.prototype.set=xe;function Fe(te,pe){var Ee=Os(te),He=!Ee&&La(te),ht=!Ee&&!He&&Zi(te),yt=!Ee&&!He&&!ht&&uu(te),St=Ee||He||ht||yt,dt=St?tr(te.length,String):[],Ct=dt.length;for(var $r in te)(pe||gr.call(te,$r))&&!(St&&($r=="length"||ht&&($r=="offset"||$r=="parent")||yt&&($r=="buffer"||$r=="byteLength"||$r=="byteOffset")||su($r,Ct)))&&dt.push($r);return dt}function $e(te,pe,Ee){(Ee!==void 0&&!Ji(te[pe],Ee)||Ee===void 0&&!(pe in te))&&st(te,pe,Ee)}function Ve(te,pe,Ee){var He=te[pe];(!(gr.call(te,pe)&&Ji(He,Ee))||Ee===void 0&&!(pe in te))&&st(te,pe,Ee)}function rt(te,pe){for(var Ee=te.length;Ee--;)if(Ji(te[Ee][0],pe))return Ee;return-1}function st(te,pe,Ee){pe=="__proto__"&&jr?jr(te,pe,{configurable:!0,enumerable:!0,value:Ee,writable:!0}):te[pe]=Ee}var yr=yd();function sr(te){return te==null?te===void 0?Se:D:Lr&&Lr in Object(te)?Jl(te):au(te)}function ur(te){return mn(te)&&sr(te)==h}function rr(te){if(!Mn(te)||_d(te))return!1;var pe=Ua(te)?Ta:Ke;return pe.test(Xi(te))}function Ur(te){return mn(te)&&Dt(te.length)&&!!Qe[sr(te)]}function Jn(te){if(!Mn(te))return wd(te);var pe=Zl(te),Ee=[];for(var He in te)He=="constructor"&&(pe||!gr.call(te,He))||Ee.push(He);return Ee}function Oa(te,pe,Ee,He,ht){te!==pe&&yr(pe,function(yt,St){if(ht||(ht=new Dn),Mn(yt))gd(te,pe,St,Ee,Oa,He,ht);else{var dt=He?He(Fa(te,St),yt,St+"",te,pe,ht):void 0;dt===void 0&&(dt=yt),$e(te,St,dt)}},fn)}function gd(te,pe,Ee,He,ht,yt,St){var dt=Fa(te,Ee),Ct=Fa(pe,Ee),$r=St.get(Ct);if($r){$e(te,Ee,$r);return}var Nr=yt?yt(dt,Ct,Ee+"",te,pe,St):void 0,es=Nr===void 0;if(es){var $a=Os(Ct),Ga=!$a&&Zi(Ct),sc=!$a&&!Ga&&uu(Ct);Nr=Ct,$a||Ga||sc?Os(dt)?Nr=dt:zr(dt)?Nr=Ma(dt):Ga?(es=!1,Nr=Da(Ct,!0)):sc?(es=!1,Nr=nu(Ct,!0)):Nr=[]:Ri(Ct)||La(Ct)?(Nr=dt,La(dt)?Nr=rc(dt):(!Mn(dt)||Ua(dt))&&(Nr=lr(Ct))):es=!1}es&&(St.set(Ct,Nr),ht(Nr,Ct,He,yt,St),St.delete(Ct)),$e(te,Ee,Nr)}function Xl(te,pe){return tc(ec(te,pe,lu),te+"")}var tu=jr?function(te,pe){return jr(te,"toString",{configurable:!0,enumerable:!1,value:nc(pe),writable:!0})}:lu;function Da(te,pe){if(pe)return te.slice();var Ee=te.length,He=In?In(Ee):new te.constructor(Ee);return te.copy(He),He}function ru(te){var pe=new te.constructor(te.byteLength);return new Ei(pe).set(new Ei(te)),pe}function nu(te,pe){var Ee=pe?ru(te.buffer):te.buffer;return new te.constructor(Ee,te.byteOffset,te.length)}function Ma(te,pe){var Ee=-1,He=te.length;for(pe||(pe=Array(He));++Ee<He;)pe[Ee]=te[Ee];return pe}function iu(te,pe,Ee,He){var ht=!Ee;Ee||(Ee={});for(var yt=-1,St=pe.length;++yt<St;){var dt=pe[yt],Ct=He?He(Ee[dt],te[dt],dt,Ee,te):void 0;Ct===void 0&&(Ct=te[dt]),ht?st(Ee,dt,Ct):Ve(Ee,dt,Ct)}return Ee}function vd(te){return Xl(function(pe,Ee){var He=-1,ht=Ee.length,yt=ht>1?Ee[ht-1]:void 0,St=ht>2?Ee[2]:void 0;for(yt=te.length>3&&typeof yt=="function"?(ht--,yt):void 0,St&&bd(Ee[0],Ee[1],St)&&(yt=ht<3?void 0:yt,ht=1),pe=Object(pe);++He<ht;){var dt=Ee[He];dt&&te(pe,dt,He,yt)}return pe})}function yd(te){return function(pe,Ee,He){for(var ht=-1,yt=Object(pe),St=He(pe),dt=St.length;dt--;){var Ct=St[te?dt:++ht];if(Ee(yt[Ct],Ct,yt)===!1)break}return pe}}function As(te,pe){var Ee=te.__data__;return Is(pe)?Ee[typeof pe=="string"?"string":"hash"]:Ee.map}function xa(te,pe){var Ee=An(te,pe);return rr(Ee)?Ee:void 0}function Jl(te){var pe=gr.call(te,Lr),Ee=te[Lr];try{te[Lr]=void 0;var He=!0}catch(yt){}var ht=Yn.call(te);return He&&(pe?te[Lr]=Ee:delete te[Lr]),ht}function lr(te){return typeof te.constructor=="function"&&!Zl(te)?Ht(Zr(te)):{}}function su(te,pe){var Ee=typeof te;return pe=pe==null?l:pe,!!pe&&(Ee=="number"||Ee!="symbol"&&ut.test(te))&&te>-1&&te%1==0&&te<pe}function bd(te,pe,Ee){if(!Mn(Ee))return!1;var He=typeof pe;return(He=="number"?qa(Ee)&&su(pe,Ee.length):He=="string"&&pe in Ee)?Ji(Ee[pe],te):!1}function Is(te){var pe=typeof te;return pe=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?te!=="__proto__":te===null}function _d(te){return!!Kn&&Kn in te}function Zl(te){var pe=te&&te.constructor,Ee=typeof pe=="function"&&pe.prototype||cn;return te===Ee}function wd(te){var pe=[];if(te!=null)for(var Ee in Object(te))pe.push(Ee);return pe}function au(te){return Yn.call(te)}function ec(te,pe,Ee){return pe=vr(pe===void 0?te.length-1:pe,0),function(){for(var He=arguments,ht=-1,yt=vr(He.length-pe,0),St=Array(yt);++ht<yt;)St[ht]=He[pe+ht];ht=-1;for(var dt=Array(pe+1);++ht<pe;)dt[ht]=He[ht];return dt[pe]=Ee(St),vt(te,this,dt)}}function Fa(te,pe){if(!(pe==="constructor"&&typeof te[pe]=="function")&&pe!="__proto__")return te[pe]}var tc=ou(tu);function ou(te){var pe=0,Ee=0;return function(){var He=pt(),ht=c-(He-Ee);if(Ee=He,ht>0){if(++pe>=_)return arguments[0]}else pe=0;return te.apply(void 0,arguments)}}function Xi(te){if(te!=null){try{return Cr.call(te)}catch(pe){}try{return te+""}catch(pe){}}return""}function Ji(te,pe){return te===pe||te!==te&&pe!==pe}var La=ur(function(){return arguments}())?ur:function(te){return mn(te)&&gr.call(te,"callee")&&!Rs.call(te,"callee")},Os=Array.isArray;function qa(te){return te!=null&&Dt(te.length)&&!Ua(te)}function zr(te){return mn(te)&&qa(te)}var Zi=Pr||ic;function Ua(te){if(!Mn(te))return!1;var pe=sr(te);return pe==w||pe==k||pe==g||pe==X}function Dt(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=l}function Mn(te){var pe=typeof te;return te!=null&&(pe=="object"||pe=="function")}function mn(te){return te!=null&&typeof te=="object"}function Ri(te){if(!mn(te)||sr(te)!=B)return!1;var pe=Zr(te);if(pe===null)return!0;var Ee=gr.call(pe,"constructor")&&pe.constructor;return typeof Ee=="function"&&Ee instanceof Ee&&Cr.call(Ee)==Vr}var uu=Ye?ka(Ye):Ur;function rc(te){return iu(te,fn(te))}function fn(te){return qa(te)?Fe(te,!0):Jn(te)}var Zn=vd(function(te,pe,Ee){Oa(te,pe,Ee)});function nc(te){return function(){return te}}function lu(te){return te}function ic(){return!1}T.exports=Zn}),al=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessorBase=void 0;var T=_t(),d=xr(),v=class{constructor(_,c){this._exporter=_,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let l=d.getEnv();this._maxExportBatchSize=typeof(c==null?void 0:c.maxExportBatchSize)=="number"?c.maxExportBatchSize:l.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(c==null?void 0:c.maxQueueSize)=="number"?c.maxQueueSize:l.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(c==null?void 0:c.scheduledDelayMillis)=="number"?c.scheduledDelayMillis:l.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(c==null?void 0:c.exportTimeoutMillis)=="number"?c.exportTimeoutMillis:l.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(_){}onEnd(_){this._isShutdown||this._addToBuffer(_)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,c)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(_).catch(l=>{c(l)})}),this._shuttingDownPromise)}_addToBuffer(_){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(_),this._maybeStartTimer())}_flushAll(){return new Promise((_,c)=>{let l=[],h=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let p=0,g=h;p<g;p++)l.push(this._flushOneBatch());Promise.all(l).then(()=>{_()}).catch(c)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((_,c)=>{let l=setTimeout(()=>{c(new Error("Timeout"))},this._exportTimeoutMillis);T.context.with(d.suppressTracing(T.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),h=>{var p;clearTimeout(l),h.code===d.ExportResultCode.SUCCESS?_():c((p=h.error)!==null&&p!==void 0?p:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(_=>{d.globalErrorHandler(_)})},this._scheduledDelayMillis),d.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};s.BatchSpanProcessorBase=v}),ol=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessor=void 0;var T=al(),d=class extends T.BatchSpanProcessorBase{onShutdown(){}};s.BatchSpanProcessor=d}),Co=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ol(),s)}),$t=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Co(),s)}),ca=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BasicTracerProvider=s.ForceFlushState=void 0;var T=_t(),d=xr(),v=ua(),_=At(),c=na(),l=Li(),h=la(),p=Sn(),g=$t(),y;(function(b){b[b.resolved=0]="resolved",b[b.timeout=1]="timeout",b[b.error=2]="error",b[b.unresolved=3]="unresolved"})(y=s.ForceFlushState||(s.ForceFlushState={}));var m=class{constructor(b={}){var w;this._registeredSpanProcessors=[],this._tracers=new Map;let k=p({},c.DEFAULT_CONFIG,b);this.resource=(w=k.resource)!==null&&w!==void 0?w:v.Resource.empty(),this.resource=v.Resource.default().merge(this.resource),this._config=Object.assign({},k,{resource:this.resource});let R=this._buildExporterFromEnv();if(R!==void 0){let A=new g.BatchSpanProcessor(R);this.activeSpanProcessor=A}else this.activeSpanProcessor=new h.NoopSpanProcessor}getTracer(b,w){let k=`${b}@${w||""}`;return this._tracers.has(k)||this._tracers.set(k,new _.Tracer({name:b,version:w},this._config,this)),this._tracers.get(k)}addSpanProcessor(b){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(w=>T.diag.error("Error while trying to shutdown current span processor",w)),this._registeredSpanProcessors.push(b),this.activeSpanProcessor=new l.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(b={}){T.trace.setGlobalTracerProvider(this),b.propagator===void 0&&(b.propagator=this._buildPropagatorFromEnv()),b.contextManager&&T.context.setGlobalContextManager(b.contextManager),b.propagator&&T.propagation.setGlobalPropagator(b.propagator)}forceFlush(){let b=this._config.forceFlushTimeoutMillis,w=this._registeredSpanProcessors.map(k=>new Promise(R=>{let A,D=setTimeout(()=>{R(new Error(`Span processor did not completed within timeout period of ${b} ms`)),A=y.timeout},b);k.forceFlush().then(()=>{clearTimeout(D),A!==y.timeout&&(A=y.resolved,R(A))}).catch(B=>{clearTimeout(D),A=y.error,R(B)})}));return new Promise((k,R)=>{Promise.all(w).then(A=>{let D=A.filter(B=>B!==y.resolved);D.length>0?R(D):k()}).catch(A=>R([A]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(b){var w;return(w=m._registeredPropagators.get(b))===null||w===void 0?void 0:w()}_getSpanExporter(b){var w;return(w=m._registeredExporters.get(b))===null||w===void 0?void 0:w()}_buildPropagatorFromEnv(){let b=Array.from(new Set(d.getEnv().OTEL_PROPAGATORS)),w=b.map(k=>{let R=this._getPropagator(k);return R||T.diag.warn(`Propagator "${k}" requested through environment variable is unavailable.`),R}).reduce((k,R)=>(R&&k.push(R),k),[]);if(w.length!==0)return b.length===1?w[0]:new d.CompositePropagator({propagators:w})}_buildExporterFromEnv(){let b=d.getEnv().OTEL_TRACES_EXPORTER;if(b==="none")return;let w=this._getSpanExporter(b);return w||T.diag.error(`Exporter "${b}" requested through environment variable is unavailable.`),w}};s.BasicTracerProvider=m,m._registeredPropagators=new Map([["tracecontext",()=>new d.HttpTraceContextPropagator],["baggage",()=>new d.HttpBaggagePropagator]]),m._registeredExporters=new Map}),ul=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ConsoleSpanExporter=void 0;var T=xr(),d=class{export(v,_){return this._sendSpans(v,_)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(v){return{traceId:v.spanContext().traceId,parentId:v.parentSpanId,name:v.name,id:v.spanContext().spanId,kind:v.kind,timestamp:T.hrTimeToMicroseconds(v.startTime),duration:T.hrTimeToMicroseconds(v.duration),attributes:v.attributes,status:v.status,events:v.events}}_sendSpans(v,_){for(let c of v)console.log(this._exportInfo(c));if(_)return _({code:T.ExportResultCode.SUCCESS})}};s.ConsoleSpanExporter=d}),ll=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.InMemorySpanExporter=void 0;var T=xr(),d=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(v,_){if(this._stopped)return _({code:T.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...v),setTimeout(()=>_({code:T.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};s.InMemorySpanExporter=d}),ud=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ld=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleSpanProcessor=void 0;var T=_t(),d=xr(),v=class{constructor(_){this._exporter=_,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(_){}onEnd(_){this._isShutdown||T.context.with(d.suppressTracing(T.context.active()),()=>{this._exporter.export([_],c=>{var l;c.code!==d.ExportResultCode.SUCCESS&&d.globalErrorHandler((l=c.error)!==null&&l!==void 0?l:new Error(`SimpleSpanProcessor: span export failed (status ${c})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,c)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(_).catch(l=>{c(l)})}),this._shuttingDownPromise)}};s.SimpleSpanProcessor=v}),cd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),cl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Wt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),nn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),At=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(fs(),s),d(ca(),s),d($t(),s),d(ul(),s),d(ll(),s),d(ud(),s),d(ld(),s),d(cd(),s),d(la(),s),d(So(),s),d(cl(),s),d(Wt(),s),d(nn(),s)}),Tn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.azureCoreTracing=s.AzureMonitorSymbol=void 0;var T=ae();s.AzureMonitorSymbol="Azure_Monitor_Tracer";var d=!1,v=function(c){if(d)return c;try{var l=At(),h=_t(),p=new l.BasicTracerProvider,g=p.getTracer("applicationinsights tracer"),y=c.setTracer;c.setTracer=function(m){var b=m.startSpan;m.startSpan=function(w,k,R){var A=b.call(this,w,k,R),D=A.end;return A.end=function(){var B=D.apply(this,arguments);return T.channel.publish("azure-coretracing",A),B},A},m[s.AzureMonitorSymbol]=!0,y.call(this,m)},h.trace.getSpan(h.context.active()),c.setTracer(g),d=!0}catch(m){}return c};s.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:v};function _(){T.channel.registerMonkeyPatch("@azure/core-tracing",s.azureCoreTracing)}s.enable=_}),da=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.bunyan=void 0;var T=ae(),d=function(_){var c=_.prototype._emit;return _.prototype._emit=function(l,h){var p=c.apply(this,arguments);if(!h){var g=p;g||(g=c.call(this,l,!0)),T.channel.publish("bunyan",{level:l.level,result:g})}return p},_};s.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("bunyan",s.bunyan)}s.enable=v}),dl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.console=void 0;var T=ae(),d=x(2413),v=function(c){var l=new d.Writable,h=new d.Writable;l.write=function(k){if(!k)return!0;var R=k.toString();return T.channel.publish("console",{message:R}),!0},h.write=function(k){if(!k)return!0;var R=k.toString();return T.channel.publish("console",{message:R,stderr:!0}),!0};for(var p=new c.Console(l,h),g=["log","info","warn","error","dir","time","timeEnd","trace","assert"],y=function(k){var R=c[k];R&&(c[k]=function(){if(p[k])try{p[k].apply(p,arguments)}catch(A){}return R.apply(c,arguments)})},m=0,b=g;m<b.length;m++){var w=b[m];y(w)}return c};s.console={versionSpecifier:">= 4.0.0",patch:v};function _(){T.channel.registerMonkeyPatch("console",s.console),x(7082)}s.enable=_}),hl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongoCore=void 0;var T=ae(),d=function(_){var c=_.Server.prototype.connect;return _.Server.prototype.connect=function(){var l=c.apply(this,arguments),h=this.s.pool.write;this.s.pool.write=function(){var g=typeof arguments[1]=="function"?1:2;return typeof arguments[g]=="function"&&(arguments[g]=T.channel.bindToContext(arguments[g])),h.apply(this,arguments)};var p=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=T.channel.bindToContext(arguments[1])),p.apply(this,arguments)},l},_};s.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("mongodb-core",s.mongoCore)}s.enable=v}),pl=O(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(p){for(var g,y=1,m=arguments.length;y<m;y++){g=arguments[y];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(p[b]=g[b])}return p},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongo330=s.mongo3=s.mongo2=void 0;var d=ae(),v=function(p){var g=p.instrument({operationIdGenerator:{next:function(){return d.channel.bindToContext(function(m){return m()})}}}),y={};return g.on("started",function(m){y[m.requestId]||(y[m.requestId]=T(T({},m),{time:new Date}))}),g.on("succeeded",function(m){var b=y[m.requestId];b&&delete y[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return d.channel.publish("mongodb",{startedData:b,event:m,succeeded:!0})}):d.channel.publish("mongodb",{startedData:b,event:m,succeeded:!0})}),g.on("failed",function(m){var b=y[m.requestId];b&&delete y[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return d.channel.publish("mongodb",{startedData:b,event:m,succeeded:!1})}):d.channel.publish("mongodb",{startedData:b,event:m,succeeded:!1})}),p},_=function(p){var g=p.instrument(),y={},m={};return g.on("started",function(b){y[b.requestId]||(m[b.requestId]=d.channel.bindToContext(function(w){return w()}),y[b.requestId]=T(T({},b),{time:new Date}))}),g.on("succeeded",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!0})}),delete m[b.requestId])}),g.on("failed",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!1})}),delete m[b.requestId])}),p},c=function(p){var g=p.Server.prototype.connect;return p.Server.prototype.connect=function(){var y=g.apply(this,arguments),m=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var w=typeof arguments[1]=="function"?1:2;return typeof arguments[w]=="function"&&(arguments[w]=d.channel.bindToContext(arguments[w])),m.apply(this,arguments)};var b=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=d.channel.bindToContext(arguments[1])),b.apply(this,arguments)},y},p},l=function(p){c(p);var g=p.instrument(),y={},m={};return g.on("started",function(b){y[b.requestId]||(m[b.requestId]=d.channel.bindToContext(function(w){return w()}),y[b.requestId]=b)}),g.on("succeeded",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!0})}),delete m[b.requestId])}),g.on("failed",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!1})}),delete m[b.requestId])}),p};s.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:v},s.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:_},s.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:l};function h(){d.channel.registerMonkeyPatch("mongodb",s.mongo2),d.channel.registerMonkeyPatch("mongodb",s.mongo3),d.channel.registerMonkeyPatch("mongodb",s.mongo330)}s.enable=h}),Po=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mysql=void 0;var T=ae(),d=x(5622),v=function(c,l){var h=function(w,k){return function(R,A){var D=w[R];D&&(w[R]=function(){for(var B=arguments.length-1,X=arguments.length-1;X>=0;--X)if(typeof arguments[X]=="function"){B=X;break}else if(typeof arguments[X]!="undefined")break;var Q=arguments[B],oe={result:null,startTime:null,startDate:null};typeof Q=="function"&&(A?(oe.startTime=process.hrtime(),oe.startDate=new Date,arguments[B]=T.channel.bindToContext(A(oe,Q))):arguments[B]=T.channel.bindToContext(Q));var ge=D.apply(this,arguments);return oe.result=ge,ge})}},p=function(w,k){return h(w.prototype,k+".prototype")},g=["connect","changeUser","ping","statistics","end"],y=x(3255)(d.dirname(l)+"/lib/Connection");g.forEach(function(w){return p(y,"Connection")(w)}),h(y,"Connection")("createQuery",function(w,k){return function(R){var A=process.hrtime(w.startTime),D=A[0]*1e3+A[1]/1e6|0;T.channel.publish("mysql",{query:w.result,callbackArgs:arguments,err:R,duration:D,time:w.startDate}),k.apply(this,arguments)}});var m=["_enqueueCallback"],b=x(9118)(d.dirname(l)+"/lib/Pool");return m.forEach(function(w){return p(b,"Pool")(w)}),c};s.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:v};function _(){T.channel.registerMonkeyPatch("mysql",s.mysql)}s.enable=_}),Jr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgresPool1=void 0;var T=ae();function d(_){var c=_.prototype.connect;return _.prototype.connect=function(l){return l&&(arguments[0]=T.channel.bindToContext(l)),c.apply(this,arguments)},_}s.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("pg-pool",s.postgresPool1)}s.enable=v}),vs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgres7=s.postgres6=void 0;var T=ae(),d=x(8614);function v(l,h){var p=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,m,b){var w={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},k=process.hrtime(),R;function A(D){D&&D[g]&&(D=D[g]);var B=T.channel.bindToContext(function(X,Q){var oe=process.hrtime(k);if(w.result=Q&&{rowCount:Q.rowCount,command:Q.command},w.error=X,w.duration=Math.ceil(oe[0]*1e3+oe[1]/1e6),T.channel.publish("postgres",w),X){if(D)return D.apply(this,arguments);R&&R instanceof d.EventEmitter&&R.emit("error",X)}else D&&D.apply(this,arguments)});try{return Object.defineProperty(B,g,{value:D}),B}catch(X){return D}}try{typeof y=="string"?m instanceof Array?(w.query.preparable={text:y,args:m},b=A(b)):(w.query.text=y,b?b=A(b):m=A(m)):(typeof y.name=="string"?w.query.plan=y.name:y.values instanceof Array?w.query.preparable={text:y.text,args:y.values}:w.query.text=y.text,b?b=A(b):m?m=A(m):y.callback=A(y.callback))}catch(D){return p.apply(this,arguments)}return arguments[0]=y,arguments[1]=m,arguments[2]=b,arguments.length=arguments.length>3?arguments.length:3,R=p.apply(this,arguments),R},l}function _(l,h){var p=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,m,b){var w=this,k=!!b,R={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},A=process.hrtime(),D;function B(X){X&&X[g]&&(X=X[g]);var Q=T.channel.bindToContext(function(oe,ge){var Se=process.hrtime(A);if(R.result=ge&&{rowCount:ge.rowCount,command:ge.command},R.error=oe,R.duration=Math.ceil(Se[0]*1e3+Se[1]/1e6),T.channel.publish("postgres",R),oe){if(X)return X.apply(this,arguments);D&&D instanceof d.EventEmitter&&D.emit("error",oe)}else X&&X.apply(this,arguments)});try{return Object.defineProperty(Q,g,{value:X}),Q}catch(oe){return X}}try{typeof y=="string"?m instanceof Array?(R.query.preparable={text:y,args:m},k=typeof b=="function",b=k?B(b):b):(R.query.text=y,b?(k=typeof b=="function",b=k?B(b):b):(k=typeof m=="function",m=k?B(m):m)):(typeof y.name=="string"?R.query.plan=y.name:y.values instanceof Array?R.query.preparable={text:y.text,args:y.values}:R.query.text=y.text,b?(k=typeof b=="function",b=B(b)):m?(k=typeof m=="function",m=k?B(m):m):(k=typeof y.callback=="function",y.callback=k?B(y.callback):y.callback))}catch(X){return p.apply(this,arguments)}return arguments[0]=y,arguments[1]=m,arguments[2]=b,arguments.length=arguments.length>3?arguments.length:3,D=p.apply(this,arguments),k?D:D.then(function(X){return B()(void 0,X),new w._Promise(function(Q,oe){Q(X)})}).catch(function(X){return B()(X,void 0),new w._Promise(function(Q,oe){oe(X)})})},l}s.postgres6={versionSpecifier:"6.*",patch:v},s.postgres7={versionSpecifier:">=7.* <=8.*",patch:_};function c(){T.channel.registerMonkeyPatch("pg",s.postgres6),T.channel.registerMonkeyPatch("pg",s.postgres7)}s.enable=c}),ml=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.redis=void 0;var T=ae(),d=function(_){var c=_.RedisClient.prototype.internal_send_command;return _.RedisClient.prototype.internal_send_command=function(l){if(l){var h=l.callback;if(!h||!h.pubsubBound){var p=this.address,g=process.hrtime(),y=new Date;l.callback=T.channel.bindToContext(function(m,b){var w=process.hrtime(g),k=w[0]*1e3+w[1]/1e6|0;T.channel.publish("redis",{duration:k,address:p,commandObj:l,err:m,result:b,time:y}),typeof h=="function"&&h.apply(this,arguments)}),l.callback.pubsubBound=!0}}return c.call(this,l)},_};s.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("redis",s.redis)}s.enable=v}),No=O(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(c){for(var l,h=1,p=arguments.length;h<p;h++){l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])}return c},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=void 0;var d=ae(),v=function(c){var l=c.Connection.prototype.makeRequest;return c.Connection.prototype.makeRequest=function(){function h(g){var y=process.hrtime(),m={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return d.channel.bindToContext(function(b,w,k){var R=process.hrtime(y);m=T(T({},m),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!b&&{rowCount:w,rows:k},query:{text:this.parametersByName.statement.value},error:b,duration:Math.ceil(R[0]*1e3+R[1]/1e6)}),d.channel.publish("tedious",m),g.call(this,b,w,k)})}var p=arguments[0];arguments[0].callback=h(p.callback),l.apply(this,arguments)},c};s.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:v};function _(){d.channel.registerMonkeyPatch("tedious",s.tedious)}s.enable=_}),Ao=O(s=>{"use strict";var T=s&&s.__extends||function(){var h=function(p,g){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(y[b]=m[b])},h(p,g)};return function(p,g){h(p,g);function y(){this.constructor=p}p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),d=s&&s.__rest||function(h,p){var g={};for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&p.indexOf(y)<0&&(g[y]=h[y]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,y=Object.getOwnPropertySymbols(h);m<y.length;m++)p.indexOf(y[m])<0&&Object.prototype.propertyIsEnumerable.call(h,y[m])&&(g[y[m]]=h[y[m]]);return g};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.winston2=s.winston3=void 0;var v=ae(),_=function(h){var p=h.Logger.prototype.log,g,y=function(m,b,w){var k;return g===h.config.npm.levels?k="npm":g===h.config.syslog.levels?k="syslog":k="unknown",v.channel.publish("winston",{level:m,message:b,meta:w,levelKind:k}),b};return h.Logger.prototype.log=function(){return g=this.levels,!this.filters||this.filters.length===0?this.filters=[y]:this.filters[this.filters.length-1]!==y&&(this.filters=this.filters.filter(function(m){return m!==y}),this.filters.push(y)),p.apply(this,arguments)},h},c=function(h){var p=function(w,k){var R;return w.config.npm.levels[k]!=null?R="npm":w.config.syslog.levels[k]!=null?R="syslog":R="unknown",R},g=function(w){T(k,w);function k(R,A){var D=w.call(this,A)||this;return D.winston=R,D}return k.prototype.log=function(R,A){var D=R.message,B=R.level,X=R.meta,Q=d(R,["message","level","meta"]);B=typeof Symbol.for=="function"?R[Symbol.for("level")]:B,D=R instanceof Error?R:D;var oe=p(this.winston,B);X=X||{};for(var ge in Q)Q.hasOwnProperty(ge)&&(X[ge]=Q[ge]);v.channel.publish("winston",{message:D,level:B,levelKind:oe,meta:X}),A()},k}(h.Transport);function y(){var w=arguments[0].levels||h.config.npm.levels,k;for(var R in w)w.hasOwnProperty(R)&&(k=k===void 0||w[R]>w[k]?R:k);this.add(new g(h,{level:k}))}var m=h.createLogger;h.createLogger=function(){var w=arguments[0].levels||h.config.npm.levels,k;for(var R in w)w.hasOwnProperty(R)&&(k=k===void 0||w[R]>w[k]?R:k);var A=m.apply(this,arguments);A.add(new g(h,{level:k}));var D=A.configure;return A.configure=function(){D.apply(this,arguments),y.apply(this,arguments)},A};var b=h.configure;return h.configure=function(){b.apply(this,arguments),y.apply(this,arguments)},h.add(new g(h)),h};s.winston3={versionSpecifier:"3.x",patch:c},s.winston2={versionSpecifier:"2.x",patch:_};function l(){v.channel.registerMonkeyPatch("winston",s.winston2),v.channel.registerMonkeyPatch("winston",s.winston3)}s.enable=l}),fl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=s.pgPool=s.pg=s.winston=s.redis=s.mysql=s.mongodb=s.mongodbCore=s.console=s.bunyan=s.azuresdk=void 0;var T=Tn();s.azuresdk=T;var d=da();s.bunyan=d;var v=dl();s.console=v;var _=hl();s.mongodbCore=_;var c=pl();s.mongodb=c;var l=Po();s.mysql=l;var h=Jr();s.pgPool=h;var p=vs();s.pg=p;var g=ml();s.redis=g;var y=No();s.tedious=y;var m=Ao();s.winston=m;function b(){d.enable(),v.enable(),_.enable(),c.enable(),l.enable(),p.enable(),h.enable(),g.enable(),m.enable(),T.enable(),y.enable()}s.enable=b}),ys=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.registerContextPreservation=s.IsInitialized=void 0;var T=ie(),d=re();s.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var v="DiagnosticChannel";if(s.IsInitialized){_=fl(),c=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",l=c.split(","),h={bunyan:_.bunyan,console:_.console,mongodb:_.mongodb,mongodbCore:_.mongodbCore,mysql:_.mysql,redis:_.redis,pg:_.pg,pgPool:_.pgPool,winston:_.winston,azuresdk:_.azuresdk};for(p in h)l.indexOf(p)===-1&&(h[p].enable(),d.info(v,"Subscribed to "+p+" events"));l.length>0&&d.info(v,"Some modules will not be patched",l)}else d.info(v,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var _,c,l,h,p;function g(y){if(s.IsInitialized){var m=ae();m.channel.addContextPreservation(y),m.channel.spanContextPropagator=T.AsyncScopeManager}}s.registerContextPreservation=g}),mi=O((s,T)=>{"use strict";T.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),mr=O((s,T)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(y){for(var m,b=1,w=arguments.length;b<w;b++){m=arguments[b];for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(y[k]=m[k])}return y},d.apply(this,arguments)},v=x(8605),_=x(7211),c=x(8835),l=x(7619),h=re(),p=mi(),g=function(){function y(){}return y.getCookie=function(m,b){var w="";if(m&&m.length&&typeof b=="string")for(var k=m+"=",R=b.split(";"),A=0;A<R.length;A++){var b=R[A];if(b=y.trim(b),b&&b.indexOf(k)===0){w=b.substring(k.length,R[A].length);break}}return w},y.trim=function(m){return typeof m=="string"?m.replace(/^\s+|\s+$/g,""):""},y.int32ArrayToBase64=function(m){var b=function(D,B){return String.fromCharCode(D>>B&255)},w=function(D){return b(D,24)+b(D,16)+b(D,8)+b(D,0)},k=m.map(w).join(""),R=Buffer.from?Buffer.from(k,"binary"):new Buffer(k,"binary"),A=R.toString("base64");return A.substr(0,A.indexOf("="))},y.random32=function(){return 4294967296*Math.random()|0},y.randomu32=function(){return y.random32()+2147483648},y.w3cTraceId=function(){for(var m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],b="",w,k=0;k<4;k++)w=y.random32(),b+=m[w&15]+m[w>>4&15]+m[w>>8&15]+m[w>>12&15]+m[w>>16&15]+m[w>>20&15]+m[w>>24&15]+m[w>>28&15];var R=m[8+Math.random()*4|0];return b.substr(0,8)+b.substr(9,4)+"4"+b.substr(13,3)+R+b.substr(16,3)+b.substr(19,12)},y.w3cSpanId=function(){return y.w3cTraceId().substring(16)},y.isValidW3CId=function(m){return m.length===32&&m!=="00000000000000000000000000000000"},y.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"},y.isError=function(m){return m instanceof Error},y.isPrimitive=function(m){var b=typeof m;return b==="string"||b==="number"||b==="boolean"},y.isDate=function(m){return Object.prototype.toString.call(m)==="[object Date]"},y.msToTimeSpan=function(m){(isNaN(m)||m<0)&&(m=0);var b=(m/1e3%60).toFixed(7).replace(/0{0,4}$/,""),w=""+Math.floor(m/(1e3*60))%60,k=""+Math.floor(m/(1e3*60*60))%24,R=Math.floor(m/(1e3*60*60*24));b=b.indexOf(".")<2?"0"+b:b,w=w.length<2?"0"+w:w,k=k.length<2?"0"+k:k;var A=R>0?R+".":"";return A+k+":"+w+":"+b},y.extractError=function(m){var b=m;return{message:m.message,code:b.code||b.id||""}},y.extractObject=function(m){return m instanceof Error?y.extractError(m):typeof m.toJSON=="function"?m.toJSON():m},y.validateStringMap=function(m){if(typeof m!="object"){h.info("Invalid properties dropped from payload");return}var b={};for(var w in m){var k="",R=m[w],A=typeof R;if(y.isPrimitive(R))k=R.toString();else if(R===null||A==="undefined")k="";else if(A==="function"){h.info("key: "+w+" was function; will not serialize");continue}else{var D=y.isArray(R)?R:y.extractObject(R);try{y.isPrimitive(D)?k=D:k=JSON.stringify(D)}catch(B){k=R.constructor.name.toString()+" (Error: "+B.message+")",h.info("key: "+w+", could not be serialized")}}b[w]=k.substring(0,y.MAX_PROPERTY_LENGTH)}return b},y.canIncludeCorrelationHeader=function(m,b){var w=m&&m.config&&m.config.correlationHeaderExcludedDomains;if(!w||w.length==0||!b)return!0;for(var k=0;k<w.length;k++){var R=new RegExp(w[k].replace(/\./g,".").replace(/\*/g,".*"));if(R.test(c.parse(b).hostname))return!1}return!0},y.getCorrelationContextTarget=function(m,b){var w=m.headers&&m.headers[p.requestContextHeader];if(w)for(var k=w.split(","),R=0;R<k.length;++R){var A=k[R].split("=");if(A.length==2&&A[0]==b)return A[1]}},y.makeRequest=function(m,b,w,k){b&&b.indexOf("//")===0&&(b="https:"+b);var R=c.parse(b),A=d(d({},w),{host:R.hostname,port:R.port,path:R.pathname}),D=void 0;if(R.protocol==="https:"&&(D=m.proxyHttpsUrl||void 0),R.protocol==="http:"&&(D=m.proxyHttpUrl||void 0),D){D.indexOf("//")===0&&(D="http:"+D);var B=c.parse(D);B.protocol==="https:"?(h.info("Proxies that use HTTPS are not supported"),D=void 0):A=d(d({},A),{host:B.hostname,port:B.port||"80",path:b,headers:d(d({},A.headers),{Host:R.hostname})})}var X=R.protocol==="https:"&&!D;return X&&m.httpsAgent!==void 0?A.agent=m.httpsAgent:!X&&m.httpAgent!==void 0?A.agent=m.httpAgent:X&&(A.agent=y.tlsRestrictedAgent),X?_.request(A,k):v.request(A,k)},y.safeIncludeCorrelationHeader=function(m,b,w){var k;if(typeof w=="string")k=w;else if(w instanceof Array)k=w.join(",");else if(w&&typeof w.toString=="function")try{k=w.toString()}catch(R){h.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",R,w)}k?y.addCorrelationIdHeaderFromString(m,b,k):b.setHeader(p.requestContextHeader,p.requestContextSourceKey+"="+m.config.correlationId)},y.dumpObj=function(m){var b=Object.prototype.toString.call(m),w="";return b==="[object Error]"?w="{ stack: '"+m.stack+"', message: '"+m.message+"', name: '"+m.name+"'":w=JSON.stringify(m),b+w},y.addCorrelationIdHeaderFromString=function(m,b,w){var k=w.split(","),R=p.requestContextSourceKey+"=",A=k.some(function(D){return D.substring(0,R.length)===R});A||b.setHeader(p.requestContextHeader,w+","+p.requestContextSourceKey+"="+m.config.correlationId)},y.MAX_PROPERTY_LENGTH=8192,y.tlsRestrictedAgent=new _.Agent({keepAlive:!0,maxSockets:25,secureOptions:l.SSL_OP_NO_SSLv2|l.SSL_OP_NO_SSLv3|l.SSL_OP_NO_TLSv1|l.SSL_OP_NO_TLSv1_1}),y}();T.exports=g}),fi=O((s,T)=>{"use strict";var d=mr(),v=re(),_=function(){function c(){}return c.queryCorrelationId=function(l,h){var p=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId";if(c.completedLookups.hasOwnProperty(p)){h(c.completedLookups[p]);return}else if(c.pendingLookups[p]){c.pendingLookups[p].push(h);return}c.pendingLookups[p]=[h];var g=function(){if(c.pendingLookups[p]){var y={method:"GET",disableAppInsightsAutoCollection:!0};v.info(c.TAG,y);var m=d.makeRequest(l,p,y,function(b){if(b.statusCode===200){var w="";b.setEncoding("utf-8"),b.on("data",function(k){w+=k}),b.on("end",function(){v.info(c.TAG,w);var k=c.correlationIdPrefix+w;c.completedLookups[p]=k,c.pendingLookups[p]&&c.pendingLookups[p].forEach(function(R){return R(k)}),delete c.pendingLookups[p]})}else b.statusCode>=400&&b.statusCode<500?(c.completedLookups[p]=void 0,delete c.pendingLookups[p]):setTimeout(g,l.correlationIdRetryIntervalMs)});m&&(m.on("error",function(b){v.warn(c.TAG,b)}),m.end())}};setTimeout(g,0)},c.cancelCorrelationIdQuery=function(l,h){var p=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId",g=c.pendingLookups[p];g&&(c.pendingLookups[p]=g.filter(function(y){return y!=h}),c.pendingLookups[p].length==0&&delete c.pendingLookups[p])},c.generateRequestId=function(l){if(l){l=l[0]=="|"?l:"|"+l,l[l.length-1]!=="."&&(l+=".");var h=(c.currentRootId++).toString(16);return c.appendSuffix(l,h,"_")}else return c.generateRootId()},c.getRootId=function(l){var h=l.indexOf(".");h<0&&(h=l.length);var p=l[0]==="|"?1:0;return l.substring(p,h)},c.generateRootId=function(){return"|"+d.w3cTraceId()+"."},c.appendSuffix=function(l,h,p){if(l.length+h.length<c.requestIdMaxLength)return l+h+p;var g=c.requestIdMaxLength-9;if(l.length>g)for(;g>1;--g){var y=l[g-1];if(y==="."||y==="_")break}if(g<=1)return c.generateRootId();for(h=d.randomu32().toString(16);h.length<8;)h="0"+h;return l.substring(0,g)+h+"#"},c.TAG="CorrelationIdManager",c.correlationIdPrefix="cid-v1:",c.w3cEnabled=!0,c.pendingLookups={},c.completedLookups={},c.requestIdMaxLength=1024,c.currentRootId=d.randomu32(),c}();T.exports=_}),bs=O((s,T)=>{"use strict";var d=mr(),v=fi(),_=function(){function c(l,h){if(this.traceFlag=c.DEFAULT_TRACE_FLAG,this.version=c.DEFAULT_VERSION,l&&typeof l=="string")if(l.split(",").length>1)this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16);else{var p=l.trim().split("-"),g=p.length;g>=4?(this.version=p[0],this.traceId=p[1],this.spanId=p[2],this.traceFlag=p[3]):(this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=c.DEFAULT_VERSION,this.traceId=d.w3cTraceId()),this.version==="00"&&g!==4&&(this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=c.DEFAULT_VERSION,this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=c.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=c.DEFAULT_TRACE_FLAG,this.traceId=d.w3cTraceId()),c.isValidTraceId(this.traceId)||(this.traceId=d.w3cTraceId()),c.isValidSpanId(this.spanId)||(this.spanId=d.w3cTraceId().substr(0,16),this.traceId=d.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(h){this.parentId=h.slice();var y=v.getRootId(h);c.isValidTraceId(y)||(this.legacyRootId=y,y=d.w3cTraceId()),h.indexOf("|")!==-1&&(h=h.substring(1+h.substring(0,h.length-1).lastIndexOf("."),h.length-1)),this.traceId=y,this.spanId=h}else this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)}return c.isValidTraceId=function(l){return l.match(/^[0-9a-f]{32}$/)&&l!=="00000000000000000000000000000000"},c.isValidSpanId=function(l){return l.match(/^[0-9a-f]{16}$/)&&l!=="0000000000000000"},c.formatOpenTelemetryTraceFlags=function(l){var h="0"+l.toString(16);return h.substring(h.length-2)},c.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},c.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},c.prototype.updateSpanId=function(){this.spanId=d.w3cTraceId().substr(0,16)},c.DEFAULT_TRACE_FLAG="01",c.DEFAULT_VERSION="00",c}();T.exports=_}),Io=O((s,T)=>{"use strict";var d=function(){function v(_){this.fieldmap=[],!!_&&(this.fieldmap=this.parseHeader(_))}return v.prototype.toString=function(){var _=this.fieldmap;return!_||_.length==0?null:_.join(", ")},v.validateKeyChars=function(_){var c=_.split("@");if(c.length==2){var l=c[0].trim(),h=c[1].trim(),p=Boolean(l.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),g=Boolean(h.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return p&&g}else if(c.length==1)return Boolean(_.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},v.prototype.parseHeader=function(_){var c=[],l={},h=_.split(",");if(h.length>32)return null;for(var p=0,g=h;p<g.length;p++){var y=g[p],m=y.trim();if(m.length!==0){var b=m.split("=");if(b.length!==2||!v.validateKeyChars(b[0])||l[b[0]])return null;l[b[0]]=!0,c.push(m)}}return c},v.strict=!0,v}();T.exports=d}),Rn=O((s,T)=>{"use strict";var d=function(){function v(){}return v}();T.exports=d}),Oo=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),ha=O((s,T)=>{"use strict";var d=function(){function v(){}return v}();T.exports=d}),gi=O((s,T)=>{"use strict";var d=function(){function v(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return v}();T.exports=d}),qi=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=ha(),_=function(c){d(l,c);function l(){return c.call(this)||this}return l}(v);T.exports=_}),jn=O((s,T)=>{"use strict";var d;(function(v){v[v.Measurement=0]="Measurement",v[v.Aggregation=1]="Aggregation"})(d||(d={})),T.exports=d}),pa=O((s,T)=>{"use strict";var d=jn(),v=function(){function _(){this.kind=d.Measurement}return _}();T.exports=v}),gl=O((s,T)=>{"use strict";var d=function(){function v(){this.ver=1,this.sampleRate=100,this.tags={}}return v}();T.exports=d}),Do=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),vl=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.exceptions=[],h.properties={},h.measurements={},h}return l}(v);T.exports=_}),Mo=O((s,T)=>{"use strict";var d=function(){function v(){this.hasFullStack=!0,this.parsedStack=[]}return v}();T.exports=d}),yl=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h}return l}(v);T.exports=_}),xo=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.metrics=[],h.properties={},h}return l}(v);T.exports=_}),dd=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Do(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),bl=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.success=!0,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),hd=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Rn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),_l=O((s,T)=>{"use strict";var d;(function(v){v[v.Verbose=0]="Verbose",v[v.Information=1]="Information",v[v.Warning=2]="Warning",v[v.Error=3]="Error",v[v.Critical=4]="Critical"})(d||(d={})),T.exports=d}),ft=O((s,T)=>{"use strict";var d=function(){function v(){}return v}();T.exports=d}),Cn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AvailabilityData=Oo(),s.Base=ha(),s.ContextTagKeys=gi(),s.Data=qi(),s.DataPoint=pa(),s.DataPointType=jn(),s.Domain=Rn(),s.Envelope=gl(),s.EventData=Do(),s.ExceptionData=vl(),s.ExceptionDetails=Mo(),s.MessageData=yl(),s.MetricData=xo(),s.PageViewData=dd(),s.RemoteDependencyData=bl(),s.RequestData=hd(),s.SeverityLevel=_l(),s.StackFrame=ft()}),vi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.domainSupportsProperties=s.RemoteDependencyDataConstants=void 0;var T=Cn(),d=function(){function _(){}return _.TYPE_HTTP="Http",_.TYPE_AI="Http (tracked component)",_}();s.RemoteDependencyDataConstants=d;function v(_){return"properties"in _||_ instanceof T.EventData||_ instanceof T.ExceptionData||_ instanceof T.MessageData||_ instanceof T.MetricData||_ instanceof T.PageViewData||_ instanceof T.RemoteDependencyData||_ instanceof T.RequestData}s.domainSupportsProperties=v}),_s=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Tr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),wl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),sn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ma=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),yi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),or=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),fa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),an=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Fo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Kt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),bi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),El=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetryType=s.TelemetryTypeString=s.baseTypeToTelemetryType=s.telemetryTypeToBaseType=void 0;function T(_){switch(_){case v.Event:return"EventData";case v.Exception:return"ExceptionData";case v.Trace:return"MessageData";case v.Metric:return"MetricData";case v.Request:return"RequestData";case v.Dependency:return"RemoteDependencyData";case v.Availability:return"AvailabilityData";case v.PageView:return"PageViewData"}}s.telemetryTypeToBaseType=T;function d(_){switch(_){case"EventData":return v.Event;case"ExceptionData":return v.Exception;case"MessageData":return v.Trace;case"MetricData":return v.Metric;case"RequestData":return v.Request;case"RemoteDependencyData":return v.Dependency;case"AvailabilityData":return v.Availability;case"PageViewData":return v.PageView}}s.baseTypeToTelemetryType=d,s.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var v;(function(_){_[_.Event=0]="Event",_[_.Exception=1]="Exception",_[_.Trace=2]="Trace",_[_.Metric=3]="Metric",_[_.Request=4]="Request",_[_.Dependency=5]="Dependency",_[_.Availability=6]="Availability",_[_.PageView=7]="PageView"})(v=s.TelemetryType||(s.TelemetryType={}))}),Lo=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(_s(),s),d(Tr(),s),d(wl(),s),d(sn(),s),d(ma(),s),d(yi(),s),d(or(),s),d(fa(),s),d(an(),s),d(Fo(),s),d(Kt(),s),d(bi(),s),d(El(),s)}),Ui=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),qo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Uo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),$o=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),kl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Go=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ga=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),$i=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ho=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Ui(),s),d(qo(),s),d(Uo(),s),d($o(),s),d(kl(),s),d(Go(),s),d(ga(),s),d($i(),s)}),Bt=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(vi(),s),d(Cn(),s),d(Lo(),s),d(Ho(),s)}),Lt=O((s,T)=>{"use strict";var d=function(){function v(){}return v.prototype.getUrl=function(){return this.url},v.prototype.RequestParser=function(){this.startTime=+new Date},v.prototype._setStatus=function(_,c){var l=+new Date;this.duration=l-this.startTime,this.statusCode=_;var h=this.properties||{};if(c){if(typeof c=="string")h.error=c;else if(c instanceof Error)h.error=c.message;else if(typeof c=="object")for(var p in c)h[p]=c[p]&&c[p].toString&&c[p].toString()}this.properties=h},v.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},v}();T.exports=d}),Fr=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var b=function(w,k){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,A){R.__proto__=A}||function(R,A){for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(R[D]=A[D])},b(w,k)};return function(w,k){b(w,k);function R(){this.constructor=w}w.prototype=k===null?Object.create(k):(R.prototype=k.prototype,new R)}}(),v=x(8835),_=Bt(),c=mr(),l=mi(),h=Lt(),p=fi(),g=Io(),y=bs(),m=function(b){d(w,b);function w(k,R){var A=b.call(this)||this;return k&&(A.method=k.method,A.url=A._getAbsoluteUrl(k),A.startTime=+new Date,A.socketRemoteAddress=k.socket&&k.socket.remoteAddress,A.parseHeaders(k,R),k.connection&&(A.connectionRemoteAddress=k.connection.remoteAddress,A.legacySocketRemoteAddress=k.connection.socket&&k.connection.socket.remoteAddress)),A}return w.prototype.onError=function(k,R){this._setStatus(void 0,k),R&&(this.duration=R)},w.prototype.onResponse=function(k,R){this._setStatus(k.statusCode,void 0),R&&(this.duration=R)},w.prototype.getRequestTelemetry=function(k){var R={id:this.requestId,name:this.method+" "+v.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(k&&k.time?R.time=k.time:this.startTime&&(R.time=new Date(this.startTime)),k){for(var A in k)R[A]||(R[A]=k[A]);if(k.properties)for(var A in k.properties)R.properties[A]=k.properties[A]}return R},w.prototype.getRequestTags=function(k){var R={};for(var A in k)R[A]=k[A];return R[w.keys.locationIp]=k[w.keys.locationIp]||this._getIp(),R[w.keys.sessionId]=k[w.keys.sessionId]||this._getId("ai_session"),R[w.keys.userId]=k[w.keys.userId]||this._getId("ai_user"),R[w.keys.userAuthUserId]=k[w.keys.userAuthUserId]||this._getId("ai_authUser"),R[w.keys.operationName]=this.getOperationName(k),R[w.keys.operationParentId]=this.getOperationParentId(k),R[w.keys.operationId]=this.getOperationId(k),R},w.prototype.getOperationId=function(k){return k[w.keys.operationId]||this.operationId},w.prototype.getOperationParentId=function(k){return k[w.keys.operationParentId]||this.parentId||this.getOperationId(k)},w.prototype.getOperationName=function(k){return k[w.keys.operationName]||this.method+" "+v.parse(this.url).pathname},w.prototype.getRequestId=function(){return this.requestId},w.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},w.prototype.getTraceparent=function(){return this.traceparent},w.prototype.getTracestate=function(){return this.tracestate},w.prototype.getLegacyRootId=function(){return this.legacyRootId},w.prototype._getAbsoluteUrl=function(k){if(!k.headers)return k.url;var R=k.connection?k.connection.encrypted:null,A=v.parse(k.url),D=A.pathname,B=A.search,X=R||k.headers["x-forwarded-proto"]=="https"?"https":"http",Q=v.format({protocol:X,host:k.headers.host,pathname:D,search:B});return Q},w.prototype._getIp=function(){var k=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,R=function(D){var B=k.exec(D);if(B)return B[0]},A=R(this.rawHeaders["x-forwarded-for"])||R(this.rawHeaders["x-client-ip"])||R(this.rawHeaders["x-real-ip"])||R(this.connectionRemoteAddress)||R(this.socketRemoteAddress)||R(this.legacySocketRemoteAddress);return!A&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(A="127.0.0.1"),A},w.prototype._getId=function(k){var R=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",A=w.parseId(c.getCookie(k,R));return A},w.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},w.prototype.parseHeaders=function(k,R){if(this.rawHeaders=k.headers||k.rawHeaders,this.userAgent=k.headers&&k.headers["user-agent"],this.sourceCorrelationId=c.getCorrelationContextTarget(k,l.requestContextSourceKey),k.headers){var A=k.headers[l.traceStateHeader]?k.headers[l.traceStateHeader].toString():null,D=k.headers[l.traceparentHeader]?k.headers[l.traceparentHeader].toString():null,B=k.headers[l.requestIdHeader]?k.headers[l.requestIdHeader].toString():null,X=k.headers[l.parentIdHeader]?k.headers[l.parentIdHeader].toString():null,Q=k.headers[l.rootIdHeader]?k.headers[l.rootIdHeader].toString():null;this.correlationContextHeader=k.headers[l.correlationContextHeader]?k.headers[l.correlationContextHeader].toString():null,p.w3cEnabled&&(D||A)?(this.traceparent=new y(D?D.toString():null),this.tracestate=D&&A&&new g(A?A.toString():null),this.setBackCompatFromThisTraceContext()):B?p.w3cEnabled?(this.traceparent=new y(null,B),this.setBackCompatFromThisTraceContext()):(this.parentId=B,this.requestId=p.generateRequestId(this.parentId),this.operationId=p.getRootId(this.requestId)):p.w3cEnabled?(this.traceparent=new y,this.traceparent.parentId=X,this.traceparent.legacyRootId=Q||X,this.setBackCompatFromThisTraceContext()):(this.parentId=X,this.requestId=p.generateRequestId(Q||this.parentId),this.correlationContextHeader=null,this.operationId=p.getRootId(this.requestId)),R&&(this.requestId=R,this.operationId=p.getRootId(this.requestId))}},w.parseId=function(k){var R=k.split("|");return R.length>0?R[0]:""},w.keys=new _.ContextTagKeys,w}(h);T.exports=m}),Gi=O((s,T)=>{"use strict";function d(y){return typeof y=="function"}var v=console.error.bind(console);function _(y,m,b){var w=!!y[m]&&y.propertyIsEnumerable(m);Object.defineProperty(y,m,{configurable:!0,enumerable:w,writable:!0,value:b})}function c(y){y&&y.logger&&(d(y.logger)?v=y.logger:v("new logger isn't a function, not replacing"))}function l(y,m,b){if(!y||!y[m]){v("no original function "+m+" to wrap");return}if(!b){v("no wrapper function"),v(new Error().stack);return}if(!d(y[m])||!d(b)){v("original object and wrapper must be functions");return}var w=y[m],k=b(w,m);return _(k,"__original",w),_(k,"__unwrap",function(){y[m]===k&&_(y,m,w)}),_(k,"__wrapped",!0),_(y,m,k),k}function h(y,m,b){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(m&&Array.isArray(m))){v("must provide one or more functions to wrap on modules");return}y.forEach(function(w){m.forEach(function(k){l(w,k,b)})})}function p(y,m){if(!y||!y[m]){v("no function to unwrap."),v(new Error().stack);return}if(!y[m].__unwrap)v("no original to unwrap to -- has "+m+" already been unwrapped?");else return y[m].__unwrap()}function g(y,m){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(m&&Array.isArray(m))){v("must provide one or more functions to unwrap on modules");return}y.forEach(function(b){m.forEach(function(w){p(b,w)})})}c.wrap=l,c.massWrap=h,c.unwrap=p,c.massUnwrap=g,T.exports=c}),Hi=O((s,T)=>{"use strict";var d=Gi(),v=d.wrap,_=d.unwrap,c="wrap@before";function l(m,b,w){var k=!!m[b]&&m.propertyIsEnumerable(b);Object.defineProperty(m,b,{configurable:!0,enumerable:k,writable:!0,value:w})}function h(m,b){for(var w=b.length,k=0;k<w;k++){var R=b[k],A=m[c];if(typeof A=="function")A(R);else if(Array.isArray(A))for(var D=A.length,B=0;B<D;B++)A[B](R)}}function p(m,b){var w;return w=m._events&&m._events[b],Array.isArray(w)||(w?w=[w]:w=[]),w}function g(m,b,w){var k=p(m,b),R=k.filter(function(A){return w.indexOf(A)===-1});R.length>0&&h(m,R)}function y(m,b){if(m){var w=m;if(typeof m=="function")w=b(m);else if(Array.isArray(m)){w=[];for(var k=0;k<m.length;k++)w[k]=b(m[k])}return w}}T.exports=function(m,b,w){if(!m||!m.on||!m.addListener||!m.removeListener||!m.emit)throw new Error("can only wrap real EEs");if(!b)throw new Error("must have function to run on listener addition");if(!w)throw new Error("must have function to wrap listeners when emitting");function k(A){return function(D,B){var X=p(this,D).slice();try{var Q=A.call(this,D,B);return g(this,D,X),Q}finally{this.on.__wrapped||v(this,"on",k),this.addListener.__wrapped||v(this,"addListener",k)}}}function R(A){return function(D){if(!this._events||!this._events[D])return A.apply(this,arguments);var B=this._events[D];function X(Q){return function(){this._events[D]=B;try{return Q.apply(this,arguments)}finally{B=this._events[D],this._events[D]=y(B,w)}}}v(this,"removeListener",X);try{return this._events[D]=y(B,w),A.apply(this,arguments)}finally{_(this,"removeListener"),this._events[D]=B}}}m[c]?typeof m[c]=="function"?l(m,c,[m[c],b]):Array.isArray(m[c])&&m[c].push(b):l(m,c,b),m.__wrapped||(v(m,"addListener",k),v(m,"on",k),v(m,"emit",R),l(m,"__unwrap",function(){_(m,"addListener"),_(m,"on"),_(m,"emit"),delete m[c],delete m.__wrapped}),l(m,"__wrapped",!0))}}),va=O((s,T)=>{"use strict";var d=x(1669),v=x(2357),_=Hi(),c=x(7303),l="cls@contexts",h="error@context",p=process.env.DEBUG_CLS_HOOKED,g=-1;T.exports={getNamespace:m,createNamespace:b,destroyNamespace:w,reset:k,ERROR_SYMBOL:h};function y(A){this.name=A,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}y.prototype.set=function(A,D){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[A]=D,p){let B=" ".repeat(this._indent<0?0:this._indent);R(B+"CONTEXT-SET KEY:"+A+"="+D+" in ns:"+this.name+" currentUid:"+g+" active:"+d.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return D},y.prototype.get=function(A){if(!this.active){if(p){let D=c.currentId(),B=c.triggerAsyncId(),X=" ".repeat(this._indent<0?0:this._indent);R(`${X}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${A}=undefined currentUid:${g} asyncHooksCurrentId:${D} triggerId:${B} len:${this._set.length}`)}return}if(p){let D=c.executionAsyncId(),B=c.triggerAsyncId(),X=" ".repeat(this._indent<0?0:this._indent);R(X+"CONTEXT-GETTING KEY:"+A+"="+this.active[A]+" ("+this.name+") currentUid:"+g+" active:"+d.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),R(`${X}CONTEXT-GETTING KEY: (${this.name}) ${A}=${this.active[A]} currentUid:${g} asyncHooksCurrentId:${D} triggerId:${B} len:${this._set.length} active:${d.inspect(this.active)}`)}return this.active[A]},y.prototype.createContext=function(){let A=Object.create(this.active?this.active:Object.prototype);if(A._ns_name=this.name,A.id=g,p){let D=c.executionAsyncId(),B=c.triggerAsyncId(),X=" ".repeat(this._indent<0?0:this._indent);R(`${X}CONTEXT-CREATED Context: (${this.name}) currentUid:${g} asyncHooksCurrentId:${D} triggerId:${B} len:${this._set.length} context:${d.inspect(A,{showHidden:!0,depth:2,colors:!0})}`)}return A},y.prototype.run=function(A){let D=this.createContext();this.enter(D);try{if(p){let B=c.triggerAsyncId(),X=c.executionAsyncId(),Q=" ".repeat(this._indent<0?0:this._indent);R(`${Q}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${g} triggerId:${B} asyncHooksCurrentId:${X} len:${this._set.length} context:${d.inspect(D)}`)}return A(D),D}catch(B){throw B&&(B[h]=D),B}finally{if(p){let B=c.triggerAsyncId(),X=c.executionAsyncId(),Q=" ".repeat(this._indent<0?0:this._indent);R(`${Q}CONTEXT-RUN END: (${this.name}) currentUid:${g} triggerId:${B} asyncHooksCurrentId:${X} len:${this._set.length} ${d.inspect(D)}`)}this.exit(D)}},y.prototype.runAndReturn=function(A){let D;return this.run(function(B){D=A(B)}),D},y.prototype.runPromise=function(A){let D=this.createContext();this.enter(D);let B=A(D);if(!B||!B.then||!B.catch)throw new Error("fn must return a promise.");return p&&R("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(D)),B.then(X=>(p&&R("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(D)),this.exit(D),X)).catch(X=>{throw X[h]=D,p&&R("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(D)),this.exit(D),X})},y.prototype.bind=function(A,D){D||(this.active?D=this.active:D=this.createContext());let B=this;return function(){B.enter(D);try{return A.apply(this,arguments)}catch(X){throw X&&(X[h]=D),X}finally{B.exit(D)}}},y.prototype.enter=function(A){if(v.ok(A,"context must be provided for entering"),p){let D=c.executionAsyncId(),B=c.triggerAsyncId(),X=" ".repeat(this._indent<0?0:this._indent);R(`${X}CONTEXT-ENTER: (${this.name}) currentUid:${g} triggerId:${B} asyncHooksCurrentId:${D} len:${this._set.length} ${d.inspect(A)}`)}this._set.push(this.active),this.active=A},y.prototype.exit=function(A){if(v.ok(A,"context must be provided for exiting"),p){let B=c.executionAsyncId(),X=c.triggerAsyncId(),Q=" ".repeat(this._indent<0?0:this._indent);R(`${Q}CONTEXT-EXIT: (${this.name}) currentUid:${g} triggerId:${X} asyncHooksCurrentId:${B} len:${this._set.length} ${d.inspect(A)}`)}if(this.active===A){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let D=this._set.lastIndexOf(A);D<0?(p&&R("??ERROR?? context exiting but not entered - ignoring: "+d.inspect(A)),v.ok(D>=0,`context not currently entered; can't exit. 
`+d.inspect(this)+`
`+d.inspect(A))):(v.ok(D,"can't remove top context"),this._set.splice(D,1))},y.prototype.bindEmitter=function(A){v.ok(A.on&&A.addListener&&A.emit,"can only bind real EEs");let D=this,B="context@"+this.name;function X(oe){!oe||(oe[l]||(oe[l]=Object.create(null)),oe[l][B]={namespace:D,context:D.active})}function Q(oe){if(!(oe&&oe[l]))return oe;let ge=oe,Se=oe[l];return Object.keys(Se).forEach(function(Te){let Ne=Se[Te];ge=Ne.namespace.bind(ge,Ne.context)}),ge}_(A,X,Q)},y.prototype.fromException=function(A){return A[h]};function m(A){return process.namespaces[A]}function b(A){v.ok(A,"namespace must be given a name."),p&&R(`NS-CREATING NAMESPACE (${A})`);let D=new y(A);return D.id=g,c.createHook({init(B,X,Q,oe){if(g=c.executionAsyncId(),D.active){if(D._contexts.set(B,D.active),p){let ge=" ".repeat(D._indent<0?0:D._indent);R(`${ge}INIT [${X}] (${A}) asyncId:${B} currentUid:${g} triggerId:${Q} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}}else if(g===0){let ge=c.triggerAsyncId(),Se=D._contexts.get(ge);if(Se){if(D._contexts.set(B,Se),p){let Te=" ".repeat(D._indent<0?0:D._indent);R(`${Te}INIT USING CONTEXT FROM TRIGGERID [${X}] (${A}) asyncId:${B} currentUid:${g} triggerId:${ge} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}}else if(p){let Te=" ".repeat(D._indent<0?0:D._indent);R(`${Te}INIT MISSING CONTEXT [${X}] (${A}) asyncId:${B} currentUid:${g} triggerId:${ge} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}}if(p&&X==="PROMISE"){R(d.inspect(oe,{showHidden:!0}));let ge=oe.parentId,Se=" ".repeat(D._indent<0?0:D._indent);R(`${Se}INIT RESOURCE-PROMISE [${X}] (${A}) parentId:${ge} asyncId:${B} currentUid:${g} triggerId:${Q} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}},before(B){g=c.executionAsyncId();let X;if(X=D._contexts.get(B)||D._contexts.get(g),X){if(p){let Q=c.triggerAsyncId(),oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}BEFORE (${A}) asyncId:${B} currentUid:${g} triggerId:${Q} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(X)}`),D._indent+=2}D.enter(X)}else if(p){let Q=c.triggerAsyncId(),oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}BEFORE MISSING CONTEXT (${A}) asyncId:${B} currentUid:${g} triggerId:${Q} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${d.inspect(D._contexts,{showHidden:!0,depth:2,colors:!0})}`),D._indent+=2}},after(B){g=c.executionAsyncId();let X;if(X=D._contexts.get(B)||D._contexts.get(g),X){if(p){let Q=c.triggerAsyncId();D._indent-=2;let oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}AFTER (${A}) asyncId:${B} currentUid:${g} triggerId:${Q} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(X)}`)}D.exit(X)}else if(p){let Q=c.triggerAsyncId();D._indent-=2;let oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}AFTER MISSING CONTEXT (${A}) asyncId:${B} currentUid:${g} triggerId:${Q} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(X)}`)}},destroy(B){if(g=c.executionAsyncId(),p){let X=c.triggerAsyncId(),Q=" ".repeat(D._indent<0?0:D._indent);R(`${Q}DESTROY (${A}) currentUid:${g} asyncId:${B} triggerId:${X} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(D._contexts.get(g))}`)}D._contexts.delete(B)}}).enable(),process.namespaces[A]=D,D}function w(A){let D=m(A);v.ok(D,`can't delete nonexistent namespace! "`+A+'"'),v.ok(D.id,"don't assign to process.namespaces directly! "+d.inspect(D)),process.namespaces[A]=null}function k(){process.namespaces&&Object.keys(process.namespaces).forEach(function(A){w(A)}),process.namespaces=Object.create(null)}process.namespaces={};function R(...A){p&&process._rawDebug(`${d.format(...A)}`)}}),ya=O((s,T)=>{"use strict";function d(){}T.exports=function(){let v=this._hooks,_=this._state,c=process.nextTick;process.nextTick=function(){if(!_.enabled)return c.apply(process,arguments);let l=new Array(arguments.length);for(let y=0;y<arguments.length;y++)l[y]=arguments[y];let h=l[0];if(typeof h!="function")throw new TypeError("callback is not a function");let p=new d,g=--_.counter;return v.init.call(p,g,0,null,null),l[0]=function(){v.pre.call(p,g);let y=!0;try{h.apply(this,arguments),y=!1}finally{y&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){v.post.call(p,g,!0),v.destroy.call(null,g)})}v.post.call(p,g,!1),v.destroy.call(null,g)},c.apply(process,l)}}}),Sl=O((s,T)=>{"use strict";function d(){}T.exports=function(){let v=this._hooks,_=this._state,c=global.Promise,l=c.prototype.then;c.prototype.then=y;function h(m,b,w,k){return typeof m!="function"?k?p(w):g(w):function(){v.pre.call(b,w);try{return m.apply(this,arguments)}finally{v.post.call(b,w,!1),v.destroy.call(null,w)}}}function p(m){return function(b){return v.destroy.call(null,m),b}}function g(m){return function(b){throw v.destroy.call(null,m),b}}function y(m,b){if(!_.enabled)return l.call(this,m,b);let w=new d,k=--_.counter;return v.init.call(w,k,0,null,null),l.call(this,h(m,w,k,!0),h(b,w,k,!1))}}}),Tl=O((s,T)=>{"use strict";var d=x(8213);function v(){}function _(){}function c(){}var l=new Map,h=new Map,p=new Map,g=null,y=!1;T.exports=function(){m(this._hooks,this._state,"setTimeout","clearTimeout",v,l,!0),m(this._hooks,this._state,"setInterval","clearInterval",_,h,!1),m(this._hooks,this._state,"setImmediate","clearImmediate",c,p,!0),global.setTimeout=d.setTimeout,global.setInterval=d.setInterval,global.setImmediate=d.setImmediate,global.clearTimeout=d.clearTimeout,global.clearInterval=d.clearInterval,global.clearImmediate=d.clearImmediate};function m(b,w,k,R,A,D,B){let X=d[k],Q=d[R];d[k]=function(){if(!w.enabled)return X.apply(d,arguments);let oe=new Array(arguments.length);for(let Re=0;Re<arguments.length;Re++)oe[Re]=arguments[Re];let ge=oe[0];if(typeof ge!="function")throw new TypeError('"callback" argument must be a function');let Se=new A,Te=--w.counter,Ne;return b.init.call(Se,Te,0,null,null),oe[0]=function(){g=Ne,b.pre.call(Se,Te);let Re=!0;try{ge.apply(this,arguments),Re=!1}finally{Re&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){b.post.call(Se,Te,!0),D.delete(Ne),b.destroy.call(null,Te)})}b.post.call(Se,Te,!1),g=null,(B||y)&&(y=!1,D.delete(Ne),b.destroy.call(null,Te))},Ne=X.apply(d,oe),D.set(Ne,Te),Ne},d[R]=function(oe){if(g===oe&&oe!==null)y=!0;else if(D.has(oe)){let ge=D.get(oe);D.delete(oe),b.destroy.call(null,ge)}Q.apply(d,arguments)}}}),on=O((s,T)=>{T.exports={_args:[["async-hook-jl@1.7.6","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"async-hook-jl@1.7.6",_id:"async-hook-jl@1.7.6",_inBundle:!1,_integrity:"sha512-gFaHkFfSxTjvoxDMYqDuGHlcRyUuamF8s+ZTtJdDzqjws4mCt7v0vuV79/E2Wr2/riMQgtG4/yUtXWs1gZ7JMg==",_location:"/async-hook-jl",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"async-hook-jl@1.7.6",name:"async-hook-jl",escapedName:"async-hook-jl",rawSpec:"1.7.6",saveSpec:null,fetchSpec:"1.7.6"},_requiredBy:["/cls-hooked"],_resolved:"https://registry.npmjs.org/async-hook-jl/-/async-hook-jl-1.7.6.tgz",_spec:"1.7.6",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/jeff-lewis/async-hook-jl/issues"},dependencies:{"stack-chain":"^1.3.7"},description:"Inspect the life of handle objects in node",devDependencies:{async:"1.5.x","cli-color":"1.1.x",endpoint:"0.4.x",eslint:"^3.4.0"},engines:{node:"^4.7 || >=6.9 || >=7.3"},homepage:"https://github.com/jeff-lewis/async-hook-jl#readme",keywords:["async","async hooks","inspect","async wrap"],license:"MIT",main:"./index.js",name:"async-hook-jl",repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},scripts:{test:"node ./test/runner.js && eslint ."},version:"1.7.6"}}),Rl=O((s,T)=>{"use strict";var d=process.binding("async_wrap"),v=d.Providers.TIMERWRAP,_={nextTick:ya(),promise:Sl(),timers:Tl()},c=new Set;function l(){this.enabled=!1,this.counter=0}function h(){let y=this.initFns=[],m=this.preFns=[],b=this.postFns=[],w=this.destroyFns=[];this.init=function(k,R,A,D){if(R===v){c.add(k);return}for(let B of y)B(k,this,R,A,D)},this.pre=function(k){if(!c.has(k))for(let R of m)R(k,this)},this.post=function(k,R){if(!c.has(k))for(let A of b)A(k,this,R)},this.destroy=function(k){if(c.has(k)){c.delete(k);return}for(let R of w)R(k)}}h.prototype.add=function(y){y.init&&this.initFns.push(y.init),y.pre&&this.preFns.push(y.pre),y.post&&this.postFns.push(y.post),y.destroy&&this.destroyFns.push(y.destroy)};function p(y,m){let b=y.indexOf(m);b!==-1&&y.splice(b,1)}h.prototype.remove=function(y){y.init&&p(this.initFns,y.init),y.pre&&p(this.preFns,y.pre),y.post&&p(this.postFns,y.post),y.destroy&&p(this.destroyFns,y.destroy)};function g(){this._state=new l,this._hooks=new h,this.version=on().version,this.providers=d.Providers;for(let y of Object.keys(_))_[y].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),d.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}T.exports=g,g.prototype.addHooks=function(y){this._hooks.add(y)},g.prototype.removeHooks=function(y){this._hooks.remove(y)},g.prototype.enable=function(){this._state.enabled=!0,d.enable()},g.prototype.disable=function(){this._state.enabled=!1,d.disable()}}),Br=O((s,T)=>{T.exports={_args:[["stack-chain@1.3.7","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"stack-chain@1.3.7",_id:"stack-chain@1.3.7",_inBundle:!1,_integrity:"sha1-0ZLJ/06moiyUxN1FkXHj8AzqEoU=",_location:"/stack-chain",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"stack-chain@1.3.7",name:"stack-chain",escapedName:"stack-chain",rawSpec:"1.3.7",saveSpec:null,fetchSpec:"1.3.7"},_requiredBy:["/async-hook-jl"],_resolved:"https://registry.npmjs.org/stack-chain/-/stack-chain-1.3.7.tgz",_spec:"1.3.7",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/AndreasMadsen/stack-chain/issues"},description:"API for combining call site modifiers",devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},homepage:"https://github.com/AndreasMadsen/stack-chain#readme",keywords:["stack","chain","trace","call site","concat","format"],license:"MIT",name:"stack-chain",repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},scripts:{test:"tap ./test/simple"},version:"1.3.7"}}),un=O((s,T)=>{function d(v){try{return Error.prototype.toString.call(v)}catch(_){try{return"<error: "+_+">"}catch(c){return"<error>"}}}T.exports=function(v,_){var c=[];c.push(d(v));for(var l=0;l<_.length;l++){var h=_[l],p;try{p=h.toString()}catch(g){try{p="<error: "+g+">"}catch(y){p="<error>"}}c.push("    at "+p)}return c.join(`
`)}}),ba=O((s,T)=>{var d=un();function v(){this.extend=new l,this.filter=new l,this.format=new h,this.version=Br().version}var _=!1;v.prototype.callSite=function m(b){b||(b={}),_=!0;var w={};Error.captureStackTrace(w,m);var k=w.stack;return _=!1,k=k.slice(b.slice||0),b.extend&&(k=this.extend._modify(w,k)),b.filter&&(k=this.filter._modify(w,k)),k};var c=new v;function l(){this._modifiers=[]}l.prototype._modify=function(m,b){for(var w=0,k=this._modifiers.length;w<k;w++)b=this._modifiers[w](m,b);return b},l.prototype.attach=function(m){this._modifiers.push(m)},l.prototype.deattach=function(m){var b=this._modifiers.indexOf(m);return b===-1?!1:(this._modifiers.splice(b,1),!0)};function h(){this._formater=d,this._previous=void 0}h.prototype.replace=function(m){m?this._formater=m:this.restore()},h.prototype.restore=function(){this._formater=d,this._previous=void 0},h.prototype._backup=function(){this._previous=this._formater},h.prototype._roolback=function(){this._previous===d?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&c.format.replace(Error.prepareStackTrace);var p=!1;function g(m,b){if(_)return b;if(p)return d(m,b);var w=b.concat();w=c.extend._modify(m,w),w=c.filter._modify(m,w),w=w.slice(0,Error.stackTraceLimit),Object.isExtensible(m)&&Object.getOwnPropertyDescriptor(m,"callSite")===void 0&&(m.callSite={original:b,mutated:w}),p=!0;var k=c.format._formater(m,w);return p=!1,k}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return g},set:function(m){m===g?c.format._roolback():(c.format._backup(),c.format.replace(m))}});function y(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:y,set:function(m){Object.defineProperty(this,"callSite",{value:m,writable:!0,configurable:!0})},configurable:!0}),T.exports=c}),Bo=O((s,T)=>{if(global._stackChain)if(global._stackChain.version===Br().version)T.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else T.exports=global._stackChain=ba()}),Cl=O((s,T)=>{"use strict";var d=Rl();if(global._asyncHook)if(global._asyncHook.version===on().version)T.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Bo().filter.attach(function(v,_){return _.filter(function(c){let l=c.getFileName();return!(l&&l.slice(0,__dirname.length)===__dirname)})}),T.exports=global._asyncHook=new d}),ws=O((s,T)=>{"use strict";var d=x(1669),v=x(2357),_=Hi(),c=Cl(),l="cls@contexts",h="error@context",p=[];for(let Q in c.providers)p[c.providers[Q]]=Q;var g=process.env.DEBUG_CLS_HOOKED,y=-1;T.exports={getNamespace:b,createNamespace:w,destroyNamespace:k,reset:R,ERROR_SYMBOL:h};function m(Q){this.name=Q,this.active=null,this._set=[],this.id=null,this._contexts=new Map}m.prototype.set=function(Q,oe){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return g&&A("    SETTING KEY:"+Q+"="+oe+" in ns:"+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0)),this.active[Q]=oe,oe},m.prototype.get=function(Q){if(!this.active){g&&A("    GETTING KEY:"+Q+"=undefined "+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0));return}return g&&A("    GETTING KEY:"+Q+"="+this.active[Q]+" "+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0)),this.active[Q]},m.prototype.createContext=function(){g&&A("   CREATING Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  active:"+d.inspect(this.active,!0,2,!0));let Q=Object.create(this.active?this.active:Object.prototype);return Q._ns_name=this.name,Q.id=y,g&&A("   CREATED Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  context:"+d.inspect(Q,!0,2,!0)),Q},m.prototype.run=function(Q){let oe=this.createContext();this.enter(oe);try{return g&&A(" BEFORE RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),Q(oe),oe}catch(ge){throw ge&&(ge[h]=oe),ge}finally{g&&A(" AFTER RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),this.exit(oe)}},m.prototype.runAndReturn=function(Q){var oe;return this.run(function(ge){oe=Q(ge)}),oe},m.prototype.runPromise=function(Q){let oe=this.createContext();this.enter(oe);let ge=Q(oe);if(!ge||!ge.then||!ge.catch)throw new Error("fn must return a promise.");return g&&A(" BEFORE runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),ge.then(Se=>(g&&A(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),this.exit(oe),Se)).catch(Se=>{throw Se[h]=oe,g&&A(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),this.exit(oe),Se})},m.prototype.bind=function(Q,oe){oe||(this.active?oe=this.active:oe=this.createContext());let ge=this;return function(){ge.enter(oe);try{return Q.apply(this,arguments)}catch(Se){throw Se&&(Se[h]=oe),Se}finally{ge.exit(oe)}}},m.prototype.enter=function(Q){v.ok(Q,"context must be provided for entering"),g&&A("  ENTER "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+d.inspect(Q)),this._set.push(this.active),this.active=Q},m.prototype.exit=function(Q){if(v.ok(Q,"context must be provided for exiting"),g&&A("  EXIT "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+d.inspect(Q)),this.active===Q){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let oe=this._set.lastIndexOf(Q);oe<0?(g&&A("??ERROR?? context exiting but not entered - ignoring: "+d.inspect(Q)),v.ok(oe>=0,`context not currently entered; can't exit. 
`+d.inspect(this)+`
`+d.inspect(Q))):(v.ok(oe,"can't remove top context"),this._set.splice(oe,1))},m.prototype.bindEmitter=function(Q){v.ok(Q.on&&Q.addListener&&Q.emit,"can only bind real EEs");let oe=this,ge="context@"+this.name;function Se(Ne){!Ne||(Ne[l]||(Ne[l]=Object.create(null)),Ne[l][ge]={namespace:oe,context:oe.active})}function Te(Ne){if(!(Ne&&Ne[l]))return Ne;let Re=Ne,Ue=Ne[l];return Object.keys(Ue).forEach(function(ze){let ot=Ue[ze];Re=ot.namespace.bind(Re,ot.context)}),Re}_(Q,Se,Te)},m.prototype.fromException=function(Q){return Q[h]};function b(Q){return process.namespaces[Q]}function w(Q){v.ok(Q,"namespace must be given a name."),g&&A("CREATING NAMESPACE "+Q);let oe=new m(Q);return oe.id=y,c.addHooks({init(ge,Se,Te,Ne,Re){y=ge,Ne?(oe._contexts.set(ge,oe._contexts.get(Ne)),g&&A("PARENTID: "+Q+" uid:"+ge+" parent:"+Ne+" provider:"+Te)):oe._contexts.set(y,oe.active),g&&A("INIT "+Q+" uid:"+ge+" parent:"+Ne+" provider:"+p[Te]+" active:"+d.inspect(oe.active,!0))},pre(ge,Se){y=ge;let Te=oe._contexts.get(ge);Te?(g&&A(" PRE "+Q+" uid:"+ge+" handle:"+D(Se)+" context:"+d.inspect(Te)),oe.enter(Te)):g&&A(" PRE MISSING CONTEXT "+Q+" uid:"+ge+" handle:"+D(Se))},post(ge,Se){y=ge;let Te=oe._contexts.get(ge);Te?(g&&A(" POST "+Q+" uid:"+ge+" handle:"+D(Se)+" context:"+d.inspect(Te)),oe.exit(Te)):g&&A(" POST MISSING CONTEXT "+Q+" uid:"+ge+" handle:"+D(Se))},destroy(ge){y=ge,g&&A("DESTROY "+Q+" uid:"+ge+" context:"+d.inspect(oe._contexts.get(y))+" active:"+d.inspect(oe.active,!0)),oe._contexts.delete(ge)}}),process.namespaces[Q]=oe,oe}function k(Q){let oe=b(Q);v.ok(oe,`can't delete nonexistent namespace! "`+Q+'"'),v.ok(oe.id,"don't assign to process.namespaces directly! "+d.inspect(oe)),process.namespaces[Q]=null}function R(){process.namespaces&&Object.keys(process.namespaces).forEach(function(Q){k(Q)}),process.namespaces=Object.create(null)}process.namespaces={},c._state&&!c._state.enabled&&c.enable();function A(Q){process.env.DEBUG&&process._rawDebug(Q)}function D(Q){if(!Q)return Q;if(typeof Q=="function")return Q.name?Q.name:(Q.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(Q.constructor&&Q.constructor.name)return Q.constructor.name}if(g){B=Bo();for(X in B.filter._modifiers)B.filter.deattach(X)}var B,X}),Pl=O((s,T)=>{"use strict";var d=ye();process&&d.gte(process.versions.node,"8.0.0")?T.exports=va():T.exports=ws()}),zn=O((s,T)=>{var d=Gi().wrap,v=1<<0,_=1<<1,c=1<<2,l=1<<3,h=[],p=0,g=!1,y=[],m,b;function w(Se,Te){var Ne=Se.length,Re=Te.length,Ue=[];if(Ne===0&&Re===0)return Ue;for(var ze=0;ze<Ne;ze++)Ue[ze]=Se[ze];if(Re===0)return Ue;for(var ot=0;ot<Re;ot++){var tt=!0;for(ze=0;ze<Ne;ze++)if(Se[ze].uid===Te[ot].uid){tt=!1;break}tt&&Ue.push(Te[ot])}return Ue}process._fatalException?(k=!1,m=function(Se){var Te=h.length;if(k||Te===0)return!1;var Ne=!1;k=!0;for(var Re=0;Re<Te;++Re){var Ue=h[Re];if((Ue.flags&l)!=0){var ze=R&&R[Ue.uid];Ne=Ue.error(ze,Se)||Ne}}return k=!1,y.length>0&&(h=y.pop()),R=void 0,Ne&&!g},b=function(Se,Te,Ne){var Re=[];g=!0;for(var Ue=0;Ue<Ne;++Ue){var ze=Te[Ue];if(Re[ze.uid]=ze.data,(ze.flags&v)!=0){var ot=ze.create(ze.data);ot!==void 0&&(Re[ze.uid]=ot)}}return g=!1,function(){R=Re,y.push(h),h=w(Te,h),g=!0;for(var tt=0;tt<Ne;++tt)(Te[tt].flags&_)>0&&Te[tt].before(this,Re[Te[tt].uid]);g=!1;var qt=Se.apply(this,arguments);for(g=!0,tt=0;tt<Ne;++tt)(Te[tt].flags&c)>0&&Te[tt].after(this,Re[Te[tt].uid]);return g=!1,h=y.pop(),R=void 0,qt}},d(process,"_fatalException",function(Se){return function(Te){return m(Te)||Se(Te)}})):(A=!1,m=function(Se){if(A)throw Se;for(var Te=!1,Ne=h.length,Re=0;Re<Ne;++Re){var Ue=h[Re];(Ue.flags&l)!=0&&(Te=Ue.error(null,Se)||Te)}if(!Te&&g)throw Se},b=function(Se,Te,Ne){var Re=[];g=!0;for(var Ue=0;Ue<Ne;++Ue){var ze=Te[Ue];if(Re[ze.uid]=ze.data,(ze.flags&v)!=0){var ot=ze.create(ze.data);ot!==void 0&&(Re[ze.uid]=ot)}}return g=!1,function(){var tt=!1,qt=!1;y.push(h),h=w(Te,h),g=!0;for(var ct=0;ct<Ne;++ct)(Te[ct].flags&_)>0&&Te[ct].before(this,Re[Te[ct].uid]);g=!1;var Ie;try{Ie=Se.apply(this,arguments)}catch(qe){tt=!0;for(var ct=0;ct<Ne;++ct)if((h[ct].flags&l)!=0)try{qt=h[ct].error(Re[Te[ct].uid],qe)||qt}catch(je){throw A=!0,je}if(!qt)throw process.removeListener("uncaughtException",m),process._originalNextTick(function(){process.addListener("uncaughtException",m)}),qe}finally{if(!tt||qt){for(g=!0,ct=0;ct<Ne;++ct)(Te[ct].flags&c)>0&&Te[ct].after(this,Re[Te[ct].uid]);g=!1}h=y.pop()}return Ie}},process.addListener("uncaughtException",m));var k,R,A;function D(Se,Te,Ne){g=!0;for(var Re=0;Re<Ne;++Re){var Ue=Te[Re];Ue.create&&Ue.create(Ue.data)}return g=!1,function(){y.push(h),h=w(Te,h);var ze=Se.apply(this,arguments);return h=y.pop(),ze}}function B(Se){var Te=h.length;if(Te===0)return Se;for(var Ne=h.slice(),Re=0;Re<Te;++Re)if(Ne[Re].flags>0)return b(Se,Ne,Te);return D(Se,Ne,Te)}function X(Se,Te){typeof Se.create=="function"&&(this.create=Se.create,this.flags|=v),typeof Se.before=="function"&&(this.before=Se.before,this.flags|=_),typeof Se.after=="function"&&(this.after=Se.after,this.flags|=c),typeof Se.error=="function"&&(this.error=Se.error,this.flags|=l),this.uid=++p,this.data=Te===void 0?null:Te}X.prototype.create=void 0,X.prototype.before=void 0,X.prototype.after=void 0,X.prototype.error=void 0,X.prototype.data=void 0,X.prototype.uid=0,X.prototype.flags=0;function Q(Se,Te){if(typeof Se!="object"||!Se)throw new TypeError("callbacks argument must be an object");return Se instanceof X?Se:new X(Se,Te)}function oe(Se,Te){var Ne;Se instanceof X?Ne=Se:Ne=Q(Se,Te);for(var Re=!1,Ue=0;Ue<h.length;Ue++)if(Ne===h[Ue]){Re=!0;break}return Re||h.push(Ne),Ne}function ge(Se){for(var Te=0;Te<h.length;Te++)if(Se===h[Te]){h.splice(Te,1);break}}process.createAsyncListener=Q,process.addAsyncListener=oe,process.removeAsyncListener=ge,T.exports=B}),Nl=O((s,T)=>{"use strict";T.exports=(d,v)=>class extends d{constructor(_){var c,l;super(p);var h=this;try{_.apply(c,l)}catch(g){l[1](g)}return h;function p(g,y){c=this,l=[m,b];function m(w){return v(h,!1),g(w)}function b(w){return v(h,!1),y(w)}}}}}),Bi=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var s=Gi(),T=ye(),d=s.wrap,v=s.massWrap,_=zn(),c=x(1669),l=T.gte(process.version,"6.0.0"),h=T.gte(process.version,"7.0.0"),p=T.gte(process.version,"8.0.0"),g=T.gte(process.version,"11.0.0"),y=x(1631);h&&!y._normalizeArgs?y._normalizeArgs=function(Ie){if(Ie.length===0)return[{},null];var qe=Ie[0],Le={};typeof qe=="object"&&qe!==null?Le=qe:ct(qe)?Le.path=qe:(Le.port=qe,Ie.length>1&&typeof Ie[1]=="string"&&(Le.host=Ie[1]));var je=Ie[Ie.length-1];return typeof je!="function"?[Le,null]:[Le,je]}:!h&&!y._normalizeConnectArgs&&(y._normalizeConnectArgs=function(Ie){var qe={};function Le(Ke){return(Ke=Number(Ke))>=0?Ke:!1}typeof Ie[0]=="object"&&Ie[0]!==null?qe=Ie[0]:typeof Ie[0]=="string"&&Le(Ie[0])===!1?qe.path=Ie[0]:(qe.port=Ie[0],typeof Ie[1]=="string"&&(qe.host=Ie[1]));var je=Ie[Ie.length-1];return typeof je=="function"?[qe,je]:[qe]}),"_setUpListenHandle"in y.Server.prototype?d(y.Server.prototype,"_setUpListenHandle",m):d(y.Server.prototype,"_listen2",m);function m(Ie){return function(){this.on("connection",function(qe){qe._handle&&(qe._handle.onread=_(qe._handle.onread))});try{return Ie.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=_(this._handle.onconnection))}}}function b(Ie){if(Ie&&Ie._handle){var qe=Ie._handle;qe._originalOnread||(qe._originalOnread=qe.onread),qe.onread=_(qe._originalOnread)}}d(y.Socket.prototype,"connect",function(Ie){return function(){var qe;p&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?qe=arguments[0]:qe=h?y._normalizeArgs(arguments):y._normalizeConnectArgs(arguments),qe[1]&&(qe[1]=_(qe[1]));var Le=Ie.apply(this,qe);return b(this),Le}});var w=x(8605);d(w.Agent.prototype,"addRequest",function(Ie){return function(qe){var Le=qe.onSocket;return qe.onSocket=_(function(je){return b(je),Le.apply(this,arguments)}),Ie.apply(this,arguments)}});var k=x(3129);function R(Ie){Array.isArray(Ie.stdio)&&Ie.stdio.forEach(function(qe){qe&&qe._handle&&(qe._handle.onread=_(qe._handle.onread),d(qe._handle,"close",tt))}),Ie._handle&&(Ie._handle.onexit=_(Ie._handle.onexit))}k.ChildProcess?d(k.ChildProcess.prototype,"spawn",function(Ie){return function(){var qe=Ie.apply(this,arguments);return R(this),qe}}):v(k,["execFile","fork","spawn"],function(Ie){return function(){var qe=Ie.apply(this,arguments);return R(qe),qe}}),process._fatalException||(process._originalNextTick=process.nextTick);var A=[];process._nextDomainTick&&A.push("_nextDomainTick"),process._tickDomainCallback&&A.push("_tickDomainCallback"),v(process,A,ot),d(process,"nextTick",tt);var D=["setTimeout","setInterval"];global.setImmediate&&D.push("setImmediate");var B=x(8213),X=global.setTimeout===B.setTimeout;v(B,D,tt),X&&v(global,D,tt);var Q=x(881);v(Q,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ot),Q.resolveNaptr&&d(Q,"resolveNaptr",ot);var oe=x(5747);v(oe,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ot),oe.lchown&&d(oe,"lchown",ot),oe.lchmod&&d(oe,"lchmod",ot),oe.ftruncate&&d(oe,"ftruncate",ot);var ge;try{ge=x(8761)}catch(Ie){}ge&&ge.Deflate&&ge.Deflate.prototype&&(Se=Object.getPrototypeOf(ge.Deflate.prototype),Se._transform?d(Se,"_transform",ot):Se.write&&Se.flush&&Se.end&&v(Se,["write","flush","end"],ot));var Se,Te;try{Te=x(6417)}catch(Ie){}Te&&(Ne=["pbkdf2","randomBytes"],g||Ne.push("pseudoRandomBytes"),v(Te,Ne,ot));var Ne,Re=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";Re&&(Ue=process.addAsyncListener({create:function(){Re=!1}}),global.Promise.resolve(!0).then(function(){Re=!1}),process.removeAsyncListener(Ue));var Ue;Re&&ze();function ze(){var Ie=global.Promise;function qe(Qe){if(!(this instanceof qe))return Ie(Qe);if(typeof Qe!="function")return new Ie(Qe);var kt,Yt,Gt=new Ie(Ot);Gt.__proto__=qe.prototype;try{Qe.apply(kt,Yt)}catch(wt){Yt[1](wt)}return Gt;function Ot(wt,er){kt=this,Yt=[Rr,Ze];function Rr(Ye){return je(Gt,!1),wt(Ye)}function Ze(Ye){return je(Gt,!1),er(Ye)}}}if(c.inherits(qe,Ie),d(Ie.prototype,"then",ut),Ie.prototype.chain&&d(Ie.prototype,"chain",ut),l)global.Promise=Nl()(Ie,je);else{var Le=["all","race","reject","resolve","accept","defer"];Le.forEach(function(Qe){typeof Ie[Qe]=="function"&&(qe[Qe]=Ie[Qe])}),global.Promise=qe}function je(Qe,kt){(!Qe.__asl_wrapper||kt)&&(Qe.__asl_wrapper=_(Ke))}function Ke(Qe,kt,Yt,Gt){var Ot;try{return Ot=kt.call(Qe,Yt),{returnVal:Ot,error:!1}}catch(wt){return{errorVal:wt,error:!0}}finally{Ot instanceof Ie?Gt.__asl_wrapper=function(){var wt=Ot.__asl_wrapper||Ke;return wt.apply(this,arguments)}:je(Gt,!0)}}function ut(Qe){return function(){var kt=this,Yt=Qe.apply(kt,Array.prototype.map.call(arguments,Gt));return Yt.__asl_wrapper=function(Ot,wt,er,Rr){return kt.__asl_wrapper?(kt.__asl_wrapper(Ot,function(){},null,Yt),Yt.__asl_wrapper(Ot,wt,er,Rr)):Ke(Ot,wt,er,Rr)},Yt;function Gt(Ot){return typeof Ot!="function"?Ot:_(function(wt){var er=(kt.__asl_wrapper||Ke)(this,Ot,wt,Yt);if(er.error)throw er.errorVal;return er.returnVal})}}}}function ot(Ie){var qe=function(){var Le,je=arguments.length-1;if(typeof arguments[je]=="function"){Le=Array(arguments.length);for(var Ke=0;Ke<arguments.length-1;Ke++)Le[Ke]=arguments[Ke];Le[je]=_(arguments[je])}return Ie.apply(this,Le||arguments)};switch(Ie.length){case 1:return function(Le){return arguments.length!==1?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le))};case 2:return function(Le,je){return arguments.length!==2?qe.apply(this,arguments):(typeof je=="function"&&(je=_(je)),Ie.call(this,Le,je))};case 3:return function(Le,je,Ke){return arguments.length!==3?qe.apply(this,arguments):(typeof Ke=="function"&&(Ke=_(Ke)),Ie.call(this,Le,je,Ke))};case 4:return function(Le,je,Ke,ut){return arguments.length!==4?qe.apply(this,arguments):(typeof ut=="function"&&(ut=_(ut)),Ie.call(this,Le,je,Ke,ut))};case 5:return function(Le,je,Ke,ut,Qe){return arguments.length!==5?qe.apply(this,arguments):(typeof Qe=="function"&&(Qe=_(Qe)),Ie.call(this,Le,je,Ke,ut,Qe))};case 6:return function(Le,je,Ke,ut,Qe,kt){return arguments.length!==6?qe.apply(this,arguments):(typeof kt=="function"&&(kt=_(kt)),Ie.call(this,Le,je,Ke,ut,Qe,kt))};default:return qe}}function tt(Ie){var qe=function(){var Le;if(typeof arguments[0]=="function"){Le=Array(arguments.length),Le[0]=_(arguments[0]);for(var je=1;je<arguments.length;je++)Le[je]=arguments[je]}return Ie.apply(this,Le||arguments)};switch(Ie.length){case 1:return function(Le){return arguments.length!==1?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le))};case 2:return function(Le,je){return arguments.length!==2?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je))};case 3:return function(Le,je,Ke){return arguments.length!==3?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke))};case 4:return function(Le,je,Ke,ut){return arguments.length!==4?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke,ut))};case 5:return function(Le,je,Ke,ut,Qe){return arguments.length!==5?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke,ut,Qe))};case 6:return function(Le,je,Ke,ut,Qe,kt){return arguments.length!==6?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke,ut,Qe,kt))};default:return qe}}function qt(Ie){return(Ie=Number(Ie))>=0?Ie:!1}function ct(Ie){return typeof Ie=="string"&&qt(Ie)===!1}}),Vo=O((s,T)=>{"use strict";var d=x(2357),v=Hi(),_="cls@contexts",c="error@context";process.addAsyncListener||Bi();function l(m){this.name=m,this.active=null,this._set=[],this.id=null}l.prototype.set=function(m,b){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[m]=b,b},l.prototype.get=function(m){if(this.active)return this.active[m]},l.prototype.createContext=function(){return Object.create(this.active)},l.prototype.run=function(m){var b=this.createContext();this.enter(b);try{return m(b),b}catch(w){throw w&&(w[c]=b),w}finally{this.exit(b)}},l.prototype.runAndReturn=function(m){var b;return this.run(function(w){b=m(w)}),b},l.prototype.bind=function(m,b){b||(this.active?b=this.active:b=this.createContext());var w=this;return function(){w.enter(b);try{return m.apply(this,arguments)}catch(k){throw k&&(k[c]=b),k}finally{w.exit(b)}}},l.prototype.enter=function(m){d.ok(m,"context must be provided for entering"),this._set.push(this.active),this.active=m},l.prototype.exit=function(m){if(d.ok(m,"context must be provided for exiting"),this.active===m){d.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var b=this._set.lastIndexOf(m);d.ok(b>=0,"context not currently entered; can't exit"),d.ok(b,"can't remove top context"),this._set.splice(b,1)},l.prototype.bindEmitter=function(m){d.ok(m.on&&m.addListener&&m.emit,"can only bind real EEs");var b=this,w="context@"+this.name;function k(A){!A||(A[_]||(A[_]=Object.create(null)),A[_][w]={namespace:b,context:b.active})}function R(A){if(!(A&&A[_]))return A;var D=A,B=A[_];return Object.keys(B).forEach(function(X){var Q=B[X];D=Q.namespace.bind(D,Q.context)}),D}v(m,k,R)},l.prototype.fromException=function(m){return m[c]};function h(m){return process.namespaces[m]}function p(m){d.ok(m,"namespace must be given a name!");var b=new l(m);return b.id=process.addAsyncListener({create:function(){return b.active},before:function(w,k){k&&b.enter(k)},after:function(w,k){k&&b.exit(k)},error:function(w){w&&b.exit(w)}}),process.namespaces[m]=b,b}function g(m){var b=h(m);d.ok(b,"can't delete nonexistent namespace!"),d.ok(b.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(b.id),process.namespaces[m]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(m){g(m)}),process.namespaces=Object.create(null)}process.namespaces||y(),T.exports={getNamespace:h,createNamespace:p,destroyNamespace:g,reset:y}}),_i=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CorrelationContextManager=void 0;var T=re(),d=ys(),v=bs(),_=Io(),c=Fr(),l=function(){function p(){}return p.getCurrentContext=function(){if(!p.enabled)return null;var g=p.session.get(p.CONTEXT_NAME);return g===void 0?null:g},p.generateContextObject=function(g,y,m,b,w,k){return y=y||g,this.enabled?{operation:{name:m,id:g,parentId:y,traceparent:w,tracestate:k},customProperties:new h(b)}:null},p.spanToContextObject=function(g,y,m){var b=new v;return b.traceId=g.traceId,b.spanId=g.spanId,b.traceFlag=v.formatOpenTelemetryTraceFlags(g.traceFlags)||v.DEFAULT_TRACE_FLAG,b.parentId=y,p.generateContextObject(b.traceId,b.parentId,m,null,b)},p.runWithContext=function(g,y){var m;return p.enabled?p.session.bind(y,(m={},m[p.CONTEXT_NAME]=g,m))():y()},p.wrapEmitter=function(g){p.enabled&&p.session.bindEmitter(g)},p.wrapCallback=function(g,y){var m;return p.enabled?p.session.bind(g,y?(m={},m[p.CONTEXT_NAME]=y,m):void 0):g},p.enable=function(g){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}p.hasEverEnabled||(this.forceClsHooked=g,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(p.forceClsHooked===!0||p.forceClsHooked===void 0&&p.shouldUseClsHooked()?this.cls=Pl():this.cls=Vo()),p.session=this.cls.createNamespace("AI-CLS-Session"),d.registerContextPreservation(function(y){return p.session.bind(y)})),this.enabled=!0}},p.startOperation=function(g,y){var m=g&&g.traceContext||null,b=g&&g.traceId?g:null,w=g&&g.headers;if(b){var k=new v("00-"+b.traceId+"-"+b.spanId+"-01"),R=new _(b.traceState?b.traceState.serialize():null),A=p.generateContextObject(b.traceId,"|"+b.traceId+"."+b.spanId+".",typeof y=="string"?y:"",void 0,k,R);return A}if(m){var k=new v(m.traceparent),R=new _(m.tracestate),D=typeof y=="object"?new c(y):null,A=p.generateContextObject(k.traceId,k.parentId,typeof y=="string"?y:D.getOperationName({}),D&&D.getCorrelationContextHeader()||void 0,k,R);return A}if(w){var k=new v(w.traceparent?w.traceparent.toString():null),R=new _(w.tracestate?w.tracestate.toString():null),D=new c(g),A=p.generateContextObject(k.traceId,k.parentId,D.getOperationName({}),D.getCorrelationContextHeader(),k,R);return A}return T.warn("startOperation was called with invalid arguments",arguments),null},p.disable=function(){this.enabled=!1},p.reset=function(){p.hasEverEnabled&&(p.session=null,p.session=this.cls.createNamespace("AI-CLS-Session"))},p.isNodeVersionCompatible=function(){var g=process.versions.node.split(".");return parseInt(g[0])>3||parseInt(g[0])>2&&parseInt(g[1])>2},p.shouldUseClsHooked=function(){var g=process.versions.node.split(".");return parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=2},p.canUseClsHooked=function(){var g=process.versions.node.split("."),y=parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=0,m=parseInt(g[0])<8||parseInt(g[0])<=8&&parseInt(g[1])<2,b=parseInt(g[0])>4||parseInt(g[0])>=4&&parseInt(g[1])>=7;return!(y&&m)&&b},p.enabled=!1,p.hasEverEnabled=!1,p.forceClsHooked=void 0,p.CONTEXT_NAME="ApplicationInsights-Context",p}();s.CorrelationContextManager=l;var h=function(){function p(g){this.props=[],this.addHeaderData(g)}return p.prototype.addHeaderData=function(g){var y=g?g.split(", "):[];this.props=y.map(function(m){var b=m.split("=");return{key:b[0],value:b[1]}}).concat(this.props)},p.prototype.serializeToHeader=function(){return this.props.map(function(g){return g.key+"="+g.value}).join(", ")},p.prototype.getProperty=function(g){for(var y=0;y<this.props.length;++y){var m=this.props[y];if(m.key===g)return m.value}},p.prototype.setProperty=function(g,y){if(p.bannedCharacters.test(g)||p.bannedCharacters.test(y)){T.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+g+" and value: "+y);return}for(var m=0;m<this.props.length;++m){var b=this.props[m];if(b.key===g){b.value=y;return}}this.props.push({key:g,value:y})},p.bannedCharacters=/[,=]/,p}()}),Pn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var T=Bt(),d=ae(),v=[],_=function(h){var p=h.data.message;v.forEach(function(g){p instanceof Error?g.trackException({exception:p}):(p.lastIndexOf(`
`)==p.length-1&&(p=p.substring(0,p.length-1)),g.trackTrace({message:p,severity:h.data.stderr?T.SeverityLevel.Warning:T.SeverityLevel.Information}))})};function c(h,p){h?(v.length===0&&d.channel.subscribe("console",_),v.push(p)):(v=v.filter(function(g){return g!=p}),v.length===0&&d.channel.unsubscribe("console",_))}s.enable=c;function l(){d.channel.unsubscribe("console",_),v=[]}s.dispose=l}),Al=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var T=Bt(),d=ae(),v=[],_={10:T.SeverityLevel.Verbose,20:T.SeverityLevel.Verbose,30:T.SeverityLevel.Information,40:T.SeverityLevel.Warning,50:T.SeverityLevel.Error,60:T.SeverityLevel.Critical},c=function(p){var g=p.data.result;v.forEach(function(y){var m=_[p.data.level];g instanceof Error?y.trackException({exception:g}):y.trackTrace({message:g,severity:m})})};function l(p,g){p?(v.length===0&&d.channel.subscribe("bunyan",c),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&d.channel.unsubscribe("bunyan",c))}s.enable=l;function h(){d.channel.unsubscribe("bunyan",c),v=[]}s.dispose=h}),Il=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var T=Bt(),d=ae(),v=[],_={syslog:function(p){var g={emerg:T.SeverityLevel.Critical,alert:T.SeverityLevel.Critical,crit:T.SeverityLevel.Critical,error:T.SeverityLevel.Error,warning:T.SeverityLevel.Warning,notice:T.SeverityLevel.Information,info:T.SeverityLevel.Information,debug:T.SeverityLevel.Verbose};return g[p]===void 0?T.SeverityLevel.Information:g[p]},npm:function(p){var g={error:T.SeverityLevel.Error,warn:T.SeverityLevel.Warning,info:T.SeverityLevel.Information,verbose:T.SeverityLevel.Verbose,debug:T.SeverityLevel.Verbose,silly:T.SeverityLevel.Verbose};return g[p]===void 0?T.SeverityLevel.Information:g[p]},unknown:function(p){return T.SeverityLevel.Information}},c=function(p){var g=p.data.message;v.forEach(function(y){if(g instanceof Error)y.trackException({exception:g,properties:p.data.meta});else{var m=_[p.data.levelKind](p.data.level);y.trackTrace({message:g,severity:m,properties:p.data.meta})}})};function l(p,g){p?(v.length===0&&d.channel.subscribe("winston",c),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&d.channel.unsubscribe("winston",c))}s.enable=l;function h(){d.channel.unsubscribe("winston",c),v=[]}s.dispose=h}),Ol=O((s,T)=>{"use strict";var d=ys(),v=function(){function _(c){if(_.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=c,_.INSTANCE=this}return _.prototype.enable=function(c,l){d.IsInitialized&&(Pn().enable(c&&l,this._client),Al().enable(c,this._client),Il().enable(c,this._client))},_.prototype.isInitialized=function(){return this._isInitialized},_.prototype.dispose=function(){_.INSTANCE=null,this.enable(!1,!1)},_._methodNames=["debug","info","log","warn","error"],_}();T.exports=v}),Dl=O((s,T)=>{"use strict";var d=function(){function v(_){if(v.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");v.INSTANCE=this,this._client=_;var c=process.versions.node.split(".");v._canUseUncaughtExceptionMonitor=parseInt(c[0])>13||parseInt(c[0])===13&&parseInt(c[1])>=7}return v.prototype.isInitialized=function(){return this._isInitialized},v.prototype.enable=function(_){var c=this;if(_){this._isInitialized=!0;var l=this;if(!this._exceptionListenerHandle){var h=function(p,g,y){y===void 0&&(y=new Error(v._FALLBACK_ERROR_MESSAGE)),c._client.trackException({exception:y}),c._client.flush({isAppCrashing:!0}),p&&g&&process.listeners(g).length===1&&(console.error(y),process.exit(1))};v._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=h.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=h.bind(this,!0,v.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=h.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(v._canUseUncaughtExceptionMonitor?process.removeListener(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},v.prototype.dispose=function(){v.INSTANCE=null,this.enable(!1),this._isInitialized=!1},v.INSTANCE=null,v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",v.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",v.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",v._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",v._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",v._canUseUncaughtExceptionMonitor=!1,v}();T.exports=d}),Nn=O(s=>{"use strict";var T;Object.defineProperty(s,"__esModule",{value:!0}),s.HeartBeatMetricName=s.DependencyTypeName=s.SpanAttribute=s.TelemetryTypeStringToQuickPulseDocumentType=s.TelemetryTypeStringToQuickPulseType=s.QuickPulseType=s.QuickPulseDocumentType=s.PerformanceToQuickPulseCounter=s.MetricId=s.PerformanceCounter=s.QuickPulseCounter=s.DEFAULT_LIVEMETRICS_HOST=s.DEFAULT_LIVEMETRICS_ENDPOINT=s.DEFAULT_BREEZE_ENDPOINT=void 0,s.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var d;(function(c){c.COMMITTED_BYTES="\\Memory\\Committed Bytes",c.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",c.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",c.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",c.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",c.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",c.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",c.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",c.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(d=s.QuickPulseCounter||(s.QuickPulseCounter={}));var v;(function(c){c.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",c.AVAILABLE_BYTES="\\Memory\\Available Bytes",c.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",c.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",c.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",c.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(v=s.PerformanceCounter||(s.PerformanceCounter={}));var _;(function(c){c.REQUESTS_DURATION="requests/duration",c.DEPENDENCIES_DURATION="dependencies/duration",c.EXCEPTIONS_COUNT="exceptions/count",c.TRACES_COUNT="traces/count"})(_=s.MetricId||(s.MetricId={})),s.PerformanceToQuickPulseCounter=(T={},T[v.PROCESSOR_TIME]=d.PROCESSOR_TIME,T[v.REQUEST_RATE]=d.REQUEST_RATE,T[v.REQUEST_DURATION]=d.REQUEST_DURATION,T[d.COMMITTED_BYTES]=d.COMMITTED_BYTES,T[d.REQUEST_FAILURE_RATE]=d.REQUEST_FAILURE_RATE,T[d.DEPENDENCY_RATE]=d.DEPENDENCY_RATE,T[d.DEPENDENCY_FAILURE_RATE]=d.DEPENDENCY_FAILURE_RATE,T[d.DEPENDENCY_DURATION]=d.DEPENDENCY_DURATION,T[d.EXCEPTION_RATE]=d.EXCEPTION_RATE,T),s.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},s.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},s.TelemetryTypeStringToQuickPulseType={EventData:s.QuickPulseType.Event,ExceptionData:s.QuickPulseType.Exception,MessageData:s.QuickPulseType.Trace,MetricData:s.QuickPulseType.Metric,RequestData:s.QuickPulseType.Request,RemoteDependencyData:s.QuickPulseType.Dependency,AvailabilityData:s.QuickPulseType.Availability,PageViewData:s.QuickPulseType.PageView},s.TelemetryTypeStringToQuickPulseDocumentType={EventData:s.QuickPulseDocumentType.Event,ExceptionData:s.QuickPulseDocumentType.Exception,MessageData:s.QuickPulseDocumentType.Trace,MetricData:s.QuickPulseDocumentType.Metric,RequestData:s.QuickPulseDocumentType.Request,RemoteDependencyData:s.QuickPulseDocumentType.Dependency,AvailabilityData:s.QuickPulseDocumentType.Availability,PageViewData:s.QuickPulseDocumentType.PageView},s.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},s.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},s.HeartBeatMetricName="HeartBeat"}),Qn=O((s,T)=>{"use strict";var d=x(2087),v=Nn(),_=function(){function c(l,h,p){h===void 0&&(h=6e4),p===void 0&&(p=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,c.INSTANCE||(c.INSTANCE=this),this._isInitialized=!1,this._client=l,this._collectionInterval=h,this._enableLiveMetricsCounters=p}return c.prototype.enable=function(l,h){var p=this;this._isEnabled=l,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),l?this._handle||(this._lastCpus=d.cpus(),this._lastRequests={totalRequestCount:c._totalRequestCount,totalFailedRequestCount:c._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:c._totalDependencyCount,totalFailedDependencyCount:c._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:c._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=h||this._collectionInterval,this._handle=setInterval(function(){return p.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},c.countRequest=function(l,h){var p;if(c.isEnabled()){if(typeof l=="string")p=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")p=l;else return;c._intervalRequestExecutionTime+=p,h===!1&&c._totalFailedRequestCount++,c._totalRequestCount++}},c.countException=function(){c._totalExceptionCount++},c.countDependency=function(l,h){var p;if(c.isEnabled()){if(typeof l=="string")p=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")p=l;else return;c._intervalDependencyExecutionTime+=p,h===!1&&c._totalFailedDependencyCount++,c._totalDependencyCount++}},c.prototype.isInitialized=function(){return this._isInitialized},c.isEnabled=function(){return c.INSTANCE&&c.INSTANCE._isEnabled},c.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},c.prototype._trackCpu=function(){var l=d.cpus();if(l&&l.length&&this._lastCpus&&l.length===this._lastCpus.length){for(var h=0,p=0,g=0,y=0,m=0,b=0;!!l&&b<l.length;b++){var w=l[b],k=this._lastCpus[b],R="% cpu("+b+") ",A=w.model,D=w.speed,B=w.times,X=k.times,Q=B.user-X.user||0;h+=Q;var oe=B.sys-X.sys||0;p+=oe;var ge=B.nice-X.nice||0;g+=ge;var Se=B.idle-X.idle||0;y+=Se;var Te=B.irq-X.irq||0;m+=Te}var Ne=void 0;if(typeof process.cpuUsage=="function"){var Re=process.cpuUsage(),Ue=process.hrtime(),ze=Re.user-this._lastAppCpuUsage.user+(Re.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var ot=(Ue[0]-this._lastHrtime[0])*1e6+(Ue[1]-this._lastHrtime[1])/1e3||0;Ne=100*ze/(ot*l.length)}this._lastAppCpuUsage=Re,this._lastHrtime=Ue}var tt=h+p+g+y+m||1;this._client.trackMetric({name:v.PerformanceCounter.PROCESSOR_TIME,value:(tt-y)/tt*100}),this._client.trackMetric({name:v.PerformanceCounter.PROCESS_TIME,value:Ne||h/tt*100})}this._lastCpus=l},c.prototype._trackMemory=function(){var l=d.freemem(),h=process.memoryUsage().rss,p=d.totalmem()-l;this._client.trackMetric({name:v.PerformanceCounter.PRIVATE_BYTES,value:h}),this._client.trackMetric({name:v.PerformanceCounter.AVAILABLE_BYTES,value:l}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.COMMITTED_BYTES,value:p})},c.prototype._trackNetwork=function(){var l=this._lastRequests,h={totalRequestCount:c._totalRequestCount,totalFailedRequestCount:c._totalFailedRequestCount,time:+new Date},p=h.totalRequestCount-l.totalRequestCount||0,g=h.totalFailedRequestCount-l.totalFailedRequestCount||0,y=h.time-l.time,m=y/1e3,b=(c._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/p||0;if(this._lastIntervalRequestExecutionTime=c._intervalRequestExecutionTime,y>0){var w=p/m,k=g/m;this._client.trackMetric({name:v.PerformanceCounter.REQUEST_RATE,value:w}),(!this._enableLiveMetricsCounters||p>0)&&this._client.trackMetric({name:v.PerformanceCounter.REQUEST_DURATION,value:b}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.REQUEST_FAILURE_RATE,value:k})}this._lastRequests=h},c.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastDependencies,h={totalDependencyCount:c._totalDependencyCount,totalFailedDependencyCount:c._totalFailedDependencyCount,time:+new Date},p=h.totalDependencyCount-l.totalDependencyCount||0,g=h.totalFailedDependencyCount-l.totalFailedDependencyCount||0,y=h.time-l.time,m=y/1e3,b=(c._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/p||0;if(this._lastIntervalDependencyExecutionTime=c._intervalDependencyExecutionTime,y>0){var w=p/m,k=g/m;this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_RATE,value:w}),this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:k}),(!this._enableLiveMetricsCounters||p>0)&&this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_DURATION,value:b})}this._lastDependencies=h}},c.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastExceptions,h={totalExceptionCount:c._totalExceptionCount,time:+new Date},p=h.totalExceptionCount-l.totalExceptionCount||0,g=h.time-l.time,y=g/1e3;if(g>0){var m=p/y;this._client.trackMetric({name:v.QuickPulseCounter.EXCEPTION_RATE,value:m})}this._lastExceptions=h}},c.prototype.dispose=function(){c.INSTANCE=null,this.enable(!1),this._isInitialized=!1},c._totalRequestCount=0,c._totalFailedRequestCount=0,c._totalDependencyCount=0,c._totalFailedDependencyCount=0,c._totalExceptionCount=0,c._intervalDependencyExecutionTime=0,c._intervalRequestExecutionTime=0,c}();T.exports=_}),Ml=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AggregatedMetricCounter=void 0;var T=function(){function d(v){this.dimensions=v,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return d}();s.AggregatedMetricCounter=T}),xl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PreaggregatedMetricPropertyNames=void 0,s.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),_a=O((s,T)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(h){for(var p,g=1,y=arguments.length;g<y;g++){p=arguments[g];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(h[m]=p[m])}return h},d.apply(this,arguments)},v=Nn(),_=Ml(),c=xl(),l=function(){function h(p,g){g===void 0&&(g=6e4),h.INSTANCE||(h.INSTANCE=this),this._isInitialized=!1,h._dependencyCountersCollection=[],h._requestCountersCollection=[],h._exceptionCountersCollection=[],h._traceCountersCollection=[],this._client=p,this._collectionInterval=g}return h.prototype.enable=function(p,g){var y=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._collectionInterval=g||this._collectionInterval,this._handle=setInterval(function(){return y.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},h.countException=function(p){if(h.isEnabled()){var g=h._getAggregatedCounter(p,this._exceptionCountersCollection);g.totalCount++}},h.countTrace=function(p){if(h.isEnabled()){var g=h._getAggregatedCounter(p,this._traceCountersCollection);g.totalCount++}},h.countRequest=function(p,g){if(h.isEnabled()){var y,m=h._getAggregatedCounter(g,this._requestCountersCollection);if(typeof p=="string")y=+new Date("1970-01-01T"+p+"Z");else if(typeof p=="number")y=p;else return;m.intervalExecutionTime+=y,m.totalCount++}},h.countDependency=function(p,g){if(h.isEnabled()){var y=h._getAggregatedCounter(g,this._dependencyCountersCollection),m;if(typeof p=="string")m=+new Date("1970-01-01T"+p+"Z");else if(typeof p=="number")m=p;else return;y.intervalExecutionTime+=m,y.totalCount++}},h.prototype.isInitialized=function(){return this._isInitialized},h.isEnabled=function(){return h.INSTANCE&&h.INSTANCE._isEnabled},h.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},h._getAggregatedCounter=function(p,g){for(var y=!1,m=0;m<g.length;m++){if(p===g[m].dimensions)return g[m];if(Object.keys(p).length===Object.keys(g[m].dimensions).length){for(var b in p)if(p[b]!=g[m].dimensions[b]){y=!0;break}if(!y)return g[m];y=!1}}var w=new _.AggregatedMetricCounter(p);return g.push(w),w},h.prototype._trackRequestMetrics=function(){for(var p=0;p<h._requestCountersCollection.length;p++){var g=h._requestCountersCollection[p];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime,b=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,m>0&&y>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:g.dimensions,value:b,count:y,aggregationInterval:m,metricType:v.MetricId.REQUESTS_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackDependencyMetrics=function(){for(var p=0;p<h._dependencyCountersCollection.length;p++){var g=h._dependencyCountersCollection[p];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime,b=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,m>0&&y>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:g.dimensions,value:b,count:y,aggregationInterval:m,metricType:v.MetricId.DEPENDENCIES_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackExceptionMetrics=function(){for(var p=0;p<h._exceptionCountersCollection.length;p++){var g=h._exceptionCountersCollection[p],y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:g.dimensions,value:y,count:y,aggregationInterval:m,metricType:v.MetricId.EXCEPTIONS_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackTraceMetrics=function(){for(var p=0;p<h._traceCountersCollection.length;p++){var g=h._traceCountersCollection[p],y=g.totalCount-g.lastTotalCount||0,m=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:g.dimensions,value:y,count:y,aggregationInterval:m,metricType:v.MetricId.TRACES_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackPreAggregatedMetric=function(p){var g={};for(var y in p.dimensions)g[c.PreaggregatedMetricPropertyNames[y]]=p.dimensions[y];g=d(d({},g),{"_MS.MetricId":p.metricType,"_MS.AggregationIntervalMs":String(p.aggregationInterval),"_MS.IsAutocollected":"True"});var m={name:p.name,value:p.value,count:p.count,properties:g,kind:"Aggregation"};this._client.trackMetric(m)},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h}();T.exports=l}),wi=O((s,T)=>{"use strict";var d=x(2087),v=x(5747),_=x(5622),c=Bt(),l=re(),h=function(){function p(g){this.keys=new c.ContextTagKeys,this.tags={},this._loadApplicationContext(g),this._loadDeviceContext(),this._loadInternalContext()}return p.prototype._loadApplicationContext=function(g){if(g=g||_.resolve(__dirname,"../../../../package.json"),!p.appVersion[g]){p.appVersion[g]="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(p.appVersion[g]=y.version)}catch(m){l.info("unable to read app version: ",m)}}this.tags[this.keys.applicationVersion]=p.appVersion[g]},p.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=d&&d.hostname(),this.tags[this.keys.deviceOSVersion]=d&&d.type()+" "+d.release(),this.tags[this.keys.cloudRole]=p.DefaultRoleName,this.tags["ai.device.osArchitecture"]=d&&d.arch(),this.tags["ai.device.osPlatform"]=d&&d.platform()},p.prototype._loadInternalContext=function(){var g=_.resolve(__dirname,"../../package.json");if(!p.sdkVersion){p.sdkVersion="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(p.sdkVersion=y.version)}catch(m){l.info("unable to read app version: ",m)}}this.tags[this.keys.internalSdkVersion]="node:"+p.sdkVersion},p.DefaultRoleName="Web",p.appVersion={},p.sdkVersion=null,p}();T.exports=h}),Es=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var y=function(m,b){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,k){w.__proto__=k}||function(w,k){for(var R in k)Object.prototype.hasOwnProperty.call(k,R)&&(w[R]=k[R])},y(m,b)};return function(m,b){y(m,b);function w(){this.constructor=m}m.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}}(),v=x(8835),_=Bt(),c=mr(),l=mi(),h=Lt(),p=fi(),g=function(y){d(m,y);function m(b,w){var k=y.call(this)||this;return w&&w.method&&b&&(k.method=w.method,k.url=m._getUrlFromRequestOptions(b,w),k.startTime=+new Date),k}return m.prototype.onError=function(b){this._setStatus(void 0,b)},m.prototype.onResponse=function(b){this._setStatus(b.statusCode,void 0),this.correlationId=c.getCorrelationContextTarget(b,l.requestContextTargetKey)},m.prototype.getDependencyTelemetry=function(b,w){var k=v.parse(this.url);k.search=void 0,k.hash=void 0;var R=this.method.toUpperCase()+" "+k.pathname,A=_.RemoteDependencyDataConstants.TYPE_HTTP,D=k.hostname;k.port&&(D+=":"+k.port),this.correlationId?(A=_.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==p.correlationIdPrefix&&(D+=" | "+this.correlationId)):A=_.RemoteDependencyDataConstants.TYPE_HTTP;var B={id:w,name:R,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:A,target:D};if(b&&b.time?B.time=b.time:this.startTime&&(B.time=new Date(this.startTime)),b){for(var X in b)B[X]||(B[X]=b[X]);if(b.properties)for(var X in b.properties)B.properties[X]=b.properties[X]}return B},m._getUrlFromRequestOptions=function(b,w){if(typeof b=="string")if(b.indexOf("http://")===0||b.indexOf("https://")===0)b=v.parse(b);else{var k=v.parse(b);k.host==="443"?b=v.parse("https://"+b):b=v.parse("http://"+b)}else{if(b&&typeof v.URL=="function"&&b instanceof v.URL)return v.format(b);var R=b;b={},R&&Object.keys(R).forEach(function(B){b[B]=R[B]})}if(b.path){var A=v.parse(b.path);b.pathname=A.pathname,b.search=A.search}if(b.host&&b.port){var D=v.parse("http://"+b.host);!D.port&&b.port&&(b.hostname=b.host,delete b.host)}return b.protocol=b.protocol||w.agent&&w.agent.protocol||w.protocol||void 0,b.hostname=b.hostname||"localhost",v.format(b)},m}(h);T.exports=g}),Fl=O(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(l){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(l[y]=h[y])}return l},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.spanToTelemetryContract=void 0;var d=_t(),v=Nn();function _(l){var h=T({},l);return Object.keys(v.SpanAttribute).forEach(function(p){delete h[p]}),h}function c(l){var h="|"+l.spanContext().traceId+"."+l.spanContext().spanId+".",p=Math.round(l._duration[0]*1e3+l._duration[1]/1e6),g=l.attributes["peer.address"]?l.attributes["peer.address"].toString():"",y=l.attributes.component?l.attributes.component.toString():"",m=y.toUpperCase()===v.DependencyTypeName.Http||!!l.attributes[v.SpanAttribute.HttpUrl],b=y.toLowerCase()===v.DependencyTypeName.Grpc;if(m){var w=l.attributes[v.SpanAttribute.HttpMethod]||"GET",k=new URL(l.attributes[v.SpanAttribute.HttpUrl].toString()),R=l.attributes[v.SpanAttribute.HttpHost]||k.host,A=l.attributes[v.SpanAttribute.HttpPort]||k.port||null,D=k.pathname||"/",B=w+" "+D,X=v.DependencyTypeName.Http,Q=A?(R+":"+A).toString():R.toString(),oe=k.toString(),ge=l.attributes[v.SpanAttribute.HttpStatusCode]||l.status.code||0,Se=ge<400;return{id:h,name:B,dependencyTypeName:X,target:Q,data:oe,success:Se,duration:p,url:oe,resultCode:String(ge),properties:_(l.attributes)}}else if(b){var w=l.attributes[v.SpanAttribute.GrpcMethod]||"rpc",Te=l.attributes[v.SpanAttribute.GrpcService],Ne=Te?w+" "+Te:l.name;return{id:h,duration:p,name:Ne,target:Te.toString(),data:Te.toString()||Ne,url:Te.toString()||Ne,dependencyTypeName:v.DependencyTypeName.Grpc,resultCode:String(l.status.code||0),success:l.status.code===0,properties:_(l.attributes)}}else{var Re=l.name,Ue=l.links&&l.links.map(function(ze){return{operation_Id:ze.context.traceId,id:ze.context.spanId}});return{id:h,duration:p,name:Re,target:g,data:g||Re,url:g||Re,dependencyTypeName:l.kind===d.SpanKind.INTERNAL?v.DependencyTypeName.InProc:y||l.name,resultCode:String(l.status.code||0),success:l.status.code===0,properties:T(T({},_(l.attributes)),{"_MS.links":Ue||void 0})}}}s.spanToTelemetryContract=c}),Ll=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=_t(),d=ae(),v=bs(),_=Fl(),c=ie(),l=[],h=function(g){var y=g.data,m=_.spanToTelemetryContract(y),b=y.spanContext(),w=new v;w.traceId=b.traceId,w.spanId=b.spanId,w.traceFlag=v.formatOpenTelemetryTraceFlags(b.traceFlags),w.parentId=y.parentSpanId?"|"+b.traceId+"."+y.parentSpanId+".":null,c.AsyncScopeManager.with(y,function(){l.forEach(function(k){y.kind===T.SpanKind.SERVER?k.trackRequest(m):(y.kind===T.SpanKind.CLIENT||y.kind===T.SpanKind.INTERNAL)&&k.trackDependency(m)})})};s.subscriber=h;function p(g,y){g?(l.length===0&&d.channel.subscribe("azure-coretracing",s.subscriber),l.push(y)):(l=l.filter(function(m){return m!=y}),l.length===0&&d.channel.unsubscribe("azure-coretracing",s.subscriber))}s.enable=p}),ql=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=ae(),d=[],v=function(c){c.data.event.commandName!=="ismaster"&&d.forEach(function(l){var h=c.data.startedData&&c.data.startedData.databaseName||"Unknown database";l.trackDependency({target:h,data:c.data.event.commandName,name:c.data.event.commandName,duration:c.data.event.duration,success:c.data.succeeded,resultCode:c.data.succeeded?"0":"1",time:c.data.startedData.time,dependencyTypeName:"mongodb"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("mongodb",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("mongodb",s.subscriber))}s.enable=_}),Ul=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=ae(),d=[],v=function(c){d.forEach(function(l){var h=c.data.query||{},p=h.sql||"Unknown query",g=!c.data.err,y=h._connection||{},m=y.config||{},b=m.socketPath?m.socketPath:(m.host||"localhost")+":"+m.port;l.trackDependency({target:b,data:p,name:p,duration:c.data.duration,success:g,resultCode:g?"0":"1",time:c.data.time,dependencyTypeName:"mysql"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("mysql",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("mysql",s.subscriber))}s.enable=_}),jo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=ae(),d=[],v=function(c){d.forEach(function(l){c.data.commandObj.command!=="info"&&l.trackDependency({target:c.data.address,name:c.data.commandObj.command,data:c.data.commandObj.command,duration:c.data.duration,success:!c.data.err,resultCode:c.data.err?"1":"0",time:c.data.time,dependencyTypeName:"redis"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("redis",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("redis",s.subscriber))}s.enable=_}),$l=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=ae(),d=[],v=function(c){d.forEach(function(l){var h=c.data.query,p=h.preparable&&h.preparable.text||h.plan||h.text||"unknown query",g=!c.data.error,y=c.data.database.host+":"+c.data.database.port;l.trackDependency({target:y,data:p,name:p,duration:c.data.duration,success:g,resultCode:g?"0":"1",time:c.data.time,dependencyTypeName:"postgres"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("postgres",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("postgres",s.subscriber))}s.enable=_}),Wn=O((s,T)=>{"use strict";var d=s&&s.__spreadArrays||function(){for(var k=0,R=0,A=arguments.length;R<A;R++)k+=arguments[R].length;for(var D=Array(k),B=0,R=0;R<A;R++)for(var X=arguments[R],Q=0,oe=X.length;Q<oe;Q++,B++)D[B]=X[Q];return D},v=x(8605),_=x(7211),c=re(),l=mr(),h=mi(),p=Es(),g=_i(),y=fi(),m=bs(),b=ys(),w=function(){function k(R){if(k.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");k.INSTANCE=this,this._client=R}return k.prototype.enable=function(R){this._isEnabled=R,this._isEnabled&&!this._isInitialized&&this._initialize(),b.IsInitialized&&(Ll().enable(!0,this._client),ql().enable(R,this._client),Ul().enable(R,this._client),jo().enable(R,this._client),$l().enable(R,this._client))},k.prototype.isInitialized=function(){return this._isInitialized},k.prototype._initialize=function(){var R=this;this._isInitialized=!0;var A=v.request,D=_.request,B=function(X,Q){var oe=!Q[k.disableCollectionRequestOption]&&!X[k.alreadyAutoCollectedFlag];Q.headers&&Q.headers["user-agent"]&&Q.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(oe=!1),X[k.alreadyAutoCollectedFlag]=!0,X&&Q&&oe&&(g.CorrelationContextManager.wrapEmitter(X),k.trackRequest(R._client,{options:Q,request:X}))};v.request=function(X){for(var Q=[],oe=1;oe<arguments.length;oe++)Q[oe-1]=arguments[oe];var ge=A.call.apply(A,d([v,X],Q));return B(ge,X),ge},_.request=function(X){for(var Q=[],oe=1;oe<arguments.length;oe++)Q[oe-1]=arguments[oe];var ge=D.call.apply(D,d([_,X],Q));return B(ge,X),ge},v.get=function(X){for(var Q,oe=[],ge=1;ge<arguments.length;ge++)oe[ge-1]=arguments[ge];var Se=(Q=v.request).call.apply(Q,d([v,X],oe));return Se.end(),Se},_.get=function(X){for(var Q,oe=[],ge=1;ge<arguments.length;ge++)oe[ge-1]=arguments[ge];var Se=(Q=_.request).call.apply(Q,d([_,X],oe));return Se.end(),Se}},k.trackRequest=function(R,A){if(!A.options||!A.request||!R){c.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!A.options,!A.request,!R);return}var D=new p(A.options,A.request),B=g.CorrelationContextManager.getCurrentContext(),X,Q;if(B&&B.operation&&B.operation.traceparent&&m.isValidTraceId(B.operation.traceparent.traceId))B.operation.traceparent.updateSpanId(),X=B.operation.traceparent.getBackCompatRequestId();else if(y.w3cEnabled){var oe=new m;Q=oe.toString(),X=oe.getBackCompatRequestId()}else X=B&&B.operation&&B.operation.parentId+k.requestNumber+++".";if(l.canIncludeCorrelationHeader(R,D.getUrl())&&A.request.getHeader&&A.request.setHeader&&R.config&&R.config.correlationId){var ge=A.request.getHeader(h.requestContextHeader);try{l.safeIncludeCorrelationHeader(R,A.request,ge)}catch(Ne){c.warn("Request-Context header could not be set. Correlation of requests may be lost",Ne)}if(B&&B.operation)try{if(A.request.setHeader(h.requestIdHeader,X),R.config.ignoreLegacyHeaders||(A.request.setHeader(h.parentIdHeader,B.operation.id),A.request.setHeader(h.rootIdHeader,X)),Q||B.operation.traceparent)A.request.setHeader(h.traceparentHeader,Q||B.operation.traceparent.toString());else if(y.w3cEnabled){var oe=new m().toString();A.request.setHeader(h.traceparentHeader,oe)}if(B.operation.tracestate){var Se=B.operation.tracestate.toString();Se&&A.request.setHeader(h.traceStateHeader,Se)}var Te=B.customProperties.serializeToHeader();Te&&A.request.setHeader(h.correlationContextHeader,Te)}catch(Ne){c.warn("Correlation headers could not be set. Correlation of requests may be lost.",Ne)}}A.request.on&&(A.request.on("response",function(Ne){D.onResponse(Ne);var Re=D.getDependencyTelemetry(A,X);Re.contextObjects=Re.contextObjects||{},Re.contextObjects["http.RequestOptions"]=A.options,Re.contextObjects["http.ClientRequest"]=A.request,Re.contextObjects["http.ClientResponse"]=Ne,R.trackDependency(Re)}),A.request.on("error",function(Ne){D.onError(Ne);var Re=D.getDependencyTelemetry(A,X);Re.contextObjects=Re.contextObjects||{},Re.contextObjects["http.RequestOptions"]=A.options,Re.contextObjects["http.ClientRequest"]=A.request,Re.contextObjects.Error=Ne,R.trackDependency(Re)}),A.request.on("abort",function(){D.onError(new Error);var Ne=D.getDependencyTelemetry(A,X);Ne.contextObjects=Ne.contextObjects||{},Ne.contextObjects["http.RequestOptions"]=A.options,Ne.contextObjects["http.ClientRequest"]=A.request,R.trackDependency(Ne)}))},k.prototype.dispose=function(){k.INSTANCE=null,this.enable(!1),this._isInitialized=!1},k.disableCollectionRequestOption="disableAppInsightsAutoCollection",k.requestNumber=1,k.alreadyAutoCollectedFlag="_appInsightsAutoCollected",k}();T.exports=w}),pd=O((s,T)=>{"use strict";var d=x(2087),v=Nn(),_=mr(),c=wi(),l=Wn(),h="http://169.254.169.254/metadata/instance/compute",p="api-version=2017-12-01",g="format=json",y="ENETUNREACH",m=function(){function b(w){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",b.INSTANCE||(b.INSTANCE=this),this._isInitialized=!1,this._client=w}return b.prototype.enable=function(w,k){var R=this;this._isEnabled=w,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),w?this._handle||(this._handle=setInterval(function(){return R.trackHeartBeat(k,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},b.prototype.isInitialized=function(){return this._isInitialized},b.isEnabled=function(){return b.INSTANCE&&b.INSTANCE._isEnabled},b.prototype.trackHeartBeat=function(w,k){var R=this,A=!1,D={},B=c.sdkVersion;D.sdk=B,D.osType=d.type(),process.env.WEBSITE_SITE_NAME?(D.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",D.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",D.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?D.azfunction_appId=process.env.WEBSITE_HOSTNAME:w&&(this._isVM===void 0?(A=!0,this._getAzureComputeMetadata(w,function(){R._isVM&&Object.keys(R._vmData).length>0&&(D.azInst_vmId=R._vmData.vmId||"",D.azInst_subscriptionId=R._vmData.subscriptionId||"",D.azInst_osType=R._vmData.osType||"",R._azInst_vmId=R._vmData.vmId||"",R._azInst_subscriptionId=R._vmData.subscriptionId||"",R._azInst_osType=R._vmData.osType||""),R._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:D}),k()})):this._isVM&&(D.azInst_vmId=this._azInst_vmId,D.azInst_subscriptionId=this._azInst_subscriptionId,D.azInst_osType=this._azInst_osType)),A||(this._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:D}),k())},b.prototype.dispose=function(){b.INSTANCE=null,this.enable(!1),this._isInitialized=!1},b.prototype._getAzureComputeMetadata=function(w,k){var R,A=this,D=h+"?"+p+"&"+g,B=(R={method:"GET"},R[l.disableCollectionRequestOption]=!0,R.headers={Metadata:"True"},R),X=_.makeRequest(w,D,B,function(Q){if(Q.statusCode===200){A._isVM=!0;var oe="";Q.on("data",function(ge){oe+=ge}),Q.on("end",function(){A._vmData=A._isJSON(oe)?JSON.parse(oe):{},k()})}else k()});X&&(X.on("error",function(Q){Q&&Q.message&&Q.message.indexOf(y)>-1&&(A._isVM=!1),k()}),X.end())},b.prototype._isJSON=function(w){try{return JSON.parse(w)&&!!w}catch(k){return!1}},b}();T.exports=m}),zo=O((s,T)=>{"use strict";var d=x(8605),v=x(7211),_=re(),c=mr(),l=mi(),h=Fr(),p=_i(),g=Qn(),y=function(){function m(b){if(m.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=b}return m.prototype.enable=function(b){this._isEnabled=b,(this._isAutoCorrelating||this._isEnabled||g.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},m.prototype.useAutoCorrelation=function(b,w){b&&!this._isAutoCorrelating?p.CorrelationContextManager.enable(w):!b&&this._isAutoCorrelating&&p.CorrelationContextManager.disable(),this._isAutoCorrelating=b},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},m.prototype._generateCorrelationContext=function(b){if(this._isAutoCorrelating)return p.CorrelationContextManager.generateContextObject(b.getOperationId(this._client.context.tags),b.getRequestId(),b.getOperationName(this._client.context.tags),b.getCorrelationContextHeader(),b.getTraceparent(),b.getTracestate())},m.prototype._initialize=function(){var b=this;this._isInitialized=!0;var w=function(D){if(D){if(typeof D!="function")throw new Error("onRequest handler must be a function");return function(B,X){p.CorrelationContextManager.wrapEmitter(B),p.CorrelationContextManager.wrapEmitter(X);var Q=B&&!B[m.alreadyAutoCollectedFlag];if(B&&Q){var oe=new h(B),ge=b._generateCorrelationContext(oe);p.CorrelationContextManager.runWithContext(ge,function(){b._isEnabled&&(B[m.alreadyAutoCollectedFlag]=!0,m.trackRequest(b._client,{request:B,response:X},oe)),typeof D=="function"&&D(B,X)})}else typeof D=="function"&&D(B,X)}}},k=function(D){var B=D.addListener.bind(D);D.addListener=function(X,Q){switch(X){case"request":case"checkContinue":return B(X,w(Q));default:return B(X,Q)}},D.on=D.addListener},R=d.createServer;d.createServer=function(D,B){if(B&&typeof B=="function"){var X=R(D,w(B));return k(X),X}else{var X=R(w(D));return k(X),X}};var A=v.createServer;v.createServer=function(D,B){var X=A(D,w(B));return k(X),X}},m.trackRequestSync=function(b,w){if(!w.request||!w.response||!b){_.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!w.request,!w.response,!b);return}m.addResponseCorrelationIdHeader(b,w.response);var k=p.CorrelationContextManager.getCurrentContext(),R=new h(w.request,k&&k.operation.parentId);k&&(k.operation.id=R.getOperationId(b.context.tags)||k.operation.id,k.operation.name=R.getOperationName(b.context.tags)||k.operation.name,k.operation.parentId=R.getRequestId()||k.operation.parentId,k.customProperties.addHeaderData(R.getCorrelationContextHeader())),m.endRequest(b,R,w,w.duration,w.error)},m.trackRequest=function(b,w,k){if(!w.request||!w.response||!b){_.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!w.request,!w.response,!b);return}var R=p.CorrelationContextManager.getCurrentContext(),A=k||new h(w.request,R&&R.operation.parentId);c.canIncludeCorrelationHeader(b,A.getUrl())&&m.addResponseCorrelationIdHeader(b,w.response),R&&!k&&(R.operation.id=A.getOperationId(b.context.tags)||R.operation.id,R.operation.name=A.getOperationName(b.context.tags)||R.operation.name,R.operation.parentId=A.getOperationParentId(b.context.tags)||R.operation.parentId,R.customProperties.addHeaderData(A.getCorrelationContextHeader())),w.response.once&&w.response.once("finish",function(){m.endRequest(b,A,w,null,null)}),w.request.on&&w.request.on("error",function(D){m.endRequest(b,A,w,null,D)}),w.request.on&&w.request.on("aborted",function(){var D="The request has been aborted and the network socket has closed.";m.endRequest(b,A,w,null,D)})},m.addResponseCorrelationIdHeader=function(b,w){if(b.config&&b.config.correlationId&&w.getHeader&&w.setHeader&&!w.headersSent){var k=w.getHeader(l.requestContextHeader);c.safeIncludeCorrelationHeader(b,w,k)}},m.endRequest=function(b,w,k,R,A){A?w.onError(A,R):w.onResponse(k.response,R);var D=w.getRequestTelemetry(k);if(D.tagOverrides=w.getRequestTags(b.context.tags),k.tagOverrides)for(var B in k.tagOverrides)D.tagOverrides[B]=k.tagOverrides[B];var X=w.getLegacyRootId();X&&(D.properties.ai_legacyRootId=X),D.contextObjects=D.contextObjects||{},D.contextObjects["http.ServerRequest"]=k.request,D.contextObjects["http.ServerResponse"]=k.response,b.trackRequest(D)},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1,p.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();T.exports=y}),Gl=O((s,T)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(y){for(var m,b=1,w=arguments.length;b<w;b++){m=arguments[b];for(var k in m)Object.prototype.hasOwnProperty.call(m,k)&&(y[k]=m[k])}return y},d.apply(this,arguments)},v=x(2087),_=Bt(),c=Nn(),l=mr(),h=re(),p=l.w3cTraceId(),g=function(){function y(){}return y.createQuickPulseEnvelope=function(m,b,w,k){var R=v&&typeof v.hostname=="function"&&v.hostname()||"Unknown",A=k.tags&&k.keys&&k.keys.cloudRoleInstance&&k.tags[k.keys.cloudRoleInstance]||R,D=k.tags&&k.keys&&k.keys.cloudRole&&k.tags[k.keys.cloudRole]||null,B={Documents:b.length>0?b:null,InstrumentationKey:w.instrumentationKey||"",Metrics:m.length>0?m:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:k.tags[k.keys.internalSdkVersion],StreamId:p,MachineName:R,Instance:A,RoleName:D};return B},y.createQuickPulseMetric=function(m){var b;return b={Name:m.name,Value:m.value,Weight:m.count||1},b},y.telemetryEnvelopeToQuickPulseDocument=function(m){switch(m.data.baseType){case _.TelemetryTypeString.Event:return y.createQuickPulseEventDocument(m);case _.TelemetryTypeString.Exception:return y.createQuickPulseExceptionDocument(m);case _.TelemetryTypeString.Trace:return y.createQuickPulseTraceDocument(m);case _.TelemetryTypeString.Dependency:return y.createQuickPulseDependencyDocument(m);case _.TelemetryTypeString.Request:return y.createQuickPulseRequestDocument(m)}return null},y.createQuickPulseEventDocument=function(m){var b=y.createQuickPulseDocument(m),w=m.data.baseData.name,k=d(d({},b),{Name:w});return k},y.createQuickPulseTraceDocument=function(m){var b=y.createQuickPulseDocument(m),w=m.data.baseData.severityLevel||0,k=d(d({},b),{Message:m.data.baseData.message,SeverityLevel:_.SeverityLevel[w]});return k},y.createQuickPulseExceptionDocument=function(m){var b=y.createQuickPulseDocument(m),w=m.data.baseData.exceptions,k="",R="",A="";w&&w.length>0&&(w[0].parsedStack&&w[0].parsedStack.length>0?w[0].parsedStack.forEach(function(B){k+=B.assembly+`
`}):w[0].stack&&w[0].stack.length>0&&(k=w[0].stack),R=w[0].message,A=w[0].typeName);var D=d(d({},b),{Exception:k,ExceptionMessage:R,ExceptionType:A});return D},y.createQuickPulseRequestDocument=function(m){var b=y.createQuickPulseDocument(m),w=m.data.baseData,k=d(d({},b),{Name:w.name,Success:w.success,Duration:w.duration,ResponseCode:w.responseCode,OperationName:w.name});return k},y.createQuickPulseDependencyDocument=function(m){var b=y.createQuickPulseDocument(m),w=m.data.baseData,k=d(d({},b),{Name:w.name,Target:w.target,Success:w.success,Duration:w.duration,ResultCode:w.resultCode,CommandName:w.data,OperationName:b.OperationId,DependencyTypeName:w.type});return k},y.createQuickPulseDocument=function(m){var b,w,k,R;m.data.baseType?(w=c.TelemetryTypeStringToQuickPulseType[m.data.baseType],b=c.TelemetryTypeStringToQuickPulseDocumentType[m.data.baseType]):h.warn("Document type invalid; not sending live metric document",m.data.baseType),k=m.tags[y.keys.operationId],R=y.aggregateProperties(m);var A={DocumentType:b,__type:w,OperationId:k,Version:"1.0",Properties:R};return A},y.aggregateProperties=function(m){var b=[],w=m.data.baseData.measurements||{};for(var k in w)if(w.hasOwnProperty(k)){var R=w[k],A={key:k,value:R};b.push(A)}var D=m.data.baseData.properties||{};for(var k in D)if(D.hasOwnProperty(k)){var R=D[k],A={key:k,value:R};b.push(A)}return b},y.keys=new _.ContextTagKeys,y}();T.exports=g}),Hl=O((s,T)=>{"use strict";var d=function(){return(Date.now()+621355968e5)*1e4};T.exports={getTransmissionTime:d}}),Bl=O((s,T)=>{"use strict";var d=s&&s.__awaiter||function(m,b,w,k){function R(A){return A instanceof w?A:new w(function(D){D(A)})}return new(w||(w=Promise))(function(A,D){function B(oe){try{Q(k.next(oe))}catch(ge){D(ge)}}function X(oe){try{Q(k.throw(oe))}catch(ge){D(ge)}}function Q(oe){oe.done?A(oe.value):R(oe.value).then(B,X)}Q((k=k.apply(m,b||[])).next())})},v=s&&s.__generator||function(m,b){var w={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},k,R,A,D;return D={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function B(Q){return function(oe){return X([Q,oe])}}function X(Q){if(k)throw new TypeError("Generator is already executing.");for(;w;)try{if(k=1,R&&(A=Q[0]&2?R.return:Q[0]?R.throw||((A=R.return)&&A.call(R),0):R.next)&&!(A=A.call(R,Q[1])).done)return A;switch(R=0,A&&(Q=[Q[0]&2,A.value]),Q[0]){case 0:case 1:A=Q;break;case 4:return w.label++,{value:Q[1],done:!1};case 5:w.label++,R=Q[1],Q=[0];continue;case 7:Q=w.ops.pop(),w.trys.pop();continue;default:if(A=w.trys,!(A=A.length>0&&A[A.length-1])&&(Q[0]===6||Q[0]===2)){w=0;continue}if(Q[0]===3&&(!A||Q[1]>A[0]&&Q[1]<A[3])){w.label=Q[1];break}if(Q[0]===6&&w.label<A[1]){w.label=A[1],A=Q;break}if(A&&w.label<A[2]){w.label=A[2],w.ops.push(Q);break}A[2]&&w.ops.pop(),w.trys.pop();continue}Q=b.call(m,w)}catch(oe){Q=[6,oe],R=0}finally{k=A=0}if(Q[0]&5)throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}},_=x(7211),c=Wn(),l=re(),h=Hl(),p=mr(),g={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},y=function(){function m(b){this._config=b,this._consecutiveErrors=0}return m.prototype.ping=function(b,w,k){var R=[{name:g.streamId,value:b.StreamId},{name:g.machineName,value:b.MachineName},{name:g.roleName,value:b.RoleName},{name:g.instanceName,value:b.Instance},{name:g.invariantVersion,value:b.InvariantVersion.toString()}];this._submitData(b,w,k,"ping",R)},m.prototype.post=function(b,w,k){return d(this,void 0,void 0,function(){return v(this,function(R){switch(R.label){case 0:return[4,this._submitData([b],w,k,"post")];case 1:return R.sent(),[2]}})})},m.prototype._submitData=function(b,w,k,R,A){return d(this,void 0,void 0,function(){var D,B,X,Q,oe,ge=this;return v(this,function(Se){return D=JSON.stringify(b),B=(Q={},Q[c.disableCollectionRequestOption]=!0,Q.host=w&&w.length>0?w:this._config.quickPulseHost,Q.method=g.method,Q.path="/QuickPulseService.svc/"+R+"?ikey="+this._config.instrumentationKey,Q.headers=(oe={Expect:"100-continue"},oe[g.time]=h.getTransmissionTime(),oe["Content-Type"]="application/json",oe["Content-Length"]=Buffer.byteLength(D),oe),Q),A&&A.length>0&&A.forEach(function(Te){return B.headers[Te.name]=Te.value}),this._config.httpsAgent?B.agent=this._config.httpsAgent:B.agent=p.tlsRestrictedAgent,X=_.request(B,function(Te){if(Te.statusCode==200){var Ne=Te.headers[g.subscribed]==="true",Re=Te.headers[g.endpointRedirect]?Te.headers[g.endpointRedirect].toString():null,Ue=Te.headers[g.pollingIntervalHint]?parseInt(Te.headers[g.pollingIntervalHint].toString()):null;ge._consecutiveErrors=0,k(Ne,Te,Re,Ue)}else ge._onError("StatusCode:"+Te.statusCode+" StatusMessage:"+Te.statusMessage),k()}),X.on("error",function(Te){ge._onError(Te),k()}),X.write(D),X.end(),[2]})})},m.prototype._onError=function(b){this._consecutiveErrors++;var w="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%m.MAX_QPS_FAILURES_BEFORE_WARN==0?(w="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",l.warn(m.TAG,w,b)):l.info(m.TAG,w,b)},m.TAG="QuickPulseSender",m.MAX_QPS_FAILURES_BEFORE_WARN=25,m}();T.exports=y}),Vl=O((s,T)=>{"use strict";var d=s&&s.__awaiter||function(y,m,b,w){function k(R){return R instanceof b?R:new b(function(A){A(R)})}return new(b||(b=Promise))(function(R,A){function D(Q){try{X(w.next(Q))}catch(oe){A(oe)}}function B(Q){try{X(w.throw(Q))}catch(oe){A(oe)}}function X(Q){Q.done?R(Q.value):k(Q.value).then(D,B)}X((w=w.apply(y,m||[])).next())})},v=s&&s.__generator||function(y,m){var b={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},w,k,R,A;return A={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function D(X){return function(Q){return B([X,Q])}}function B(X){if(w)throw new TypeError("Generator is already executing.");for(;b;)try{if(w=1,k&&(R=X[0]&2?k.return:X[0]?k.throw||((R=k.return)&&R.call(k),0):k.next)&&!(R=R.call(k,X[1])).done)return R;switch(k=0,R&&(X=[X[0]&2,R.value]),X[0]){case 0:case 1:R=X;break;case 4:return b.label++,{value:X[1],done:!1};case 5:b.label++,k=X[1],X=[0];continue;case 7:X=b.ops.pop(),b.trys.pop();continue;default:if(R=b.trys,!(R=R.length>0&&R[R.length-1])&&(X[0]===6||X[0]===2)){b=0;continue}if(X[0]===3&&(!R||X[1]>R[0]&&X[1]<R[3])){b.label=X[1];break}if(X[0]===6&&b.label<R[1]){b.label=R[1],R=X;break}if(R&&b.label<R[2]){b.label=R[2],b.ops.push(X);break}R[2]&&b.ops.pop(),b.trys.pop();continue}X=m.call(y,b)}catch(Q){X=[6,Q],k=0}finally{w=R=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}},_=re(),c=Gl(),l=Bl(),h=Nn(),p=wi(),g=function(){function y(m,b){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=m,this.context=b||new p,this._sender=new l(this.config),this._isEnabled=!1}return y.prototype.addCollector=function(m){this._collectors.push(m)},y.prototype.trackMetric=function(m){this._addMetric(m)},y.prototype.addDocument=function(m){var b=c.telemetryEnvelopeToQuickPulseDocument(m);b&&this._documents.push(b)},y.prototype.enable=function(m){m&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!m&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},y.prototype.enableCollectors=function(m){this._collectors.forEach(function(b){b.enable(m)})},y.prototype._addMetric=function(m){var b=m.value,w=m.count||1,k=h.PerformanceToQuickPulseCounter[m.name];k&&(this._metrics[k]?(this._metrics[k].Value=(this._metrics[k].Value*this._metrics[k].Weight+b*w)/(this._metrics[k].Weight+w),this._metrics[k].Weight+=w):(this._metrics[k]=c.createQuickPulseMetric(m),this._metrics[k].Name=k,this._metrics[k].Weight=1))},y.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},y.prototype._goQuickPulse=function(){return d(this,void 0,void 0,function(){var m,b,w,k,R=this;return v(this,function(A){switch(A.label){case 0:return m=Object.keys(this._metrics).map(function(D){return R._metrics[D]}),b=c.createQuickPulseEnvelope(m,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(b)]:[3,2];case 1:return A.sent(),[3,3];case 2:this._ping(b),A.label=3;case 3:return w=this._pollingIntervalHint>0?this._pollingIntervalHint:y.PING_INTERVAL,k=this._isCollectingData?y.POST_INTERVAL:w,this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,k=y.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(k=y.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),k),this._handle.unref(),[2]}})})},y.prototype._ping=function(m){this._sender.ping(m,this._redirectedHost,this._quickPulseDone.bind(this))},y.prototype._post=function(m){return d(this,void 0,void 0,function(){return v(this,function(b){switch(b.label){case 0:return[4,this._sender.post(m,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return b.sent(),[2]}})})},y.prototype._quickPulseDone=function(m,b,w,k){m!=null?(this._isCollectingData!==m&&(_.info("Live Metrics sending data",m),this.enableCollectors(m)),this._isCollectingData=m,w&&w.length>0&&(this._redirectedHost=w,_.info("Redirecting endpoint to: ",w)),k&&k>0&&(this._pollingIntervalHint=k),b&&b.statusCode<300&&b.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},y.MAX_POST_WAIT_TIME=2e4,y.MAX_PING_WAIT_TIME=6e4,y.FALLBACK_INTERVAL=6e4,y.PING_INTERVAL=5e3,y.POST_INTERVAL=1e3,y}();T.exports=g}),Qo=O((s,T)=>{"use strict";var d=Nn(),v=function(){function _(){}return _.parse=function(c){if(!c)return{};var l=c.split(_._FIELDS_SEPARATOR),h=l.reduce(function(g,y){var m=y.split(_._FIELD_KEY_VALUE_SEPARATOR);if(m.length===2){var b=m[0].toLowerCase(),w=m[1];g[b]=w}return g},{});if(Object.keys(h).length>0){if(h.endpointsuffix){var p=h.location?h.location+".":"";h.ingestionendpoint=h.ingestionendpoint||"https://"+p+"dc."+h.endpointsuffix,h.liveendpoint=h.liveendpoint||"https://"+p+"live."+h.endpointsuffix}h.ingestionendpoint=h.ingestionendpoint||d.DEFAULT_BREEZE_ENDPOINT,h.liveendpoint=h.liveendpoint||d.DEFAULT_LIVEMETRICS_ENDPOINT}return h},_._FIELDS_SEPARATOR=";",_._FIELD_KEY_VALUE_SEPARATOR="=",_}();T.exports=v}),ks=O((s,T)=>{"use strict";var d=fi(),v=Qo(),_=re(),c=Nn(),l=x(8835),h=function(){function p(g){var y=this;this.endpointBase=c.DEFAULT_BREEZE_ENDPOINT;var m=process.env[p.ENV_connectionString],b=v.parse(g),w=v.parse(m),k=!b.instrumentationkey&&Object.keys(b).length>0?null:g;this.instrumentationKey=b.instrumentationkey||k||w.instrumentationkey||p._getInstrumentationKey(),p._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(b.ingestionendpoint||w.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(R){return y.correlationId=R},this.proxyHttpUrl=process.env[p.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[p.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=b.ingestionendpoint||w.ingestionendpoint||process.env[p.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=b.liveendpoint||w.liveendpoint||process.env[p.ENV_quickPulseHost]||c.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=l.parse(this._quickPulseHost).host)}return Object.defineProperty(p.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(g){d.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=g,this.correlationId=d.correlationIdPrefix,d.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(g){this._quickPulseHost=g},enumerable:!1,configurable:!0}),p._getInstrumentationKey=function(){var g=process.env[p.ENV_iKey]||process.env[p.ENV_azurePrefix+p.ENV_iKey]||process.env[p.legacy_ENV_iKey]||process.env[p.ENV_azurePrefix+p.legacy_ENV_iKey];if(!g||g=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return g},p._validateInstrumentationKey=function(g){var y="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",m=new RegExp(y);return m.test(g)},p.ENV_azurePrefix="APPSETTING_",p.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",p.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",p.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",p.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",p.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",p.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",p.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",p.ENV_http_proxy="http_proxy",p.ENV_https_proxy="https_proxy",p}();T.exports=h}),jl=O(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(l){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(l[y]=h[y])}return l},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AutoCollectNativePerformance=void 0;var d=ks(),v=wi(),_=re(),c=function(){function l(h){this._disabledMetrics={},l.INSTANCE&&l.INSTANCE.dispose(),l.INSTANCE=this,this._client=h}return l.isNodeVersionCompatible=function(){var h=process.versions.node.split(".");return parseInt(h[0])>=6},l.prototype.enable=function(h,p,g){var y=this;if(p===void 0&&(p={}),g===void 0&&(g=6e4),!!l.isNodeVersionCompatible()){if(l._metricsAvailable==null&&h&&!this._isInitialized)try{var m=x(6591);l._emitter=new m,l._metricsAvailable=!0,_.info("Native metrics module successfully loaded!")}catch(b){l._metricsAvailable=!1;return}this._isEnabled=h,this._disabledMetrics=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&l._emitter?(l._emitter.enable(!0,g),this._handle||(this._handle=setInterval(function(){return y._trackNativeMetrics()},g),this._handle.unref())):l._emitter&&(l._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},l.prototype.dispose=function(){this.enable(!1)},l.parseEnabled=function(h){var p=process.env[d.ENV_nativeMetricsDisableAll],g=process.env[d.ENV_nativeMetricsDisablers];if(p)return{isEnabled:!1,disabledMetrics:{}};if(g){var y=g.split(","),m={};if(y.length>0)for(var b=0,w=y;b<w.length;b++){var k=w[b];m[k]=!0}return typeof h=="object"?{isEnabled:!0,disabledMetrics:T(T({},h),m)}:{isEnabled:h,disabledMetrics:m}}return typeof h=="boolean"?{isEnabled:h,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:h}},l.prototype._trackNativeMetrics=function(){var h=!0;typeof this._isEnabled!="object"&&(h=this._isEnabled),h&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},l.prototype._trackGarbageCollection=function(){var h;if(!this._disabledMetrics.gc){var p=l._emitter.getGCData();for(var g in p){var y=p[g].metrics,m=g+" Garbage Collection Duration",b=Math.sqrt(y.sumSquares/y.count-Math.pow(y.total/y.count,2))||0;this._client.trackMetric({name:m,value:y.total,count:y.count,max:y.max,min:y.min,stdDev:b,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)})}}},l.prototype._trackEventLoop=function(){var h;if(!this._disabledMetrics.loop){var p=l._emitter.getLoopData(),g=p.loopUsage;if(g.count!=0){var y="Event Loop CPU Time",m=Math.sqrt(g.sumSquares/g.count-Math.pow(g.total/g.count,2))||0;this._client.trackMetric({name:y,value:g.total,count:g.count,min:g.min,max:g.max,stdDev:m,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)})}}},l.prototype._trackHeapUsage=function(){var h,p,g;if(!this._disabledMetrics.heap){var y=process.memoryUsage(),m=y.heapUsed,b=y.heapTotal,w=y.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:m,count:1,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)}),this._client.trackMetric({name:"Memory Total (Heap)",value:b,count:1,tagOverrides:(p={},p[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,p)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:w-b,count:1,tagOverrides:(g={},g[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,g)})}},l}();s.AutoCollectNativePerformance=c}),Wo=O((s,T)=>{"use strict";var d=re(),v=function(){function _(c,l,h,p){this._buffer=[],this._lastSend=0,this._isDisabled=c,this._getBatchSize=l,this._getBatchIntervalMs=h,this._sender=p}return _.prototype.setUseDiskRetryCaching=function(c,l,h){this._sender.setDiskRetryMode(c,l,h)},_.prototype.send=function(c){var l=this;if(!this._isDisabled()){if(!c){d.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(c),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){l._timeoutHandle=null,l.triggerSend(!1)},this._getBatchIntervalMs()))}},_.prototype.triggerSend=function(c,l){var h=this._buffer.length<1;h||(c?(this._sender.saveOnCrash(this._buffer),typeof l=="function"&&l("data saved on crash")):this._sender.send(this._buffer,l)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,h&&typeof l=="function"&&l("no data to send")},_}();T.exports=v}),zl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.azureRoleEnvironmentTelemetryProcessor=void 0;function T(d,v){process.env.WEBSITE_SITE_NAME&&(d.tags[v.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}s.azureRoleEnvironmentTelemetryProcessor=T}),Ql=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSamplingHashCode=s.samplingTelemetryProcessor=void 0;var T=Bt();function d(_,c){var l=_.sampleRate,h=!1;return l==null||l>=100||_.data&&T.TelemetryType.Metric===T.baseTypeToTelemetryType(_.data.baseType)?!0:(c.correlationContext&&c.correlationContext.operation?h=v(c.correlationContext.operation.id)<l:h=Math.random()*100<l,h)}s.samplingTelemetryProcessor=d;function v(_){var c=-2147483648,l=2147483647,h=5381;if(!_)return 0;for(;_.length<8;)_=_+_;for(var p=0;p<_.length;p++)h=((h<<5)+h|0)+_.charCodeAt(p)|0;return h=h<=c?l:Math.abs(h),h/l*100}s.getSamplingHashCode=v}),wa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.performanceMetricsTelemetryProcessor=void 0;var T=Qn(),d=Bt();function v(_,c){switch(c&&c.addDocument(_),_.data.baseType){case d.TelemetryTypeString.Exception:T.countException();break;case d.TelemetryTypeString.Request:var l=_.data.baseData;T.countRequest(l.duration,l.success);break;case d.TelemetryTypeString.Dependency:var h=_.data.baseData;T.countDependency(h.duration,h.success);break}return!0}s.performanceMetricsTelemetryProcessor=v}),Ko=O(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(l){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(l[y]=h[y])}return l},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.preAggregatedMetricsTelemetryProcessor=void 0;var d=Bt(),v=_a(),_=Bt();function c(l,h){if(v.isEnabled())switch(l.data.baseType){case _.TelemetryTypeString.Exception:var p=l.data.baseData;p.properties=T(T({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var g={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole]};v.countException(g);break;case _.TelemetryTypeString.Trace:var y=l.data.baseData;y.properties=T(T({},y.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var m={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole],traceSeverityLevel:d.SeverityLevel[y.severity]};v.countTrace(m);break;case _.TelemetryTypeString.Request:var b=l.data.baseData;b.properties=T(T({},b.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var w={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole],operationSynthetic:l.tags[h.keys.operationSyntheticSource],requestSuccess:b.success,requestResultCode:b.responseCode};v.countRequest(b.duration,w);break;case _.TelemetryTypeString.Dependency:var k=l.data.baseData;k.properties=T(T({},k.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var R={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole],operationSynthetic:l.tags[h.keys.operationSyntheticSource],dependencySuccess:k.success,dependencyType:k.type,dependencyTarget:k.target,dependencyResultCode:k.resultCode};v.countDependency(k.duration,R);break}return!0}s.preAggregatedMetricsTelemetryProcessor=c}),Yo=O(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(zl(),s),d(Ql(),s),d(wa(),s),d(Ko(),s)}),md=O((s,T)=>{"use strict";var d=s&&s.__awaiter||function(w,k,R,A){function D(B){return B instanceof R?B:new R(function(X){X(B)})}return new(R||(R=Promise))(function(B,X){function Q(Se){try{ge(A.next(Se))}catch(Te){X(Te)}}function oe(Se){try{ge(A.throw(Se))}catch(Te){X(Te)}}function ge(Se){Se.done?B(Se.value):D(Se.value).then(Q,oe)}ge((A=A.apply(w,k||[])).next())})},v=s&&s.__generator||function(w,k){var R={label:0,sent:function(){if(B[0]&1)throw B[1];return B[1]},trys:[],ops:[]},A,D,B,X;return X={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(X[Symbol.iterator]=function(){return this}),X;function Q(ge){return function(Se){return oe([ge,Se])}}function oe(ge){if(A)throw new TypeError("Generator is already executing.");for(;R;)try{if(A=1,D&&(B=ge[0]&2?D.return:ge[0]?D.throw||((B=D.return)&&B.call(D),0):D.next)&&!(B=B.call(D,ge[1])).done)return B;switch(D=0,B&&(ge=[ge[0]&2,B.value]),ge[0]){case 0:case 1:B=ge;break;case 4:return R.label++,{value:ge[1],done:!1};case 5:R.label++,D=ge[1],ge=[0];continue;case 7:ge=R.ops.pop(),R.trys.pop();continue;default:if(B=R.trys,!(B=B.length>0&&B[B.length-1])&&(ge[0]===6||ge[0]===2)){R=0;continue}if(ge[0]===3&&(!B||ge[1]>B[0]&&ge[1]<B[3])){R.label=ge[1];break}if(ge[0]===6&&R.label<B[1]){R.label=B[1],B=ge;break}if(B&&R.label<B[2]){R.label=B[2],R.ops.push(ge);break}B[2]&&R.ops.pop(),R.trys.pop();continue}ge=k.call(w,R)}catch(Se){ge=[6,Se],D=0}finally{A=B=0}if(ge[0]&5)throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}},_=x(5747),c=x(2087),l=x(5622),h=x(8761),p=x(3129),g=re(),y=Wn(),m=mr(),b=function(){function w(k,R,A){if(this._redirectedHost=null,this._config=k,this._onSuccess=R,this._onError=A,this._enableDiskRetryMode=!1,this._resendInterval=w.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=w.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=l.join(c.tmpdir(),w.TEMPDIR_PREFIX+this._config.instrumentationKey),!w.OS_PROVIDES_FILE_PROTECTION)if(w.USE_ICACLS){try{w.OS_PROVIDES_FILE_PROTECTION=_.existsSync(w.ICACLS_PATH)}catch(D){}w.OS_PROVIDES_FILE_PROTECTION||g.warn(w.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else w.OS_PROVIDES_FILE_PROTECTION=!0}return w.prototype.setDiskRetryMode=function(k,R,A){var D=this;this._enableDiskRetryMode=w.OS_PROVIDES_FILE_PROTECTION&&k,typeof R=="number"&&R>=0&&(this._resendInterval=Math.floor(R)),typeof A=="number"&&A>=0&&(this._maxBytesOnDisk=Math.floor(A)),k&&!w.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,g.warn(w.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){D._fileCleanupTask()},w.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},w.prototype.send=function(k,R){return d(this,void 0,void 0,function(){var A,D,B,X,Q=this;return v(this,function(oe){return k&&(A=this._redirectedHost||this._config.endpointUrl,D={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},B="",k.forEach(function(ge){var Se=Q._stringify(ge);typeof Se=="string"&&(B+=Se+`
`)}),B.length>0&&(B=B.substring(0,B.length-1)),X=Buffer.from?Buffer.from(B):new Buffer(B),h.gzip(X,function(ge,Se){var Te=Se;ge?(g.warn(ge),Te=X,D.headers["Content-Length"]=X.length.toString()):(D.headers["Content-Encoding"]="gzip",D.headers["Content-Length"]=Se.length.toString()),g.info(w.TAG,D),D[y.disableCollectionRequestOption]=!0;var Ne=function(Ue){Ue.setEncoding("utf-8");var ze="";Ue.on("data",function(ot){ze+=ot}),Ue.on("end",function(){if(Q._numConsecutiveFailures=0,Q._enableDiskRetryMode){if(Ue.statusCode===200)Q._resendTimer||(Q._resendTimer=setTimeout(function(){Q._resendTimer=null,Q._sendFirstFileOnDisk()},Q._resendInterval),Q._resendTimer.unref());else if(Q._isRetriable(Ue.statusCode))try{var ot=JSON.parse(ze),tt=[];ot.errors.forEach(function(ct){Q._isRetriable(ct.statusCode)&&tt.push(k[ct.index])}),tt.length>0&&Q._storeToDisk(tt)}catch(ct){Q._storeToDisk(k)}}if(Ue.statusCode===307||Ue.statusCode===308)if(Q._numConsecutiveRedirects++,Q._numConsecutiveRedirects<10){var qt=Ue.headers.location?Ue.headers.location.toString():null;qt&&(Q._redirectedHost=qt,Q.send(k,R))}else typeof R=="function"&&R("Error sending telemetry because of circular redirects.");else Q._numConsecutiveRedirects=0,typeof R=="function"&&R(ze),g.info(w.TAG,ze),typeof Q._onSuccess=="function"&&Q._onSuccess(ze)})},Re=m.makeRequest(Q._config,A,D,Ne);Re.on("error",function(Ue){if(Q._numConsecutiveFailures++,!Q._enableDiskRetryMode||Q._numConsecutiveFailures>0&&Q._numConsecutiveFailures%w.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var ze="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";Q._enableDiskRetryMode&&(ze="Ingestion endpoint could not be reached "+Q._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),g.warn(w.TAG,ze,m.dumpObj(Ue))}else{var ze="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";g.info(w.TAG,ze,m.dumpObj(Ue))}Q._onErrorHelper(Ue),typeof R=="function"&&(Ue&&R(m.dumpObj(Ue)),R("Error sending telemetry")),Q._enableDiskRetryMode&&Q._storeToDisk(k)}),Re.write(Te),Re.end()})),[2]})})},w.prototype.saveOnCrash=function(k){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(k))},w.prototype._isRetriable=function(k){return k===206||k===408||k===429||k===439||k===500||k===503},w.prototype._runICACLS=function(k,R){var A=p.spawn(w.ICACLS_PATH,k,{windowsHide:!0});A.on("error",function(D){return R(D)}),A.on("close",function(D,B){return R(D===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+D+")"))})},w.prototype._runICACLSSync=function(k){if(p.spawnSync){var R=p.spawnSync(w.ICACLS_PATH,k,{windowsHide:!0});if(R.error)throw R.error;if(R.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+R.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},w.prototype._getACLIdentity=function(k){if(w.ACL_IDENTITY)return k(null,w.ACL_IDENTITY);var R=p.spawn(w.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),A="";R.stdout.on("data",function(D){return A+=D}),R.on("error",function(D){return k(D,null)}),R.on("close",function(D,B){return w.ACL_IDENTITY=A&&A.trim(),k(D===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+D+")"),w.ACL_IDENTITY)})},w.prototype._getACLIdentitySync=function(){if(w.ACL_IDENTITY)return w.ACL_IDENTITY;if(p.spawnSync){var k=p.spawnSync(w.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(k.error)throw k.error;if(k.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+k.status+")");return w.ACL_IDENTITY=k.stdout&&k.stdout.toString().trim(),w.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},w.prototype._getACLArguments=function(k,R){return[k,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",R+":(OI)(CI)F","/inheritance:r"]},w.prototype._applyACLRules=function(k,R){var A=this;if(!w.USE_ICACLS)return R(null);if(w.ACLED_DIRECTORIES[k]===void 0)w.ACLED_DIRECTORIES[k]=!1,this._getACLIdentity(function(D,B){if(D)return w.ACLED_DIRECTORIES[k]=!1,R(D);A._runICACLS(A._getACLArguments(k,B),function(X){return w.ACLED_DIRECTORIES[k]=!X,R(X)})});else return R(w.ACLED_DIRECTORIES[k]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},w.prototype._applyACLRulesSync=function(k){if(w.USE_ICACLS){if(w.ACLED_DIRECTORIES[k]===void 0){this._runICACLSSync(this._getACLArguments(k,this._getACLIdentitySync())),w.ACLED_DIRECTORIES[k]=!0;return}else if(!w.ACLED_DIRECTORIES[k])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},w.prototype._confirmDirExists=function(k,R){var A=this;_.lstat(k,function(D,B){D&&D.code==="ENOENT"?_.mkdir(k,function(X){X&&X.code!=="EEXIST"?R(X):A._applyACLRules(k,R)}):!D&&B.isDirectory()?A._applyACLRules(k,R):R(D||new Error("Path existed but was not a directory"))})},w.prototype._getShallowDirectorySize=function(k,R){_.readdir(k,function(A,D){if(A)return R(A,-1);var B=null,X=0,Q=0;if(D.length===0){R(null,0);return}for(var oe=0;oe<D.length;oe++)_.stat(l.join(k,D[oe]),function(ge,Se){Q++,ge?B=ge:Se.isFile()&&(X+=Se.size),Q===D.length&&(B?R(B,-1):R(B,X))})})},w.prototype._getShallowDirectorySizeSync=function(k){for(var R=_.readdirSync(k),A=0,D=0;D<R.length;D++)A+=_.statSync(l.join(k,R[D])).size;return A},w.prototype._storeToDisk=function(k){var R=this;g.info(w.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(A){if(A){g.warn(w.TAG,"Error while checking/creating directory: "+(A&&A.message)),R._onErrorHelper(A);return}R._getShallowDirectorySize(R._tempDir,function(D,B){if(D||B<0){g.warn(w.TAG,"Error while checking directory size: "+(D&&D.message)),R._onErrorHelper(D);return}else if(B>R._maxBytesOnDisk){g.warn(w.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+B);return}var X=new Date().getTime()+".ai.json",Q=l.join(R._tempDir,X);g.info(w.TAG,"saving data to disk at: "+Q),_.writeFile(Q,R._stringify(k),{mode:384},function(oe){return R._onErrorHelper(oe)})})})},w.prototype._storeToDiskSync=function(k){try{g.info(w.TAG,"Checking existence of data storage directory: "+this._tempDir),_.existsSync(this._tempDir)||_.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var R=this._getShallowDirectorySizeSync(this._tempDir);if(R>this._maxBytesOnDisk){g.info(w.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+R);return}var A=new Date().getTime()+".ai.json",D=l.join(this._tempDir,A);g.info(w.TAG,"saving data before crash to disk at: "+D),_.writeFileSync(D,k,{mode:384})}catch(B){g.warn(w.TAG,"Error while saving data to disk: "+(B&&B.message)),this._onErrorHelper(B)}},w.prototype._sendFirstFileOnDisk=function(){var k=this;_.exists(this._tempDir,function(R){R&&_.readdir(k._tempDir,function(A,D){if(A)k._onErrorHelper(A);else if(D=D.filter(function(Q){return l.basename(Q).indexOf(".ai.json")>-1}),D.length>0){var B=D[0],X=l.join(k._tempDir,B);_.readFile(X,function(Q,oe){Q?k._onErrorHelper(Q):_.unlink(X,function(ge){if(ge)k._onErrorHelper(ge);else try{var Se=JSON.parse(oe.toString());k.send(Se)}catch(Te){g.warn("Failed to read persisted file",Te)}})})}})})},w.prototype._onErrorHelper=function(k){typeof this._onError=="function"&&this._onError(k)},w.prototype._stringify=function(k){try{return JSON.stringify(k)}catch(R){g.warn("Failed to serialize payload",R,k)}},w.prototype._fileCleanupTask=function(){var k=this;_.exists(this._tempDir,function(R){R&&_.readdir(k._tempDir,function(A,D){A?k._onErrorHelper(A):(D=D.filter(function(B){return l.basename(B).indexOf(".ai.json")>-1}),D.length>0&&D.forEach(function(B){var X=new Date(parseInt(B.split(".ai.json")[0])),Q=new Date(+new Date-w.FILE_RETEMPTION_PERIOD)>X;if(Q){var oe=l.join(k._tempDir,B);_.unlink(oe,function(ge){ge&&k._onErrorHelper(ge)})}}))})})},w.TAG="Sender",w.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",w.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",w.ACLED_DIRECTORIES={},w.ACL_IDENTITY=null,w.WAIT_BETWEEN_RESEND=60*1e3,w.MAX_BYTES_ON_DISK=50*1024*1024,w.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,w.CLEANUP_TIMEOUT=60*60*1e3,w.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,w.TEMPDIR_PREFIX="appInsights-node",w.OS_PROVIDES_FILE_PROTECTION=!1,w.USE_ICACLS=c.type()==="Windows_NT",w}();T.exports=b}),Wl=O((s,T)=>{"use strict";var d=Bt(),v=mr(),_=_i(),c=function(){function h(){}return h.createEnvelope=function(p,g,y,m,b){var w=null;switch(g){case d.TelemetryType.Trace:w=h.createTraceData(p);break;case d.TelemetryType.Dependency:w=h.createDependencyData(p);break;case d.TelemetryType.Event:w=h.createEventData(p);break;case d.TelemetryType.Exception:w=h.createExceptionData(p);break;case d.TelemetryType.Request:w=h.createRequestData(p);break;case d.TelemetryType.Metric:w=h.createMetricData(p);break;case d.TelemetryType.Availability:w=h.createAvailabilityData(p);break;case d.TelemetryType.PageView:w=h.createPageViewData(p);break}if(y&&d.domainSupportsProperties(w.baseData)){if(w&&w.baseData)if(!w.baseData.properties)w.baseData.properties=y;else for(var k in y)w.baseData.properties[k]||(w.baseData.properties[k]=y[k]);w.baseData.properties=v.validateStringMap(w.baseData.properties)}var R=b&&b.instrumentationKey||"",A=new d.Envelope;return A.data=w,A.iKey=R,A.name="Microsoft.ApplicationInsights."+R.replace(/-/g,"")+"."+w.baseType.substr(0,w.baseType.length-4),A.tags=this.getTags(m,p.tagOverrides),A.time=new Date().toISOString(),A.ver=1,A.sampleRate=b?b.samplingPercentage:100,g===d.TelemetryType.Metric&&(A.sampleRate=100),A},h.createTraceData=function(p){var g=new d.MessageData;g.message=p.message,g.properties=p.properties,isNaN(p.severity)?g.severityLevel=d.SeverityLevel.Information:g.severityLevel=p.severity;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Trace),y.baseData=g,y},h.createDependencyData=function(p){var g=new d.RemoteDependencyData;typeof p.name=="string"&&(g.name=p.name.length>1024?p.name.slice(0,1021)+"...":p.name),g.data=p.data,g.target=p.target,g.duration=v.msToTimeSpan(p.duration),g.success=p.success,g.type=p.dependencyTypeName,g.properties=p.properties,g.resultCode=p.resultCode?p.resultCode+"":"",p.id?g.id=p.id:g.id=v.w3cTraceId();var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Dependency),y.baseData=g,y},h.createEventData=function(p){var g=new d.EventData;g.name=p.name,g.properties=p.properties,g.measurements=p.measurements;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Event),y.baseData=g,y},h.createExceptionData=function(p){var g=new d.ExceptionData;g.properties=p.properties,isNaN(p.severity)?g.severityLevel=d.SeverityLevel.Error:g.severityLevel=p.severity,g.measurements=p.measurements,g.exceptions=[];var y=p.exception.stack,m=new d.ExceptionDetails;m.message=p.exception.message,m.typeName=p.exception.name,m.parsedStack=this.parseStack(y),m.hasFullStack=v.isArray(m.parsedStack)&&m.parsedStack.length>0,g.exceptions.push(m);var b=new d.Data;return b.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Exception),b.baseData=g,b},h.createRequestData=function(p){var g=new d.RequestData;p.id?g.id=p.id:g.id=v.w3cTraceId(),g.name=p.name,g.url=p.url,g.source=p.source,g.duration=v.msToTimeSpan(p.duration),g.responseCode=p.resultCode?p.resultCode+"":"",g.success=p.success,g.properties=p.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Request),y.baseData=g,y},h.createMetricData=function(p){var g=new d.MetricData;g.metrics=[];var y=new d.DataPoint;y.count=isNaN(p.count)?1:p.count,y.kind=d.DataPointType.Aggregation,y.max=isNaN(p.max)?p.value:p.max,y.min=isNaN(p.min)?p.value:p.min,y.name=p.name,y.stdDev=isNaN(p.stdDev)?0:p.stdDev,y.value=p.value,g.metrics.push(y),g.properties=p.properties;var m=new d.Data;return m.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Metric),m.baseData=g,m},h.createAvailabilityData=function(p){var g=new d.AvailabilityData;p.id?g.id=p.id:g.id=v.w3cTraceId(),g.name=p.name,g.duration=v.msToTimeSpan(p.duration),g.success=p.success,g.runLocation=p.runLocation,g.message=p.message,g.measurements=p.measurements,g.properties=p.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Availability),y.baseData=g,y},h.createPageViewData=function(p){var g=new d.PageViewData;g.name=p.name,g.duration=v.msToTimeSpan(p.duration),g.url=p.url,g.measurements=p.measurements,g.properties=p.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.PageView),y.baseData=g,y},h.getTags=function(p,g){var y=_.CorrelationContextManager.getCurrentContext(),m={};if(p&&p.tags)for(var b in p.tags)m[b]=p.tags[b];if(g)for(var b in g)m[b]=g[b];return y&&(m[p.keys.operationId]=m[p.keys.operationId]||y.operation.id,m[p.keys.operationName]=m[p.keys.operationName]||y.operation.name,m[p.keys.operationParentId]=m[p.keys.operationParentId]||y.operation.parentId),m},h.parseStack=function(p){var g=void 0;if(typeof p=="string"){var y=p.split(`
`);g=[];for(var m=0,b=0,w=0;w<=y.length;w++){var k=y[w];if(l.regex.test(k)){var R=new l(y[w],m++);b+=R.sizeInBytes,g.push(R)}}var A=32*1024;if(b>A)for(var D=0,B=g.length-1,X=0,Q=D,oe=B;D<B;){var ge=g[D].sizeInBytes,Se=g[B].sizeInBytes;if(X+=ge+Se,X>A){var Te=oe-Q+1;g.splice(Q,Te);break}Q=D,oe=B,D++,B--}}return g},h}(),l=function(){function h(p,g){this.sizeInBytes=0,this.level=g,this.method="<no_method>",this.assembly=v.trim(p);var y=p.match(h.regex);y&&y.length>=5&&(this.method=v.trim(y[2])||this.method,this.fileName=v.trim(y[4])||"<no_filename>",this.line=parseInt(y[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=h.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return h.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,h.baseSize=58,h}();T.exports=c}),fd=O((s,T)=>{"use strict";var d=x(8835),v=ks(),_=wi(),c=Bt(),l=Wo(),h=Yo(),p=_i(),g=md(),y=mr(),m=re(),b=Wl(),w=function(){function k(R){this._telemetryProcessors=[],this._enableAzureProperties=!1;var A=new v(R);this.config=A,this.context=new _,this.commonProperties={};var D=new g(this.config);this.channel=new l(function(){return A.disableAppInsights},function(){return A.maxBatchSize},function(){return A.maxBatchIntervalMs},D)}return k.prototype.trackAvailability=function(R){this.track(R,c.TelemetryType.Availability)},k.prototype.trackPageView=function(R){this.track(R,c.TelemetryType.PageView)},k.prototype.trackTrace=function(R){this.track(R,c.TelemetryType.Trace)},k.prototype.trackMetric=function(R){this.track(R,c.TelemetryType.Metric)},k.prototype.trackException=function(R){R&&R.exception&&!y.isError(R.exception)&&(R.exception=new Error(R.exception.toString())),this.track(R,c.TelemetryType.Exception)},k.prototype.trackEvent=function(R){this.track(R,c.TelemetryType.Event)},k.prototype.trackRequest=function(R){this.track(R,c.TelemetryType.Request)},k.prototype.trackDependency=function(R){R&&!R.target&&R.data&&(R.target=d.parse(R.data).host),this.track(R,c.TelemetryType.Dependency)},k.prototype.flush=function(R){this.channel.triggerSend(R?!!R.isAppCrashing:!1,R?R.callback:void 0)},k.prototype.track=function(R,A){if(R&&c.telemetryTypeToBaseType(A)){var D=b.createEnvelope(R,A,this.commonProperties,this.context,this.config);R.time&&(D.time=R.time.toISOString()),this._enableAzureProperties&&h.azureRoleEnvironmentTelemetryProcessor(D,this.context);var B=this.runTelemetryProcessors(D,R.contextObjects);B=B&&h.samplingTelemetryProcessor(D,{correlationContext:p.CorrelationContextManager.getCurrentContext()}),h.preAggregatedMetricsTelemetryProcessor(D,this.context),B&&(h.performanceMetricsTelemetryProcessor(D,this.quickPulseClient),this.channel.send(D))}else m.warn("track() requires telemetry object and telemetryType to be specified.")},k.prototype.setAutoPopulateAzureProperties=function(R){this._enableAzureProperties=R},k.prototype.addTelemetryProcessor=function(R){this._telemetryProcessors.push(R)},k.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},k.prototype.runTelemetryProcessors=function(R,A){var D=!0,B=this._telemetryProcessors.length;if(B===0)return D;A=A||{},A.correlationContext=p.CorrelationContextManager.getCurrentContext();for(var X=0;X<B;++X)try{var Q=this._telemetryProcessors[X];if(Q&&Q.apply(null,[R,A])===!1){D=!1;break}}catch(oe){D=!0,m.warn("One of telemetry processors failed, telemetry item will be sent.",oe,R)}return D&&(R&&R.tags&&(R.tags=y.validateStringMap(R.tags)),R&&R.data&&R.data.baseData&&R.data.baseData.properties&&(R.data.baseData.properties=y.validateStringMap(R.data.baseData.properties))),D},k}();T.exports=w}),Xo=O((s,T)=>{"use strict";var d=s&&s.__extends||function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(m[w]=b[w])},p(g,y)};return function(g,y){p(g,y);function m(){this.constructor=g}g.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),v=fd(),_=zo(),c=Wn(),l=re(),h=function(p){d(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.trackNodeHttpRequestSync=function(y){y&&y.request&&y.response&&y.duration?_.trackRequestSync(this,y):l.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},g.prototype.trackNodeHttpRequest=function(y){(y.duration||y.error)&&l.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),y&&y.request&&y.response?_.trackRequest(this,y):l.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},g.prototype.trackNodeHttpDependency=function(y){y&&y.request?c.trackRequest(this,y):l.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},g}(v);T.exports=h}),Kl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Yl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.Configuration=s.wrapWithCorrelationContext=s.startOperation=s.getCorrelationContext=s.start=s.setup=s.liveMetricsClient=s.defaultClient=s.DistributedTracingModes=void 0;var T=_i(),d=Ol(),v=Dl(),_=Qn(),c=_a(),l=pd(),h=Wn(),p=zo(),g=fi(),y=re(),m=Vl(),b=jl();s.TelemetryClient=Xo(),s.Contracts=Bt(),s.azureFunctionsTypes=Kl();var w;(function(Ze){Ze[Ze.AI=0]="AI",Ze[Ze.AI_AND_W3C=1]="AI_AND_W3C"})(w=s.DistributedTracingModes||(s.DistributedTracingModes={}));var k=!0,R=!1,A=!0,D=!0,B=!0,X=!1,Q=!0,oe=!0,ge=!0,Se=!0,Te,Ne=!1,Re=!0,Ue,ze=void 0,ot=void 0,tt,qt,ct,Ie,qe,Le,je,Ke,ut=!1,Qe;function kt(Ze){return s.defaultClient?y.info("The default client is already setup"):(s.defaultClient=new s.TelemetryClient(Ze),tt=new d(s.defaultClient),qt=new v(s.defaultClient),ct=new _(s.defaultClient),Ie=new c(s.defaultClient),qe=new l(s.defaultClient),je=new p(s.defaultClient),Ke=new h(s.defaultClient),Le||(Le=new b.AutoCollectNativePerformance(s.defaultClient))),s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(ge,ze,ot),er}s.setup=kt;function Yt(){return s.defaultClient?(ut=!0,tt.enable(k,R),qt.enable(A),ct.enable(D),Ie.enable(B),qe.enable(X,s.defaultClient.config),Le.enable(Re,Ue),je.useAutoCorrelation(Se,Te),je.enable(Q),Ke.enable(oe),s.liveMetricsClient&&Ne&&s.liveMetricsClient.enable(Ne)):y.warn("Start cannot be called before setup"),er}s.start=Yt;function Gt(){return Se?T.CorrelationContextManager.getCurrentContext():null}s.getCorrelationContext=Gt;function Ot(Ze,Ye){return T.CorrelationContextManager.startOperation(Ze,Ye)}s.startOperation=Ot;function wt(Ze,Ye){return T.CorrelationContextManager.wrapCallback(Ze,Ye)}s.wrapWithCorrelationContext=wt;var er=function(){function Ze(){}return Ze.setDistributedTracingMode=function(Ye){return g.w3cEnabled=Ye===w.AI_AND_W3C,Ze},Ze.setAutoCollectConsole=function(Ye,vt){return vt===void 0&&(vt=!1),k=Ye,R=vt,ut&&tt.enable(Ye,vt),Ze},Ze.setAutoCollectExceptions=function(Ye){return A=Ye,ut&&qt.enable(Ye),Ze},Ze.setAutoCollectPerformance=function(Ye,vt){vt===void 0&&(vt=!0),D=Ye;var tr=b.AutoCollectNativePerformance.parseEnabled(vt);return Re=tr.isEnabled,Ue=tr.disabledMetrics,ut&&(ct.enable(Ye),Le.enable(tr.isEnabled,tr.disabledMetrics)),Ze},Ze.setAutoCollectPreAggregatedMetrics=function(Ye){return B=Ye,ut&&Ie.enable(Ye),Ze},Ze.setAutoCollectHeartbeat=function(Ye){return X=Ye,ut&&qe.enable(Ye,s.defaultClient.config),Ze},Ze.setAutoCollectRequests=function(Ye){return Q=Ye,ut&&je.enable(Ye),Ze},Ze.setAutoCollectDependencies=function(Ye){return oe=Ye,ut&&Ke.enable(Ye),Ze},Ze.setAutoDependencyCorrelation=function(Ye,vt){return Se=Ye,Te=vt,ut&&je.useAutoCorrelation(Ye,vt),Ze},Ze.setUseDiskRetryCaching=function(Ye,vt,tr){return ge=Ye,ze=vt,ot=tr,s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(Ye,vt,tr),Ze},Ze.setInternalLogging=function(Ye,vt){return Ye===void 0&&(Ye=!1),vt===void 0&&(vt=!0),y.enableDebug=Ye,y.disableWarnings=!vt,Ze},Ze.setSendLiveMetrics=function(Ye){return Ye===void 0&&(Ye=!1),s.defaultClient?(!s.liveMetricsClient&&Ye?(s.liveMetricsClient=new m(s.defaultClient.config,null),Qe=new _(s.liveMetricsClient,1e3,!0),s.liveMetricsClient.addCollector(Qe),s.defaultClient.quickPulseClient=s.liveMetricsClient):s.liveMetricsClient&&s.liveMetricsClient.enable(Ye),Ne=Ye,Ze):(y.warn("Live metrics client cannot be setup without the default client"),Ze)},Ze.start=Yt,Ze}();s.Configuration=er;function Rr(){g.w3cEnabled=!0,s.defaultClient=null,ut=!1,tt&&tt.dispose(),qt&&qt.dispose(),ct&&ct.dispose(),Ie&&Ie.dispose(),qe&&qe.dispose(),Le&&Le.dispose(),je&&je.dispose(),Ke&&Ke.dispose(),s.liveMetricsClient&&(s.liveMetricsClient.enable(!1),Ne=!1,s.liveMetricsClient=void 0)}s.dispose=Rr});U(Y,{default:()=>De});var Jo=G(x(2087)),Vi=G(x(7549)),ji=G(Yl()),It=G(x(7549)),Ea=class{constructor(s,T,d,v,_){this.extensionId=s,this.extensionVersion=T,this.telemetryAppender=d,this.osShim=v,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!_,this.updateUserOptStatus(),It.env.onDidChangeTelemetryEnabled!==void 0?this.optOutListener=It.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus()):this.optOutListener=It.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus())}updateUserOptStatus(){let s=It.workspace.getConfiguration(Ea.TELEMETRY_CONFIG_ID),T=It.env.isTelemetryEnabled===void 0?s.get(Ea.TELEMETRY_CONFIG_ENABLED_ID,!0):It.env.isTelemetryEnabled;this.userOptIn!==T&&(this.userOptIn=T)}cleanRemoteName(s){if(!s)return"none";let T="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(d=>{s.indexOf(`${d}+`)===0&&(T=d)}),T}get extension(){return this._extension===void 0&&(this._extension=It.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(s,T){if(s===null||typeof s!="object"||typeof T!="function")return s;let d={};for(let v in s)d[v]=T(v,s[v]);return d}shouldSendErrorTelemetry(){return this.firstParty?this.cleanRemoteName(It.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===It.ExtensionKind.Workspace||It.env.uiKind===It.UIKind.Web):!0}getCommonProperties(){let s=Object.create(null);if(s["common.os"]=this.osShim.platform,s["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),s["common.extname"]=this.extensionId,s["common.extversion"]=this.extensionVersion,It&&It.env){switch(s["common.vscodemachineid"]=It.env.machineId,s["common.vscodesessionid"]=It.env.sessionId,s["common.vscodeversion"]=It.version,s["common.isnewappinstall"]=It.env.isNewAppInstall.toString(),It.env.uiKind){case It.UIKind.Web:s["common.uikind"]="web";break;case It.UIKind.Desktop:s["common.uikind"]="desktop";break;default:s["common.uikind"]="unknown"}s["common.remotename"]=this.cleanRemoteName(It.env.remoteName)}return s}anonymizeFilePaths(s,T){let d;if(s==null)return"";let v=[];It.env.appRoot!==""&&v.push(new RegExp(It.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&v.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let _=s;if(T){let c=[];for(let g of v)for(;(d=g.exec(s))&&d;)c.push([d.index,g.lastIndex]);let l=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,h=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,p=0;for(_="";(d=h.exec(s))&&d;)d[0]&&!l.test(d[0])&&c.every(([g,y])=>d.index<g||d.index>=y)&&(_+=s.substring(p,d.index)+"<REDACTED: user-file-path>",p=h.lastIndex);p<s.length&&(_+=s.substr(p))}for(let c of v)_=_.replace(c,"");return _}removePropertiesWithPossibleUserInfo(s){if(typeof s!="object")return;let T=Object.create(null);for(let d of Object.keys(s)){let v=s[d];if(!v)continue;let _=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(v.toLowerCase())?T[d]="<REDACTED: secret>":_.test(v)?T[d]="<REDACTED: email>":T[d]=v}return T}sendTelemetryEvent(s,T,d){if(this.userOptIn&&s!==""){T=$($({},T),this.getCommonProperties());let v=this.cloneAndChange(T,(_,c)=>this.anonymizeFilePaths(c,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:d})}}sendTelemetryErrorEvent(s,T,d,v){if(this.userOptIn&&s!==""){T=$($({},T),this.getCommonProperties());let _=this.cloneAndChange(T,(c,l)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(l,this.firstParty):v===void 0||v.indexOf(c)!==-1?"REDACTED":this.anonymizeFilePaths(l,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(_),measurements:d})}}sendTelemetryException(s,T,d){if(this.shouldSendErrorTelemetry()&&this.userOptIn&&s){T=$($({},T),this.getCommonProperties());let v=this.cloneAndChange(T,(_,c)=>this.anonymizeFilePaths(c,this.firstParty));s.stack&&(s.stack=this.anonymizeFilePaths(s.stack,this.firstParty)),this.telemetryAppender.logException(s,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:d})}}dispose(){return this.telemetryAppender.flush(),this.optOutListener.dispose()}},zi=Ea;zi.TELEMETRY_CONFIG_ID="telemetry",zi.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry";var ln=class{constructor(s){ji.defaultClient?(this._appInsightsClient=new ji.TelemetryClient(s),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(ji.setup(s).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=ji.defaultClient),Vi&&Vi.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=Vi.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=Vi.env.sessionId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRole]=Vi.env.appName),s&&s.indexOf("AIF-")===0&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}logEvent(s,T){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:s,properties:T==null?void 0:T.properties,measurements:T==null?void 0:T.measurements})}logException(s,T){!this._appInsightsClient||this._appInsightsClient.trackException({exception:s,properties:T==null?void 0:T.properties,measurements:T==null?void 0:T.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}},De=class extends zi{constructor(s,T,d,v){let _=new ln(d);d&&d.indexOf("AIF-")===0&&(v=!0),super(s,T,_,{release:Jo.release(),platform:Jo.platform()},v)}}},3255:u=>{function Y(x){var V=new Error("Cannot find module '"+x+"'");throw V.code="MODULE_NOT_FOUND",V}Y.keys=()=>[],Y.resolve=Y,Y.id=3255,u.exports=Y},9118:u=>{function Y(x){var V=new Error("Cannot find module '"+x+"'");throw V.code="MODULE_NOT_FOUND",V}Y.keys=()=>[],Y.resolve=Y,Y.id=9118,u.exports=Y},9035:(u,Y,x)=>{"use strict";var V;V={value:!0};var W=x(5654);Y.X7=W.getExperimentationService,V=W.getExperimentationServiceAsync;var ee=x(2560);Y.aU=ee.TargetPopulation},5708:(u,Y)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});class x{constructor(W){this.mementoGlobalStorage=W}async getValue(W,ee){return await this.mementoGlobalStorage.get(W)||ee}setValue(W,ee){this.mementoGlobalStorage.update(W,ee)}}Y.MementoKeyValueStorage=x},2560:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(7549);class W{constructor(M,N,C){this.extensionName=M,this.extensionVersion=N,this.targetPopulation=C}static trimVersionSuffix(M){const N=/\-[a-zA-Z0-9]+$/;return M.split(N)[0]}getFilterValue(M){switch(M){case ee.ApplicationVersion:return W.trimVersionSuffix(V.version);case ee.Build:return V.env.appName;case ee.ClientId:return V.env.machineId;case ee.ExtensionName:return this.extensionName;case ee.ExtensionVersion:return W.trimVersionSuffix(this.extensionVersion);case ee.Language:return V.env.language;case ee.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let M=new Map,N=Object.values(ee);for(let C of N)M.set(C,this.getFilterValue(C));return M}}Y.VSCodeFilterProvider=W;var ee;(function(I){I.Market="X-MSEdge-Market",I.CorpNet="X-FD-Corpnet",I.ApplicationVersion="X-VSCode-AppVersion",I.Build="X-VSCode-Build",I.ClientId="X-MSEdge-ClientId",I.ExtensionName="X-VSCode-ExtensionName",I.ExtensionVersion="X-VSCode-ExtensionVersion",I.Language="X-VSCode-Language",I.TargetPopulation="X-VSCode-TargetPopulation"})(ee=Y.Filters||(Y.Filters={}));var F;(function(I){I.Team="team",I.Internal="internal",I.Insiders="insider",I.Public="public"})(F=Y.TargetPopulation||(Y.TargetPopulation={}))},5654:(u,Y,x)=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});const V=x(2560),W=x(4802),ee=x(5708),F="https://default.exp-tas.com/vscode/ab",I="query-expfeature",M="VSCode.ABExp.Features",N="abexp.assignmentcontext",C="VSCode.ABExp.FeatureData",L=1e3*60*30;function $(O,U,H,G,re,...ie){if(!re)throw new Error("Memento storage was not provided.");const J=[new V.VSCodeFilterProvider(O,U,H),...ie],be=new ee.MementoKeyValueStorage(re);return new W.ExperimentationService({filterProviders:J,telemetry:G,storageKey:C,keyValueStorage:be,featuresTelemetryPropertyName:M,assignmentContextTelemetryPropertyName:N,telemetryEventName:I,endpoint:F,refetchInterval:L})}Y.getExperimentationService=$;async function j(O,U,H,G,re,...ie){const ye=$(O,U,H,G,re,...ie);return await ye.initializePromise,ye}Y.getExperimentationServiceAsync=j},2479:u=>{u.exports=Y;function Y(x,V){if(x&&V)return Y(x)(V);if(typeof x!="function")throw new TypeError("need wrapper function");return Object.keys(x).forEach(function(ee){W[ee]=x[ee]}),W;function W(){for(var ee=new Array(arguments.length),F=0;F<ee.length;F++)ee[F]=arguments[F];var I=x.apply(this,ee),M=ee[ee.length-1];return typeof I=="function"&&I!==M&&Object.keys(M).forEach(function(N){I[N]=M[N]}),I}}},9602:u=>{"use strict";u.exports=function(Y){Y.prototype[Symbol.iterator]=function*(){for(let x=this.head;x;x=x.next)yield x.value}}},4411:(u,Y,x)=>{"use strict";u.exports=V,V.Node=I,V.create=V;function V(M){var N=this;if(N instanceof V||(N=new V),N.tail=null,N.head=null,N.length=0,M&&typeof M.forEach=="function")M.forEach(function($){N.push($)});else if(arguments.length>0)for(var C=0,L=arguments.length;C<L;C++)N.push(arguments[C]);return N}V.prototype.removeNode=function(M){if(M.list!==this)throw new Error("removing node which does not belong to this list");var N=M.next,C=M.prev;return N&&(N.prev=C),C&&(C.next=N),M===this.head&&(this.head=N),M===this.tail&&(this.tail=C),M.list.length--,M.next=null,M.prev=null,M.list=null,N},V.prototype.unshiftNode=function(M){if(M!==this.head){M.list&&M.list.removeNode(M);var N=this.head;M.list=this,M.next=N,N&&(N.prev=M),this.head=M,this.tail||(this.tail=M),this.length++}},V.prototype.pushNode=function(M){if(M!==this.tail){M.list&&M.list.removeNode(M);var N=this.tail;M.list=this,M.prev=N,N&&(N.next=M),this.tail=M,this.head||(this.head=M),this.length++}},V.prototype.push=function(){for(var M=0,N=arguments.length;M<N;M++)ee(this,arguments[M]);return this.length},V.prototype.unshift=function(){for(var M=0,N=arguments.length;M<N;M++)F(this,arguments[M]);return this.length},V.prototype.pop=function(){if(!!this.tail){var M=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,M}},V.prototype.shift=function(){if(!!this.head){var M=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,M}},V.prototype.forEach=function(M,N){N=N||this;for(var C=this.head,L=0;C!==null;L++)M.call(N,C.value,L,this),C=C.next},V.prototype.forEachReverse=function(M,N){N=N||this;for(var C=this.tail,L=this.length-1;C!==null;L--)M.call(N,C.value,L,this),C=C.prev},V.prototype.get=function(M){for(var N=0,C=this.head;C!==null&&N<M;N++)C=C.next;if(N===M&&C!==null)return C.value},V.prototype.getReverse=function(M){for(var N=0,C=this.tail;C!==null&&N<M;N++)C=C.prev;if(N===M&&C!==null)return C.value},V.prototype.map=function(M,N){N=N||this;for(var C=new V,L=this.head;L!==null;)C.push(M.call(N,L.value,this)),L=L.next;return C},V.prototype.mapReverse=function(M,N){N=N||this;for(var C=new V,L=this.tail;L!==null;)C.push(M.call(N,L.value,this)),L=L.prev;return C},V.prototype.reduce=function(M,N){var C,L=this.head;if(arguments.length>1)C=N;else if(this.head)L=this.head.next,C=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var $=0;L!==null;$++)C=M(C,L.value,$),L=L.next;return C},V.prototype.reduceReverse=function(M,N){var C,L=this.tail;if(arguments.length>1)C=N;else if(this.tail)L=this.tail.prev,C=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var $=this.length-1;L!==null;$--)C=M(C,L.value,$),L=L.prev;return C},V.prototype.toArray=function(){for(var M=new Array(this.length),N=0,C=this.head;C!==null;N++)M[N]=C.value,C=C.next;return M},V.prototype.toArrayReverse=function(){for(var M=new Array(this.length),N=0,C=this.tail;C!==null;N++)M[N]=C.value,C=C.prev;return M},V.prototype.slice=function(M,N){N=N||this.length,N<0&&(N+=this.length),M=M||0,M<0&&(M+=this.length);var C=new V;if(N<M||N<0)return C;M<0&&(M=0),N>this.length&&(N=this.length);for(var L=0,$=this.head;$!==null&&L<M;L++)$=$.next;for(;$!==null&&L<N;L++,$=$.next)C.push($.value);return C},V.prototype.sliceReverse=function(M,N){N=N||this.length,N<0&&(N+=this.length),M=M||0,M<0&&(M+=this.length);var C=new V;if(N<M||N<0)return C;M<0&&(M=0),N>this.length&&(N=this.length);for(var L=this.length,$=this.tail;$!==null&&L>N;L--)$=$.prev;for(;$!==null&&L>M;L--,$=$.prev)C.push($.value);return C},V.prototype.splice=function(M,N,...C){M>this.length&&(M=this.length-1),M<0&&(M=this.length+M);for(var L=0,$=this.head;$!==null&&L<M;L++)$=$.next;for(var j=[],L=0;$&&L<N;L++)j.push($.value),$=this.removeNode($);$===null&&($=this.tail),$!==this.head&&$!==this.tail&&($=$.prev);for(var L=0;L<C.length;L++)$=W(this,$,C[L]);return j},V.prototype.reverse=function(){for(var M=this.head,N=this.tail,C=M;C!==null;C=C.prev){var L=C.prev;C.prev=C.next,C.next=L}return this.head=N,this.tail=M,this};function W(M,N,C){var L=N===M.head?new I(C,null,N,M):new I(C,N,N.next,M);return L.next===null&&(M.tail=L),L.prev===null&&(M.head=L),M.length++,L}function ee(M,N){M.tail=new I(N,M.tail,null,M),M.head||(M.head=M.tail),M.length++}function F(M,N){M.head=new I(N,null,M.head,M),M.tail||(M.tail=M.head),M.length++}function I(M,N,C,L){if(!(this instanceof I))return new I(M,N,C,L);this.list=L,this.value=M,N?(N.next=this,this.prev=N):this.prev=null,C?(C.prev=this,this.next=C):this.next=null}try{x(9602)(V)}catch(M){}},9329:(u,Y,x)=>{u.exports=x(516).Observable},516:(u,Y)=>{"use strict";var x;x={value:!0},Y.Observable=void 0;function V(se,ne){if(!(se instanceof ne))throw new TypeError("Cannot call a class as a function")}function W(se,ne){for(var K=0;K<ne.length;K++){var ue=ne[K];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(se,ue.key,ue)}}function ee(se,ne,K){return ne&&W(se.prototype,ne),K&&W(se,K),se}var F=function(){return typeof Symbol=="function"},I=function(se){return F()&&Boolean(Symbol[se])},M=function(se){return I(se)?Symbol[se]:"@@"+se};F()&&!I("observable")&&(Symbol.observable=Symbol("observable"));var N=M("iterator"),C=M("observable"),L=M("species");function $(se,ne){var K=se[ne];if(K!=null){if(typeof K!="function")throw new TypeError(K+" is not a function");return K}}function j(se){var ne=se.constructor;return ne!==void 0&&(ne=ne[L],ne===null&&(ne=void 0)),ne!==void 0?ne:ce}function O(se){return se instanceof ce}function U(se){U.log?U.log(se):setTimeout(function(){throw se})}function H(se){Promise.resolve().then(function(){try{se()}catch(ne){U(ne)}})}function G(se){var ne=se._cleanup;if(ne!==void 0&&(se._cleanup=void 0,!!ne))try{if(typeof ne=="function")ne();else{var K=$(ne,"unsubscribe");K&&K.call(ne)}}catch(ue){U(ue)}}function re(se){se._observer=void 0,se._queue=void 0,se._state="closed"}function ie(se){var ne=se._queue;if(!!ne){se._queue=void 0,se._state="ready";for(var K=0;K<ne.length&&(ye(se,ne[K].type,ne[K].value),se._state!=="closed");++K);}}function ye(se,ne,K){se._state="running";var ue=se._observer;try{var me=$(ue,ne);switch(ne){case"next":me&&me.call(ue,K);break;case"error":if(re(se),me)me.call(ue,K);else throw K;break;case"complete":re(se),me&&me.call(ue);break}}catch(ve){U(ve)}se._state==="closed"?G(se):se._state==="running"&&(se._state="ready")}function J(se,ne,K){if(se._state!=="closed"){if(se._state==="buffering"){se._queue.push({type:ne,value:K});return}if(se._state!=="ready"){se._state="buffering",se._queue=[{type:ne,value:K}],H(function(){return ie(se)});return}ye(se,ne,K)}}var be=function(){function se(ne,K){V(this,se),this._cleanup=void 0,this._observer=ne,this._queue=void 0,this._state="initializing";var ue=new ae(this);try{this._cleanup=K.call(void 0,ue)}catch(me){ue.error(me)}this._state==="initializing"&&(this._state="ready")}return ee(se,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(re(this),G(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),se}(),ae=function(){function se(ne){V(this,se),this._subscription=ne}return ee(se,[{key:"next",value:function(K){J(this._subscription,"next",K)}},{key:"error",value:function(K){J(this._subscription,"error",K)}},{key:"complete",value:function(){J(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),se}(),ce=function(){function se(ne){if(V(this,se),!(this instanceof se))throw new TypeError("Observable cannot be called as a function");if(typeof ne!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=ne}return ee(se,[{key:"subscribe",value:function(K){return(typeof K!="object"||K===null)&&(K={next:K,error:arguments[1],complete:arguments[2]}),new be(K,this._subscriber)}},{key:"forEach",value:function(K){var ue=this;return new Promise(function(me,ve){if(typeof K!="function"){ve(new TypeError(K+" is not a function"));return}function we(){ke.unsubscribe(),me()}var ke=ue.subscribe({next:function(Be){try{K(Be,we)}catch(We){ve(We),ke.unsubscribe()}},error:ve,complete:me})})}},{key:"map",value:function(K){var ue=this;if(typeof K!="function")throw new TypeError(K+" is not a function");var me=j(this);return new me(function(ve){return ue.subscribe({next:function(we){try{we=K(we)}catch(ke){return ve.error(ke)}ve.next(we)},error:function(we){ve.error(we)},complete:function(){ve.complete()}})})}},{key:"filter",value:function(K){var ue=this;if(typeof K!="function")throw new TypeError(K+" is not a function");var me=j(this);return new me(function(ve){return ue.subscribe({next:function(we){try{if(!K(we))return}catch(ke){return ve.error(ke)}ve.next(we)},error:function(we){ve.error(we)},complete:function(){ve.complete()}})})}},{key:"reduce",value:function(K){var ue=this;if(typeof K!="function")throw new TypeError(K+" is not a function");var me=j(this),ve=arguments.length>1,we=!1,ke=arguments[1],Be=ke;return new me(function(We){return ue.subscribe({next:function(it){var at=!we;if(we=!0,!at||ve)try{Be=K(Be,it)}catch(Nt){return We.error(Nt)}else Be=it},error:function(it){We.error(it)},complete:function(){if(!we&&!ve)return We.error(new TypeError("Cannot reduce an empty sequence"));We.next(Be),We.complete()}})})}},{key:"concat",value:function(){for(var K=this,ue=arguments.length,me=new Array(ue),ve=0;ve<ue;ve++)me[ve]=arguments[ve];var we=j(this);return new we(function(ke){var Be,We=0;function it(at){Be=at.subscribe({next:function(Nt){ke.next(Nt)},error:function(Nt){ke.error(Nt)},complete:function(){We===me.length?(Be=void 0,ke.complete()):it(we.from(me[We++]))}})}return it(K),function(){Be&&(Be.unsubscribe(),Be=void 0)}})}},{key:"flatMap",value:function(K){var ue=this;if(typeof K!="function")throw new TypeError(K+" is not a function");var me=j(this);return new me(function(ve){var we=[],ke=ue.subscribe({next:function(We){if(K)try{We=K(We)}catch(at){return ve.error(at)}var it=me.from(We).subscribe({next:function(at){ve.next(at)},error:function(at){ve.error(at)},complete:function(){var at=we.indexOf(it);at>=0&&we.splice(at,1),Be()}});we.push(it)},error:function(We){ve.error(We)},complete:function(){Be()}});function Be(){ke.closed&&we.length===0&&ve.complete()}return function(){we.forEach(function(We){return We.unsubscribe()}),ke.unsubscribe()}})}},{key:C,value:function(){return this}}],[{key:"from",value:function(K){var ue=typeof this=="function"?this:se;if(K==null)throw new TypeError(K+" is not an object");var me=$(K,C);if(me){var ve=me.call(K);if(Object(ve)!==ve)throw new TypeError(ve+" is not an object");return O(ve)&&ve.constructor===ue?ve:new ue(function(we){return ve.subscribe(we)})}if(I("iterator")&&(me=$(K,N),me))return new ue(function(we){H(function(){if(!we.closed){var ke=!0,Be=!1,We=void 0;try{for(var it=me.call(K)[Symbol.iterator](),at;!(ke=(at=it.next()).done);ke=!0){var Nt=at.value;if(we.next(Nt),we.closed)return}}catch(Tt){Be=!0,We=Tt}finally{try{!ke&&it.return!=null&&it.return()}finally{if(Be)throw We}}we.complete()}})});if(Array.isArray(K))return new ue(function(we){H(function(){if(!we.closed){for(var ke=0;ke<K.length;++ke)if(we.next(K[ke]),we.closed)return;we.complete()}})});throw new TypeError(K+" is not observable")}},{key:"of",value:function(){for(var K=arguments.length,ue=new Array(K),me=0;me<K;me++)ue[me]=arguments[me];var ve=typeof this=="function"?this:se;return new ve(function(we){H(function(){if(!we.closed){for(var ke=0;ke<ue.length;++ke)if(we.next(ue[ke]),we.closed)return;we.complete()}})})}},{key:L,get:function(){return this}}]),se}();Y.Observable=ce,F()&&Object.defineProperty(ce,Symbol("extensions"),{value:{symbol:C,hostReportError:U},configurable:!0})},6591:u=>{"use strict";u.exports=require("applicationinsights-native-metrics")},2357:u=>{"use strict";u.exports=require("assert")},7303:u=>{"use strict";u.exports=require("async_hooks")},3129:u=>{"use strict";u.exports=require("child_process")},7082:u=>{"use strict";u.exports=require("console")},7619:u=>{"use strict";u.exports=require("constants")},6417:u=>{"use strict";u.exports=require("crypto")},881:u=>{"use strict";u.exports=require("dns")},8614:u=>{"use strict";u.exports=require("events")},5747:u=>{"use strict";u.exports=require("fs")},8605:u=>{"use strict";u.exports=require("http")},7211:u=>{"use strict";u.exports=require("https")},2282:u=>{"use strict";u.exports=require("module")},1631:u=>{"use strict";u.exports=require("net")},2087:u=>{"use strict";u.exports=require("os")},5622:u=>{"use strict";u.exports=require("path")},630:u=>{"use strict";u.exports=require("perf_hooks")},2413:u=>{"use strict";u.exports=require("stream")},8213:u=>{"use strict";u.exports=require("timers")},4016:u=>{"use strict";u.exports=require("tls")},3867:u=>{"use strict";u.exports=require("tty")},8835:u=>{"use strict";u.exports=require("url")},1669:u=>{"use strict";u.exports=require("util")},7549:u=>{"use strict";u.exports=require("vscode")},8761:u=>{"use strict";u.exports=require("zlib")}},ad={};function Xe(u){var Y=ad[u];if(Y!==void 0)return Y.exports;var x=ad[u]={id:u,loaded:!1,exports:{}};return Cp[u].call(x.exports,x,x.exports,Xe),x.loaded=!0,x.exports}(()=>{Xe.n=u=>{var Y=u&&u.__esModule?()=>u.default:()=>u;return Xe.d(Y,{a:Y}),Y}})(),(()=>{Xe.d=(u,Y)=>{for(var x in Y)Xe.o(Y,x)&&!Xe.o(u,x)&&Object.defineProperty(u,x,{enumerable:!0,get:Y[x]})}})(),(()=>{Xe.hmd=u=>(u=Object.create(u),u.children||(u.children=[]),Object.defineProperty(u,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+u.id)}}),u)})(),(()=>{Xe.o=(u,Y)=>Object.prototype.hasOwnProperty.call(u,Y)})(),(()=>{Xe.r=u=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}})();var Gu={};(()=>{"use strict";Xe.r(Gu),Xe.d(Gu,{activate:()=>zv,deactivate:()=>Wv});var u=Xe(7549),Y=Xe(8361),x=Xe.n(Y),V=Object.defineProperty,W=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ee;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(ee||(ee={}));const F="githubPullRequests",I="logLevel";class M{constructor(){W(this,"_outputChannel"),W(this,"_logLevel"),W(this,"_disposable"),this._outputChannel=u.window.createOutputChannel("GitHub Pull Request"),this._disposable=u.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,a=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${a}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(u.workspace.getConfiguration(F).get(I)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const C=new M;var L=Xe(5622),$=Xe(7484),j=Xe.n($),O=Xe(4110),U=Xe.n(O),H=Xe(660),G=Xe.n(H),re=Object.defineProperty,ie=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);j().extend(U(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),j().extend(G()),j().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function ye(t,e){const r=Object.create(null);return t.filter(n=>{const i=e(n);return r[i]?!1:(r[i]=!0,!0)})}function J(t){return t.forEach(e=>e.dispose()),[]}function be(t){return{dispose:t}}function ae(t){return be(()=>J(t))}function ce(...t){return(e,r=null,n)=>{const i=ae(t.map(a=>a(o=>e.call(r,o))));return n&&n.push(i),i}}function se(t,e){return(r,n=null,i)=>t(a=>e(a)&&r.call(n,a),null,i)}function ne(t){return(e,r=null,n)=>{const i=t(a=>(i.dispose(),e.call(r,a)),null,n);return i}}function K(t){return/^[a-zA-Z]:\\/.test(t)}function ue(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),K(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function me(t,e){return t.reduce((r,n)=>{const i=e(n);return r[i]=[...r[i]||[],n],r},Object.create(null))}function ve(t){return!!t.errors}function we(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function ke(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:t.stderr?`${t.stderr}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&we(t))r=t.errors.map(n=>`Value "${n.value}" cannot be set for field ${n.field} (code: ${n.code})`).join(", ");else if(ve(t)&&t.errors)return t.errors.map(n=>typeof n=="string"?n:n.message).join(", ");return r&&(e=`${e}: ${r}`),e}const Be=(t,e)=>e(t);async function We(t,e=Be){let r;return new Promise((n,i)=>r=t(a=>{try{Promise.resolve(e(a,n,i)).catch(i)}catch(o){i(o)}})).then(n=>(r.dispose(),n),n=>{throw r.dispose(),n})}function it(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var at;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(at||(at={}));function Nt(t,e){return t<e?-1:t>e?1:0}function Tt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){const E=t.charCodeAt(r),S=e.charCodeAt(i);if(E<S)return-1;if(E>S)return 1}const o=n-r,f=a-i;return o<f?-1:o>f?1:0}function xt(t,e){return Ft(t,e,0,t.length,0,e.length)}function Ft(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){let E=t.charCodeAt(r),S=e.charCodeAt(i);if(E===S)continue;const P=E-S;if(!(P===32&&Er(S))&&!(P===-32&&Er(E)))return ar(E)&&ar(S)?P:Tt(t.toLowerCase(),e.toLowerCase(),r,n,i,a)}const o=n-r,f=a-i;return o<f?-1:o>f?1:0}function ar(t){return t>=97&&t<=122}function Er(t){return t>=65&&t<=90}class rn{constructor(){ie(this,"_value",""),ie(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}class Di{constructor(e=!0){this._caseSensitive=e,ie(this,"_value"),ie(this,"_from"),ie(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Tt(e,this._value,0,e.length,this._from,this._to):Ft(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ls{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,ie(this,"_value"),ie(this,"_from"),ie(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Tt(e,this._value,0,e.length,this._from,this._to):Ft(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var Mi;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(Mi||(Mi={}));class ui{constructor(e){this._ignorePathCasing=e,ie(this,"_pathIterator"),ie(this,"_value"),ie(this,"_states",[]),ie(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ls(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return xt(e,this._value.scheme);if(this._states[this._stateIdx]===2)return xt(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Nt(e,this._value.query);if(this._states[this._stateIdx]===5)return Nt(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Gn{constructor(){ie(this,"segment"),ie(this,"value"),ie(this,"key"),ie(this,"left"),ie(this,"mid"),ie(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class Ut{constructor(e){ie(this,"_iter"),ie(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new Ut(new ui(e))}static forPaths(){return new Ut(new ls)}static forStrings(){return new Ut(new rn)}static forConfigKeys(){return new Ut(new Di)}clear(){this._root=void 0}set(e,r){const n=this._iter.reset(e);let i;for(this._root||(this._root=new Gn,this._root.segment=n.value()),i=this._root;;){const o=n.cmp(i.segment);if(o>0)i.left||(i.left=new Gn,i.left.segment=n.value()),i=i.left;else if(o<0)i.right||(i.right=new Gn,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new Gn,i.mid.segment=n.value()),i=i.mid;else break}const a=i.value;return i.value=r,i.key=e,a}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),i=[];let a=this._root;for(;a;){const o=n.cmp(a.segment);if(o>0)i.push([1,a]),a=a.left;else if(o<0)i.push([-1,a]),a=a.right;else if(n.hasNext())n.next(),i.push([0,a]),a=a.mid;else{for(r?(a.left=void 0,a.mid=void 0,a.right=void 0):a.value=void 0;i.length>0&&a.isEmpty();){let[f,E]=i.pop();switch(f){case 1:E.left=void 0;break;case 0:E.mid=void 0;break;case-1:E.right=void 0;break}a=E}break}}}findSubstr(e){const r=this._iter.reset(e);let n=this._root,i;for(;n;){const a=r.cmp(n.segment);if(a>0)n=n.left;else if(a<0)n=n.right;else if(r.hasNext())r.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var Yr=Object.defineProperty,et=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Yr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Or;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(Or||(Or={}));var kr;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(kr||(kr={}));const Hn=class{constructor(){et(this,"_providers",new Map),et(this,"_onDidOpenRepository",new u.EventEmitter),et(this,"onDidOpenRepository",this._onDidOpenRepository.event),et(this,"_onDidCloseRepository",new u.EventEmitter),et(this,"onDidCloseRepository",this._onDidCloseRepository.event),et(this,"_onDidChangeState",new u.EventEmitter),et(this,"onDidChangeState",this._onDidChangeState.event),et(this,"_onDidPublish",new u.EventEmitter),et(this,"onDidPublish",this._onDidPublish.event),et(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}_updateReposContext(){const t=Array.from(this._providers.values()).reduce((e,r)=>e+r.repositories.length,0);u.commands.executeCommand("setContext","gitHubOpenRepositoryCount",t)}registerGitProvider(t){C.appendLine("Registering git provider");const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>{C.appendLine(`Repository ${r.rootUri} has been opened`),this._updateReposContext(),this._onDidOpenRepository.fire(r)})),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),this._updateReposContext(),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(n=>this._onDidCloseRepository.fire(n)),this._providers.delete(e)}}}getGitProvider(t){const e=Ut.forUris();return this._providers.forEach(r=>{const n=r.repositories;if(n&&n.length>0)for(const i of n)e.set(i.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return Hn._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let li=Hn;et(li,"_handlePool",0);const ci=new Map;function Dr(t,e){ci.set(t,e)}function ho(t){ci.delete(t)}function En(t){for(const e of ci.values())if(e.hasCommentThread(t))return e;C.appendLine(`Unable to find handler for comment thread ${t.gitHubThreadId}`)}var po=Object.defineProperty,mo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?po(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);let Mr;class cs extends u.Disposable{constructor(e){super(()=>this.disposables.forEach(r=>r.dispose()));this._storageUri=e,mo(this,"SUBPATH","temp"),mo(this,"disposables",[])}get path(){return u.Uri.joinPath(this._storageUri,this.SUBPATH)}addDisposable(e){if(this.disposables.length>30){const r=this.disposables.shift();r==null||r.dispose()}this.disposables.push(e)}async writeState(e,r,n){let i=this.path;const a=u.workspace.workspaceFolders&&u.workspace.workspaceFolders.length>0?u.workspace.workspaceFolders[0].name:void 0;a&&(i=u.Uri.joinPath(i,a)),e&&(i=u.Uri.joinPath(i,e)),await u.workspace.fs.createDirectory(i);const o=u.Uri.joinPath(i,r);await u.workspace.fs.writeFile(o,n);const f={dispose:()=>u.workspace.fs.delete(o,{recursive:!0})};return this.addDisposable(f),o}static async init(e){if(e.globalStorageUri&&!Mr){Mr=new cs(e.globalStorageUri);try{await u.workspace.fs.delete(Mr.path,{recursive:!0})}catch(r){C.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}try{await u.workspace.fs.createDirectory(Mr.path)}catch(r){C.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}return e.subscriptions.push(Mr),Mr}}static async write(e,r,n){if(!!Mr)return Mr.writeState(e,r,n)}}function di(t){return JSON.parse(t)}function Zt(t){try{return JSON.parse(t.query)}catch(e){}}function Hu(t){try{return JSON.parse(t.query)}catch(e){}}const Bu=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],fo=u.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function Zs(t,e){try{const{commit:r,baseCommit:n,headCommit:i,isBase:a,path:o}=JSON.parse(t.query),f=t.scheme==="review"?r:a?n:i,{object:E}=await e.getObjectDetails(f,t.fsPath),{mimetype:S}=await e.detectObjectType(E);if(S==="text/plain")return;if(Bu.indexOf(S)>-1){const P=await e.buffer(f,t.fsPath);return cs.write(L.dirname(o),L.basename(o),P)}}catch(r){return}}function Xr(t,e,r,n,i,a,o){const f={path:e||t.path,ref:r,commit:n,base:a.base,isOutdated:i,rootPath:o.path};let E=t.path;return a.replaceFileExtension&&(E=`${E}.git`),t.with({scheme:"review",path:E,query:JSON.stringify(f)})}function _t(t,e,r,n){const i={prNumber:e,fileName:r,status:n};return t.with({scheme:"filechange",query:JSON.stringify(i)})}function xi(t){try{return t.query?JSON.parse(t.query):void 0}catch(e){}}function Bn(t,e,r,n,i,a,o){const f={baseCommit:r,headCommit:n,isBase:a,fileName:i,prNumber:e.number,status:o,remoteName:e.githubRepository.remote.remoteName},E=t.path;return t.with({scheme:"pr",path:E,query:JSON.stringify(f)})}var ds;(function(t){t.file="file"})(ds||(ds={}));function Vn(t,e){return t.scheme===ds.file?L.resolve(t.fsPath,e):L.posix.resolve(t.path,e)}class Vu extends u.EventEmitter{handleUri(e){this.fire(e)}}const go=new Vu,kn="GitHub.vscode-pull-request-github",hs="git",ea="ghpr",vo="initialize",yo="statechange",hi="github:focusedReview",bo=require("buffer");var ta=Xe(4063),ju=Xe.n(ta),Rt;(function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"})(Rt||(Rt={}));var Sr;(function(t){t.DISMISSED="DISMISSED",t.VIEWED="VIEWED",t.UNVIEWED="UNVIEWED"})(Sr||(Sr={}));var Je;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(Je||(Je={}));class pi{constructor(e,r,n,i,a,o,f,E){this.baseCommit=e,this.status=r,this.fileName=n,this.previousFileName=i,this.patch=a,this.diffHunks=o,this.isPartial=f,this.blobUrl=E}}class _o{constructor(e,r,n,i,a){this.baseCommit=e,this.blobUrl=r,this.status=n,this.fileName=i,this.previousFileName=a}}var zu=Object.defineProperty,Qu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),pr;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(pr||(pr={}));class wo{constructor(e,r,n,i,a,o=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=n,this.positionInHunk=i,this._raw=a,this.endwithLineBreak=o}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function Wu(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class Ku{constructor(e,r,n,i,a){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=n,this.newLength=i,this.positionInHunk=a,Qu(this,"diffLines",[])}}const Eo=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function Yu(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*ko(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(r,i)}}function*Fi(t){const e=ko(t);let r=e.next(),n,i=-1,a=-1,o=-1;for(;!r.done;){const f=r.value;if(Eo.test(f)){n&&(yield n,n=void 0),i===-1&&(i=0);const E=Eo.exec(f),S=a=Number(E[1]),P=Number(E[3])||1,q=o=Number(E[5]),z=Number(E[7])||1;n=new Ku(S,P,q,z,i),n.diffLines.push(new wo(3,-1,-1,i,f))}else if(n){const E=Wu(f);if(E===3)n.diffLines&&n.diffLines.length&&(n.diffLines[n.diffLines.length-1].endwithLineBreak=!1);else{n.diffLines.push(new wo(E,E!==1?a:-1,E!==2?o:-1,i,f));const S=1+Yu(f);switch(E){case 0:a+=S,o+=S;break;case 2:a+=S;break;case 1:o+=S;break}}}i!==-1&&++i,r=e.next()}n&&(yield n)}function ra(t){const e=Fi(t);let r=e.next();const n=[],i=[];for(;!r.done;){const a=r.value;n.push(a);for(let o=0;o<a.diffLines.length;o++){const f=a.diffLines[o];if(!(f.type===2||f.type===3))if(f.type===1)i.push(f.text);else{const E=f.text;i.push(E)}}r=e.next()}return n}function Xu(t,e){const r=t.split(/\r?\n/),n=Fi(e);let i=n.next();const a=[],o=[];let f=0;for(;!i.done;){const E=i.value;a.push(E);const S=E.oldLineNumber;for(let P=f+1;P<S;P++)o.push(r[P-1]);f=S+E.oldLength-1;for(let P=0;P<E.diffLines.length;P++){const q=E.diffLines[P];if(!(q.type===2||q.type===3))if(q.type===1)o.push(q.text);else{const z=q.text;o.push(z)}}i=n.next()}if(f<r.length)for(let E=f+1;E<=r.length;E++)o.push(r[E-1]);return o.join(`
`)}function ps(t){switch(t){case"removed":return Je.DELETE;case"added":return Je.ADD;case"renamed":return Je.RENAME;case"modified":return Je.MODIFY;default:return Je.UNKNOWN}}async function ms(t,e,r){const n=[];for(let i=0;i<t.length;i++){const a=t[i],o=ps(a.status);if(!a.patch){n.push(new _o(r,a.blob_url,o,a.filename,a.previous_filename));continue}let f=!1;switch(o){case Je.DELETE:case Je.MODIFY:try{await e.getObjectDetails(r,a.filename),f=!0}catch(P){}break;case Je.RENAME:try{await e.getObjectDetails(r,a.previous_filename),f=!0}catch(P){}break}const E=ra(a.patch),S=!f&&o!==Je.ADD;n.push(new pi(r,o,a.filename,a.previous_filename,a.patch,E,S,a.blob_url))}return n}var Ju=Xe(5747),Zu=Xe(2087),el=Xe(6200),tl=Object.defineProperty,xr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?tl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rl=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,So=/^([a-z-]+):\/\//,na=t=>{const e=So.exec(t);if(e){const[o,f]=e;if(f==="ssh")t=t.slice(o.length);else return}const r=rl.exec(t);if(!r)return;const[,n,i,a]=r;return{User:n,Host:i,path:a}},od=(t,e=aa.current)=>{const r=na(t);return r&&e(r)};function fs(t){return{...t,Hostname:t.Host}}function ia(...t){const e=t.filter(r=>!!r);return r=>e.reduce((n,i)=>({...n,...i(n)}),r)}function sa(t){const e=(0,el.parse)(t);return r=>e.compute(r.Host)}const To=class{static fromConfig(t){return ia(fs,sa(t))}};let aa=To;xr(aa,"default",fs),xr(aa,"current",To.default);var nl=Object.defineProperty,Ro=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const oa=class{static fromConfig(t){return ia(fs,sa(t))}};let gs=oa;Ro(gs,"default",ia(fs,sl())),Ro(gs,"current",oa.default);const il=(t,e=gs.current)=>{const r=na(t);return r&&e(r)};function sl(t=(0,L.join)((0,Zu.homedir)(),".ssh","config")){try{const e=(0,Ju.readFileSync)(t).toString();return sa(e)}catch(e){C.appendLine(`${t}: ${e.message}`)}}var ua=Object.defineProperty,Li=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ua(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),la;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(la||(la={}));class Sn{constructor(e){if(Li(this,"type",4),Li(this,"host",""),Li(this,"owner",""),Li(this,"repositoryName",""),Li(this,"url"),!this.parseSshProtocol(e))try{this.url=u.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){C.appendLine(`Failed to parse '${e}'`),u.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=il(e);if(!r)return!1;const{Hostname:n,HostName:i,path:a}=r;return this.host=i||n,this.owner=this.getOwnerName(a)||"",this.repositoryName=this.getRepositoryName(a)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.lastIndexOf("/"),i=r.substr(n+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.split("/");if(n.length>1)return n[n.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return u.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const n=e.normalizeUri();return n?r.toString().toLocaleLowerCase()===n.toString().toLocaleLowerCase():!1}}var al=Object.defineProperty,ol=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?al(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Co{constructor(e,r,n,i){this.ref=e,this.label=r,this.sha=n,ol(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new Sn(i)}}var $t;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})($t||($t={}));function ca(t){return t.event===4}function ul(t){return t.event===0}function ll(t){return t.event===3}function ud(t){return t.event===9}function ld(t){return t.event===7}function cd(t){return t.event===8}function cl(t){return!!t.conclusion}var Wt;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(Wt||(Wt={}));var nn;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(nn||(nn={}));var At;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(At||(At={}));var Tn;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(Tn||(Tn={}));var da=Xe(6417),dl=Xe.n(da),hl=Object.defineProperty,pl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Po=class{static initialize(t){Po.icons={reactions:{THUMBS_UP:t.asAbsolutePath(L.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(L.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(L.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(L.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(L.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(L.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(L.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(L.join("resources","icons","reactions","rocket.png"))}}}};let Jr=Po;pl(Jr,"icons");function vs(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var ml=Xe(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function No(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ao(t){var e,r;return No(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(No(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function fl(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function ys(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{Ao(e[n])?n in t?r[n]=ys(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function mi(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function mr(t,e,r){if(typeof e=="string"){let[i,a]=e.split(" ");r=Object.assign(a?{method:i,url:a}:{url:i},r)}else r=Object.assign({},e);r.headers=fl(r.headers),mi(r),mi(r.headers);const n=ys(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function fi(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const bs=/\{[^}]+\}/g;function Io(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Rn(t){const e=t.match(bs);return e?e.map(Io).reduce((r,n)=>r.concat(n),[]):[]}function Oo(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}function ha(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function gi(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function qi(t,e,r){return e=t==="+"||t==="#"?ha(e):gi(e),r?gi(r)+"="+e:e}function jn(t){return t!=null}function pa(t){return t===";"||t==="&"||t==="?"}function gl(t,e,r,n){var i=t[r],a=[];if(jn(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),a.push(qi(e,i,pa(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(jn).forEach(function(o){a.push(qi(e,o,pa(e)?r:""))}):Object.keys(i).forEach(function(o){jn(i[o])&&a.push(qi(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(jn).forEach(function(f){o.push(qi(e,f))}):Object.keys(i).forEach(function(f){jn(i[f])&&(o.push(gi(f)),o.push(qi(e,i[f].toString())))}),pa(e)?a.push(gi(r)+"="+o.join(",")):o.length!==0&&a.push(o.join(","))}else e===";"?jn(i)&&a.push(gi(r)):i===""&&(e==="&"||e==="?")?a.push(gi(r)+"="):i===""&&a.push("");return a}function Do(t){return{expand:vl.bind(null,t)}}function vl(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,a){if(i){let f="";const E=[];if(r.indexOf(i.charAt(0))!==-1&&(f=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(S){var P=/([^:\*]*)(?::(\d+)|(\*))?/.exec(S);E.push(gl(e,f,P[1],P[2]||P[3]))}),f&&f!=="+"){var o=",";return f==="?"?o="&":f!=="#"&&(o=f),(E.length!==0?f:"")+E.join(o)}else return E.join(",")}else return ha(a)})}function Mo(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,a=Oo(t,["method","baseUrl","url","headers","request","mediaType"]);const o=Rn(r);r=Do(r).expand(a),/^http/.test(r)||(r=t.baseUrl+r);const f=Object.keys(t).filter(P=>o.includes(P)).concat("baseUrl"),E=Oo(a,f);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(P=>P.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const P=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=P.concat(t.mediaType.previews).map(q=>{const z=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${q}-preview${z}`}).join(",")}return["GET","HEAD"].includes(e)?r=fi(r,E):"data"in E?i=E.data:Object.keys(E).length?i=E:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function yl(t,e,r){return Mo(mr(t,e,r))}function xo(t,e){const r=mr(t,e),n=yl.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:xo.bind(null,r),merge:mr.bind(null,r),parse:Mo})}const bl=`octokit-endpoint.js/6.0.11 ${vs()}`,_l=xo(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":bl},mediaType:{format:"",previews:[]}});var ft=Xe(2413),Cn=Xe(8605),vi=Xe(8835),_s=Xe(7211),Tr=Xe(8761);const wl=ft.Readable,sn=Symbol("buffer"),ma=Symbol("type");class yi{constructor(){this[ma]="";const e=arguments[0],r=arguments[1],n=[];let i=0;if(e){const o=e,f=Number(o.length);for(let E=0;E<f;E++){const S=o[E];let P;S instanceof Buffer?P=S:ArrayBuffer.isView(S)?P=Buffer.from(S.buffer,S.byteOffset,S.byteLength):S instanceof ArrayBuffer?P=Buffer.from(S):S instanceof yi?P=S[sn]:P=Buffer.from(typeof S=="string"?S:String(S)),i+=P.length,n.push(P)}}this[sn]=Buffer.concat(n);let a=r&&r.type!==void 0&&String(r.type).toLowerCase();a&&!/[^\u0020-\u007E]/.test(a)&&(this[ma]=a)}get size(){return this[sn].length}get type(){return this[ma]}text(){return Promise.resolve(this[sn].toString())}arrayBuffer(){const e=this[sn],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new wl;return e._read=function(){},e.push(this[sn]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let i,a;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?a=e:n<0?a=Math.max(e+n,0):a=Math.min(n,e);const o=Math.max(a-i,0),E=this[sn].slice(i,i+o),S=new yi([],{type:arguments[2]});return S[sn]=E,S}}Object.defineProperties(yi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(yi.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function or(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}or.prototype=Object.create(Error.prototype),or.prototype.constructor=or,or.prototype.name="FetchError";let fa;try{fa=require("encoding").convert}catch(t){}const an=Symbol("Body internals"),Fo=ft.PassThrough;function Kt(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var a=r.timeout;let o=a===void 0?0:a;t==null?t=null:Lo(t)?t=Buffer.from(t.toString()):Ui(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ft||(t=Buffer.from(String(t)))),this[an]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof ft&&t.on("error",function(f){const E=f.name==="AbortError"?f:new or(`Invalid response body while trying to fetch ${e.url}: ${f.message}`,"system",f);e[an].error=E})}Kt.prototype={get body(){return this[an].body},get bodyUsed(){return this[an].disturbed},arrayBuffer(){return bi.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return bi.call(this).then(function(e){return Object.assign(new yi([],{type:t.toLowerCase()}),{[sn]:e})})},json(){var t=this;return bi.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return Kt.Promise.reject(new or(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return bi.call(this).then(function(t){return t.toString()})},buffer(){return bi.call(this)},textConverted(){var t=this;return bi.call(this).then(function(e){return El(e,t.headers)})}},Object.defineProperties(Kt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),Kt.mixIn=function(t){for(const e of Object.getOwnPropertyNames(Kt.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(Kt.prototype,e);Object.defineProperty(t,e,r)}};function bi(){var t=this;if(this[an].disturbed)return Kt.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[an].disturbed=!0,this[an].error)return Kt.Promise.reject(this[an].error);let e=this.body;if(e===null)return Kt.Promise.resolve(Buffer.alloc(0));if(Ui(e)&&(e=e.stream()),Buffer.isBuffer(e))return Kt.Promise.resolve(e);if(!(e instanceof ft))return Kt.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new Kt.Promise(function(a,o){let f;t.timeout&&(f=setTimeout(function(){i=!0,o(new or(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(E){E.name==="AbortError"?(i=!0,o(E)):o(new or(`Invalid response body while trying to fetch ${t.url}: ${E.message}`,"system",E))}),e.on("data",function(E){if(!(i||E===null)){if(t.size&&n+E.length>t.size){i=!0,o(new or(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=E.length,r.push(E)}}),e.on("end",function(){if(!i){clearTimeout(f);try{a(Buffer.concat(r,n))}catch(E){o(new or(`Could not create Buffer from response body for ${t.url}: ${E.message}`,"system",E))}}})})}function El(t,e){if(typeof fa!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",i,a;return r&&(i=/charset=([^;]*)/i.exec(r)),a=t.slice(0,1024).toString(),!i&&a&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(a)),!i&&a&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(a),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&a&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),fa(t,"UTF-8",n).toString()}function Lo(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function Ui(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function qo(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof ft&&typeof n.getBoundary!="function"&&(e=new Fo,r=new Fo,n.pipe(e),n.pipe(r),t[an].body=e,n=r),n}function Uo(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Lo(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ui(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof ft?null:"text/plain;charset=UTF-8"}function $o(t){const e=t.body;return e===null?0:Ui(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function kl(t,e){const r=e.body;r===null?t.end():Ui(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}Kt.Promise=global.Promise;const Go=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,ga=/[^\t\x20-\x7e\x80-\xff]/;function $i(t){if(t=`${t}`,Go.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function Ho(t){if(t=`${t}`,ga.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function Bt(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const Lt=Symbol("map");class Fr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Lt]=Object.create(null),e instanceof Fr){const r=e.raw(),n=Object.keys(r);for(const i of n)for(const a of r[i])this.append(i,a);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(e)){const i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,$i(e);const r=Bt(this[Lt],e);return r===void 0?null:this[Lt][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=Gi(this),i=0;for(;i<n.length;){var a=n[i];const o=a[0],f=a[1];e.call(r,f,o,this),n=Gi(this),i++}}set(e,r){e=`${e}`,r=`${r}`,$i(e),Ho(r);const n=Bt(this[Lt],e);this[Lt][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,$i(e),Ho(r);const n=Bt(this[Lt],e);n!==void 0?this[Lt][n].push(r):this[Lt][e]=[r]}has(e){return e=`${e}`,$i(e),Bt(this[Lt],e)!==void 0}delete(e){e=`${e}`,$i(e);const r=Bt(this[Lt],e);r!==void 0&&delete this[Lt][r]}raw(){return this[Lt]}keys(){return va(this,"key")}values(){return va(this,"value")}[Symbol.iterator](){return va(this,"key+value")}}Fr.prototype.entries=Fr.prototype[Symbol.iterator],Object.defineProperty(Fr.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Fr.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function Gi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[Lt]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[Lt][n].join(", ")}:function(n){return[n.toLowerCase(),t[Lt][n].join(", ")]})}const Hi=Symbol("internal");function va(t,e){const r=Object.create(ya);return r[Hi]={target:t,kind:e,index:0},r}const ya=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==ya)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[Hi];const e=t.target,r=t.kind,n=t.index,i=Gi(e,r),a=i.length;return n>=a?{value:void 0,done:!0}:(this[Hi].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(ya,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Sl(t){const e=Object.assign({__proto__:null},t[Lt]),r=Bt(t[Lt],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Tl(t){const e=new Fr;for(const r of Object.keys(t))if(!Go.test(r))if(Array.isArray(t[r]))for(const n of t[r])ga.test(n)||(e[Lt][r]===void 0?e[Lt][r]=[n]:e[Lt][r].push(n));else ga.test(t[r])||(e[Lt][r]=[t[r]]);return e}const on=Symbol("Response internals"),Rl=Cn.STATUS_CODES;class Br{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kt.call(this,e,r);const n=r.status||200,i=new Fr(r.headers);if(e!=null&&!i.has("Content-Type")){const a=Uo(e);a&&i.append("Content-Type",a)}this[on]={url:r.url,status:n,statusText:r.statusText||Rl[n],headers:i,counter:r.counter}}get url(){return this[on].url||""}get status(){return this[on].status}get ok(){return this[on].status>=200&&this[on].status<300}get redirected(){return this[on].counter>0}get statusText(){return this[on].statusText}get headers(){return this[on].headers}clone(){return new Br(qo(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Kt.mixIn(Br.prototype),Object.defineProperties(Br.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Br.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const un=Symbol("Request internals"),ba=vi.parse,Bo=vi.format,Cl="destroy"in ft.Readable.prototype;function ws(t){return typeof t=="object"&&typeof t[un]=="object"}function Pl(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class zn{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;ws(e)?n=ba(e.url):(e&&e.href?n=ba(e.href):n=ba(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||ws(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body!=null?r.body:ws(e)&&e.body!==null?qo(e):null;Kt.call(this,a,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new Fr(r.headers||e.headers||{});if(a!=null&&!o.has("Content-Type")){const E=Uo(a);E&&o.append("Content-Type",E)}let f=ws(e)?e.signal:null;if("signal"in r&&(f=r.signal),f!=null&&!Pl(f))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[un]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:f},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[un].method}get url(){return Bo(this[un].parsedURL)}get headers(){return this[un].headers}get redirect(){return this[un].redirect}get signal(){return this[un].signal}clone(){return new zn(this)}}Kt.mixIn(zn.prototype),Object.defineProperty(zn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(zn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Nl(t){const e=t[un].parsedURL,r=new Fr(t[un].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof ft.Readable&&!Cl)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const a=$o(t);typeof a=="number"&&(n=String(a))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:Sl(r),agent:i})}function Bi(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}Bi.prototype=Object.create(Error.prototype),Bi.prototype.constructor=Bi,Bi.prototype.name="AbortError";const Vo=ft.PassThrough,_i=vi.resolve;function Pn(t,e){if(!Pn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Kt.Promise=Pn.Promise,new Pn.Promise(function(r,n){const i=new zn(t,e),a=Nl(i),o=(a.protocol==="https:"?_s:Cn).request,f=i.signal;let E=null;const S=function(){let fe=new Bi("The user aborted a request.");n(fe),i.body&&i.body instanceof ft.Readable&&i.body.destroy(fe),!(!E||!E.body)&&E.body.emit("error",fe)};if(f&&f.aborted){S();return}const P=function(){S(),le()},q=o(a);let z;f&&f.addEventListener("abort",P);function le(){q.abort(),f&&f.removeEventListener("abort",P),clearTimeout(z)}i.timeout&&q.once("socket",function(he){z=setTimeout(function(){n(new or(`network timeout at: ${i.url}`,"request-timeout")),le()},i.timeout)}),q.on("error",function(he){n(new or(`request to ${i.url} failed, reason: ${he.message}`,"system",he)),le()}),q.on("response",function(he){clearTimeout(z);const fe=Tl(he.headers);if(Pn.isRedirect(he.statusCode)){const Ae=fe.get("Location"),Ge=Ae===null?null:_i(i.url,Ae);switch(i.redirect){case"error":n(new or(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),le();return;case"manual":if(Ge!==null)try{fe.set("Location",Ge)}catch(Et){n(Et)}break;case"follow":if(Ge===null)break;if(i.counter>=i.follow){n(new or(`maximum redirect reached at: ${i.url}`,"max-redirect")),le();return}const mt={headers:new Fr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(he.statusCode!==303&&i.body&&$o(i)===null){n(new or("Cannot follow redirect with body being a readable stream","unsupported-redirect")),le();return}(he.statusCode===303||(he.statusCode===301||he.statusCode===302)&&i.method==="POST")&&(mt.method="GET",mt.body=void 0,mt.headers.delete("content-length")),r(Pn(new zn(Ge,mt))),le();return}}he.once("end",function(){f&&f.removeEventListener("abort",P)});let Pe=he.pipe(new Vo);const Ce={url:i.url,status:he.statusCode,statusText:he.statusMessage,headers:fe,size:i.size,timeout:i.timeout,counter:i.counter},Oe=fe.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Oe===null||he.statusCode===204||he.statusCode===304){E=new Br(Pe,Ce),r(E);return}const Me={flush:Tr.Z_SYNC_FLUSH,finishFlush:Tr.Z_SYNC_FLUSH};if(Oe=="gzip"||Oe=="x-gzip"){Pe=Pe.pipe(Tr.createGunzip(Me)),E=new Br(Pe,Ce),r(E);return}if(Oe=="deflate"||Oe=="x-deflate"){he.pipe(new Vo).once("data",function(Ge){(Ge[0]&15)==8?Pe=Pe.pipe(Tr.createInflate()):Pe=Pe.pipe(Tr.createInflateRaw()),E=new Br(Pe,Ce),r(E)});return}if(Oe=="br"&&typeof Tr.createBrotliDecompress=="function"){Pe=Pe.pipe(Tr.createBrotliDecompress()),E=new Br(Pe,Ce),r(E);return}E=new Br(Pe,Ce),r(E)}),kl(q,i)})}Pn.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},Pn.Promise=global.Promise;const Al=Pn;class Il extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Ol=Xe(778),Dl=Xe.n(Ol);const Nn=Dl()(t=>console.warn(t));class Qn extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return Nn(new Il("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const Ml="5.4.14";function xl(t){return t.arrayBuffer()}function _a(t){(Ao(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,n;return(t.request&&t.request.fetch||Al)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(a=>{n=a.url,r=a.status;for(const f of a.headers)e[f[0]]=f[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new Qn(a.statusText,r,{headers:e,request:t})}if(r===304)throw new Qn("Not modified",r,{headers:e,request:t});if(r>=400)return a.text().then(f=>{const E=new Qn(f,r,{headers:e,request:t});try{let S=JSON.parse(E.message);Object.assign(E,S);let P=S.errors;E.message=E.message+": "+P.map(JSON.stringify).join(", ")}catch(S){}throw E});const o=a.headers.get("content-type");return/application\/json/.test(o)?a.json():!o||/^text\/|charset=utf-8$/.test(o)?a.text():xl(a)}).then(a=>({status:r,url:n,headers:e,data:a})).catch(a=>{throw a instanceof Qn?a:new Qn(a.message,500,{headers:e,request:t})})}function wi(t,e){const r=t.defaults(e);return Object.assign(function(i,a){const o=r.merge(i,a);if(!o.request||!o.request.hook)return _a(r.parse(o));const f=(E,S)=>_a(r.parse(r.merge(E,S)));return Object.assign(f,{endpoint:r,defaults:wi.bind(null,r)}),o.request.hook(f,o)},{endpoint:r,defaults:wi.bind(null,r)})}const Es=wi(_l,{headers:{"user-agent":`octokit-request.js/${Ml} ${vs()}`}}),Fl="4.6.1";class Ll extends Error{constructor(e,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const ql=["method","baseUrl","url","headers","request","query","mediaType"],Ul=["query","method","url"],jo=/\/api\/v3\/?$/;function $l(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in r)if(!!Ul.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((o,f)=>ql.includes(f)?(o[f]=n[f],o):(o.variables||(o.variables={}),o.variables[f]=n[f],o),{}),a=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return jo.test(a)&&(i.url=a.replace(jo,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const f={};for(const E of Object.keys(o.headers))f[E]=o.headers[E];throw new Ll(i,{headers:f,data:o.data})}return o.data.data})}function Wn(t,e){const r=t.defaults(e);return Object.assign((i,a)=>$l(r,i,a),{defaults:Wn.bind(null,r),endpoint:Es.endpoint})}const pd=Wn(Es,{headers:{"user-agent":`octokit-graphql.js/${Fl} ${vs()}`},method:"POST",url:"/graphql"});function zo(t){return Wn(t,{method:"POST",url:"/graphql"})}async function Gl(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function Hl(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function Bl(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=Hl(t),e(i)}const Vl=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Gl.bind(null,e),{hook:Bl.bind(null,e)})},Qo="3.3.1";class ks{constructor(e={}){const r=new ml.Collection,n={baseUrl:Es.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${Qo} ${vs()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=Es.defaults(n),this.graphql=zo(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:a,...o}=e,f=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",f.hook),this.auth=f}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const a=Vl(e.auth);r.wrap("request",a.hook),this.auth=a}this.constructor.plugins.forEach(a=>{Object.assign(this,a(this,e))})}static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(e.filter(a=>!n.includes(a))),r}}ks.VERSION=Qo,ks.plugins=[];const jl="1.0.3";function Wo(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),a=i.url.replace(r.baseUrl,"");return e(r).then(o=>(t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o)).catch(o=>{throw t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o})})}Wo.VERSION=jl;const zl="2.13.2";function Ql(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const a=Object.keys(t.data)[0],o=t.data[a];return t.data=o,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof n!="undefined"&&(t.data.repository_selection=n),t.data.total_count=i,t}function wa(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,a=n.method,o=n.headers;let f=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!f)return{done:!0};const E=await i({method:a,url:f,headers:o}),S=Ql(E);return f=((S.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:S}}})}}function Ko(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),Yo(t,[],wa(t,e,r)[Symbol.asyncIterator](),n)}function Yo(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let a=!1;function o(){a=!0}return e=e.concat(n?n(i.value,o):i.value.data),a?e:Yo(t,e,r,n)})}const md=Object.assign(Ko,{iterator:wa}),Wl=null;function fd(t){return typeof t=="string"?Wl.includes(t):!1}function Xo(t){return{paginate:Object.assign(Ko.bind(null,t),{iterator:wa.bind(null,t)})}}Xo.VERSION=zl;const Kl={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},Yl="4.12.0";function Jo(t,e){const r={};for(const[n,i]of Object.entries(e))for(const[a,o]of Object.entries(i)){const[f,E,S]=o,[P,q]=f.split(/ /),z=Object.assign({method:P,url:q},E);r[n]||(r[n]={});const le=r[n];if(S){le[a]=Vi(t,n,a,z,S);continue}le[a]=t.request.defaults(z)}return r}function Vi(t,e,r,n,i){const a=t.request.defaults(n);function o(...f){let E=a.endpoint.merge(...f);if(i.mapToData)return E=Object.assign({},E,{data:E[i.mapToData],[i.mapToData]:void 0}),a(E);if(i.renamed){const[S,P]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${S}.${P}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const S=a.endpoint.merge(...f);for(const[P,q]of Object.entries(i.renamedParameters))P in S&&(t.log.warn(`"${P}" parameter is deprecated for "octokit.${e}.${r}()". Use "${q}" instead`),q in S||(S[q]=S[P]),delete S[P]);return a(S)}return a(...f)}return Object.assign(o,a)}function ji(t){return Jo(t,Kl)}ji.VERSION=Yl;const It="18.2.0",Ea=ks.plugin(Wo,ji,Xo).defaults({userAgent:`octokit-rest.js/${It}`});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zi=function(t,e){return zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},zi(t,e)};function ln(t,e){zi(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var De=function(){return De=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},De.apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function T(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function d(t,e){return function(r,n){e(r,n,t)}}function v(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function f(P){try{S(n.next(P))}catch(q){o(q)}}function E(P){try{S(n.throw(P))}catch(q){o(q)}}function S(P){P.done?a(P.value):i(P.value).then(f,E)}S((n=n.apply(t,e||[])).next())})}function c(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(S){return function(P){return E([S,P])}}function E(S){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=S[0]&2?i.return:S[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,S[1])).done)return a;switch(i=0,a&&(S=[S[0]&2,a.value]),S[0]){case 0:case 1:a=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,i=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!a||S[1]>a[0]&&S[1]<a[3])){r.label=S[1];break}if(S[0]===6&&r.label<a[1]){r.label=a[1],a=S;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(S);break}a[2]&&r.ops.pop(),r.trys.pop();continue}S=e.call(t,r)}catch(P){S=[6,P],i=0}finally{n=a=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function l(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function h(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function p(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){o={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function m(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,f=a.length;o<f;o++,i++)n[i]=a[o];return n}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function w(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(z){n[z]&&(i[z]=function(le){return new Promise(function(he,fe){a.push([z,le,he,fe])>1||f(z,le)})})}function f(z,le){try{E(n[z](le))}catch(he){q(a[0][3],he)}}function E(z){z.value instanceof b?Promise.resolve(z.value.v).then(S,P):q(a[0][2],z)}function S(z){f("next",z)}function P(z){f("throw",z)}function q(z,le){z(le),a.shift(),a.length&&f(a[0][0],a[0][1])}}function k(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:b(t[i](o)),done:i==="return"}:a?a(o):o}:a}}function R(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof p=="function"?p(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(f,E){o=t[a](o),i(f,E,o.done,o.value)})}}function i(a,o,f,E){Promise.resolve(E).then(function(S){a({value:S,done:f})},o)}}function A(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function D(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function B(t){return t&&t.__esModule?t:{default:t}}function X(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Q(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var oe=Xe(285),ge="Invariant Violation",Se=Object.setPrototypeOf,Te=Se===void 0?function(t,e){return t.__proto__=e,t}:Se,Ne=function(t){ln(e,t);function e(r){r===void 0&&(r=ge);var n=t.call(this,typeof r=="number"?ge+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=ge,Te(n,e.prototype),n}return e}(Error);function Re(t,e){if(!t)throw new Ne(e)}function Ue(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=Ue("warn"),t.error=Ue("error")})(Re||(Re={}));var ze={env:{}};if(typeof process=="object")ze=process;else try{Function("stub","process = stub")(ze)}catch(t){}var ot=null;const tt=null;var qt=Xe(5035),ct=Xe.n(qt),Ie=Object.prototype,qe=Ie.toString,Le=Ie.hasOwnProperty,je=new Map;function Ke(t,e){try{return ut(t,e)}finally{je.clear()}}function ut(t,e){if(t===e)return!0;var r=qe.call(t),n=qe.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(Qe(t,e))return!0;var i=Object.keys(t),a=Object.keys(e),o=i.length;if(o!==a.length)return!1;for(var f=0;f<o;++f)if(!Le.call(e,i[f]))return!1;for(var f=0;f<o;++f){var E=i[f];if(!ut(t[E],e[E]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(Qe(t,e))return!0;for(var S=t.entries(),P=r==="[object Map]";;){var q=S.next();if(q.done)break;var z=q.value,le=z[0],he=z[1];if(!e.has(le)||P&&!ut(he,e.get(le)))return!1}return!0}}return!1}function Qe(t,e){var r=je.get(t);if(r){if(r.has(e))return!0}else je.set(t,r=new Set);return r.add(e),!1}const kt=null;function Yt(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function Gt(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function Ot(t){return t.kind==="StringValue"}function wt(t){return t.kind==="BooleanValue"}function er(t){return t.kind==="IntValue"}function Rr(t){return t.kind==="FloatValue"}function Ze(t){return t.kind==="Variable"}function Ye(t){return t.kind==="ObjectValue"}function vt(t){return t.kind==="ListValue"}function tr(t){return t.kind==="EnumValue"}function ka(t){return t.kind==="NullValue"}function An(t,e,r,n){if(er(r)||Rr(r))t[e.value]=Number(r.value);else if(wt(r)||Ot(r))t[e.value]=r.value;else if(Ye(r)){var i={};r.fields.map(function(o){return An(i,o.name,o.value,n)}),t[e.value]=i}else if(Ze(r)){var a=(n||{})[r.name.value];t[e.value]=a}else if(vt(r))t[e.value]=r.values.map(function(o){var f={};return An(f,e,o,n),f[e.value]});else if(tr(r))t[e.value]=r.value;else if(ka(r))t[e.value]=null;else throw new Ne(17)}function lt(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(a){var o=a.name,f=a.value;return An(r[i.name.value],o,f,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var a=i.name,o=i.value;return An(n,a,o,e)})),Ss(t.name.value,n,r)}var Sa=["connection","include","skip","client","rest","export"];function Ss(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,a={};return n.forEach(function(E){a[E]=i[E]}),r.connection.key+"("+JSON.stringify(a)+")"}else return r.connection.key;var o=t;if(e){var f=ct()(e);o+="("+f+")"}return r&&Object.keys(r).forEach(function(E){Sa.indexOf(E)===-1&&(r[E]&&Object.keys(r[E]).length?o+="@"+E+"("+JSON.stringify(r[E])+")":o+="@"+E)}),o}function cn(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,a=n.value;return An(r,i,a,e)}),r}return null}function fr(t){return t.alias?t.alias.value:t.name.value}function Cr(t){return t.kind==="Field"}function gr(t){return t.kind==="InlineFragment"}function Kn(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function Yn(t,e){return e===void 0&&(e=!1),De({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Vr(t){return t!=null&&typeof t=="object"&&t.type==="json"}function Ta(t){throw new InvariantError(18)}function Xn(t,e){switch(e===void 0&&(e=Ta),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(o){return Xn(o,e)});case"ObjectValue":{for(var r={},n=0,i=t.fields;n<i.length;n++){var a=i[n];r[a.name.value]=Xn(a.value,e)}return r}default:return t.value}}function Ts(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(n){r[n.name.value]=cn(n,e)}),r}return null}function Ei(t,e){return e===void 0&&(e={}),Qi(t.directives).every(function(r){var n=r.directive,i=r.ifArgument,a=!1;return i.value.kind==="Variable"?(a=e[i.value.name.value],Re(a!==void 0,13)):a=i.value.value,n.name.value==="skip"?!a:a})}function In(t){var e=[];return(0,oe.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function Zr(t,e){return In(e).some(function(r){return t.indexOf(r)>-1})}function ki(t){return t&&Zr(["client"],t)&&Zr(["export"],t)}function Rs(t){var e=t.name.value;return e==="skip"||e==="include"}function Qi(t){return t?t.filter(Rs).map(function(e){var r=e.arguments,n=e.name.value;Re(r&&r.length===1,14);var i=r[0];Re(i.name&&i.name.value==="if",15);var a=i.value;return Re(a&&(a.kind==="Variable"||a.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function Lr(t,e){var r=e,n=[];t.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw new Ne(11);a.kind==="FragmentDefinition"&&n.push(a)}),typeof r=="undefined"&&(Re(n.length===1,12),r=n[0].name.value);var i=De(De({},t),{definitions:m([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return i}function jr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(n){typeof n=="undefined"||n===null||Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function Pr(t){vr(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function vr(t){Re(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new Ne(3);return r});return Re(e.length<=1,4),t}function pt(t){return vr(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Ra(t){var e=pt(t);return invariant(e,5),e}function dn(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Ht(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function hn(t){var e=pt(t);return Re(e&&e.operation==="query",6),e}function Ca(t){Re(t.kind==="Document",7),Re(t.definitions.length<=1,8);var e=t.definitions[0];return Re(e.kind==="FragmentDefinition",9),e}function Wi(t){vr(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var a=i.operation;if(a==="query"||a==="mutation"||a==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new Ne(10)}function Si(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function Ki(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var n=r.defaultValue;return n}).map(function(r){var n=r.variable,i=r.defaultValue,a={};return An(a,n.name,i),a});return jr.apply(void 0,m([{}],e))}return{}}function Zo(t){var e=new Set;if(t.variableDefinitions)for(var r=0,n=t.variableDefinitions;r<n.length;r++){var i=n[r];e.add(i.variable.name.value)}return e}function qr(t,e,r){var n=0;return t.forEach(function(i,a){e.call(this,i,a,t)&&(t[n++]=i)},r),t.length=n,t}var Pa={kind:"Field",name:{kind:"Name",value:"__typename"}};function Cs(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&Cs(e[r.name.value],e)})}function pn(t){return Cs(pt(t)||Ca(t),Si(Ht(t)))?null:t}function Yi(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function Ps(t,e){var r=Object.create(null),n=[],i=Object.create(null),a=[],o=pn((0,oe.visit)(e,{Variable:{enter:function(f,E,S){S.kind!=="VariableDefinition"&&(r[f.name.value]=!0)}},Field:{enter:function(f){if(t&&f.directives){var E=t.some(function(S){return S.remove});if(E&&f.directives&&f.directives.some(Yi(t)))return f.arguments&&f.arguments.forEach(function(S){S.value.kind==="Variable"&&n.push({name:S.value.name.value})}),f.selectionSet&&de(f.selectionSet).forEach(function(S){a.push({name:S.name.value})}),null}}},FragmentSpread:{enter:function(f){i[f.name.value]=!0}},Directive:{enter:function(f){if(Yi(t)(f))return null}}}));return o&&qr(n,function(f){return!r[f.name]}).length&&(o=Ia(n,o)),o&&qr(a,function(f){return!i[f.name]}).length&&(o=Z(a,o)),o}function On(t){return(0,oe.visit)(vr(t),{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var a=i.some(function(f){return Cr(f)&&(f.name.value==="__typename"||f.name.value.lastIndexOf("__",0)===0)});if(!a){var o=n;if(!(Cr(o)&&o.directives&&o.directives.some(function(f){return f.name.value==="export"})))return De(De({},e),{selections:m(i,[Pa])})}}}}}})}var Na={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function Aa(t){return Ps([Na],vr(t))}function Ns(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(n){return Ti(t,n,r)})}function Ti(t,e,r){return r===void 0&&(r=!0),Cr(e)?e.directives?e.directives.some(Yi(t))||r&&Ns(t,e.selectionSet,r):!1:!0}function eu(t,e){vr(e);var r;return pn(visit(e,{SelectionSet:{enter:function(n,i,a,o){var f=o.join("-");if(!r||f===r||!f.startsWith(r))if(n.selections){var E=n.selections.filter(function(S){return Ti(t,S)});return Ns(t,n,!1)&&(r=f),__assign(__assign({},n),{selections:E})}else return null}}}))}function Dn(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function Ia(t,e){var r=Dn(t);return pn((0,oe.visit)(e,{OperationDefinition:{enter:function(n){return De(De({},n),{variableDefinitions:n.variableDefinitions.filter(function(i){return!t.some(function(a){return a.name===i.variable.name.value})})})}},Field:{enter:function(n){var i=t.some(function(o){return o.remove});if(i){var a=0;if(n.arguments.forEach(function(o){r(o)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function Z(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return pn((0,oe.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function de(t){var e=[];return t.selections.forEach(function(r){(Cr(r)||gr(r))&&r.selectionSet?de(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function _e(t){var e=Wi(t),r=e.operation;if(r==="query")return t;var n=(0,oe.visit)(t,{OperationDefinition:{enter:function(i){return De(De({},i),{operation:"query"})}}});return n}function xe(t){vr(t);var e=Ps([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,oe.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return Cr(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var Fe=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),$e=Object.prototype.toString;function Ve(t){return rt(t,new Map)}function rt(t,e){switch($e.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,a){r[a]=rt(i,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=rt(t[i],e)}),n}default:return t}}function st(){return typeof process!="undefined"?"production":"development"}function yr(t){return st()===t}function sr(){return yr("production")===!0}function ur(){return yr("development")===!0}function rr(){return yr("test")===!0}function Ur(t){try{return t()}catch(e){console.error&&console.error(e)}}function Jn(t){return t.errors&&t.errors.length}function Oa(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Oa(t[e])}),t}function gd(t){if(ur()||rr()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return Oa(t)}return t}var Xl=Object.prototype.hasOwnProperty;function tu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Da(t)}function Da(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=Ma(e,n);for(var i=1;i<r;++i)e=nu(e,t[i],n)}return e}function ru(t){return t!==null&&typeof t=="object"}function nu(t,e,r){return ru(e)&&ru(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=Ma(t,r)),Object.keys(e).forEach(function(n){var i=e[n];if(Xl.call(t,n)){var a=t[n];i!==a&&(t[n]=nu(Ma(a,r),i,r))}else t[n]=i}),t):e}function Ma(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=De({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var iu=Object.create({});function vd(t,e){e===void 0&&(e="warn"),!sr()&&!iu[t]&&(rr()||(iu[t]=!0),e==="error"?console.error(t):console.warn(t))}function yd(t){return JSON.parse(JSON.stringify(t))}var As=Xe(9329),xa=Xe.n(As),Jl=xa();const lr=Jl;function su(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new Ne(2)}return t}var bd=function(t){ln(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error);function Is(t){return t.request.length<=1}function _d(t){var e=!1;return new Promise(function(r,n){t.subscribe({next:function(i){e||(e=!0,r(i))},error:n})})}var Zl=null;function wd(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function au(t){return new lr(function(e){e.error(t)})}function ec(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?dn(e.query):""),e}function Fa(t,e){var r=De({},t),n=function(a){typeof a=="function"?r=De({},r,a(r)):r=De({},r,a)},i=function(){return De({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return tc(e)}}),e}function tc(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}function ou(t,e){return e?e(t):lr.of()}function Xi(t){return typeof t=="function"?new zr(t):t}function Ji(){return new zr(function(){return lr.of()})}function La(t){return t.length===0?Ji():t.map(Xi).reduce(function(e,r){return e.concat(r)})}function Os(t,e,r){var n=Xi(e),i=Xi(r||new zr(ou));return Is(n)&&Is(i)?new zr(function(a){return t(a)?n.request(a)||lr.of():i.request(a)||lr.of()}):new zr(function(a,o){return t(a)?n.request(a,o)||lr.of():i.request(a,o)||lr.of()})}var qa=function(t,e){var r=Xi(t);if(Is(r))return r;var n=Xi(e);return Is(n)?new zr(function(i){return r.request(i,function(a){return n.request(a)||lr.of()})||lr.of()}):new zr(function(i,a){return r.request(i,function(o){return n.request(o,a)||lr.of()})||lr.of()})},zr=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,n){return this.concat(Os(e,r,n||new t(ou)))},t.prototype.concat=function(e){return qa(this,e)},t.prototype.request=function(e,r){throw new Ne(1)},t.empty=Ji,t.from=La,t.split=Os,t.execute=Zi,t}();function Zi(t,e){return t.request(Fa(e.context,ec(su(e))))||lr.of()}var Ua=Xe(7121),Dt;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(Dt||(Dt={}));function Mn(t){return t<7}var mn=function(t){ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[Ua.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(lr);function Ri(t){return Array.isArray(t)&&t.length>0}function uu(t){return t.hasOwnProperty("graphQLErrors")}var rc=function(t){var e="";return Ri(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var n=r?r.message:"Error message not found.";e+="GraphQL error: "+n+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},fn=function(t){ln(e,t);function e(r){var n=r.graphQLErrors,i=r.networkError,a=r.errorMessage,o=r.extraInfo,f=t.call(this,a)||this;return f.graphQLErrors=n||[],f.networkError=i||null,a?f.message=a:f.message=rc(f),f.extraInfo=o,f.__proto__=e.prototype,f}return e}(Error),Zn;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(Zn||(Zn={}));var nc=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&Ri(t.graphQLErrors))},lu=function(t){ln(e,t);function e(r){var n=r.queryManager,i=r.options,a=r.shouldSubscribe,o=a===void 0?!0:a,f=t.call(this,function(S){return f.onSubscribe(S)})||this;f.observers=new Set,f.subscriptions=new Set,f.isTornDown=!1,f.options=i,f.variables=i.variables||{},f.queryId=n.generateQueryId(),f.shouldSubscribe=o;var E=pt(i.query);return f.queryName=E&&E.name&&E.name.value,f.queryManager=n,f}return e.prototype.result=function(){var r=this;return new Promise(function(n,i){var a={next:function(f){n(f),r.observers.delete(a),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=r.subscribe(a)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:Dt.error}}var n=this.queryManager.getCurrentQueryResult(this),i=n.data,a=n.partial,o=this.queryManager.queryStore.get(this.queryId),f,E=this.options.fetchPolicy,S=E==="network-only"||E==="no-cache";if(o){var P=o.networkStatus;if(nc(o,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:P,error:new fn({graphQLErrors:o.graphQLErrors,networkError:o.networkError})};o.variables&&(this.options.variables=De(De({},this.options.variables),o.variables),this.variables=this.options.variables),f={data:i,loading:Mn(P),networkStatus:P},o.graphQLErrors&&this.options.errorPolicy==="all"&&(f.errors=o.graphQLErrors)}else{var q=S||a&&E!=="cache-only";f={data:i,loading:q,networkStatus:q?Dt.loading:Dt.ready}}return a||this.updateLastResult(De(De({},f),{stale:!1})),De(De({},f),{partial:a})},e.prototype.isDifferentFromLastResult=function(r){var n=this.lastResultSnapshot;return!(n&&r&&n.networkStatus===r.networkStatus&&n.stale===r.stale&&Ke(n.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var n=this.options.fetchPolicy;return n==="cache-only"?Promise.reject(new Ne(1)):(n!=="no-cache"&&n!=="cache-and-network"&&(n="network-only"),Ke(this.variables,r)||(this.variables=De(De({},this.variables),r)),Ke(this.options.variables,this.variables)||(this.options.variables=De(De({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,De(De({},this.options),{fetchPolicy:n}),Zn.refetch))},e.prototype.fetchMore=function(r){var n=this;Re(r.updateQuery,2);var i=De(De({},r.query?r:De(De(De({},this.options),r),{variables:De(De({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),a=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(a,i,Zn.normal,this.queryId).then(function(o){return n.updateQuery(function(f){return r.updateQuery(f,{fetchMoreResult:o.data,variables:i.variables})}),n.queryManager.stopQuery(a),o},function(o){throw n.queryManager.stopQuery(a),o})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(a){var o=r.updateQuery;o&&n.updateQuery(function(f,E){var S=E.variables;return o(f,{subscriptionData:a,variables:S})})},error:function(a){if(r.onError){r.onError(a);return}}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){var n=this.options.fetchPolicy;this.options=De(De({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var i=r.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&(n==="cache-only"||n==="standby"||i==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,n,i){return n===void 0&&(n=!1),i===void 0&&(i=!0),this.isTornDown=!1,r=r||this.variables,!n&&Ke(r,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),a=i.previousResult,o=i.variables,f=i.document,E=Ur(function(){return r(a,{variables:o})});E&&(n.dataStore.markUpdateQueryResult(f,o,E),n.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){pe(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var n=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:Ve(r),n},e.prototype.onSubscribe=function(r){var n=this;try{var i=r._subscription._observer;i&&!i.error&&(i.error=ic)}catch(o){}var a=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),a&&this.setUpQuery(),function(){n.observers.delete(r)&&!n.observers.size&&n.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,n=this,i=n.queryManager,a=n.queryId;this.shouldSubscribe&&i.addObservableQuery(a,this),this.options.pollInterval&&(pe(this),i.startPollingQuery(this.options,a));var o=function(f){r.updateLastResult(De(De({},r.lastResult),{errors:f.graphQLErrors,networkStatus:Dt.error,loading:!1})),te(r.observers,"error",r.lastError=f)};i.observeQuery(a,this.options,{next:function(f){if(r.lastError||r.isDifferentFromLastResult(f)){var E=r.updateLastResult(f),S=r.options,P=S.query,q=S.variables,z=S.fetchPolicy;i.transform(P).hasClientExports?i.getLocalState().addExportedVariables(P,q).then(function(le){var he=r.variables;r.variables=r.options.variables=le,!f.loading&&E&&z!=="cache-only"&&i.transform(P).serverQuery&&!Ke(he,le)?r.refetch():te(r.observers,"next",f)}):te(r.observers,"next",f)}},error:o}).catch(o)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(mn);function ic(t){}function te(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function pe(t){var e=t.options.fetchPolicy;Re(e!=="cache-first"&&e!=="cache-only",3)}var Ee=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,n){this.store[e]={mutation:r,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var n=this.store[e];n&&(n.loading=!1,n.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),He=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];Re(!r||r.document===e.document||Ke(r.document,e.document),19);var n=!1,i=null;e.storePreviousVariables&&r&&r.networkStatus!==Dt.loading&&(Ke(r.variables,e.variables)||(n=!0,i=r.variables));var a;n?a=Dt.setVariables:e.isPoll?a=Dt.poll:e.isRefetch?a=Dt.refetch:a=Dt.loading;var o=[];r&&r.graphQLErrors&&(o=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:o,networkStatus:a,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=Dt.fetchMore)},t.prototype.markQueryResult=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=Ri(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=Dt.ready,typeof n=="string"&&this.store[n]&&(this.store[n].networkStatus=Dt.ready))},t.prototype.markQueryError=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=Dt.error,typeof n=="string"&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(e,r){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,r&&(n.networkStatus=Dt.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(n){e.indexOf(n)<0?r.stopQuery(n):r.store[n].networkStatus=Dt.loading})},t}();function ht(t){return t.charAt(0).toUpperCase()+t.slice(1)}var yt=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,a=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),a&&this.setFragmentMatcher(a)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=tu(r.resolvers,n)}):this.resolvers=tu(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,a=e.variables,o=e.onlyRunForcedResolvers,f=o===void 0?!1:o;return _(this,void 0,void 0,function(){return c(this,function(E){return r?[2,this.resolveDocument(r,n.data,i,a,this.fragmentMatcher,f).then(function(S){return De(De({},n),{data:S.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return Zr(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?xe(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,n=De(De({},e),{cache:r,getCacheKey:function(i){if(r.config)return r.config.dataIdFromObject(i);Re(!1,6)}});return n},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),_(this,void 0,void 0,function(){return c(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(a){return De(De({},r),a.exportedVariables)})]:[2,De({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,oe.visit)(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return oe.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:_e(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,a,o){return n===void 0&&(n={}),i===void 0&&(i={}),a===void 0&&(a=function(){return!0}),o===void 0&&(o=!1),_(this,void 0,void 0,function(){var f,E,S,P,q,z,le,he,fe;return c(this,function(Pe){return f=Wi(e),E=Ht(e),S=Si(E),P=f.operation,q=P?ht(P):"Query",z=this,le=z.cache,he=z.client,fe={fragmentMap:S,context:De(De({},n),{cache:le,client:he}),variables:i,fragmentMatcher:a,defaultOperationType:q,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(f.selectionSet,r,fe).then(function(Ce){return{result:Ce,exportedVariables:fe.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return _(this,void 0,void 0,function(){var i,a,o,f,E,S=this;return c(this,function(P){return i=n.fragmentMap,a=n.context,o=n.variables,f=[r],E=function(q){return _(S,void 0,void 0,function(){var z,le;return c(this,function(he){return Ei(q,o)?Cr(q)?[2,this.resolveField(q,r,n).then(function(fe){var Pe;typeof fe!="undefined"&&f.push((Pe={},Pe[fr(q)]=fe,Pe))})]:(gr(q)?z=q:(z=i[q.name.value],Re(z,7)),z&&z.typeCondition&&(le=z.typeCondition.name.value,n.fragmentMatcher(r,le,a))?[2,this.resolveSelectionSet(z.selectionSet,r,n).then(function(fe){f.push(fe)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(E)).then(function(){return Da(f)})]})})},t.prototype.resolveField=function(e,r,n){return _(this,void 0,void 0,function(){var i,a,o,f,E,S,P,q,z,le=this;return c(this,function(he){return i=n.variables,a=e.name.value,o=fr(e),f=a!==o,E=r[o]||r[a],S=Promise.resolve(E),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(P=r.__typename||n.defaultOperationType,q=this.resolvers&&this.resolvers[P],q&&(z=q[f?a:o],z&&(S=Promise.resolve(z(r,cn(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}))))),[2,S.then(function(fe){if(fe===void 0&&(fe=E),e.directives&&e.directives.forEach(function(Pe){Pe.name.value==="export"&&Pe.arguments&&Pe.arguments.forEach(function(Ce){Ce.name.value==="as"&&Ce.value.kind==="StringValue"&&(n.exportedVariables[Ce.value.value]=fe)})}),!e.selectionSet||fe==null)return fe;if(Array.isArray(fe))return le.resolveSubSelectedArray(e,fe,n);if(e.selectionSet)return le.resolveSelectionSet(e.selectionSet,fe,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(a){if(a===null)return null;if(Array.isArray(a))return i.resolveSubSelectedArray(e,a,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,a,n)}))},t}();function St(t){var e=new Set,r=null;return new mn(function(n){return e.add(n),r=r||t.subscribe({next:function(i){e.forEach(function(a){return a.next&&a.next(i)})},error:function(i){e.forEach(function(a){return a.error&&a.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(n)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function dt(t,e){return new mn(function(r){var n=r.next,i=r.error,a=r.complete,o=0,f=!1,E={next:function(P){++o,new Promise(function(q){q(e(P))}).then(function(q){--o,n&&n.call(r,q),f&&E.complete()},function(q){--o,i&&i.call(r,q)})},error:function(P){i&&i.call(r,P)},complete:function(){f=!0,o||a&&a.call(r)}},S=t.subscribe(E);return function(){return S.unsubscribe()}})}var Ct=Object.prototype.hasOwnProperty,$r=function(){function t(e){var r=e.link,n=e.queryDeduplication,i=n===void 0?!1:n,a=e.store,o=e.onBroadcast,f=o===void 0?function(){}:o,E=e.ssrMode,S=E===void 0?!1:E,P=e.clientAwareness,q=P===void 0?{}:P,z=e.localState,le=e.assumeImmutableResults;this.mutationStore=new Ee,this.queryStore=new He,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(Fe?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=i,this.dataStore=a,this.onBroadcast=f,this.clientAwareness=q,this.localState=z||new yt({cache:a.getCache()}),this.ssrMode=S,this.assumeImmutableResults=!!le}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(r){r(new Ne(8))})},t.prototype.mutate=function(e){var r=e.mutation,n=e.variables,i=e.optimisticResponse,a=e.updateQueries,o=e.refetchQueries,f=o===void 0?[]:o,E=e.awaitRefetchQueries,S=E===void 0?!1:E,P=e.update,q=e.errorPolicy,z=q===void 0?"none":q,le=e.fetchPolicy,he=e.context,fe=he===void 0?{}:he;return _(this,void 0,void 0,function(){var Pe,Ce,Oe,Me=this;return c(this,function(Ae){switch(Ae.label){case 0:return Re(r,9),Re(!le||le==="no-cache",10),Pe=this.generateQueryId(),r=this.transform(r).document,this.setQuery(Pe,function(){return{document:r}}),n=this.getVariables(r,n),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,n,fe)]:[3,2];case 1:n=Ae.sent(),Ae.label=2;case 2:return Ce=function(){var Ge={};return a&&Me.queries.forEach(function(mt,Et){var Qt=mt.observableQuery;if(Qt){var bt=Qt.queryName;bt&&Ct.call(a,bt)&&(Ge[Et]={updater:a[bt],query:Me.queryStore.get(Et)})}}),Ge},this.mutationStore.initMutation(Pe,r,n),this.dataStore.markMutationInit({mutationId:Pe,document:r,variables:n,updateQueries:Ce(),update:P,optimisticResponse:i}),this.broadcastQueries(),Oe=this,[2,new Promise(function(Ge,mt){var Et,Qt;Oe.getObservableFromLink(r,De(De({},fe),{optimisticResponse:i}),n,!1).subscribe({next:function(bt){if(Jn(bt)&&z==="none"){Qt=new fn({graphQLErrors:bt.errors});return}Oe.mutationStore.markMutationResult(Pe),le!=="no-cache"&&Oe.dataStore.markMutationResult({mutationId:Pe,result:bt,document:r,variables:n,updateQueries:Ce(),update:P}),Et=bt},error:function(bt){Oe.mutationStore.markMutationError(Pe,bt),Oe.dataStore.markMutationComplete({mutationId:Pe,optimisticResponse:i}),Oe.broadcastQueries(),Oe.setQuery(Pe,function(){return{document:null}}),mt(new fn({networkError:bt}))},complete:function(){if(Qt&&Oe.mutationStore.markMutationError(Pe,Qt),Oe.dataStore.markMutationComplete({mutationId:Pe,optimisticResponse:i}),Oe.broadcastQueries(),Qt){mt(Qt);return}typeof f=="function"&&(f=f(Et));var bt=[];Ri(f)&&f.forEach(function(Oi){if(typeof Oi=="string")Oe.queries.forEach(function(wn){var wr=wn.observableQuery;wr&&wr.queryName===Oi&&bt.push(wr.refetch())});else{var lo={query:Oi.query,variables:Oi.variables,fetchPolicy:"network-only"};Oi.context&&(lo.context=Oi.context),bt.push(Oe.query(lo))}}),Promise.all(S?bt:[]).then(function(){Oe.setQuery(Pe,function(){return{document:null}}),z==="ignore"&&Et&&Jn(Et)&&delete Et.errors,Ge(Et)})}})})]}})})},t.prototype.fetchQuery=function(e,r,n,i){return _(this,void 0,void 0,function(){var a,o,f,E,S,P,q,z,le,he,fe,Pe,Ce,Oe,Me,Ae,Ge,mt,Et=this;return c(this,function(Qt){switch(Qt.label){case 0:return a=r.metadata,o=a===void 0?null:a,f=r.fetchPolicy,E=f===void 0?"cache-first":f,S=r.context,P=S===void 0?{}:S,q=this.transform(r.query).document,z=this.getVariables(q,r.variables),this.transform(q).hasClientExports?[4,this.localState.addExportedVariables(q,z,P)]:[3,2];case 1:z=Qt.sent(),Qt.label=2;case 2:if(r=De(De({},r),{variables:z}),he=E==="network-only"||E==="no-cache",fe=he,he||(Pe=this.dataStore.getCache().diff({query:q,variables:z,returnPartialData:!0,optimistic:!1}),Ce=Pe.complete,Oe=Pe.result,fe=!Ce||E==="cache-and-network",le=Oe),Me=fe&&E!=="cache-only"&&E!=="standby",Zr(["live"],q)&&(Me=!0),Ae=this.idCounter++,Ge=E!=="no-cache"?this.updateQueryWatch(e,q,r):void 0,this.setQuery(e,function(){return{document:q,lastRequestId:Ae,invalidated:!0,cancel:Ge}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:q,storePreviousVariables:Me,variables:z,isPoll:n===Zn.poll,isRefetch:n===Zn.refetch,metadata:o,fetchMoreForQueryId:i}),this.broadcastQueries(),Me){if(mt=this.fetchRequest({requestId:Ae,queryId:e,document:q,options:r,fetchMoreForQueryId:i}).catch(function(bt){throw uu(bt)?bt:(Ae>=Et.getQuery(e).lastRequestId&&(Et.queryStore.markQueryError(e,bt,i),Et.invalidate(e),Et.invalidate(i),Et.broadcastQueries()),new fn({networkError:bt}))}),E!=="cache-and-network")return[2,mt];mt.catch(function(){})}return this.queryStore.markQueryResultClient(e,!Me),this.invalidate(e),this.invalidate(i),this.transform(q).hasForcedResolvers?[2,this.localState.runResolvers({document:q,remoteResult:{data:le},context:P,variables:z,onlyRunForcedResolvers:!0}).then(function(bt){return Et.markQueryResult(e,bt,r,i),Et.broadcastQueries(),bt})]:(this.broadcastQueries(),[2,{data:le}])}})})},t.prototype.markQueryResult=function(e,r,n,i){var a=n.fetchPolicy,o=n.variables,f=n.errorPolicy;a==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,o,i,f==="ignore"||f==="all")},t.prototype.queryListenerForObserver=function(e,r,n){var i=this;function a(o,f){if(n[o])try{n[o](f)}catch(E){}}return function(o,f){if(i.invalidate(e,!1),!!o){var E=i.getQuery(e),S=E.observableQuery,P=E.document,q=S?S.options.fetchPolicy:r.fetchPolicy;if(q!=="standby"){var z=Mn(o.networkStatus),le=S&&S.getLastResult(),he=!!(le&&le.networkStatus!==o.networkStatus),fe=r.returnPartialData||!f&&o.previousVariables||he&&r.notifyOnNetworkStatusChange||q==="cache-only"||q==="cache-and-network";if(!(z&&!fe)){var Pe=Ri(o.graphQLErrors),Ce=S&&S.options.errorPolicy||r.errorPolicy||"none";if(Ce==="none"&&Pe||o.networkError)return a("error",new fn({graphQLErrors:o.graphQLErrors,networkError:o.networkError}));try{var Oe=void 0,Me=void 0;if(f)q!=="no-cache"&&q!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),Oe=f.result,Me=!f.complete;else{var Ae=S&&S.getLastError(),Ge=Ce!=="none"&&(Ae&&Ae.graphQLErrors)!==o.graphQLErrors;if(le&&le.data&&!Ge)Oe=le.data,Me=!1;else{var mt=i.dataStore.getCache().diff({query:P,variables:o.previousVariables||o.variables,returnPartialData:!0,optimistic:!0});Oe=mt.result,Me=!mt.complete}}var Et=Me&&!(r.returnPartialData||q==="cache-only"),Qt={data:Et?le&&le.data:Oe,loading:z,networkStatus:o.networkStatus,stale:Et};Ce==="all"&&Pe&&(Qt.errors=o.graphQLErrors),a("next",Qt)}catch(bt){a("error",new fn({networkError:bt}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),a=Aa(n.transformForLink(i)),o=this.localState.clientQuery(i),f=this.localState.serverQuery(a),E={document:i,hasClientExports:ki(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:f,defaultVars:Ki(pt(i))},S=function(P){P&&!r.has(P)&&r.set(P,E)};S(e),S(i),S(o),S(f)}return r.get(e)},t.prototype.getVariables=function(e,r){return De(De({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),Re(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=De({},e);return new lu({queryManager:this,options:n,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return Re(e.query,12),Re(e.query.kind==="Document",13),Re(!e.returnPartialData,14),Re(!e.pollInterval,15),new Promise(function(n,i){var a=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+a.queryId,i),a.result().then(n,i).then(function(){return r.fetchQueryRejectFns.delete("query:"+a.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(n){var i=n.listeners;return i.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,n){var i=this,a=this.getQuery(e).cancel;a&&a();var o=function(){var f=null,E=i.getQuery(e).observableQuery;if(E){var S=E.getLastResult();S&&(f=S.data)}return f};return this.dataStore.getCache().watch({query:r,variables:n.variables,optimistic:!0,previousResult:o,callback:function(f){i.setQuery(e,function(){return{invalidated:!0,newData:f}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new Ne(16))});var e=[];return this.queries.forEach(function(r,n){var i=r.observableQuery;i&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.queries.forEach(function(i,a){var o=i.observableQuery;if(o){var f=o.options.fetchPolicy;o.resetLastResults(),f!=="cache-only"&&(e||f!=="standby")&&n.push(o.refetch()),r.setQuery(a,function(){return{newData:null}}),r.invalidate(a)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(e,r,n){return this.addQueryListener(e,this.queryListenerForObserver(e,r,n)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,n){return this.addQueryListener(e,n),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,a=e.variables;n=this.transform(n).document,a=this.getVariables(n,a);var o=function(E){return r.getObservableFromLink(n,{},E,!1).map(function(S){if((!i||i!=="no-cache")&&(r.dataStore.markSubscriptionResult(S,n,E),r.broadcastQueries()),Jn(S))throw new fn({graphQLErrors:S.errors});return S})};if(this.transform(n).hasClientExports){var f=this.localState.addExportedVariables(n,a).then(o);return new mn(function(E){var S=null;return f.then(function(P){return S=P.subscribe(E)},E.error),function(){return S&&S.unsubscribe()}})}return o(a)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var n=e.options,i=n.variables,a=n.query,o=n.fetchPolicy,f=n.returnPartialData,E=e.getLastResult(),S=this.getQuery(e.queryId).newData;if(S&&S.complete)return{data:S.result,partial:!1};if(o==="no-cache"||o==="network-only")return{data:void 0,partial:!1};var P=this.dataStore.getCache().diff({query:a,variables:i,previousResult:E?E.data:void 0,returnPartialData:!0,optimistic:r}),q=P.result,z=P.complete;return{data:z||f?q:void 0,partial:!z}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var n=this.getQuery(e).observableQuery;Re(n,17),r=n}else r=e;var i=r.options,a=i.variables,o=i.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:a,document:o}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,n){r.invalidated&&r.listeners.forEach(function(i){i&&i(e.queryStore.get(n),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var a=this;i===void 0&&(i=this.queryDeduplication);var o,f=this.transform(e).serverQuery;if(f){var E=this,S=E.inFlightLinkObservables,P=E.link,q={query:f,variables:n,operationName:dn(f)||void 0,context:this.prepareContext(De(De({},r),{forceFetch:!i}))};if(r=q.context,i){var z=S.get(f)||new Map;S.set(f,z);var le=JSON.stringify(n);if(o=z.get(le),!o){z.set(le,o=St(Zi(P,q)));var he=function(){z.delete(le),z.size||S.delete(f),fe.unsubscribe()},fe=o.subscribe({next:he,error:he,complete:he})}}else o=St(Zi(P,q))}else o=mn.of({data:{}}),r=this.prepareContext(r);var Pe=this.transform(e).clientQuery;return Pe&&(o=dt(o,function(Ce){return a.localState.runResolvers({document:Pe,remoteResult:Ce,context:r,variables:n})})),o},t.prototype.fetchRequest=function(e){var r=this,n=e.requestId,i=e.queryId,a=e.document,o=e.options,f=e.fetchMoreForQueryId,E=o.variables,S=o.errorPolicy,P=S===void 0?"none":S,q=o.fetchPolicy,z,le;return new Promise(function(he,fe){var Pe=r.getObservableFromLink(a,o.context,E),Ce="fetchRequest:"+i;r.fetchQueryRejectFns.set(Ce,fe);var Oe=function(){r.fetchQueryRejectFns.delete(Ce),r.setQuery(i,function(Ae){var Ge=Ae.subscriptions;Ge.delete(Me)})},Me=Pe.map(function(Ae){if(n>=r.getQuery(i).lastRequestId&&(r.markQueryResult(i,Ae,o,f),r.queryStore.markQueryResult(i,Ae,f),r.invalidate(i),r.invalidate(f),r.broadcastQueries()),P==="none"&&Ri(Ae.errors))return fe(new fn({graphQLErrors:Ae.errors}));if(P==="all"&&(le=Ae.errors),f||q==="no-cache")z=Ae.data;else{var Ge=r.dataStore.getCache().diff({variables:E,query:a,optimistic:!1,returnPartialData:!0}),mt=Ge.result,Et=Ge.complete;(Et||o.returnPartialData)&&(z=mt)}}).subscribe({error:function(Ae){Oe(),fe(Ae)},complete:function(){Oe(),he({data:z,errors:le,loading:!1,networkStatus:Dt.ready,stale:!1})}});r.setQuery(i,function(Ae){var Ge=Ae.subscriptions;Ge.add(Me)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var n=this.getQuery(e),i=De(De({},n),r(n));this.queries.set(e,i)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return De(De({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==Dt.ready&&r.networkStatus!==Dt.error},t.prototype.startPollingQuery=function(e,r,n){var i=this,a=e.pollInterval;if(Re(a,18),!this.ssrMode){var o=this.pollingInfoByQueryId.get(r);o||this.pollingInfoByQueryId.set(r,o={}),o.interval=a,o.options=De(De({},e),{fetchPolicy:"network-only"});var f=function(){var S=i.pollingInfoByQueryId.get(r);S&&(i.checkInFlight(r)?E():i.fetchQuery(r,S.options,Zn.poll).then(E,E))},E=function(){var S=i.pollingInfoByQueryId.get(r);S&&(clearTimeout(S.timeout),S.timeout=setTimeout(f,S.interval))};n&&this.addQueryListener(r,n),E()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),Nr=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,n,i,a){a===void 0&&(a=!1);var o=!Jn(e);a&&Jn(e)&&e.data&&(o=!0),!i&&o&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:n})},t.prototype.markSubscriptionResult=function(e,r,n){Jn(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:n})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var n;typeof e.optimisticResponse=="function"?n=e.optimisticResponse(e.variables):n=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var a=r.cache;r.cache=i;try{r.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=a}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!Jn(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(a){var o=i[a],f=o.query,E=o.updater,S=r.cache.diff({query:f.document,variables:f.variables,returnPartialData:!0,optimistic:!1}),P=S.result,q=S.complete;if(q){var z=Ur(function(){return E(P,{mutationResult:e.result,queryName:dn(f.document)||void 0,queryVariables:f.variables})});z&&n.push({result:z,dataId:"ROOT_QUERY",query:f.document,variables:f.variables})}}),this.cache.performTransaction(function(a){n.forEach(function(f){return a.write(f)});var o=e.update;o&&Ur(function(){return o(a,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,n=e.optimisticResponse;n&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),es="2.6.10",$a=!1,Ga=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,a=i===void 0?!1:i,o=e.ssrForceFetchDelay,f=o===void 0?0:o,E=e.connectToDevTools,S=e.queryDeduplication,P=S===void 0?!0:S,q=e.defaultOptions,z=e.assumeImmutableResults,le=z===void 0?!1:z,he=e.resolvers,fe=e.typeDefs,Pe=e.fragmentMatcher,Ce=e.name,Oe=e.version,Me=e.link;if(!Me&&he&&(Me=zr.empty()),!Me||!n)throw new Ne(4);this.link=Me,this.cache=n,this.store=new Nr(n),this.disableNetworkFetches=a||f>0,this.queryDeduplication=P,this.defaultOptions=q||{},this.typeDefs=fe,f&&setTimeout(function(){return r.disableNetworkFetches=!1},f),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var Ae=!1;(typeof E=="undefined"?Ae:E&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=es,this.localState=new yt({cache:n,client:this,resolvers:he,fragmentMatcher:Pe}),this.queryManager=new $r({link:this.link,store:this.store,queryDeduplication:P,ssrMode:a,clientAwareness:{name:Ce,version:Oe},localState:this.localState,assumeImmutableResults:le,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=De(De({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=De(De({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=De(De({},this.defaultOptions.query),e)),Re(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=De(De({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=De(De({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Zi(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const sc=null;function Pp(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:cu(t)},r={kind:"Document",definitions:[e]};return r}function Np(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:cu(t)},n={kind:"Document",definitions:[r]};return n}function cu(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return cu(t[0]);var e=[];Object.keys(t).forEach(function(n){var i=cu(t[n]),a={kind:"Field",name:{kind:"Name",value:n},selectionSet:i||void 0};e.push(a)});var r={kind:"SelectionSet",selections:e};return r}var Ap={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},Ip=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:Lr(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Lr(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,n=e.data;if(typeof r!="undefined"){var i=null;try{i=this.read({rootId:r,optimistic:!1,query:Ap})}catch(f){}var a=i&&i.__typename||"__ClientData",o=Object.assign({__typename:a},n);this.writeFragment({id:r,fragment:Np(o,a),data:o})}else this.writeQuery({query:Pp(n),data:n})},t}(),Ed;(function(t){})(Ed||(Ed={}));var cr=null,kd={},Op=1,Dp=function(){return function(){function t(){this.id=["slot",Op++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=cr;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===kd)break;return e!==cr&&(cr.slots[this.id]=r),!0}return cr&&(cr.slots[this.id]=kd),!1},t.prototype.getValue=function(){if(this.hasValue())return cr.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),f=cr;cr={parent:f,slots:o};try{return r.apply(i,n)}finally{cr=f}},t.bind=function(e){var r=cr;return function(){var n=cr;try{return cr=r,e.apply(this,arguments)}finally{cr=n}}},t.noContext=function(e,r,n){if(cr){var i=cr;try{return cr=null,e.apply(n,r)}finally{cr=i}}else return e.apply(n,r)},t}()},ac="@wry/context:Slot",oc=Array,uc=oc[ac]||function(){var t=Dp();try{Object.defineProperty(oc,ac,{value:oc[ac]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),lc=uc.bind,Mp=uc.noContext;function Kv(t,e){return setTimeout(lc(t),e)}function Yv(t){return function(){var e=t.apply(this,arguments),r=lc(e.next),n=lc(e.throw);return new Promise(function(i,a){function o(S,P){try{var q=S.call(e,P)}catch(le){return a(le)}var z=q.done?i:f;xp(q.value)?q.value.then(z,q.done?a:E):z(q.value)}var f=function(S){return o(r,S)},E=function(S){return o(n,S)};f()})}}function xp(t){return t&&typeof t.then=="function"}var Sd=null;function Xv(t){if(Sd.indexOf(t)<0){var e=function(r,n){var i=r[n];r[n]=function(){return Mp(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),Sd.push(t)}return t}function Fp(){}var Lp=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Fp),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getEntry(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),du=new uc,qp=[],cc=[],Up=100;function Ds(t,e){if(!t)throw new Error(e||"assertion failure")}function $p(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function Td(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Gp(t){return t.slice(0)}var Hp=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(Ds(!this.recomputing,"already recomputing"),!(!Bp(this)&&dc(this)))return Ms(this)?Vp(this):Td(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Rd(this),hc(this))},t.prototype.dispose=function(){var e=this;Id(this).forEach(dc),hc(this),this.parents.forEach(function(r){r.setDirty(),Od(r,e)})},t.count=0,t}();function Bp(t){var e=du.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Ms(t)?Pd(e,t):Nd(e,t),e}function Vp(t){var e=Id(t);return du.withValue(t,jp,[t]),Qp(t)&&zp(t),e.forEach(dc),Td(t.value)}function jp(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function Ms(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function zp(t){t.dirty=!1,!Ms(t)&&Cd(t)}function Rd(t){t.parents.forEach(function(e){return Pd(e,t)})}function Cd(t){t.parents.forEach(function(e){return Nd(e,t)})}function Pd(t,e){if(Ds(t.childValues.has(e)),Ds(Ms(e)),!t.dirtyChildren)t.dirtyChildren=cc.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),Rd(t)}function Nd(t,e){Ds(t.childValues.has(e)),Ds(!Ms(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,Gp(e.value)):$p(r,e.value)||t.setDirty(),Ad(t,e),!Ms(t)&&Cd(t)}function Ad(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(cc.length<Up&&cc.push(r),t.dirtyChildren=null))}function dc(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function Id(t){var e=qp;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,n){Od(t,n),e.push(n)})),Ds(t.dirtyChildren===null),e}function Od(t,e){e.parents.delete(t),t.childValues.delete(e),Ad(t,e)}function Qp(t){if(typeof t.subscribe=="function")try{hc(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function hc(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var pc=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(n){return r=r.getChildTrie(n)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&Wp(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();function Wp(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Kp=new pc(typeof WeakMap=="function");function Yp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Kp.lookupArray(t)}var mc=new Set;function Ha(t,e){e===void 0&&(e=Object.create(null));var r=new Lp(e.max||Math.pow(2,16),function(o){return o.dispose()}),n=!!e.disposable,i=e.makeCacheKey||Yp;function a(){if(!(n&&!du.hasValue())){var o=i.apply(null,arguments);if(o===void 0)return t.apply(null,arguments);var f=Array.prototype.slice.call(arguments),E=r.get(o);E?E.args=f:(E=new Hp(t,f),r.set(o,E),E.subscribe=e.subscribe,n&&(E.reportOrphan=function(){return r.delete(o)}));var S=E.recompute();return r.set(o,E),mc.add(r),du.hasValue()||(mc.forEach(function(P){return P.clean()}),mc.clear()),n?void 0:S}}return a.dirty=function(){var o=i.apply(null,arguments),f=o!==void 0&&r.get(o);f&&f.setDirty()},a}var Dd=!1;function Md(){var t=!Dd;return rr()||(Dd=!0),t}var Xp=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,n){var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,f=o===void 0?a&&"Query":o;return f&&f===r?!0:(Md(),"heuristic")},t}(),Jv=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,n){Re(this.isReady,1);var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,f=o===void 0?a&&"Query":o;if(Re(f,2),f===r)return!0;var E=this.possibleTypesMap[r];return!!(f&&E&&E.indexOf(f)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(n){(n.kind==="UNION"||n.kind==="INTERFACE")&&(r[n.name]=n.possibleTypes.map(function(i){return i.name}))}),r},t}(),xd=Object.prototype.hasOwnProperty,xs=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Ha(function(n){return r.data[n]},{disposable:!0,makeCacheKey:function(n){return n}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var n=this.data[e];r!==n&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){xd.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(n){r.set(n,e[n])}),Object.keys(this.data).forEach(function(n){xd.call(e,n)||r.delete(n)})):Object.keys(this.data).forEach(function(n){r.delete(n)})},t}();function Fd(t){return new xs(t)}var Jp=function(){function t(e){var r=this,n=e===void 0?{}:e,i=n.cacheKeyRoot,a=i===void 0?new pc(Fe):i,o=n.freezeResults,f=o===void 0?!1:o,E=this,S=E.executeStoreQuery,P=E.executeSelectionSet,q=E.executeSubSelectedArray;this.freezeResults=f,this.executeStoreQuery=Ha(function(z){return S.call(r,z)},{makeCacheKey:function(z){var le=z.query,he=z.rootValue,fe=z.contextValue,Pe=z.variableValues,Ce=z.fragmentMatcher;if(fe.store instanceof xs)return a.lookup(fe.store,le,Ce,JSON.stringify(Pe),he.id)}}),this.executeSelectionSet=Ha(function(z){return P.call(r,z)},{makeCacheKey:function(z){var le=z.selectionSet,he=z.rootValue,fe=z.execContext;if(fe.contextValue.store instanceof xs)return a.lookup(fe.contextValue.store,le,fe.fragmentMatcher,JSON.stringify(fe.variableValues),he.id)}}),this.executeSubSelectedArray=Ha(function(z){return q.call(r,z)},{makeCacheKey:function(z){var le=z.field,he=z.array,fe=z.execContext;if(fe.contextValue.store instanceof xs)return a.lookup(fe.contextValue.store,le,he,JSON.stringify(fe.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(De(De({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.variables,a=e.previousResult,o=e.returnPartialData,f=o===void 0?!0:o,E=e.rootId,S=E===void 0?"ROOT_QUERY":E,P=e.fragmentMatcherFunction,q=e.config,z=hn(n);i=jr({},Ki(z),i);var le={store:r,dataIdFromObject:q&&q.dataIdFromObject,cacheRedirects:q&&q.cacheRedirects||{}},he=this.executeStoreQuery({query:n,rootValue:{type:"id",id:S,generated:!0,typename:"Query"},contextValue:le,variableValues:i,fragmentMatcher:P}),fe=he.missing&&he.missing.length>0;return fe&&!f&&he.missing.forEach(function(Pe){if(!Pe.tolerable)throw new Ne(8)}),a&&Ke(a,he.result)&&(he.result=a),{result:he.result,complete:!fe}},t.prototype.executeStoreQuery=function(e){var r=e.query,n=e.rootValue,i=e.contextValue,a=e.variableValues,o=e.fragmentMatcher,f=o===void 0?Zp:o,E=Wi(r),S=Ht(r),P=Si(S),q={query:r,fragmentMap:P,contextValue:i,variableValues:a,fragmentMatcher:f};return this.executeSelectionSet({selectionSet:E.selectionSet,rootValue:n,execContext:q})},t.prototype.executeSelectionSet=function(e){var r=this,n=e.selectionSet,i=e.rootValue,a=e.execContext,o=a.fragmentMap,f=a.contextValue,E=a.variableValues,S={result:null},P=[],q=f.store.get(i.id),z=q&&q.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function le(he){var fe;return he.missing&&(S.missing=S.missing||[],(fe=S.missing).push.apply(fe,he.missing)),he.result}return n.selections.forEach(function(he){var fe;if(!!Ei(he,E))if(Cr(he)){var Pe=le(r.executeField(q,z,he,a));typeof Pe!="undefined"&&P.push((fe={},fe[fr(he)]=Pe,fe))}else{var Ce=void 0;if(gr(he))Ce=he;else if(Ce=o[he.name.value],!Ce)throw new Ne(9);var Oe=Ce.typeCondition&&Ce.typeCondition.name.value,Me=!Oe||a.fragmentMatcher(i,Oe,f);if(Me){var Ae=r.executeSelectionSet({selectionSet:Ce.selectionSet,rootValue:i,execContext:a});Me==="heuristic"&&Ae.missing&&(Ae=De(De({},Ae),{missing:Ae.missing.map(function(Ge){return De(De({},Ge),{tolerable:!0})})})),P.push(le(Ae))}}}),S.result=Da(P),this.freezeResults,S},t.prototype.executeField=function(e,r,n,i){var a=i.variableValues,o=i.contextValue,f=n.name.value,E=cn(n,a),S={resultKey:fr(n),directives:Ts(n,a)},P=em(e,r,f,E,o,S);return Array.isArray(P.result)?this.combineExecResults(P,this.executeSubSelectedArray({field:n,array:P.result,execContext:i})):n.selectionSet?P.result==null?P:this.combineExecResults(P,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:P.result,execContext:i})):(Ld(n,P.result),this.freezeResults,P)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e.forEach(function(i){i.missing&&(n=n||[],n.push.apply(n,i.missing))}),{result:e.pop().result,missing:n}},t.prototype.executeSubSelectedArray=function(e){var r=this,n=e.field,i=e.array,a=e.execContext,o;function f(E){return E.missing&&(o=o||[],o.push.apply(o,E.missing)),E.result}return i=i.map(function(E){return E===null?null:Array.isArray(E)?f(r.executeSubSelectedArray({field:n,array:E,execContext:a})):n.selectionSet?f(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:E,execContext:a})):(Ld(n,E),E)}),this.freezeResults,{result:i,missing:o}},t}();function Ld(t,e){if(!t.selectionSet&&Kn(e))throw new Ne(10)}function Zp(){return!0}function Zv(t){invariant(isIdValue(t),11)}function em(t,e,r,n,i,a){var o=a.resultKey,f=a.directives,E=r;(n||f)&&(E=Ss(E,n,f));var S=void 0;if(t&&(S=t[E],typeof S=="undefined"&&i.cacheRedirects&&typeof e=="string")){var P=i.cacheRedirects[e];if(P){var q=P[r];q&&(S=q(t,n,{getCacheKey:function(z){var le=i.dataIdFromObject(z);return le&&Yn({id:le,typename:z.__typename})}}))}}return typeof S=="undefined"?{result:S,missing:[{object:t,fieldName:E,tolerable:!1}]}:(Vr(S)&&(S=S.json),{result:S})}var hu=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function ey(t){return new hu(t)}var tm=function(t){ln(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function rm(t,e){var r=new tm(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var nm=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,n=e.result,i=e.store,a=i===void 0?Fd():i,o=e.variables,f=e.dataIdFromObject,E=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:r,store:a,variables:o,dataIdFromObject:f,fragmentMatcherFunction:E})},t.prototype.writeResultToStore=function(e){var r=e.dataId,n=e.result,i=e.document,a=e.store,o=a===void 0?Fd():a,f=e.variables,E=e.dataIdFromObject,S=e.fragmentMatcherFunction,P=pt(i);try{return this.writeSelectionSetToStore({result:n,dataId:r,selectionSet:P.selectionSet,context:{store:o,processedData:{},variables:jr({},Ki(P),f),dataIdFromObject:E,fragmentMap:Si(Ht(i)),fragmentMatcherFunction:S}})}catch(q){throw rm(q,i)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,n=e.result,i=e.dataId,a=e.selectionSet,o=e.context,f=o.variables,E=o.store,S=o.fragmentMap;return a.selections.forEach(function(P){var q;if(!!Ei(P,f))if(Cr(P)){var z=fr(P),le=n[z];if(typeof le!="undefined")r.writeFieldToStore({dataId:i,value:le,field:P,context:o});else{var he=!1,fe=!1;P.directives&&P.directives.length&&(he=P.directives.some(function(mt){return mt.name&&mt.name.value==="defer"}),fe=P.directives.some(function(mt){return mt.name&&mt.name.value==="client"})),!he&&!fe&&o.fragmentMatcherFunction}}else{var Pe=void 0;gr(P)?Pe=P:(Pe=(S||{})[P.name.value],Re(Pe,3));var Ce=!0;if(o.fragmentMatcherFunction&&Pe.typeCondition){var Oe=i||"self",Me=Yn({id:Oe,typename:void 0}),Ae={store:new hu((q={},q[Oe]=n,q)),cacheRedirects:{}},Ge=o.fragmentMatcherFunction(Me,Pe.typeCondition.name.value,Ae);!sr()&&Ge==="heuristic",Ce=!!Ge}Ce&&r.writeSelectionSetToStore({result:n,selectionSet:Pe.selectionSet,dataId:i,context:o})}}),E},t.prototype.writeFieldToStore=function(e){var r,n=e.field,i=e.value,a=e.dataId,o=e.context,f=o.variables,E=o.dataIdFromObject,S=o.store,P,q,z=lt(n,f);if(!n.selectionSet||i===null)P=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var le=a+"."+z;P=this.processArrayValue(i,le,n.selectionSet,o)}else{var he=a+"."+z,fe=!0;if(fc(he)||(he="$"+he),E){var Pe=E(i);Re(!Pe||!fc(Pe),4),(Pe||typeof Pe=="number"&&Pe===0)&&(he=Pe,fe=!1)}Ud(he,n,o.processedData)||this.writeSelectionSetToStore({dataId:he,result:i,selectionSet:n.selectionSet,context:o});var Ce=i.__typename;P=Yn({id:he,typename:Ce},fe),q=S.get(a);var Oe=q&&q[z];if(Oe!==P&&Kn(Oe)){var Me=Oe.typename!==void 0,Ae=Ce!==void 0,Ge=Me&&Ae&&Oe.typename!==Ce;Re(!fe||Oe.generated||Ge,5),Re(!Me||Ae,6),Oe.generated&&(Ge?fe||S.delete(Oe.id):qd(Oe.id,P.id,S))}}q=S.get(a),(!q||!Ke(P,q[z]))&&S.set(a,De(De({},q),(r={},r[z]=P,r)))},t.prototype.processArrayValue=function(e,r,n,i){var a=this;return e.map(function(o,f){if(o===null)return null;var E=r+"."+f;if(Array.isArray(o))return a.processArrayValue(o,E,n,i);var S=!0;if(i.dataIdFromObject){var P=i.dataIdFromObject(o);P&&(E=P,S=!1)}return Ud(E,n,i.processedData)||a.writeSelectionSetToStore({dataId:E,result:o,selectionSet:n,context:i}),Yn({id:E,typename:o.__typename},S)})},t}();function fc(t){return t[0]==="$"}function qd(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),a=!1;Object.keys(n).forEach(function(f){var E=n[f],S=i[f];Kn(E)&&fc(E.id)&&Kn(S)&&!Ke(E,S)&&qd(E.id,S.id,r)&&(a=!0)}),r.delete(t);var o=De(De({},n),i);return Ke(o,i)?a:(r.set(e,o),!0)}function Ud(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var im={fragmentMatcher:new Xp,dataIdFromObject:sm,addTypename:!0,resultCaching:!0,freezeResults:!1};function sm(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var am=Object.prototype.hasOwnProperty,$d=function(t){ln(e,t);function e(r,n,i){var a=t.call(this,Object.create(null))||this;return a.optimisticId=r,a.parent=n,a.transaction=i,a}return e.prototype.toObject=function(){return De(De({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return am.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(hu),om=function(t){ln(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new pc(Fe),n.silenceBroadcast=!1,n.config=De(De({},im),r),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new xs:new hu,n.optimisticData=n.data,n.storeWriter=new nm,n.storeReader=new Jp({cacheKeyRoot:n.cacheKeyRoot,freezeResults:r.freezeResults});var i=n,a=i.maybeBroadcastWatch;return n.maybeBroadcastWatch=Ha(function(o){return a.call(n,o)},{makeCacheKey:function(o){if(!o.optimistic&&!o.previousResult&&i.data instanceof xs)return i.cacheKeyRoot.lookup(o.query,JSON.stringify(o.variables))}}),n}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:i,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(r){var n=this;return this.watches.add(r),function(){n.watches.delete(r)}},e.prototype.evict=function(r){throw new Ne(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var n=[],i=0,a=this.optimisticData;a instanceof $d;)a.optimisticId===r?++i:n.push(a),a=a.parent;if(i>0){for(this.optimisticData=a;n.length>0;){var o=n.pop();this.performTransaction(o.transaction,o.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,n){var i=this,a=i.data,o=i.silenceBroadcast;this.silenceBroadcast=!0,typeof n=="string"&&(this.data=this.optimisticData=new $d(n,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=o,this.data=a}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,n){return this.performTransaction(r,n)},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=On(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(Ip);function um(t){return new zr(function(e,r){var n=s(e,[]);return new lr(function(i){var a;return Promise.resolve(n).then(function(o){return t(o,e.getContext())}).then(e.setContext).then(function(){a=r(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){a&&a.unsubscribe()}})})}var lm=Xe(3033),cm={includeQuery:!0,includeExtensions:!1},dm={accept:"*/*","content-type":"application/json"},hm={method:"POST"},pm={http:cm,headers:dm,options:hm},Gd=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n},mm=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=r,Promise.reject(n)}}).then(function(r){return e.status>=300&&Gd(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Gd(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName)+"'."),r})}},fm=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new Ne(1)}},gm=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},vm=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=De({},e.options,{headers:e.headers,credentials:e.credentials}),a=e.http;r.forEach(function(q){i=De({},i,q.options,{headers:De({},i.headers,q.headers)}),q.credentials&&(i.credentials=q.credentials),a=De({},a,q.http)});var o=t.operationName,f=t.extensions,E=t.variables,S=t.query,P={operationName:o,variables:E};return a.includeExtensions&&(P.extensions=f),a.includeQuery&&(P.query=(0,lm.S)(S)),{options:i,body:P}},gc=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=new Ne(2);throw n.parseError=i,n}return r},ym=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")},Hd=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.includeExtensions,a=t.useGETForQueries,o=s(t,["uri","fetch","includeExtensions","useGETForQueries"]);fm(n),n||(n=fetch);var f={http:{includeExtensions:i},options:o.fetchOptions,credentials:o.credentials,headers:o.headers};return new zr(function(E){var S=ym(E,r),P=E.getContext(),q={};if(P.clientAwareness){var z=P.clientAwareness,le=z.name,he=z.version;le&&(q["apollographql-client-name"]=le),he&&(q["apollographql-client-version"]=he)}var fe=De({},q,P.headers),Pe={http:P.http,options:P.fetchOptions,credentials:P.credentials,headers:fe},Ce=vm(E,pm,f,Pe),Oe=Ce.options,Me=Ce.body,Ae;if(!Oe.signal){var Ge=gm(),mt=Ge.controller,Et=Ge.signal;Ae=mt,Ae&&(Oe.signal=Et)}var Qt=function(wn){return wn.kind==="OperationDefinition"&&wn.operation==="mutation"};if(a&&!E.query.definitions.some(Qt)&&(Oe.method="GET"),Oe.method==="GET"){var bt=bm(S,Me),Oi=bt.newURI,lo=bt.parseError;if(lo)return au(lo);S=Oi}else try{Oe.body=gc(Me,"Payload")}catch(wn){return au(wn)}return new lr(function(wn){return n(S,Oe).then(function(wr){return E.setContext({response:wr}),wr}).then(mm(E)).then(function(wr){return wn.next(wr),wn.complete(),wr}).catch(function(wr){wr.name!=="AbortError"&&(wr.result&&wr.result.errors&&wr.result.data&&wn.next(wr.result),wn.error(wr))}),function(){Ae&&Ae.abort()}})})};function bm(t,e){var r=[],n=function(q,z){r.push(q+"="+encodeURIComponent(z))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=gc(e.variables,"Variables map")}catch(q){return{parseError:q}}n("variables",i)}if(e.extensions){var a=void 0;try{a=gc(e.extensions,"Extensions map")}catch(q){return{parseError:q}}n("extensions",a)}var o="",f=t,E=t.indexOf("#");E!==-1&&(o=t.substr(E),f=t.substr(0,E));var S=f.indexOf("?")===-1?"?":"&",P=f+S+r.join("&")+o;return{newURI:P}}var ty=function(t){ln(e,t);function e(r){return t.call(this,Hd(r).request)||this}return e}(zr),_m=Xe(5175),pu=Xe(1669),wm=Xe(6030);class mu extends Error{constructor(e,r){super(e);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class ei extends mu{constructor(e,r,n){super(e,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const fu=Symbol.toStringTag,Bd=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[fu]==="URLSearchParams",Ci=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[fu]);function vc(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[fu]==="FormData"}const Em=t=>typeof t=="object"&&t[fu]==="AbortSignal",Fs=`\r
`,yc="-".repeat(2),km=Buffer.byteLength(Fs),Vd=t=>`${yc}${t}${yc}${Fs.repeat(2)}`;function jd(t,e,r){let n="";return n+=`${yc}${t}${Fs}`,n+=`Content-Disposition: form-data; name="${e}"`,Ci(r)&&(n+=`; filename="${r.name}"${Fs}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${Fs.repeat(2)}`}const Sm=()=>(0,da.randomBytes)(8).toString("hex");async function*Tm(t,e){for(const[r,n]of t)yield jd(e,r,n),Ci(n)?yield*n.stream():yield n,yield Fs;yield Vd(e)}function Rm(t,e){let r=0;for(const[n,i]of t)r+=Buffer.byteLength(jd(e,n,i)),Ci(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=km;return r+=Buffer.byteLength(Vd(e)),r}const Qr=Symbol("Body internals");class bc{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Bd(e)?e=Buffer.from(e.toString()):Ci(e)||Buffer.isBuffer(e)||(pu.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ft||(vc(e)?(n=`NodeFetchFormDataBoundary${Sm()}`,e=ft.Readable.from(Tm(e,n))):e=Buffer.from(String(e)))),this[Qr]={body:e,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof ft&&e.on("error",i=>{const a=i instanceof mu?i:new ei(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[Qr].error=a})}get body(){return this[Qr].body}get bodyUsed(){return this[Qr].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:r,byteLength:n}=await gu(this);return e.slice(r,r+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[Qr].body&&this[Qr].body.type||"",r=await this.buffer();return new wm([r],{type:e})}async json(){const e=await gu(this);return JSON.parse(e.toString())}async text(){return(await gu(this)).toString()}buffer(){return gu(this)}}Object.defineProperties(bc.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function gu(t){if(t[Qr].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Qr].disturbed=!0,t[Qr].error)throw t[Qr].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(Ci(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof ft))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){if(t.size>0&&n+i.length>t.size){const a=new ei(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(a),a}n+=i.length,r.push(i)}}catch(i){throw i instanceof mu?i:new ei(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new ei(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new ei(`Premature close of server response while trying to fetch ${t.url}`)}const zd=(t,e)=>{let r,n,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ft&&typeof i.getBoundary!="function"&&(r=new ft.PassThrough({highWaterMark:e}),n=new ft.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Qr].body=r,i=n),i},Qd=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Bd(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ci(t)?t.type||null:Buffer.isBuffer(t)||pu.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:vc(t)?`multipart/form-data; boundary=${e[Qr].boundary}`:t instanceof ft?null:"text/plain;charset=UTF-8",Cm=t=>{const{body:e}=t;return e===null?0:Ci(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:vc(e)?Rm(t[Qr].boundary):null},Pm=(t,{body:e})=>{e===null?t.end():Ci(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},vu=typeof Cn.validateHeaderName=="function"?Cn.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},_c=typeof Cn.validateHeaderValue=="function"?Cn.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Pi extends URLSearchParams{constructor(e){let r=[];if(e instanceof Pi){const n=e.raw();for(const[i,a]of Object.entries(n))r.push(...a.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!pu.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||pu.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(vu(n),_c(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,a){switch(i){case"append":case"set":return(o,f)=>(vu(o),_c(o,String(f)),URLSearchParams.prototype[i].call(a,String(o).toLowerCase(),String(f)));case"delete":case"has":case"getAll":return o=>(vu(o),URLSearchParams.prototype[i].call(a,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e){for(const r of this.keys())e(this.get(r),r)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{const n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}}Object.defineProperties(Pi.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Nm(t=[]){return new Pi(t.reduce((e,r,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return vu(e),_c(e,String(r)),!0}catch{return!1}}))}const Am=new Set([301,302,303,307,308]),Wd=t=>Am.has(t),ti=Symbol("Response internals");class xn extends bc{constructor(e=null,r={}){super(e,r);const n=r.status||200,i=new Pi(r.headers);if(e!==null&&!i.has("Content-Type")){const a=Qd(e);a&&i.append("Content-Type",a)}this[ti]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[ti].url||""}get status(){return this[ti].status}get ok(){return this[ti].status>=200&&this[ti].status<300}get redirected(){return this[ti].counter>0}get statusText(){return this[ti].statusText}get headers(){return this[ti].headers}get highWaterMark(){return this[ti].highWaterMark}clone(){return new xn(zd(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,r=302){if(!Wd(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new xn(null,{headers:{location:new URL(e).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(xn.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const Im=t=>{if(t.search)return t.search;const e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""},ri=Symbol("Request internals"),yu=t=>typeof t=="object"&&typeof t[ri]=="object";class Ba extends bc{constructor(e,r={}){let n;yu(e)?n=new URL(e.url):(n=new URL(e),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||yu(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const a=r.body?r.body:yu(e)&&e.body!==null?zd(e):null;super(a,{size:r.size||e.size||0});const o=new Pi(r.headers||e.headers||{});if(a!==null&&!o.has("Content-Type")){const E=Qd(a,this);E&&o.append("Content-Type",E)}let f=yu(e)?e.signal:null;if("signal"in r&&(f=r.signal),f!==null&&!Em(f))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[ri]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:f},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[ri].method}get url(){return(0,vi.format)(this[ri].parsedURL)}get headers(){return this[ri].headers}get redirect(){return this[ri].redirect}get signal(){return this[ri].signal}clone(){return new Ba(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Ba.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const Om=t=>{const{parsedURL:e}=t[ri],r=new Pi(t[ri].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){const f=Cm(t);typeof f=="number"&&!Number.isNaN(f)&&(n=String(f))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");const a=Im(e);return{path:e.pathname+a,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class Dm extends mu{constructor(e,r="aborted"){super(e,r)}}const Mm=new Set(["data:","http:","https:"]);async function wc(t,e){return new Promise((r,n)=>{const i=new Ba(t,e),a=Om(i);if(!Mm.has(a.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${a.protocol.replace(/:$/,"")}" is not supported.`);if(a.protocol==="data:"){const le=_m(i.url),he=new xn(le,{headers:{"Content-Type":le.typeFull}});r(he);return}const o=(a.protocol==="https:"?_s:Cn).request,{signal:f}=i;let E=null;const S=()=>{const le=new Dm("The operation was aborted.");n(le),i.body&&i.body instanceof ft.Readable&&i.body.destroy(le),!(!E||!E.body)&&E.body.emit("error",le)};if(f&&f.aborted){S();return}const P=()=>{S(),z()},q=o(a);f&&f.addEventListener("abort",P);const z=()=>{q.abort(),f&&f.removeEventListener("abort",P)};q.on("error",le=>{n(new ei(`request to ${i.url} failed, reason: ${le.message}`,"system",le)),z()}),q.on("response",le=>{q.setTimeout(0);const he=Nm(le.rawHeaders);if(Wd(le.statusCode)){const Me=he.get("Location"),Ae=Me===null?null:new URL(Me,i.url);switch(i.redirect){case"error":n(new ei(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),z();return;case"manual":if(Ae!==null)try{he.set("Location",Ae)}catch(Ge){n(Ge)}break;case"follow":{if(Ae===null)break;if(i.counter>=i.follow){n(new ei(`maximum redirect reached at: ${i.url}`,"max-redirect")),z();return}const Ge={headers:new Pi(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(le.statusCode!==303&&i.body&&e.body instanceof ft.Readable){n(new ei("Cannot follow redirect with body being a readable stream","unsupported-redirect")),z();return}(le.statusCode===303||(le.statusCode===301||le.statusCode===302)&&i.method==="POST")&&(Ge.method="GET",Ge.body=void 0,Ge.headers.delete("content-length")),r(wc(new Ba(Ae,Ge))),z();return}default:}}le.once("end",()=>{f&&f.removeEventListener("abort",P)});let fe=(0,ft.pipeline)(le,new ft.PassThrough,Me=>{n(Me)});process.version<"v12.10"&&le.on("aborted",P);const Pe={url:i.url,status:le.statusCode,statusText:le.statusMessage,headers:he,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},Ce=he.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Ce===null||le.statusCode===204||le.statusCode===304){E=new xn(fe,Pe),r(E);return}const Oe={flush:Tr.Z_SYNC_FLUSH,finishFlush:Tr.Z_SYNC_FLUSH};if(Ce==="gzip"||Ce==="x-gzip"){fe=(0,ft.pipeline)(fe,Tr.createGunzip(Oe),Me=>{n(Me)}),E=new xn(fe,Pe),r(E);return}if(Ce==="deflate"||Ce==="x-deflate"){(0,ft.pipeline)(le,new ft.PassThrough,Ae=>{n(Ae)}).once("data",Ae=>{(Ae[0]&15)==8?fe=(0,ft.pipeline)(fe,Tr.createInflate(),Ge=>{n(Ge)}):fe=(0,ft.pipeline)(fe,Tr.createInflateRaw(),Ge=>{n(Ge)}),E=new xn(fe,Pe),r(E)});return}if(Ce==="br"){fe=(0,ft.pipeline)(fe,Tr.createBrotliDecompress(),Me=>{n(Me)}),E=new xn(fe,Pe),r(E);return}E=new xn(fe,Pe),r(E)}),Pm(q,i)})}let Va;const xm={};function Fm(t){Va=t.globalState}const Kd=(t,e)=>{if(!Va)throw new Error("Persistent store not initialized.");return Va.get(t+":"+e,xm)},Yd=(t,e,r)=>{if(!Va)throw new Error("Persistent store not initialized.");return Va.update(t+":"+e,r)};var Lm=Xe(6149);const Xd=qm();function qm(t=process.env.HTTPS_PROXY){if(!t)return _s.globalAgent;try{const{hostname:e,port:r,username:n,password:i}=new vi.URL(t),a=n&&i&&`${n}:${i}`;return(0,Lm.httpsOverHttp)({proxy:{host:e,port:r,proxyAuth:a}})}catch(e){return u.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),_s.globalAgent}}var Um=Object.defineProperty,ts=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Um(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Jd="Try again?",$m="Cancel",Zd="Sign in",Gm="Don't show again",eh="prompt for sign in",th="login",rh=["read:user","user:email","repo"];var gt;(function(t){t.github="github",t["github-enterprise"]="github-enterprise"})(gt||(gt={}));class Hm{constructor(e){this._telemetry=e,ts(this,"_githubAPI"),ts(this,"_sessionId"),ts(this,"_githubEnterpriseAPI"),ts(this,"_enterpriseSessionId"),ts(this,"_disposables"),ts(this,"_onDidInitialize",new u.EventEmitter),ts(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(u.authentication.onDidChangeSessions(()=>{this.isAuthenticated(gt.github)||this.initialize(gt.github),!this.isAuthenticated(gt["github-enterprise"])&&Qs()&&this.initialize(gt["github-enterprise"])}))}async initialize(e,r=!1){if(e===gt["github-enterprise"]&&!Qs()){C.debug("GitHub Enterprise provider selected without URI.","Authentication");return}let n;try{n=await u.authentication.getSession(e,rh,{createIfNone:!1,forceNewSession:r})}catch(i){if(!(r&&i.message==="User did not consent to login."))throw i}if(n){e===gt.github?this._sessionId=n.id:this._enterpriseSessionId=n.id;const i=await this.createHub(n.accessToken,e);e===gt.github?this._githubAPI=i:this._githubEnterpriseAPI=i,await this.setCurrentUser(i),this._onDidInitialize.fire()}else C.debug(`No GitHub${Ec(e)} token found.`,"Authentication")}async recreate(){await this.initialize(gt.github,!0),Qs()&&await this.initialize(gt["github-enterprise"],!0)}async reset(){this._githubAPI=void 0,this._githubEnterpriseAPI=void 0,await this.initialize(gt.github),Qs()&&await this.initialize(gt["github-enterprise"])}isAuthenticated(e){return e===gt.github?!!this._githubAPI:!!this._githubEnterpriseAPI}getHub(e){return e===gt.github?this._githubAPI:this._githubEnterpriseAPI}async getHubOrLogin(e){var r,n;return e===gt.github?(r=this._githubAPI)!=null?r:await this.login(e):(n=this._githubEnterpriseAPI)!=null?n:await this.login(e)}async showSignInNotification(e){if(Kd(eh,th)===!1)return;if(await u.window.showInformationMessage(`In order to use the Pull Requests functionality, you must sign in to GitHub${Ec(e)}`,Zd,Gm)===Zd)return await this.login(e);Yd(eh,th,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async login(e){this._telemetry.sendTelemetryEvent("auth.start");const r=`Error signing in to GitHub${Ec(e)}`;let n=!0,i;for(;n;){try{const a=await this.getSessionOrLogin(e);i=await this.createHub(a,e)}catch(a){C.appendLine(`${r}: ${a}`),a instanceof Error&&a.stack&&C.appendLine(a.stack)}i?n=!1:n=await u.window.showErrorMessage(r,Jd,$m)===Jd}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}isCurrentUser(e){var r,n,i,a;return((n=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:n.login)===e||((a=(i=this._githubEnterpriseAPI)==null?void 0:i.currentUser)==null?void 0:a.login)==e}getCurrentUser(e){const r=this.getHub(e);return(r==null?void 0:r.octokit)&&(r==null?void 0:r.currentUser)}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(e){const r=await u.authentication.getSession(e,rh,{createIfNone:!0});return e===gt.github?this._sessionId=r.id:this._enterpriseSessionId=r.id,r.accessToken}async createHub(e,r){let n="https://api.github.com",i;r===gt["github-enterprise"]&&(i=$c()),i&&(n=`${i.scheme}://${i.authority}/api/v3`);const a=new Ea({request:{agent:Xd},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`,baseUrl:n});i&&(n=`${i.scheme}://${i.authority}/api`);const o=new Ga({link:Bm(n,e||""),cache:new om,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),f={octokit:a,graphql:o};return await this.setCurrentUser(f),f}dispose(){this._disposables.forEach(e=>e.dispose())}}const Bm=(t,e)=>um((r,{headers:n})=>({headers:{...n,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Hd({uri:`${t}/graphql`,fetch:wc}));function Ec(t){return t===gt.github?"":" Enterprise"}let nh=!1;const ih=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(nh)return u.Uri.parse(e);if(await u.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return nh=!0,u.Uri.parse(e)}const r=t instanceof u.Uri?t:u.Uri.parse(t.host);return r.authority==="github.com"?u.Uri.parse("https://api.github.com"):u.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof u.Uri?t:u.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var Vm=Object.defineProperty,jm=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class kc{constructor(){jm(this,"_servers",new Map().set("github.com",!0))}async isGitHub(e){if(e===null||e.path.endsWith(".wiki"))return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,n]=await kc.getOptions(e,"HEAD","/rate_limit");let i=!1;try{const o=(await wc(r.toString(),n)).headers.get("x-github-request-id");return i=o!=null,i}catch(a){return C.appendLine(`No response from host ${e}: ${a.message}`,"GitHubServer"),i}finally{C.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,r="GET",n,i){const a={"user-agent":"GitHub VSCode Pull Requests"};i&&(a.authorization=`token ${i}`);const o=u.Uri.joinPath(await ih.getApiHost(e),ih.getApiPath(e,n));return[o,{hostname:o.authority,port:443,method:r,headers:a,agent:Xd}]}}class bu{constructor(e,r,n){this.remoteName=e,this.url=r,this.gitProtocol=n}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}get authProviderId(){var e;return this.host===((e=$c())==null?void 0:e.authority)?gt["github-enterprise"]:gt.github}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function sh(t,e,r){if(!e)return null;const n=new Sn(e);return r&&n.update({type:r.type}),n.host?new bu(t,e,n):null}function Ls(t){const e=[];for(const r of t.state.remotes){const n=[];r.fetchUrl&&n.push(r.fetchUrl),r.pushUrl&&r.pushUrl!==r.fetchUrl&&n.push(r.pushUrl),n.forEach(i=>{const a=sh(r.name,i);a&&e.push(a)})}return e}const Sc="github.pullRequest.pullNotification.show",ja="github.pullRequest.repos";function zm(t){t.globalState.setKeysForSync([Sc])}var Qm=Xe(9593),Wm=Xe.n(Qm),_u=Xe(7228);const ah=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function oh(t){return t.match(ah)}function Km(t){return!!oh(t.body)}async function uh(t,e,r=!0){const n=t[2],i=t[3],a=t[5],o=Number(t[6])-1,f=t[8]?Number(t[8])-1:o;let E;for(const P of e.folderManagers){const q=P.getGitHubRemotes();for(const z of q)if(n.toLowerCase()===z.owner.toLowerCase()&&i.toLowerCase()===z.repositoryName.toLowerCase()){E=P;break}if(E)break}if(!E)return;const S=u.Uri.joinPath(E.repository.rootUri,a);try{await u.workspace.fs.stat(S)}catch(P){return}return{file:S,start:o,end:f}}async function Ym(t,e){const r=oh(t.body);if(!r){u.window.showInformationMessage("Issue has no link.");return}const n=await uh(r,e,!1);if(!n)return u.env.openExternal(u.Uri.parse(r[0]));const i=await u.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=new u.Range(n.start,0,n.end,a.text.length);return u.window.showTextDocument(n.file,{selection:o})}var Xm=Object.defineProperty,lh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ry=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,za=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Tc=/\@([^\s]+)/,Jm=150,Xt="githubIssues",qs="queries",Zm="default",ch="workingIssueBranch",Rc="issueBranchTitle",dh="useBranchForIssues",ef="workingIssueFormatScm";function Cc(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function tf(t,e,r,n){var i;const a=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(r);if(a)return a;{let o,f,E;const S=e.getGitHubRemotes();for(const P of S){if(n)o=n.owner?n.owner:P.owner,f=n.name?n.name:P.repositoryName,E=n.issueNumber;else{const q=Cc(r.match(za));q&&(!q.name||!q.owner)&&(o=P.owner,f=P.repositoryName)}if(o&&f&&E!==void 0){let q=await e.resolveIssue(o,f,E,!!n.commentNumber);if(q||(q=await e.resolvePullRequest(o,f,E)),q){let z;return t.resolvedIssues.has(e.repository.rootUri.path)?z=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,z=new(Wm())(50)),z.set(r,q),q}}}}}function rf(t,e){let r;return t.commitContributions.forEach(n=>{e.toLowerCase()===n.repoNameWithOwner.toLowerCase()&&(r=n.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class nf extends u.CompletionItem{constructor(){super(...arguments);lh(this,"login"),lh(this,"uri")}}function Pc(t,e){const r=new u.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const n=rf(e,t.owner+"/"+t.repo);return(e.location||n)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),n&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${n}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function sf(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function af(t,e){const r=sf(t);let n="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(n="000000"),`<span style="color:#${n};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function hh(t,e,r){let n=t.search(e),i=0;for(;n>=0&&n<t.length;){let a;if(n===0||t.charAt(n-1)!=="&"){const f=t.substring(n).match(e);if(f){const E=await r(f);E&&(a=t.slice(0,n)+E,t=a+t.slice(n+f[0].length))}}i=a?a.length:n+1;const o=t.substring(i).search(e);n=o>0?i+o:o}return t}function ph(t,e){return hh(t,za,async r=>{const n=Cc(r);if(n){const i=gh(n);return(!n.owner||!n.name)&&(n.owner=e.remote.owner,n.name=e.remote.repositoryName),`[${i}](https://github.com/${n.owner}/${n.name}/issues/${n.issueNumber})`}})}async function of(t,e){return hh(t,ah,async r=>{const n=await uh(r,e);if(n){const i=await u.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=[n.file,{selection:{start:{line:n.start,character:0},end:{line:n.end,character:a.text.length}}}],f=u.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(o))}`);return`[${r[0]}](${f} "Open ${n.file.fsPath}")`}})}const wu=200;async function Nc(t,e,r,n){const i=new u.MarkdownString(void 0,!0);i.isTrusted=!0;const a=new Date(t.createdAt),o=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${o}](https://github.com/${o}) on ${a.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const f=_u.parse(t.title,{renderer:new Oc}).trim();i.appendMarkdown(`${lf(t)} **${f}** [#${t.number}](${t.html_url})  
`);let E=_u.parse(t.body,{renderer:new Oc});if(i.appendMarkdown(`  
`),E=E.length>wu?E.substr(0,wu)+"...":E,E=await ph(E,t),E=await of(E,r),i.appendMarkdown(E+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(S=>{i.appendMarkdown(`[${af(S.color,S.name)}](https://github.com/${o}/labels/${encodeURIComponent(S.name)}) `)}),t.item.comments&&n){for(const S of t.item.comments)if(S.databaseId===n){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${S.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${S.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let P=_u.parse(S.body.length>wu?S.body.substr(0,wu)+"...":S.body,{renderer:new Oc});P=await ph(P,t),i.appendMarkdown(P)}}return i}function uf(t){switch(t.state){case At.Open:return t instanceof ii?"$(git-pull-request)":"$(issues)";case At.Closed:return t instanceof ii?"$(git-pull-request)":"$(issue-closed)";case At.Merged:return"$(git-merge)"}}function lf(t){if(t instanceof ii)return uf(t);switch(t.state){case At.Open:return'<span style="color:#22863a;">$(issues)</span>';case At.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const mh="HEAD",cf=1,df=2,hf=3,fh=4,Eu=new Map([["upstream",cf],["ups",df],["origin",hf]]);async function pf(t,e){var r,n,i;const a=((r=t.state.HEAD)==null?void 0:r.upstream)&&!Eu.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let o;const f=t.state.remotes.map(q=>({name:q.name,remote:q})).filter(q=>(q.name===a&&(o=q.remote),Eu.has(q.name))).sort((q,z)=>{var le,he;const fe=(le=Eu.get(q.name))!=null?le:fh,Pe=(he=Eu.get(z.name))!=null?he:fh;return fe-Pe});a&&f.push({name:a,remote:o});const E=[mh];((n=t.state.HEAD)==null?void 0:n.name)&&t.state.HEAD.name!==mh&&E.unshift((i=t.state.HEAD)==null?void 0:i.name);let S,P;for(let q=0;q<E.length&&!S;q++)for(let z=0;z<f.length&&!S;z++){const le=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${f[z].name}/${E[q]}`,count:1})).filter(he=>he.remote&&he.name);le&&le.length>0&&(S=le[0],P=f[z].remote)}return P}async function Ac(t,e,r){var n,i;let a,o;if(r)a=r,((n=u.window.activeTextEditor)==null?void 0:n.document.uri.fsPath)===a.fsPath&&(o=u.window.activeTextEditor.selection);else if(!e&&u.window.activeTextEditor)a=u.window.activeTextEditor.document.uri,o=u.window.activeTextEditor.selection;else if(e)a=e.document.uri,o=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from.",originalFile:void 0};const f=zh(t,a);if(!f)return{permalink:void 0,error:"The current file isn't part of repository.",originalFile:a};let E,S;try{const he=await f.log({maxEntries:1,path:a.fsPath});if(he.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file.",originalFile:a};E=he[0],S=he[0].hash}catch(he){S=(i=f.state.HEAD)==null?void 0:i.commit}const P=new Promise(he=>{var fe;if((fe=f.state.HEAD)==null?void 0:fe.upstream)for(const Pe of f.state.remotes)f.state.HEAD.upstream.remote===Pe.name&&he(Pe);he(void 0)});let q=E?await Promise.race([pf(f,E),new Promise(he=>{setTimeout(()=>{he(P)},2e3)})]):await P;if((!q||!q.fetchUrl)&&(q=await P,!q||!q.fetchUrl))return{permalink:void 0,error:"There is no suitable remote.",originalFile:a};const z=a.path.substring(f.rootUri.path.length),le=o?`#L${o.start.line+1}-L${o.end.line+1}`:"";return{permalink:`https://github.com/${new Sn(q.fetchUrl).nameWithOwner}/blob/${S}${z}${le}`,error:void 0,originalFile:a}}function mf(t){const e=/[~^:;'".,~#?%*[\]@\\{}]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const ff=/\$\{(.*?)\}/g;async function ku(t,e,r,n){return t.replace(ff,(i,a)=>{switch(a){case"user":return n||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${Us(e,r)}`:i;case"issueTitle":return e?e.title:i;case"repository":return r?r.repo:i;case"owner":return r?r.owner:i;case"sanitizedIssueTitle":return e?mf(e.title):i;default:return i}})}function Us(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),gh(r)}function gh(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function vh(t,e,r){var n;const i=await((n=e.currentIssue(t.repository.rootUri))==null?void 0:n.getCommitMessage());if(i)return t.repository.commit(i,{all:r})}const yh="Commit Staged",bh="Commit All";async function gf(t,e,r){var n,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const a=[];switch(t.repository.state.indexChanges&&a.push(yh),t.repository.state.workingTreeChanges&&a.push(bh),await u.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...a)){case yh:{await vh(t,r,!1);break}case bh:{await vh(t,r,!0);break}default:return!1}}if((n=t.repository.state.HEAD)==null?void 0:n.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let a;return t.repository.state.remotes.length===1?a=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(a=await u.window.showQuickPick(t.repository.state.remotes.map(o=>o.name),{placeHolder:"Remote to push to"})),a?(await t.repository.push(a,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(u.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function Ic(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await u.languages.getTokenInformationAtPosition(t,e)).type!==u.StandardTokenType.Comment)}async function _h(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:Ic(t,e)}function wh(t){const e=new vi.URLSearchParams(t.query).get("rootUri");return e?u.Uri.parse(e):void 0}class Oc extends _u.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,n,i){return e+" "}hr(){return""}list(e,r,n){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,n){return""}text(e){return e}link(e,r,n){return n+" "}}var vf=Object.defineProperty,Eh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Su extends Error{constructor(e){super(e);this.message=e,Eh(this,"name"),Eh(this,"stack")}}const Tu=new Uint8Array(256);let Ru=Tu.length;function yf(){return Ru>Tu.length-16&&(dl().randomFillSync(Tu),Ru=0),Tu.slice(Ru,Ru+=16)}const bf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _f(t){return typeof t=="string"&&bf.test(t)}const wf=_f,dr=[];for(let t=0;t<256;++t)dr.push((t+256).toString(16).substr(1));function Ef(t,e=0){const r=(dr[t[e+0]]+dr[t[e+1]]+dr[t[e+2]]+dr[t[e+3]]+"-"+dr[t[e+4]]+dr[t[e+5]]+"-"+dr[t[e+6]]+dr[t[e+7]]+"-"+dr[t[e+8]]+dr[t[e+9]]+"-"+dr[t[e+10]]+dr[t[e+11]]+dr[t[e+12]]+dr[t[e+13]]+dr[t[e+14]]+dr[t[e+15]]).toLowerCase();if(!wf(r))throw TypeError("Stringified UUID is invalid");return r}const kf=Ef;function Sf(t,e,r){t=t||{};const n=t.random||(t.rng||yf)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return kf(n)}const kh=Sf;var Tf=Object.defineProperty,Jt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Cu=class{constructor(t,e,r,n,i){Jt(this,"commentId"),Jt(this,"id"),Jt(this,"parent"),Jt(this,"body"),Jt(this,"originalBody"),Jt(this,"mode"),Jt(this,"author"),Jt(this,"label"),Jt(this,"commentReactions"),Jt(this,"contextValue"),this.parent=t,this.body=new u.MarkdownString(e),this.mode=u.CommentMode.Preview,this.author={name:n.login,iconPath:n.avatarUrl?u.Uri.parse(`${n.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=Cu.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Cu&&t.id===this.id&&(t.mode=u.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Cu&&t.id===this.id&&(t.mode=u.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let Wr=Cu;Jt(Wr,"idPool",0);class nr{constructor(e,r){Jt(this,"commentId"),Jt(this,"parent"),Jt(this,"body"),Jt(this,"mode"),Jt(this,"author"),Jt(this,"label"),Jt(this,"reactions"),Jt(this,"_rawComment"),Jt(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new u.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?u.Uri.parse(e.user.avatarUrl):void 0},jf(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const n=[];e.canEdit&&n.push("canEdit"),e.canDelete&&n.push("canDelete"),this.contextValue=n.join(","),this.parent=r}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof nr&&e.commentId===this.commentId&&(e.mode=u.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof nr&&e.commentId===this.commentId&&(e.mode=u.CommentMode.Preview,e.body=e._rawComment.body),e))}}var Rf=Object.defineProperty,rs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Dc(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class Sh{constructor(){rs(this,"_webview"),rs(this,"_disposables",[]),rs(this,"_waitForReady"),rs(this,"_onIsReady",new u.EventEmitter),rs(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;const r=(e=this._webview)==null?void 0:e.onDidReceiveMessage(async n=>{await this._onDidReceiveMessage(n)},null,this._disposables);r&&this._disposables.push(r)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var n;const i={seq:e.req,res:r};(n=this._webview)==null||n.postMessage(i)}async _throwError(e,r){var n;const i={seq:e.req,err:r};(n=this._webview)==null||n.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class Th extends Sh{constructor(e){super();this._extensionUri=e,rs(this,"viewType"),rs(this,"_view")}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},this._disposables.push(this._view.onDidDispose(()=>{this._webview=void 0,this._view=void 0}))}show(){this._view?this._view.show():u.commands.executeCommand(`${this.viewType}.focus`)}}var Cf=Object.defineProperty,ni=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Fn=class extends Sh{constructor(t,e,r,n,i=Fn._viewType){super();this._extensionUri=t,ni(this,"_panel"),ni(this,"_disposables",[]),ni(this,"_descriptionNode"),ni(this,"_item"),ni(this,"_folderRepositoryManager"),ni(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=n,this._panel=u.window.createWebviewPanel(i,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[u.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(a=>{if(this._folderRepositoryManager&&this._item){const o=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:o})}},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?u.ViewColumn.Beside:u.window.activeTextEditor?u.window.activeTextEditor.viewColumn:u.ViewColumn.One;if(Fn.currentPanel)Fn.currentPanel._panel.reveal(i,!0);else{const a=`Issue #${r.number.toString()}`;Fn.currentPanel=new Fn(t,i||u.ViewColumn.Active,a,e)}await Fn.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,n,i]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,C.debug("pr.initialize",Fn.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:n,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{u.window.showErrorMessage(ke(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":u.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(i,a){return e=(await i.getLabels(a)).filter(f=>!a.item.labels.some(E=>E.name===f.name)),e.map(f=>({label:f.name}))}const n=await u.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(n&&n.length){await this._item.addLabels(n.map(a=>a.label));const i=n.map(a=>e.find(o=>o.name===a.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){u.window.showErrorMessage(ke(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(ke(e))}}webviewDebug(t){C.debug(t.args,Fn.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(`Editing description failed: ${ke(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(`Editing title failed: ${ke(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(ke(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){u.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),u.window.showErrorMessage(ke(r))})})}close(t){u.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){Fn.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose(),this._webview=void 0;this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=Dc(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let Pu=Fn;ni(Pu,"ID","PullRequestOverviewPanel"),ni(Pu,"currentPanel"),ni(Pu,"_viewType","IssueOverview");var Pf=Object.defineProperty,$s=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Nf(t){return!!t.id&&!!t.milestone}const Ln=class extends Pu{constructor(t,e,r,n){super(t,e,r,n,Ln._viewType);$s(this,"_repositoryDefaultBranch"),$s(this,"_existingReviewers",[]),$s(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),sp(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(n.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:At.Merged})}))}static async createOrShow(t,e,r,n=!1){const i=n?u.ViewColumn.Beside:u.window.activeTextEditor?u.window.activeTextEditor.viewColumn:u.ViewColumn.One;if(Ln.currentPanel)Ln.currentPanel._panel.reveal(i,!0);else{const a=`Pull Request #${r.number.toString()}`;Ln.currentPanel=new Ln(t,i||u.ViewColumn.Active,a,e)}await Ln.currentPanel.update(e,r)}set _currentPanel(t){Ln.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}static scrollToReview(){this.currentPanel&&this.currentPanel._postMessage({command:"pr.scrollToPendingReview"})}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}getCurrentUserReviewState(t,e){const r=t.find(n=>n.reviewer.login===e.login);return r==null?void 0:r.state}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t),this._folderRepositoryManager.getBranchNameForPullRequest(t)]).then(e=>{var r,n;const[i,a,o,f,E,S,P]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=o,this._panel.title=`Pull Request #${t.number.toString()}`;const q=t.equals(this._folderRepositoryManager.activePullRequest),z=S.hasWritePermission,le=S.mergeMethodsAvailability,he=z||this._item.canEdit(),fe=u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Pe=Rh(le,fe);this._existingReviewers=Qh(E,a,i.author);const Ce=this._folderRepositoryManager.getCurrentUser(this._item),Me=i.base&&i.head&&!i.base.repositoryCloneUrl.equals(i.head.repositoryCloneUrl)&&Uc(),Ae=this.getCurrentUserReviewState(this._existingReviewers,Ce);C.debug("pr.initialize",Ln.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:a,isCurrentlyCheckedOut:q,isRemoteBaseDeleted:i.isRemoteBaseDeleted,base:i.base.label,isRemoteHeadDeleted:i.isRemoteHeadDeleted,isLocalHeadDeleted:!P,head:(n=(r=i.head)==null?void 0:r.label)!=null?n:"",repositoryDefaultBranch:o,canEdit:he,hasWritePermission:z,status:f||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:le,defaultMergeMethod:Pe,isIssue:!1,milestone:i.milestone,assignees:i.assignees,continueOnGitHub:Me,isAuthor:Ce.login===i.author.login,currentUserReviewState:Ae}})}).catch(e=>{u.window.showErrorMessage(ke(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergeability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink();case"pr.openOnGitHub":return to(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){if(!t)return[];const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],n=new Set([this._item.author.login,...this._existingReviewers.map(a=>a.reviewer.login)]),i=[];for(const a of t){const{login:o,name:f,isAuthor:E,isCommenter:S}=a;if(n.has(o))continue;const P=E&&S?"Recently edited and reviewed changes to these files":E?"Recently edited these files":S?"Recently reviewed changes to these files":"Suggested reviewer";i.push({label:o,description:f,detail:P,reviewer:a}),n.add(o)}for(const a of r)n.has(a.login)||i.push({label:a.login,description:a.name,reviewer:a});return i}getAssigneesQuickPickItems(t,e){var r,n;if(!e)return[];const i=new Set([...(n=(r=this._item.assignees)==null?void 0:r.map(o=>o.login))!=null?n:[]]),a=[];for(const o of e){const{login:f,name:E,isAuthor:S,isCommenter:P}=o;if(i.has(f))continue;const q=S&&P?"Recently edited and reviewed changes to these files":S?"Recently edited these files":P?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:f,description:E,detail:q,assignee:o}),i.add(f)}for(const o of t)i.has(o.login)||a.push({label:o.login,description:o.name,assignee:o});return a}async addReviewers(t){try{const e=await u.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0});if(e){await this._item.requestReview(e.map(n=>n.label));const r=e.map(n=>({reviewer:n.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(r),this._replyMessage(t,{added:r})}}catch(e){u.window.showErrorMessage(ke(e))}}async addMilestone(t){try{async function e(n){const i=await n.getMilestones();return i.items.length?i.items.map(a=>({label:a.milestone.title,id:a.milestone.id,milestone:a.milestone})):[{label:"No milestones created for this repository."}]}const r=await u.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&Nf(r)&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){u.window.showErrorMessage(ke(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(ke(e))}}async addAssignees(t){var e;try{const n=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],i=await u.window.showQuickPick(this.getAssigneesQuickPickItems(n,[]),{canPickMany:!0,matchOnDescription:!0});if(i){const a=i.map(o=>o.assignee);this._item.assignees=(e=this._item.assignees)==null?void 0:e.concat(a),await this._item.updateAssignees(a.map(o=>o.login)),this._replyMessage(t,{added:a})}}catch(r){u.window.showErrorMessage(ke(r))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(ke(e))}}async removeAssignee(t){var e,r,n;try{await this._item.deleteAssignees(t.args);const i=(r=(e=this._item.assignees)==null?void 0:e.findIndex(a=>a.login===t.args))!=null?r:-1;(n=this._item.assignees)==null||n.splice(i,1),this._replyMessage(t,{})}catch(i){u.window.showErrorMessage(ke(i))}}async applyPatch(t){try{const e=t.args.comment,n=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=L.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),a=new TextEncoder,o=u.Uri.parse(i);await u.workspace.fs.writeFile(o,a.encode(n[1])),await this._folderRepositoryManager.repository.apply(i,!0),await u.workspace.fs.delete(o)}catch(e){C.appendLine(`Applying patch failed: ${e}`),u.window.showErrorMessage(`Applying patch failed: ${ke(e)}`)}}async openDiff(t){try{const e=t.args.comment;return ii.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){C.appendLine(`Open diff view failed: ${ke(e)}`,Ln.ID)}}checkoutPullRequest(t){u.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:n}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,n).then(i=>{u.commands.executeCommand("pr.refreshList"),i.merged||u.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?At.Merged:At.Open})}).catch(i=>{u.window.showErrorMessage(`Unable to merge pull request. ${ke(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const a=this._item.head.ref;!(this._repositoryDefaultBranch===this._item.head.ref)&&!this._item.isRemoteHeadDeleted&&r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${a}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const a=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!a});const o=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!o})}if(u.env.remoteName==="codespaces"&&r.push({label:"Suspend Codespace",type:"suspend"}),!r.length){u.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const n=await u.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0}),i=[];if(n){const a=this._item.equals(this._folderRepositoryManager.activePullRequest),o=n.map(async f=>{switch(f.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),i.push(f.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(a){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await u.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0),i.push(f.type);case"remote":return i.push(f.type),this._folderRepositoryManager.repository.removeRemote(e.remote);case"suspend":return i.push(f.type),u.commands.executeCommand("github.codespaces.disconnectSuspend")}});await Promise.all(o),this.refreshPanel(),u.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:i})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{u.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{u.window.showErrorMessage(`Unable to set PR ready for review. ${ke(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),u.commands.executeCommand("pr.refreshList")},e=>{u.window.showErrorMessage(`Approving pull request failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{u.window.showErrorMessage(`Requesting changes failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}submitReview(t){this._item.submitReview(nn.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{u.window.showErrorMessage(`Submitting review failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}async copyPrLink(){await u.env.clipboard.writeText(this._item.html_url),u.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let en=Ln;$s(en,"ID","PullRequestOverviewPanel"),$s(en,"currentPanel"),$s(en,"_viewType","PullRequestOverview");function Rh(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(n=>t[n])}var Af=Object.defineProperty,Qa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class If{constructor(e,r,n,i){this.pullRequestModel=e,this._folderReposManager=r,this._commentController=n,this._sessionState=i,Qa(this,"_pendingCommentThreadAdds",[]),Qa(this,"_commentHandlerId"),Qa(this,"_commentThreadCache",{}),Qa(this,"_openPREditors",[]),Qa(this,"_disposables",[]),this._commentHandlerId=kh(),Dr(this._commentHandlerId,this),this.initializeThreadsInOpenEditors(),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangeReviewThreads(e=>this.onDidChangeReviewThreads(e))),this._disposables.push(u.window.onDidChangeVisibleTextEditors(async e=>{this.onDidChangeOpenEditors(e)})),this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(e=>{for(const r in this._commentThreadCache)this._commentThreadCache[r].forEach(n=>{Lh(n,e)})})),this._disposables.push(u.window.onDidChangeActiveTextEditor(e=>{this.refreshContextKey(e)})),this._disposables.push(this._sessionState.onDidChangeCommentsExpandState(e=>{for(const r of this.pullRequestModel.reviewThreadsCache){const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Rt.LEFT),i=this._commentThreadCache[n];if(!i){C.appendLine(`PullRequestCommentController> Thread with ID ${n} is no longer in cache`);continue}const a=i.findIndex(o=>o.gitHubThreadId===r.id);if(a>-1){const o=i[a];Au(o,r,e)}}}))}refreshContextKey(e){if(!e)return;const r=e.document.uri;if(r.scheme!=="pr")return;const n=Zt(r);!n||n.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}getPREditors(e){return e.filter(r=>{if(r.document.uri.scheme!=="pr")return!1;const n=Zt(r.document.uri);return!(!n||n.prNumber!==this.pullRequestModel.number)})}getCommentThreadCacheKey(e,r){return`${e}-${r?"original":"modified"}`}addThreadsForEditors(e){const r=this.pullRequestModel.reviewThreadsCache,n=me(r,i=>i.path);e.forEach(i=>{const{fileName:a,isBase:o}=Zt(i.document.uri);n[a]&&(this._commentThreadCache[this.getCommentThreadCacheKey(a,o)]=n[a].filter(f=>f.diffSide===Rt.LEFT&&o||f.diffSide===Rt.RIGHT&&!o).map(f=>{const E=new u.Range(new u.Position(f.line-1,0),new u.Position(f.line-1,0));return Ka(i.document.uri,E,f,this._commentController)}))})}initializeThreadsInOpenEditors(){const e=this.getPREditors(u.window.visibleTextEditors);this._openPREditors=e,this.addThreadsForEditors(e)}onDidChangeOpenEditors(e){const r=this.getPREditors(e),n=this._openPREditors.filter(a=>!r.includes(a)),i=r.filter(a=>!this._openPREditors.includes(a));this._openPREditors=r,n.forEach(a=>{const{fileName:o,isBase:f}=Zt(a.document.uri),E=this.getCommentThreadCacheKey(o,f);(this._commentThreadCache[E]||[]).forEach(P=>P.dispose()),delete this._commentThreadCache[E]}),i.length&&this.addThreadsForEditors(i)}onDidChangeReviewThreads(e){e.added.forEach(r=>{const n=r.path,i=this._pendingCommentThreadAdds.findIndex(f=>{const E=this.gitRelativeRootPath(f.uri.path)===r.path,S=f.range.start.line+1===r.line;return E&&S});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(f=>new nr(f,a)),this._pendingCommentThreadAdds.splice(i,1);else{const E=this.getPREditors(u.window.visibleTextEditors).find(S=>{const P=Zt(S.document.uri),q=r.diffSide===Rt.RIGHT&&!(P==null?void 0:P.isBase)||r.diffSide===Rt.LEFT&&(P==null?void 0:P.isBase);return(P==null?void 0:P.fileName)===n&&q});if(E){const S=new u.Range(new u.Position(r.line-1,0),new u.Position(r.line-1,0));a=Ka(E.document.uri,S,r,this._commentController)}}if(!a)return;const o=this.getCommentThreadCacheKey(r.path,r.diffSide===Rt.LEFT);this._commentThreadCache[o]?this._commentThreadCache[o].push(a):this._commentThreadCache[o]=[a]}),e.changed.forEach(r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Rt.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];Au(a,r)}}),e.removed.forEach(async r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Rt.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];this._commentThreadCache[n].splice(i,1),a.dispose()}})}hasCommentThread(e){if(e.uri.scheme!=="pr")return!1;const r=Zt(e.uri);return!(!r||r.prNumber!==this.pullRequestModel.number)}getCommentSide(e){const r=Zt(e.uri);return(r==null?void 0:r.isBase)?Rt.LEFT:Rt.RIGHT}async createOrReplyComment(e,r,n,i){const a=e.comments.length,o=n?!1:i!==void 0?i:this.pullRequestModel.hasPendingReview,f=this.optimisticallyAddComment(e,r,o);try{if(a)await this.reply(e,r,n);else{const E=this.gitRelativeRootPath(e.uri.path),S=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,E,e.range.start.line+1,S,n)}n&&await this.pullRequestModel.submitReview()}catch(E){u.window.showErrorMessage(`Creating comment failed: ${E}`),e.comments=e.comments.map(S=>(S instanceof Wr&&S.id===f&&(S.mode=u.CommentMode.Editing),S))}}reply(e,r,n){const i=e.comments[0];if(i instanceof nr)return this.pullRequestModel.createCommentReply(r,i._rawComment.graphNodeId,n);throw new Error("Cannot respond to temporary comment")}optimisticallyEditComment(e,r){const n=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new Wr(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof nr&&a.commentId===r.commentId?i:a),i.id}async editComment(e,r){if(r instanceof nr){const n=this.optimisticallyEditComment(e,r);try{await this.pullRequestModel.editReviewComment(r._rawComment,r.body instanceof u.MarkdownString?r.body.value:r.body)}catch(i){u.window.showErrorMessage(`Editing comment failed ${i}`),e.comments=e.comments.map(a=>a instanceof Wr&&a.id===n?new nr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){r instanceof nr?await this.pullRequestModel.deleteReviewComment(r.commentId):e.comments=e.comments.filter(n=>!(n instanceof Wr&&n.id===r.id)),await this.pullRequestModel.validateDraftMode()}gitRelativeRootPath(e){return L.relative(this._folderReposManager.repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n)await this.reply(e,r,!1);else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,a,e.range.start.line+1,o)}this.setContextKey(!0)}catch(a){u.window.showErrorMessage(`Starting a review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof Wr&&o.id===i&&(o.mode=u.CommentMode.Editing),o))}}async openReview(){await en.createOrShow(this._folderReposManager.context.extensionUri,this._folderReposManager,this.pullRequestModel),en.scrollToReview(),this._folderReposManager.telemetry.sendTelemetryEvent("pr.openDescription")}optimisticallyAddComment(e,r,n){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),a=new Wr(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,js(e)}async createCommentOnResolve(e,r){const n=await this.pullRequestModel.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.resolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.unresolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async toggleReaction(e,r){e.parent.uri.scheme==="pr"&&(e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this.pullRequestModel.addCommentReaction(e._rawComment.graphNodeId,r):await this.pullRequestModel.deleteCommentReaction(e._rawComment.graphNodeId,r))}setContextKey(e){u.commands.executeCommand("setContext","prInDraft",e)}dispose(){Object.keys(this._commentThreadCache).forEach(e=>{this._commentThreadCache[e].forEach(r=>r.dispose())}),ho(this._commentHandlerId),this._disposables.forEach(e=>e.dispose())}}var Of=Object.defineProperty,Ch=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Of(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Df{constructor(e,r){this.commentsController=e,this._sessionState=r,Ch(this,"_prCommentHandlers",{}),Ch(this,"_prCommentingRangeProviders",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const n=e.uri,i=Zt(n);return!i||!this._prCommentingRangeProviders[i.prNumber]?void 0:this._prCommentingRangeProviders[i.prNumber].provideCommentingRanges.bind(this._prCommentingRangeProviders[i.prNumber])(e,r)}async toggleReaction(e,r){const n=e.parent.uri,i=Zt(n);return!i||!this._prCommentHandlers[i.prNumber]||!this._prCommentHandlers[i.prNumber].handler.toggleReaction?void 0:this._prCommentHandlers[i.prNumber].handler.toggleReaction.bind(this._prCommentHandlers[i.prNumber].handler)(e,r)}registerCommentController(e,r,n){if(this._prCommentHandlers[e])return this._prCommentHandlers[e].refCount+=1,this._prCommentHandlers[e];const i=new If(r,n,this.commentsController,this._sessionState);return this._prCommentHandlers[e]={handler:i,refCount:1,dispose:()=>{!this._prCommentHandlers[e]||(this._prCommentHandlers[e].refCount-=1,this._prCommentHandlers[e].refCount===0&&(this._prCommentHandlers[e].handler.dispose(),delete this._prCommentHandlers[e]))}},this._prCommentHandlers[e]}registerCommentingRangeProvider(e,r){return this._prCommentingRangeProviders[e]=r,{dispose:()=>{delete this._prCommentingRangeProviders[e]}}}dispose(){Object.keys(this._prCommentHandlers).forEach(e=>{this._prCommentHandlers[e].handler.dispose()}),this._prCommentingRangeProviders={},this._prCommentHandlers={}}}var Mf=Xe(9967),xf=Xe.n(Mf),Ff=Object.defineProperty,gn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ff(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ph=20,Gs="GraphQL";var Gr;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(Gr||(Gr={}));const nt=class{constructor(t,e,r,n){this.remote=t,this._credentialStore=e,this._telemetry=r,this._sessionState=n,gn(this,"_initialized",!1),gn(this,"_hub"),gn(this,"_metadata"),gn(this,"_toDispose",[]),gn(this,"commentsController"),gn(this,"commentsHandler"),gn(this,"_pullRequestModels",new Map),gn(this,"isGitHubDotCom"),gn(this,"query",async i=>{var a;const o=this.hub&&this.hub.graphql;if(!o)return C.debug(`Not available for query: ${i}`,Gs),{data:null,loading:!1,networkStatus:Dt.error,stale:!1};C.debug(`Request: ${JSON.stringify(i,null,2)}`,Gs);let f;try{f=await o.query(i)}catch(E){if(i.query!==this.schema.GetChecks&&((a=E.message)==null?void 0:a.startsWith("GraphQL error: Resource protected by organization SAML enforcement.")))await this._credentialStore.recreate(),f=await o.query(i);else throw E}return C.debug(`Response: ${JSON.stringify(f,null,2)}`,Gs),f}),gn(this,"mutate",async i=>{const a=this.hub&&this.hub.graphql;if(!a)return C.debug(`Not available for query: ${i}`,Gs),{data:null,loading:!1,networkStatus:Dt.error,stale:!1};C.debug(`Request: ${JSON.stringify(i,null,2)}`,Gs);const o=await a.mutate(i);return C.debug(`Response: ${JSON.stringify(o,null,2)}`,Gs),o}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new Su("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=u.comments.createCommentController(`github-browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new Df(this.commentsController,this._sessionState),this._toDispose.push(this.commentsHandler),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return xf()}async getMetadata(){var t;if(C.debug("Fetch metadata - enter",nt.ID),this._metadata)return C.debug(`Fetch metadata ${(t=this._metadata.owner)==null?void 0:t.login}/${this._metadata.name} - done`,nt.ID),this._metadata;const{octokit:e,remote:r}=await this.ensure(),n=await e.repos.get({owner:r.owner,repo:r.repositoryName});return C.debug(`Fetch metadata ${r.owner}/${r.repositoryName} - done`,nt.ID),this._metadata={...n.data,currentUser:e.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=sh(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){C.appendLine(`Unable to resolve remote: ${t}`)}}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated(this.remote.authProviderId)?this._hub=this._credentialStore.getHub(this.remote.authProviderId):this._hub=await this._credentialStore.showSignInNotification(this.remote.authProviderId),this}async getDefaultBranch(){try{C.debug("Fetch default branch - enter",nt.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return C.debug("Fetch default branch - done",nt.ID),r.default_branch}catch(t){C.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,n,i;try{C.debug("Fetch repo permissions and available merge methods - enter",nt.ID);const{octokit:a,remote:o}=await this.ensure(),{data:f}=await a.repos.get({owner:o.owner,repo:o.repositoryName});return C.debug("Fetch repo permissions and available merge methods - done",nt.ID),{hasWritePermission:(e=(t=f.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=f.allow_merge_commit)!=null?r:!1,squash:(n=f.allow_squash_merge)!=null?n:!1,rebase:(i=f.allow_rebase_merge)!=null?i:!1}}}catch(a){C.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${a}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{C.debug("Fetch all pull requests - enter",nt.ID);const{octokit:e,remote:r}=await this.ensure(),n=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:Ph,page:t||1}),i=!!n.headers.link&&n.headers.link.indexOf('rel="next"')>-1;if(!n.data)return C.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${n.status}`),{items:[],hasMorePages:!1};const a=n.data.map(o=>o.head.repo?this.createOrUpdatePullRequestModel(ns(o,this)):(C.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(o=>o!==null);return C.debug("Fetch all pull requests - done",nt.ID),{items:a,hasMorePages:i}}catch(e){if(C.appendLine(`Fetching all pull requests failed: ${e}`,nt.ID),e.code===404)u.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{C.debug("Fetch pull requests for branch - enter",nt.ID);const{octokit:e,remote:r}=await this.ensure(),i=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:`${r.owner}:${t}`})).data.map(a=>this.createOrUpdatePullRequestModel(ns(a,this))).filter(a=>a!==null);return C.debug("Fetch pull requests for branch - done",nt.ID),i}catch(e){if(C.appendLine(`Fetching pull requests for branch failed: ${e}`,nt.ID),e.code===404)u.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new bu(e.repositoryName,e.repositoryUrl,new Sn(e.repositoryUrl));t=new nt(r,this._credentialStore,this._telemetry,this._sessionState)}return t}async getIssuesForUserByMilestone(t){var e;try{C.debug("Fetch all issues - enter",nt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.GetMilestones,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});C.debug("Fetch all issues - done",nt.ID);const o=[];let f=this;return a&&a.repository.milestones&&a.repository.milestones.nodes&&a.repository.milestones.nodes.forEach(E=>{const S=Fc(E);if(S){const P=[];E.issues.edges.forEach(q=>{const z=qc(q.node,this);f=this.getRepoForIssue(f,z),P.push(new hr(f,f.remote,z))}),o.push({milestone:S,issues:P})}}),{items:o,hasMorePages:a.repository.milestones.pageInfo.hasNextPage}}catch(r){C.appendLine(`GithubRepository> Unable to fetch issues: ${r}`);return}}async getIssuesWithoutMilestone(t){var e;try{C.debug("Fetch issues without milestone- enter",nt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.IssuesWithoutMilestone,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});C.debug("Fetch issues without milestone - done",nt.ID);const o=[];let f=this;return a&&a.repository.issues.edges&&a.repository.issues.edges.forEach(E=>{if(E.node.id){const S=qc(E.node,this);f=this.getRepoForIssue(f,S),o.push(new hr(f,f.remote,S))}}),{items:o,hasMorePages:a.repository.issues.pageInfo.hasNextPage}}catch(r){C.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${r}`);return}}async getIssues(t,e){try{C.debug("Fetch issues with query - enter",nt.ID);const{query:r,schema:n}=await this.ensure(),{data:i}=await r({query:n.Issues,variables:{query:`${e} type:issue`}});C.debug("Fetch issues with query - done",nt.ID);const a=[];let o=this;return i&&i.search.edges&&i.search.edges.forEach(f=>{if(f.node.id){const E=qc(f.node,this);o=this.getRepoForIssue(o,E),a.push(new hr(o,o.remote,E))}}),{items:a,hasMorePages:i.search.pageInfo.hasNextPage}}catch(r){C.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{C.debug("Fetch max issue - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return C.debug("Fetch max issue - done",nt.ID),n&&n.repository.issues.edges.length===1?n.repository.issues.edges[0].node.number:void 0}catch(t){C.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{C.debug("Fetch viewer permission - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return C.debug("Fetch viewer permission - done",nt.ID),eg(n)}catch(t){return C.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),Gr.Unknown}}async fork(){try{C.debug("Fork repository",nt.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){C.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{C.debug("Fetch repository fork details - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetRepositoryForkDetails,variables:{owner:e.owner,name:e.repositoryName}});return C.debug("Fetch repository fork details - done",nt.ID),n.repository}catch(t){C.appendLine(`GithubRepository> Unable to fetch repository fork details: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{C.debug(`Fetch pull request category ${t} - enter`,nt.ID);const{octokit:r,remote:n}=await this.ensure(),i=await r.users.getAuthenticated({}),a=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:o,headers:f}=await r.search.issuesAndPullRequests({q:tg(a.data.full_name,i.data.login,t),per_page:Ph,page:e||1}),E=[];o.items.forEach(z=>{E.push(new Promise(async(le,he)=>{const fe=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:z.number});le(fe)}))});const S=!!f.link&&f.link.indexOf('rel="next"')>-1,q=(await Promise.all(E)).map(z=>z.data.head.repo?this.createOrUpdatePullRequestModel(ns(z.data,this)):(C.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(z=>z!==null);return C.debug(`Fetch pull request category ${t} - done`,nt.ID),{items:q,hasMorePages:S}}catch(r){if(C.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)u.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new ii(this._telemetry,this,this.remote,t),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(ns(r,this))}async getPullRequest(t){try{C.debug(`Fetch pull request ${t} - enter`,nt.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return C.debug(`Fetch pull request ${t} - done`,nt.ID),this.createOrUpdatePullRequestModel(Hh(i,this))}catch(e){C.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{C.debug(`Fetch issue ${t} - enter`,nt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:e?i.IssueWithComments:i.Issue,variables:{owner:n.owner,name:n.repositoryName,number:t}});return C.debug(`Fetch issue ${t} - done`,nt.ID),new hr(this,n,Hh(a,this))}catch(r){C.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();C.debug(`List branches for ${t}/${e} - enter`,nt.ID);try{let n=[];const i=new Date().getTime();for await(const a of r.paginate.iterator("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100}))if(n.push(...a.data.map(o=>o.name)),new Date().getTime()-i>5e3)break;return C.debug(`List branches for ${t}/${e} - done`,nt.ID),n}catch(n){throw C.debug(`List branches for ${t}/${e} failed`,nt.ID),n}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){C.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){C.debug("Fetch mentionable users - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.mentionableUsers.nodes.map(f=>({login:f.login,avatarUrl:f.avatarUrl,name:f.name,url:f.url,email:f.email}))),i=o.data.repository.mentionableUsers.pageInfo.hasNextPage,n=o.data.repository.mentionableUsers.pageInfo.endCursor}catch(o){return C.debug(`Unable to fetch mentionable users: ${o}`,nt.ID),a}while(i);return a}async getAssignableUsers(){C.debug("Fetch assignable users - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.assignableUsers.nodes.map(f=>({login:f.login,avatarUrl:f.avatarUrl,name:f.name,url:f.url,email:f.email}))),i=o.data.repository.assignableUsers.pageInfo.hasNextPage,n=o.data.repository.assignableUsers.pageInfo.endCursor}catch(o){return C.debug(`Unable to fetch assignable users: ${o}`,nt.ID),o.graphQLErrors&&o.graphQLErrors.length>0&&o.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&u.window.showWarningMessage(`GitHub user features will not work. ${o.graphQLErrors[0].message}`),a}while(i);return a}async compareCommits(t,e){const{remote:r,octokit:n}=await this.ensure(),{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let Hs=nt;gn(Hs,"ID","GitHubRepository");var Lf=Object.defineProperty,qf=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Nh="github-pr-remote",Ah="github-pr-owner-number",Ih=/branch\.(.+)\.github-pr-owner-number/,Uf=/branch\.(.+)\.remote/,Mt=class{static async checkoutFromFork(t,e,r){const n=await Mt.calculateUniqueBranchNameForPR(t,e);r||(C.appendLine(`Branch ${n} is from a fork. Create a remote first.`,Mt.ID),r=await Mt.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${n}`;C.debug(`Fetch ${r}/${e.head.ref}:${n} - start`,Mt.ID),await t.fetch(r,i,1),C.debug(`Fetch ${r}/${e.head.ref}:${n} - done`,Mt.ID),await t.checkout(n),await t.setBranchUpstream(n,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),Mt.associateBranchWithPullRequest(t,e,n)}static async fetchAndCheckout(t,e,r){var n;if(!r.validatePullRequestModel("Checkout pull request failed"))return;const i=Mt.getHeadRemoteForPullRequest(e,r),a=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!i||a)return Mt.checkoutFromFork(t,r,i&&i.remoteName);const o=r.head.ref,f=i.remoteName;let E;try{if(E=await t.getBranch(o),((n=t.state.HEAD)==null?void 0:n.name)===E.name){C.appendLine(`Tried to checkout ${o}, but branch is already checked out.`,Mt.ID);return}if(C.debug(`Checkout ${o}`,Mt.ID),await t.checkout(o),!E.upstream){const S=`refs/remotes/${f}/${o}`;await t.setBranchUpstream(o,S)}E.behind!==void 0&&E.behind>0&&E.ahead===0&&(C.debug("Pull from upstream",Mt.ID),await t.pull())}catch(S){C.appendLine(`Branch ${f}/${o} doesn't exist on local disk yet.`,Mt.ID);const P=`refs/remotes/${f}/${o}`;C.appendLine(`Fetch tracked branch ${P}`,Mt.ID),await t.fetch(f,o,1);const q=await t.getBranch(P);await t.createBranch(o,!0,q.commit),await t.setBranchUpstream(o,P),await this.unshallow(t)}await Mt.associateBranchWithPullRequest(t,r,o)}static async unshallow(t){try{await t.pull(!0)}catch(e){C.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const r=Mt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=o=>n.filter(({key:f})=>o===f).map(({value:f})=>f)[0],a=n.map(o=>{const f=Ih.exec(o.key);return{branch:f&&f.length?f[1]:null,value:o.value}}).filter(o=>o.branch&&o.value===r);if(a&&a.length){const o=a[0].branch;await t.checkout(o);const f=i(`branch.${o}.remote`),E=i(`branch.${o}.merge`);await t.fetch(f,E);const S=await t.getBranch(a[0].branch);return S.behind!==void 0&&S.behind>0&&S.ahead===0&&(C.debug("Pull from upstream",Mt.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=Mt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=n.map(a=>{const o=Ih.exec(a.key);return{branch:o&&o.length?o[1]:null,value:a.value}}).find(a=>!!a.branch&&a.value===r);if(i){const a=i.branch;try{const o=`branch.${a}.remote`,f=n.filter(q=>q.key===o).map(q=>q.value);let E;f.length&&(E=f[0]);let S=!1;if(E){const q=`remote.${E}.github-pr-remote`;n.filter(le=>le.key===q&&le.value).length&&(S=!0)}let P;return S&&(P=n.some(q=>!!(Uf.exec(q.key)&&q.key!==`branch.${a}.remote`&&q.value===E))),{branch:a,remote:E,createdForPullRequest:S,remoteInUse:P}}catch(o){return{branch:a}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,n,i]=e;return{owner:r,repositoryName:n,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Ah}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),n=await t.getConfig(r);return Mt.parsePullRequestMetadata(n)}catch(r){return}}static async createRemote(t,e,r){C.appendLine(`create remote for ${r}.`,Mt.ID);const n=Ls(t);for(const a of n)if(new Sn(a.url).equals(r))return a.remoteName;const i=Mt.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(i,r.toString()),await t.setConfig(`remote.${i}.${Nh}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{C.debug(`Check if remote '${e}' is created for pull request - start`,Mt.ID);const r=await t.getConfig(`remote.${e}.${Nh}`);return C.debug(`Check if remote '${e}' is created for pull request - end`,Mt.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let n=r,i=1;for(;;)try{await t.getBranch(n),n=`${r}-${i++}`}catch(a){break}return n}static getUniqueRemoteName(t,e){let r=e,n=1;const i=Ls(t);for(;i.find(a=>a.remoteName===r);)r=`${e}${n++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){C.appendLine(`associate ${r} with Pull Request #${e.number}`,Mt.ID);const n=`branch.${r}.${Ah}`;await t.setConfig(n,Mt.buildPullRequestMetadata(e))}};let vn=Mt;qf(vn,"ID","PullRequestGitHelper");var $f=Object.defineProperty,Pt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Gf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Oh extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Hf extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Ar="githubPullRequests",Wa="remotes",Dh="ReposManagerStateContext";var tn;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(tn||(tn={}));const Mh="No Milestone";var xh;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(xh||(xh={}));const yn=class{constructor(t,e,r,n,i,a){this.context=t,this._repository=e,this.telemetry=r,this._git=n,this._credentialStore=i,this._sessionState=a,Pt(this,"_subs"),Pt(this,"_activePullRequest"),Pt(this,"_activeIssue"),Pt(this,"_githubRepositories"),Pt(this,"_allGitHubRemotes",[]),Pt(this,"_mentionableUsers"),Pt(this,"_fetchMentionableUsersPromise"),Pt(this,"_assignableUsers"),Pt(this,"_fetchAssignableUsersPromise"),Pt(this,"_gitBlameCache",{}),Pt(this,"_githubManager"),Pt(this,"_repositoryPageInformation",new Map),Pt(this,"_onDidMergePullRequest",new u.EventEmitter),Pt(this,"onDidMergePullRequest",this._onDidMergePullRequest.event),Pt(this,"_onDidChangeActivePullRequest",new u.EventEmitter),Pt(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),Pt(this,"_onDidChangeActiveIssue",new u.EventEmitter),Pt(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),Pt(this,"_onDidLoadRepositories",new u.EventEmitter),Pt(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),Pt(this,"_onDidChangeRepositories",new u.EventEmitter),Pt(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),Pt(this,"_onDidChangeAssignableUsers",new u.EventEmitter),Pt(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),Pt(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new kc,this._subs.push(u.workspace.onDidChangeConfiguration(async o=>{o.affectsConfiguration(`${Ar}.${Wa}`)&&await this.updateRepositories()})),this.setUpCompletionItemProvider(),this.cleanStoredRepoState()}cleanStoredRepoState(){const t=new Date().valueOf()-30*864e5,e=this.context.globalState.get(ja);if(e==null?void 0:e.repos){let r=!1;Object.keys(e.repos).forEach(n=>{var i;((i=e.repos[n].stateModifiedTime)!=null?i:0)<t&&(r=!0,delete e.repos[n])}),r&&this.context.globalState.update(ja,e)}}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Ls(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((n,i,a)=>r[i])).catch(r=>(C.appendLine(`Resolving GitHub remotes failed: ${r}`),u.window.showErrorMessage(`Resolving GitHub remotes failed: ${ke(r)}`),[]))}async getActiveGitHubRemotes(t){const e=u.workspace.getConfiguration(Ar).get(Wa);return e?(e.forEach(r=>{t.some(n=>n.remoteName===r)||C.appendLine(`No remote with name '${r}' found.`)}),C.debug(`Displaying configured remotes: ${e.join(", ")}`,yn.ID),e.map(r=>t.find(n=>n.remoteName===r)).filter(r=>!!r)):(C.appendLine("Unable to read remotes setting"),Promise.resolve([]))}setUpCompletionItemProvider(){let t,e=[],r=[];u.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(n,i,a)=>{try{const o=JSON.parse(n.uri.query);if(xt(o.extensionId,kn)!==0)return;const f=n.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!f||f.isEmpty)return;let E=[];const S={};let P={},q,z;const le=u.window.visibleTextEditors;if(le.length){const Me=le.find(Ae=>Ae.document.uri.scheme==="pr");if(Me){const Ae=Zt(Me.document.uri);q=Ae.prNumber,z=Ae.remoteName}else this._activePullRequest&&(q=this._activePullRequest.number,z=this._activePullRequest.remote.remoteName);if(t&&q&&q===t.number)return r}const he=new Promise(async Me=>{if(q&&z){if(C.debug("get Timeline Events and parse users",yn.ID),t&&t.number===q)return e;const Ae=this._githubRepositories.find(Ge=>Ge.remote.remoteName===z);Ae&&(t=await Ae.getPullRequest(q),e=await t.getTimelineEvents()),E=Zf(e),Me()}Me()}),fe=new Promise(async Me=>{if(le.length)try{C.debug("git blame and parse users",yn.ID);const Ae=L.resolve(le[0].document.uri.fsPath);let Ge;this._gitBlameCache[Ae]?Ge=this._gitBlameCache[Ae]:(Ge=await this.repository.blame(Ae),this._gitBlameCache[Ae]=Ge);const mt=Ge.split(`
`);for(const Et of mt){const Qt=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(Et);if(Qt&&Qt.length===2){const bt=Qt[1].trim();S[bt]=!0}}}catch(Ae){C.debug(Ae,yn.ID)}Me()}),Pe=new Promise(async Me=>{C.debug("get mentionable users",yn.ID),P=await this.getMentionableUsers(),Me()});await Promise.all([he,fe,Pe]),r=[];const Ce={};C.debug("prepare user suggestions",yn.ID),E.forEach(Me=>{Ce[Me.login]||(Ce[Me.login]=Me)});const Oe={};for(const Me in P)for(const Ae of P[Me])if(!Ce[Ae.login]&&!Oe[Ae.login]){Oe[Ae.login]=!0;let Ge=2;(S[Ae.login]||Ae.name&&S[Ae.name])&&(Ge=1),Ce[Ae.login]&&(Ge=0),r.push({label:Ae.login,insertText:Ae.login,filterText:`${Ae.login}`+(Ae.name&&Ae.name!==Ae.login?`_${Ae.name.toLowerCase().replace(" ","_")}`:""),sortText:`${Ge}_${Ae.login}`,detail:Ae.name,kind:u.CompletionItemKind.User,login:Ae.login,uri:this.repository.rootUri})}for(const Me in Ce)Oe[Me]||r.push({label:Ce[Me].login,insertText:`${Ce[Me].login}`,filterText:`${Ce[Me].login}`+(Ce[Me].name&&Ce[Me].name!==Ce[Me].login?`_${Ce[Me].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${Ce[Me].login}`,detail:Ce[Me].name,kind:u.CompletionItemKind.User,login:Ce[Me].login,uri:this.repository.rootUri});return C.debug("done",yn.ID),r}catch(o){return[]}},resolveCompletionItem:async(n,i)=>{try{const a=await this.getPullRequestDefaults(),o=await this.resolveUser(a.owner,a.repo,typeof n.label=="string"?n.label:n.label.label);o&&(n.documentation=Pc(a,o))}catch(a){}return n}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await u.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),C.appendLine("Found GitHub remote")):(await u.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),C.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){if(this._git.state==="uninitialized"){C.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated(gt.github)||this._credentialStore.isAuthenticated(gt["github-enterprise"]);u.commands.executeCommand("setContext","github:authenticated",r);const n=[],i=[];return e.filter(o=>this._credentialStore.isAuthenticated(o.authProviderId)).forEach(o=>{const f=this.createGitHubRepository(o,this._credentialStore);i.push(f.resolveRemote()),n.push(f)}),Promise.all(i).then(async o=>{const f=this._githubRepositories;this._githubRepositories=n,f.forEach(S=>S.dispose());const E=f.length!==this._githubRepositories.length||!f.every(S=>this._githubRepositories.some(P=>P.remote.equals(S.remote)));if(this._githubRepositories.length&&E&&await this.checkIfMissingUpstream()){this.updateRepositories(t);return}this.activePullRequest&&this.getMentionableUsers(E,!0),this.getAssignableUsers(E),this._onDidLoadRepositories.fire(r||!e.length?tn.RepositoriesLoaded:tn.NeedsAuthentication),t||this._onDidChangeRepositories.fire()})}async checkIfMissingUpstream(){var t;try{const r=await(await this.getOrigin()).getMetadata();if(r.fork&&r.parent){const n=new Sn(r.parent.git_url);if(!this._githubRepositories.some(a=>a.remote.owner===n.owner&&a.remote.repositoryName===n.repositoryName)){const o=!this.repository.state.remotes.some(f=>f.name==="upstream")?"upstream":(t=r.parent.owner)==null?void 0:t.login;if(o)return await this.repository.addRemote(o,r.parent.clone_url),!0}}}catch(e){C.appendLine(`Missing upstream check failed: ${e}`)}return!1}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}getMentionableUsersFromGlobalState(){C.appendLine("Trying to use globalState for mentionable users.");const t=this.context.globalState.get(ja);if(t){const e={};if(this._githubRepositories.every(n=>{var i;const a=`${n.remote.owner}/${n.remote.repositoryName}`;return t.repos[a]?(e[n.remote.repositoryName]=(i=t.repos[a].mentionableUsers)!=null?i:[],!0):!1}))return C.appendLine(`Using globalState mentionable users for ${Object.keys(e).length}.`),e}C.appendLine("No globalState for mentionable users.")}createFetchMentionableUsersPromise(){const t={};return new Promise(e=>{const r=this._githubRepositories.map(async n=>{const i=await n.getMentionableUsers();t[n.remote.remoteName]=i});Promise.all(r).then(()=>{this._mentionableUsers=t,this._fetchMentionableUsersPromise=void 0;const n=this.context.globalState.get(ja,{repos:{}});this._githubRepositories.forEach(i=>{const a=`${i.remote.owner}/${i.remote.repositoryName}`;n.repos[a]||(n.repos[a]={}),n.repos[a].mentionableUsers=t[i.remote.remoteName],n.repos[a].stateModifiedTime=new Date().valueOf()}),this.context.globalState.update(ja,n),e(t)})})}async getMentionableUsers(t,e){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;let r=this.getMentionableUsersFromGlobalState();return e&&!this._fetchMentionableUsersPromise&&r?r:this._fetchMentionableUsersPromise?this._fetchMentionableUsersPromise:(this._fetchMentionableUsersPromise=this.createFetchMentionableUsersPromise(),r!=null?r:this._fetchMentionableUsersPromise)}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(n=>{const i=this._githubRepositories.map(async a=>{const o=await a.getAssignableUsers();e[a.remote.remoteName]=o.sort(Vh),r.push(...o)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,n(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(n=>n.type===Or.Head&&n.name!==void 0).map(n=>n.name).map(async n=>{const i=await vn.getMatchingPullRequestMetadataForBranch(this.repository,n);if(i){const{owner:a,prNumber:o}=i,f=t.find(E=>E.remote.owner.toLocaleLowerCase()===a.toLocaleLowerCase());if(f){const E=await f.getPullRequest(o);if(E)return E.localBranchName=n,E}}return Promise.resolve(null)});return Promise.all(r).then(n=>n.filter(i=>i!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(E=>E.remote.owner===(e==null?void 0:e.owner)&&E.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:n,octokit:i}=await r.ensure();let a=!1,o=1,f=[];do{const E=await i.issues.listLabelsForRepo({owner:n.owner,repo:n.repositoryName,per_page:100,page:o});f=f.concat(E.data.map(S=>({name:S.name,color:S.color}))),f=f.sort((S,P)=>S.name.localeCompare(P.name)),a=!!E.headers.link&&E.headers.link.indexOf('rel="next"')>-1,o+=1}while(a);return f}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!r)return;await vn.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:o,value:f})=>/^branch.*\.remote$/.test(o)&&f===r)||await this.repository.removeRemote(r)),this.telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,n=Wt.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const a=()=>this.totalFetchedPages.get(e)||0,o=q=>this.totalFetchedPages.set(e,q);for(const q of this._githubRepositories){const z=q.remote.url.toString()+e;this._repositoryPageInformation.get(z)||this._repositoryPageInformation.set(z,{pullRequestPage:0,hasMorePages:null})}let f=0;const E={hasMorePages:!1,items:[]},S=q=>{f++,q&&(E.items=E.items.concat(q.items),E.hasMorePages=q.hasMorePages)},P=this._githubRepositories.filter(q=>{const z=this._repositoryPageInformation.get(q.remote.url.toString()+e);return z&&(t.fetchNextPage===!1||z.hasMorePages!==!1)});for(let q=0;q<P.length;q++){const z=P[q],le=z.remote.url.toString()+e,he=this._repositoryPageInformation.get(le),fe=async Pe=>{switch(r){case 0:return n===Wt.All?z.getAllPullRequests(Pe):z.getPullRequestsForCategory(i||"",Pe);case 1:return z.getIssuesForUserByMilestone(he.pullRequestPage);case 2:return z.getIssuesWithoutMilestone(he.pullRequestPage);case 3:return z.getIssues(he.pullRequestPage,i)}};if(t.fetchNextPage?(he.pullRequestPage++,S(await fe(he.pullRequestPage)),o(a()+1)):(he.pullRequestPage===0&&(he.pullRequestPage=1),(await Promise.all(Array.from({length:he.pullRequestPage}).map((Ce,Oe)=>fe(Oe+1)))).forEach(Ce=>S(Ce))),he.hasMorePages=E.hasMorePages,E.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&f>=a()))return a()===0&&o(f),{items:E.items,hasMorePages:he.hasMorePages,hasUnsearchedRepositories:q<P.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const n=t.toString()+(r||"");return this.fetchPagedData(e,n,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const n=await this.fetchPagedData(t,"issuesKey",1,Wt.All,r);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,Wt.All,r);n.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:Mh},issues:i.items})}return n}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,Wt.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),r=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"PULL_REQUEST_TEMPLATE/*.md")),n=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...r,...n]}async getPullRequestDefaults(t){var e;if(!t&&!this.repository.state.HEAD)throw new Oh(this.repository);const r=await this.getOrigin(t),n=await r.getMetadata(),i=(e=u.workspace.getConfiguration(Ar).inspect(Wa))==null?void 0:e.defaultValue,a=u.workspace.getConfiguration(Ar).get(Wa),o=!a||(i==null?void 0:i.every((E,S)=>a[S]===E)),f=n.fork&&n.parent&&o?n.parent:await(this.findRepo(Vs("upstream"))||r).getMetadata();return{owner:f.owner.login,repo:f.name,base:f.default_branch}}async getMetadata(t){const e=this.findRepo(Vs(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:n}=await e.getCommit(r);return n}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new Gf(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(Vs(e.remote));if(!i){const a=(await this.getAllGitHubRemotes()).find(o=>o.remoteName===e.remote);if(a)return new Hs(a,this._credentialStore,this.telemetry,this._sessionState);throw C.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new Hf(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[r,...n]=this._githubRepositories;return n.length&&(this.findRepo(Vs("origin"))||this.findRepo(Bf))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const n=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!n)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await n.createPullRequest(t),a=t.head.indexOf(":"),o=t.head.slice(a+1);return await vn.associateBranchWithPullRequest(this._repository,i,o),this.telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await u.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await u.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await u.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await u.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(n.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw C.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this.telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(ke(i))}}async createIssue(t){try{const e=this._githubRepositories.find(a=>a.remote.owner===t.owner&&a.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),n=zf(r,e),i=new hr(e,e.remote,n);return this.telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){C.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this.telemetry.sendTelemetryErrorEvent("issue.create.failure"),u.window.showWarningMessage(`Creating issue failed: ${ke(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const n={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(n),this.telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){C.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this.telemetry.sendTelemetryErrorEvent("issue.assign.failure"),u.window.showWarningMessage(`Assigning issue failed: ${ke(r)}`)}}getCurrentUser(t){return Ni(this._credentialStore.getCurrentUser(t.githubRepository.remote.authProviderId),t.githubRepository)}async mergePullRequest(t,e,r,n){const{octokit:i,remote:a}=await t.githubRepository.ensure(),o=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,f=this.repository.state.HEAD&&this.repository.state.HEAD.commit,E=t.head&&t.head.sha,S=this.repository.state.workingTreeChanges.length>0;if(o===E){if(f!==E){const{ahead:P}=this.repository.state.HEAD;if(P&&await u.window.showWarningMessage(`You have ${P} unpushed ${P>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(S&&await u.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:r,commit_title:e,merge_method:n||u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:a.owner,repo:a.repositoryName,pull_number:t.number}).then(P=>(this.telemetry.sendTelemetryEvent("pr.merge.success"),this._onDidMergePullRequest.fire(),P.data)).catch(P=>{throw this.telemetry.sendTelemetryErrorEvent("pr.merge.failure"),P})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const a=i.key,o=/^branch\.(.*)\.(.*)$/.exec(a);if(o&&o.length===3){const f=o[1];e.has(f)||e.set(f,{});const E=e.get(f);if(o[2]==="remote"&&(E.remote=i.value),o[2]==="github-pr-owner-number"){const S=vn.parsePullRequestMetadata(i.value);E.metadata=S}e.set(f,E)}});const r=[];e.forEach((i,a)=>{if(i.metadata){const o=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(o?o.owner===i.metadata.owner&&o.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||r.push({label:`${a}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const n=await Promise.all(r.map(async i=>{const a=i.metadata,o=this._githubRepositories.find(P=>P.remote.owner.toLowerCase()===a.owner.toLowerCase()&&P.remote.repositoryName.toLowerCase()===a.repositoryName.toLowerCase());if(!o)return i;const{remote:f,query:E,schema:S}=await o.ensure();try{const{data:P}=await E({query:S.PullRequestState,variables:{owner:f.owner,name:f.repositoryName,number:a.prNumber}});i.legacy=P.repository.pullRequest.state!=="OPEN"}catch{}return i}));return n.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),n}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const i=n.key;let a=/^branch\.(.*)\.(.*)$/.exec(i);if(a&&a.length===3){const o=a[1];if(a[2]==="remote"){const f=n.value;e.has(f)||e.set(f,{branches:new Set}),e.get(f).branches.add(o)}}if(a=/^remote\.(.*)\.(.*)$/.exec(i),a&&a.length===3){const o=a[1];e.has(o)||e.set(o,{branches:new Set});const f=e.get(o);a[2]==="github-pr-remote"&&(f.createdForPullRequest=n.value==="true"),a[2]==="url"&&(f.url=n.value)}});const r=[];return e.forEach((n,i)=>{if(n.branches.size===0){let a=n.createdForPullRequest?"":"Not created by GitHub Pull Request extension";n.url&&(a=a?a+" "+n.url:n.url),r.push({label:i,description:a,picked:n.createdForPullRequest,remote:i})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=u.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(i=>i.picked),e.busy=!1;let n=!0;e.onDidAccept(async()=>{if(n){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async o=>{await this.repository.deleteBranch(o.label,!0)})),e.busy=!1}catch(o){e.hide(),u.window.showErrorMessage(`Deleting branches failed: ${o}`)}}n=!1,e.busy=!0;const a=await this.getRemoteDeletionItems();a?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=a,e.selectedItems=a.filter(o=>o.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async a=>{await this.repository.removeRemote(a.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fulfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;C.debug("Fulfill pull request missing info - start",yn.ID);const e=t.githubRepository,{octokit:r,remote:n}=await e.ensure();if(!t.base){const{data:i}=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:t.number});t.update(ns(i,e))}if(!t.mergeBase){const{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){u.window.showErrorMessage(`Fetching Pull Request merge base failed: ${ke(e)}`)}C.debug("Fulfill pull request missing info - done",yn.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(n=>n.remote.owner.toLowerCase()===t.toLowerCase()&&n.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const n=await this.resolveItem(t,e);if(n)return n.getPullRequest(r)}async resolveIssue(t,e,r,n=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(r,n)}async resolveUser(t,e,r){C.debug(`Fetch user ${r}`,yn.ID);const n=this.createGitHubRepositoryFromOwnerName(t,e),{query:i,schema:a}=await n.ensure();try{const{data:o}=await i({query:a.GetUser,variables:{login:r}});return Xf(o,n)}catch(o){console.log(o)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await vn.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await vn.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await vn.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await vn.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async checkoutDefaultBranch(t){var e;try{const r=await this.repository.getBranch(t);if(((e=this.repository.state.HEAD)==null?void 0:e.name)===r.name){u.window.showInformationMessage("The default branch is already checked out.");return}r.upstream&&t===r.upstream.name?await this.repository.checkout(t):await u.commands.executeCommand("git.checkout")}catch(r){if(r.gitErrorCode&&r.gitErrorCode===kr.DirtyWorkTree){u.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}u.window.showErrorMessage(`Exiting failed: ${r}`)}}createGitHubRepository(t,e){return new Hs(t,e,this.telemetry,this._sessionState)}createGitHubRepositoryFromOwnerName(t,e){const r=`https://github.com/${t}/${e}`;return new Hs(new bu(e,r,new Sn(r)),this._credentialStore,this.telemetry,this._sessionState)}async findUpstreamForItem(t){let e,r;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const a=await i.getRepositoryForkDetails();if(a&&a.isFork&&a.parent.owner.login===t.remote.owner&&a.parent.name===t.remote.repositoryName){const o=await i.getViewerPermission();if(o===Gr.Admin||o===Gr.Maintain||o===Gr.Write){r=i.remote;break}}}let n=!1;if(e&&!r){const i=await t.githubRepository.getViewerPermission();(i===Gr.Read||i===Gr.Triage||i===Gr.Unknown)&&(n=!0)}return{needsFork:n,upstream:e,remote:r}}async forkWithProgress(t,e,r,n){t.report({message:`Forking ${r}...`});const i=await e.fork();if(t.report({increment:50}),!i){u.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const a=n.state.remotes.length>1?"origin":n.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await n.renameRemote(a,"upstream"),await n.addRemote(a,i),await new Promise(o=>{if(this.gitHubRepositories.length===0){const f=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(f.dispose(),o())})}else o()}),t.report({increment:50}),a}async doFork(t,e,r){return u.window.withProgress({location:u.ProgressLocation.Notification,title:"Creating Fork"},async n=>{try{return this.forkWithProgress(n,t,e,r)}catch(i){u.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",n="Don't Fork";switch(await u.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,n)){case r:return this.doFork(t,e,this.repository);case n:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let Bs=yn;Pt(Bs,"ID","FolderRepositoryManager");function ny(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const Bf=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},Vs=t=>({remote:{remoteName:e}})=>e===t,Mc=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};function Ka(t,e,r,n){const i=n.createCommentThread(t,e,[]);return i.gitHubThreadId=r.id,i.comments=r.comments.map(a=>new nr(a,i)),i.isResolved=r.isResolved,r.viewerCanResolve&&!r.isResolved?i.contextValue="canResolve":r.viewerCanUnresolve&&r.isResolved&&(i.contextValue="canUnresolve"),js(i),i.collapsibleState=Fh(r.isResolved),i}const Nu="commentExpandState",iy="collapseAll",xc="expandUnresolved";function Fh(t,e){var r;return t?u.CommentThreadCollapsibleState.Collapsed:(e===void 0&&(e=((r=u.workspace.getConfiguration(Ar))==null?void 0:r.get(Nu))===xc),e?u.CommentThreadCollapsibleState.Expanded:u.CommentThreadCollapsibleState.Collapsed)}function Au(t,e,r){e.viewerCanResolve&&!e.isResolved?t.contextValue="canResolve":e.viewerCanUnresolve&&e.isResolved&&(t.contextValue="canUnresolve"),t.isResolved!==e.isResolved&&(t.isResolved=e.isResolved),t.collapsibleState=Fh(e.isResolved,r),t.comments=e.comments.map(n=>new nr(n,t)),js(t)}function js(t){if(t.isResolved){t.label="This thread has been marked as resolved";return}if(t.comments.length){const e=ye(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Vf(t){return Du().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(n=>n.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function jf(t,e){t.reactions=Vf(e)}function Lh(t,e){e||(t.comments=t.comments.map(r=>(r instanceof nr&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function Ni(t,e){var r;return{login:t.login,url:t.html_url,avatarUrl:Gc(t.avatar_url,(r=t.gravatar_id)!=null?r:void 0,e.remote.authProviderId)}}function qh(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function ns(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:f,assignees:E,created_at:S,updated_at:P,head:q,base:z,labels:le,node_id:he,id:fe,draft:Pe}=t;return{id:fe,graphNodeId:he,number:r,body:n!=null?n:"",title:i,url:a,user:Ni(o,e),state:f,merged:t.merged||!1,assignees:E?E.map(Oe=>Ni(Oe,e)):void 0,createdAt:S,updatedAt:P,head:qh(q),base:qh(z),mergeable:t.mergeable?Tn.Mergeable:Tn.NotMergeable,labels:le.map(Oe=>({name:"",color:"",...Oe})),isDraft:Pe,suggestedReviewers:[]}}function zf(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:f,assignees:E,created_at:S,updated_at:P,labels:q,node_id:z,id:le}=t;return{id:le,graphNodeId:z,number:r,body:n!=null?n:"",title:i,url:a,user:Ni(o,e),state:f,assignees:E?E.map(fe=>Ni(fe,e)):void 0,createdAt:S,updatedAt:P,labels:q.map(fe=>{var Pe,Ce;return typeof fe=="string"?{name:fe,color:""}:{name:(Pe=fe.name)!=null?Pe:"",color:(Ce=fe.color)!=null?Ce:""}}),suggestedReviewers:[]}}function Qf(t,e){return{event:$t.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Ni(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Uh(t){const e=[],r=Fi(t.diffHunk);let n=r.next();for(;!n.done;){const i=n.value;e.push(i),n=r.next()}return e}function sy(t,e){var r;const n={url:t.url,id:t.id,pullRequestReviewId:(r=t.pull_request_review_id)!=null?r:void 0,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Ni(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=Uh(n);return n.diffHunks=i,n}function Wf(t){switch(t){case"PullRequestCommit":return $t.Committed;case"LabeledEvent":return $t.Labeled;case"MilestonedEvent":return $t.Milestoned;case"AssignedEvent":return $t.Assigned;case"HeadRefDeletedEvent":return $t.HeadRefDeleted;case"IssueComment":return $t.Commented;case"PullRequestReview":return $t.Reviewed;case"MergedEvent":return $t.Merged;default:return $t.Other}}function Iu(t){return{id:t.id,isResolved:t.isResolved,viewerCanResolve:t.viewerCanResolve,viewerCanUnresolve:t.viewerCanUnresolve,path:t.path,line:t.line,originalLine:t.originalLine,diffSide:t.diffSide,isOutdated:t.isOutdated,comments:t.comments.nodes.map(e=>zs(e,t.isResolved))}}function zs(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Gh(t.reactionGroups),isResolved:e},n=Uh(r);return r.diffHunks=n,r}function $h(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Gh(t){const e=Du().reduce((n,i)=>(n[i.title]=i,n),{});return t.filter(n=>n.users.totalCount>0).map(n=>({label:e[n.content].label,count:n.users.totalCount,icon:e[n.content].icon,viewerHasReacted:n.viewerHasReacted}))}function Ou(t,e,r){if(!!r)return{label:`${r.owner.login}:${t}`,ref:t,sha:e,repo:{cloneUrl:r.url}}}function bn(t,e){return t?{login:t.login,url:t.url,avatarUrl:Gc(t.avatarUrl,void 0,e.remote.authProviderId),email:t.email}:{login:"",url:""}}function Fc(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function Lc(t){switch(t){case"UNKNOWN":return Tn.Unknown;case"MERGEABLE":return Tn.Mergeable;case"CONFLICTING":return Tn.NotMergeable}}function Hh(t,e){var r,n,i,a,o,f;const E=t.repository.pullRequest;return{id:E.databaseId,graphNodeId:E.id,url:E.url,number:E.number,state:E.state,body:E.body,bodyHTML:E.bodyHTML,title:E.title,createdAt:E.createdAt,updatedAt:E.updatedAt,isRemoteHeadDeleted:!E.headRef,head:Ou((n=(r=E.headRef)==null?void 0:r.name)!=null?n:E.headRefName,E.headRefOid,E.headRepository),isRemoteBaseDeleted:!E.baseRef,base:Ou((a=(i=E.baseRef)==null?void 0:i.name)!=null?a:E.baseRefName,E.baseRefOid,E.baseRepository),user:bn(E.author,e),merged:E.merged,mergeable:Lc(E.mergeable),labels:E.labels.nodes,isDraft:E.isDraft,suggestedReviewers:Bh(E.suggestedReviewers),comments:Kf((o=E.comments)==null?void 0:o.nodes,e),milestone:Fc(E.milestone),assignees:(f=E.assignees)==null?void 0:f.nodes.map(S=>bn(S,e))}}function Kf(t,e){if(!t)return;const r=[];for(const n of t)r.push({author:bn(n.author,e),body:n.body,databaseId:n.databaseId});return r}function qc(t,e){var r,n,i,a;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:(r=t.assignees)==null?void 0:r.nodes.map(o=>bn(o,e)),user:bn(t.author,e),labels:t.labels.nodes,repositoryName:(n=t.repository)==null?void 0:n.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(a=t.repository)==null?void 0:a.url}}function ay(t,e){var r,n,i,a;const o=t;return{id:o.databaseId,graphNodeId:o.id,url:o.url,number:o.number,state:o.state,body:o.body,bodyHTML:o.bodyHTML,title:o.title,createdAt:o.createdAt,updatedAt:o.updatedAt,isRemoteHeadDeleted:!o.headRef,head:Ou((n=(r=o.headRef)==null?void 0:r.name)!=null?n:o.headRefName,o.headRefOid,o.headRepository),isRemoteBaseDeleted:!o.baseRef,base:Ou((a=(i=o.baseRef)==null?void 0:i.name)!=null?a:o.baseRefName,o.baseRefOid,o.baseRepository),user:bn(o.author,e),merged:o.merged,mergeable:Lc(o.mergeable),labels:o.labels.nodes,isDraft:o.isDraft,suggestedReviewers:Bh(o.suggestedReviewers),milestone:Fc(o.milestone)}}function Bh(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(Vh):[]}function Vh(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function Yf(t,e){return{event:$t.Reviewed,comments:t.comments.nodes.map(r=>zs(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:bn(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function jh(t,e){const r=[];return t.forEach(n=>{const i=Wf(n.__typename);switch(i){case $t.Commented:const a=n;r.push({htmlUrl:a.url,body:a.body,bodyHTML:a.bodyHTML,user:bn(a.author,e),event:i,canEdit:a.viewerCanUpdate,canDelete:a.viewerCanDelete,id:a.databaseId,graphNodeId:a.id,createdAt:a.createdAt});return;case $t.Reviewed:const o=n;r.push({event:i,comments:[],submittedAt:o.submittedAt,body:o.body,bodyHTML:o.bodyHTML,htmlUrl:o.url,user:bn(o.author,e),authorAssociation:o.authorAssociation,state:o.state,id:o.databaseId});return;case $t.Committed:const f=n;r.push({id:f.databaseId,event:i,sha:f.commit.oid,author:f.commit.author.user?bn(f.commit.author.user,e):{login:f.commit.committer.name},htmlUrl:f.url,message:f.commit.message,authoredDate:new Date(f.commit.authoredDate)});return;case $t.Merged:const E=n;r.push({id:E.databaseId,event:i,user:bn(E.actor,e),createdAt:E.createdAt,mergeRef:E.mergeRef.name,sha:E.commit.oid,commitUrl:E.commit.commitUrl,url:E.url,graphNodeId:E.id});return;case $t.Assigned:const S=n;r.push({id:S.databaseId,event:i,user:S.user,actor:S.actor});return;case $t.HeadRefDeleted:const P=n;r.push({id:P.id,event:i,actor:P.actor,createdAt:P.createdAt,headRef:P.headRefName});return;default:break}}),r}function Xf(t,e){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl?Gc(t.user.avatarUrl,void 0,e.remote.authProviderId):void 0,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:Jf(t.user.contributionsCollection)}}function Jf(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(n=>{e.push({createdAt:new Date(n.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function Du(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:Jr.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:Jr.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:Jr.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:Jr.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:Jr.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:Jr.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:Jr.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:Jr.icons.reactions.EYES}]}function Zf(t){const e=[];return t.forEach(r=>{var n,i;ul(r)&&e.push({login:r.author.login,name:r.author.name||""}),ca(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login}),ll(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login})}),e}function eg(t){return t&&t.repository.viewerPermission&&Object.values(Gr).includes(t.repository.viewerPermission)?t.repository.viewerPermission:Gr.Unknown}function zh(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function Qh(t,e,r){const n=e.filter(ca).filter(o=>o.state!=="PENDING");let i=[];const a=new Map;a.set(r.login,!0);for(let o=n.length-1;o>=0;o--){const f=n[o].user;a.get(f.login)||(a.set(f.login,!0),i.push({reviewer:f,state:n[o].state}))}return t.forEach(o=>{if(!a.get(o.login))i.push({reviewer:o,state:"REQUESTED"});else{const f=i.find(E=>E.reviewer.login===o.login);f.state="REQUESTED"}}),i=i.sort((o,f)=>o.state==="REQUESTED"&&f.state!=="REQUESTED"?1:f.state==="REQUESTED"&&o.state!=="REQUESTED"||o.reviewer.login.toLowerCase()<f.reviewer.login.toLowerCase()?-1:1),i}function tg(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function Uc(){return u.env.remoteName==="codespaces"&&u.env.uiKind===u.UIKind.Web}function $c(){const t=u.workspace.getConfiguration("github-enterprise").get("uri","");if(t)return u.Uri.parse(t,!0)}function Qs(){return!!$c()}function rg(t,e=200){return t?`https://www.gravatar.com/avatar/${t}?s=${e}&d=retro`:void 0}function Gc(t,e,r){var n;return r===gt.github?t:e?rg(da.createHash("md5").update((n=e==null?void 0:e.trim())==null?void 0:n.toLowerCase()).digest("hex")):void 0}var ng=Object.defineProperty,br=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ng(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Mu=class{constructor(t,e,r,n=!1){br(this,"id"),br(this,"graphNodeId"),br(this,"number"),br(this,"title"),br(this,"html_url"),br(this,"state",At.Open),br(this,"author"),br(this,"assignees"),br(this,"createdAt"),br(this,"updatedAt"),br(this,"milestone"),br(this,"githubRepository"),br(this,"remote"),br(this,"item"),br(this,"bodyHTML"),this.githubRepository=t,this.remote=e,this.item=r,n||this.update(r)}get isOpen(){return this.state===At.Open}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=u.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(n){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=At.Open:this.state=At.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return n.updatePullRequest.pullRequest}catch(e){throw new Error(ke(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){C.debug(`Fetch issue comments of PR #${this.number} - enter`,Mu.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return C.debug(`Fetch issue comments of PR #${this.number} - done`,Mu.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return $h(n.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return $h(i.updateIssueComment.issueComment)}catch(r){throw new Error(ke(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(ke(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){C.debug(`Fetch timeline events of issue #${this.number} - enter`,Mu.ID);const t=this.githubRepository,{query:e,remote:r,schema:n}=await t.ensure();try{const{data:i}=await e({query:n.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),a=i.repository.pullRequest.timelineItems.nodes;return jh(a,t)}catch(i){return console.log(i),[]}}};let hr=Mu;br(hr,"ID","IssueModel");var ig=Object.defineProperty,Vt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const _n=class extends hr{constructor(t,e,r,n,i){super(e,r,n,!0);Vt(this,"isDraft"),Vt(this,"localBranchName"),Vt(this,"mergeBase"),Vt(this,"suggestedReviewers"),Vt(this,"_hasPendingReview",!1),Vt(this,"_onDidChangePendingReviewState",new u.EventEmitter),Vt(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),Vt(this,"_reviewThreadsCache",[]),Vt(this,"_reviewThreadsCacheInitialized",!1),Vt(this,"_onDidChangeReviewThreads",new u.EventEmitter),Vt(this,"onDidChangeReviewThreads",this._onDidChangeReviewThreads.event),Vt(this,"fileChangeViewedState",{}),Vt(this,"_onDidChangeFileViewedState",new u.EventEmitter),Vt(this,"onDidChangeFileViewedState",this._onDidChangeFileViewedState.event),Vt(this,"isActive"),Vt(this,"_telemetry"),Vt(this,"isRemoteHeadDeleted"),Vt(this,"head"),Vt(this,"isRemoteBaseDeleted"),Vt(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(n)}async initializeReviewThreadCache(){await this.getReviewThreads(),this._reviewThreadsCacheInitialized=!0}get reviewThreadsCache(){if(this._reviewThreadsCacheInitialized)return this._reviewThreadsCache;throw new Error("Cache has not been initialized yet")}get isMerged(){return this.state===At.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=At.Open:this.state=this.item.merged?At.Merged:At.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.isRemoteHeadDeleted!=null&&(this.isRemoteHeadDeleted=t.isRemoteHeadDeleted),t.head&&(this.head=new Co(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.isRemoteBaseDeleted!=null&&(this.isRemoteBaseDeleted=t.isRemoteBaseDeleted),t.base&&(this.base=new Co(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,u.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&u.commands.executeCommand("vscode.open",u.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(nn.Approve,t):this.createReview(nn.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(nn.RequestChanges,t):this.createReview(nn.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),ns(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:n}=await this.githubRepository.ensure(),{data:i}=await r.pulls.createReview({owner:n.owner,repo:n.repositoryName,pull_number:this.number,event:t,body:e});return Qf(i,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:n,schema:i}=await this.githubRepository.ensure();if(r){const{data:a}=await n({mutation:i.SubmitReview,variables:{id:r,event:t||nn.Comment,body:e}});this.hasPendingReview=!1,await this.updateDraftModeContext();const o=Yf(a.submitPullRequestReview.pullRequestReview,this.githubRepository),f=this._reviewThreadsCache.find(E=>E.comments.length?E.comments[0].pullRequestReviewId===o.id:void 0);return f&&(f.comments=o.comments,this._onDidChangeReviewThreads.fire({added:[],changed:[f],removed:[]})),o}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),n=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:n}}})}catch(i){C.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:n}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return n.node.reviews.nodes.length>0?n.node.reviews.nodes[0].id:void 0}catch(n){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:a}=n.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),this.getReviewThreads(),{deletedReviewId:a,deletedReviewComments:i.nodes.map(o=>zs(o,!1))}}async startReview(t){var e;const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,commitOID:t||((e=this.head)==null?void 0:e.sha)}}});if(!i)throw new Error("Failed to start review");return i.addPullRequestReview.pullRequestReview.id}async createReviewThread(t,e,r,n,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const a=await this.getPendingReviewId(),{mutate:o,schema:f}=await this.githubRepository.ensure(),{data:E}=await o({mutation:f.AddReviewThread,variables:{input:{path:e,body:t,pullRequestId:this.graphNodeId,pullRequestReviewId:a,line:r,side:n}}});if(!E)throw new Error("Creating review thread failed.");i||(this.hasPendingReview=!0,await this.updateDraftModeContext());const S=E.addPullRequestReviewThread.thread,P=Iu(S);return this._reviewThreadsCache.push(P),this._onDidChangeReviewThreads.fire({added:[P],changed:[],removed:[]}),P}async createCommentReply(t,e,r,n){var i;if(!this.validatePullRequestModel("Creating comment failed"))return;let a=await this.getPendingReviewId();a||(a=await this.startReview(n));const{mutate:o,schema:f}=await this.githubRepository.ensure(),{data:E}=await o({mutation:f.AddComment,variables:{input:{pullRequestReviewId:a,body:t,inReplyTo:e,commitOID:n||((i=this.head)==null?void 0:i.sha)}}});if(!E)throw new Error("Creating comment reply failed.");const{comment:S}=E.addPullRequestReviewComment,P=zs(S,!1);r&&(P.isDraft=!1);const q=this._reviewThreadsCache.find(z=>z.comments.some(le=>le.graphNodeId===e));return q&&(q.comments.push(P),this._onDidChangeReviewThreads.fire({added:[],changed:[q],removed:[]})),P}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await u.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}async editReviewComment(t,e){const{mutate:r,schema:n}=await this.githubRepository.ensure();let i=this._reviewThreadsCache.find(f=>f.comments.some(E=>E.graphNodeId===t.graphNodeId));if(!i)return this.editIssueComment(t,e);const{data:a}=await r({mutation:n.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});if(!a)throw new Error("Editing review comment failed.");const o=zs(a.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved);if(i){const f=i.comments.findIndex(E=>E.graphNodeId===t.graphNodeId);i.comments.splice(f,1,o),this._onDidChangeReviewThreads.fire({added:[],changed:[i],removed:[]})}return o}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure(),n=Number(t),i=this._reviewThreadsCache.findIndex(a=>a.comments.some(o=>o.id===n));if(i===-1)this.deleteIssueComment(t);else if(await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:n}),i>-1){const a=this._reviewThreadsCache[i],o=a.comments.findIndex(f=>f.id===n);a.comments.splice(o,1),a.comments.length===0?(this._reviewThreadsCache.splice(i,1),this._onDidChangeReviewThreads.fire({added:[],changed:[],removed:[a]})):this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}catch(e){throw new Error(ke(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>Ni(i,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}diffThreads(t){const e=[],r=[],n=[];t.forEach(i=>{const a=this._reviewThreadsCache.find(o=>o.id===i.id);a?ju()(i,a)||r.push(i):e.push(i)}),this._reviewThreadsCache.forEach(i=>{t.find(a=>a.id===i.id)||n.push(i)}),this._onDidChangeReviewThreads.fire({added:e,changed:r,removed:n})}async getReviewThreads(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=n.repository.pullRequest.reviewThreads.nodes.map(a=>Iu(a));return this.diffThreads(i),this._reviewThreadsCache=i,i}catch(n){return C.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return n.repository.pullRequest.reviewThreads.nodes.map(a=>a.comments.nodes.map(o=>zs(o,a.isResolved),t)).reduce((a,o)=>a.concat(o),[]).sort((a,o)=>a.createdAt>o.createdAt?1:-1)}catch(n){return C.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getCommits(){try{C.debug(`Fetch commits of PR #${this.number} - enter`,_n.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return C.debug(`Fetch commits of PR #${this.number} - done`,_n.ID),r.data}catch(t){return u.window.showErrorMessage(`Fetching commits failed: ${ke(t)}`),[]}}async getCommitChangedFiles(t){var e,r;try{C.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,_n.ID);const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return C.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,_n.ID),(r=(e=a.data.files)==null?void 0:e.filter(o=>!!o.patch))!=null?r:[]}catch(n){return u.window.showErrorMessage(`Fetching commit file changes failed: ${ke(n)}`),[]}}async getFile(t,e){var r;const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(a.data))throw new Error(`Unexpected array response when getting file ${t}`);const o=(r=a.data.content)!=null?r:"";return bo.Buffer.from(o,a.data.encoding).toString()}async getTimelineEvents(){C.debug(`Fetch timeline events of PR #${this.number} - enter`,_n.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=n.repository.pullRequest.timelineItems.nodes,a=jh(i,this.githubRepository);return await this.addReviewTimelineEventComments(a),a}catch(n){return console.log(n),[]}}async addReviewTimelineEventComments(t){const e=t.filter(ca),n=(await this.getReviewThreads()).reduce((S,P)=>S.concat(P.comments),[]),i=e.reduce((S,P)=>(S[P.id]=P,P.comments=[],S),{}),a=n.reduce((S,P)=>(S[P.id]=P,S),{}),o=[];let f=n.length;for(;f-- >0;){const S=n[f];if(!S.inReplyToId){o.unshift(S);continue}const P=a[S.inReplyToId];P.childComments=P.childComments||[],P.childComments=[S,...S.childComments||[],...P.childComments]}o.forEach(S=>{const P=i[S.pullRequestReviewId];P&&(P.comments=P.comments.concat(S).concat(S.childComments||[]))});const E=e.filter(S=>S.state.toLowerCase()==="pending")[0];E&&(E.comments=n.filter(S=>S.isDraft))}async getStatusChecks(){var t;const{query:e,remote:r,schema:n}=await this.githubRepository.ensure();let i;try{i=await e({query:n.GetChecks,variables:{owner:r.owner,name:r.repositoryName,number:this.number}})}catch(o){if((t=o.message)==null?void 0:t.startsWith("GraphQL error: Resource protected by organization SAML enforcement."))return{state:"pending",statuses:[]}}const a=i.data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return a?{state:a.state.toLowerCase(),statuses:a.contexts.nodes.map(o=>{var f,E,S,P;return cl(o)?{id:o.id,url:(f=o.checkSuite.app)==null?void 0:f.url,avatar_url:(E=o.checkSuite.app)==null?void 0:E.logoUrl,state:((S=o.conclusion)==null?void 0:S.toLowerCase())||"pending",description:o.title,context:o.name,target_url:o.detailsUrl}:{id:o.id,url:o.targetUrl,avatar_url:o.avatarUrl,state:(P=o.state)==null?void 0:P.toLowerCase(),description:o.description,context:o.context,target_url:o.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const n=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,o=(await ms(n,t.repository,i)).find(P=>P.fileName===r.path||P.previousFileName===r.path);if(!o)throw new Error("Can't find matching file");let f,E;if(e.equals(t.activePullRequest)){const P=u.Uri.file(L.resolve(t.repository.rootUri.fsPath,o.fileName));f=o.status===Je.DELETE?Xr(P,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):P,E=Xr(P,o.status===Je.RENAME?o.previousFileName:o.fileName,void 0,o.status===Je.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const P=e.head.sha,q=o.status===Je.RENAME?o.previousFileName:o.fileName;f=Bn(u.Uri.file(Vn(t.repository.rootUri,o.fileName)),e,o.baseCommit,P,o.fileName,!1,o.status),E=Bn(u.Uri.file(Vn(t.repository.rootUri,q)),e,o.baseCommit,P,o.fileName,!0,o.status)}const S=r.path.split("/");u.commands.executeCommand("vscode.diff",E,f,`${S[S.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){C.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,_n.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const o=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(ns(o.data,t))}if(this.item.merged){const o=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,o.data}const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=n.merge_base_commit.sha;const i=300;let a=[];return n.files.length>=i?(C.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,_n.ID),a=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):a=n.files,C.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${a.length} `,_n.ID),a}async getMergeability(){try{C.debug(`Fetch pull request mergeability ${this.number} - enter`,_n.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return C.debug(`Fetch pull request mergeability ${this.number} - done`,_n.ID),Lc(n.repository.pullRequest.mergeable)}catch(t){return C.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),Tn.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}updateCommentReactions(t,e){const r=this._reviewThreadsCache.find(n=>n.comments.some(i=>i.graphNodeId===t));if(r){const n=r.comments.find(i=>i.graphNodeId===t);n&&(n.reactions=Gh(e),this._onDidChangeReviewThreads.fire({added:[],changed:[r],removed:[]}))}}async addCommentReaction(t,e){const r=Du().reduce((f,E)=>(f[E.label]=E.title,f),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Add comment reaction failed.");const o=a.addReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async deleteCommentReaction(t,e){const r=Du().reduce((f,E)=>(f[E.label]=E.title,f),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Delete comment reaction failed.");const o=a.removeReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async resolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.ResolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Resolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Iu(n.resolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async unresolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UnresolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Unresolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Iu(n.unresolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async getPullRequestFileViewState(){const{query:t,schema:e,remote:r}=await this.githubRepository.ensure(),n=[];let i=null,a=!1;do{const{data:o}=await t({query:e.PullRequestFiles,variables:{owner:r.owner,name:r.repositoryName,number:this.number,after:i}});o.repository.pullRequest.files.nodes.forEach(f=>{this.fileChangeViewedState[f.path]!==f.viewerViewedState&&n.push({fileName:f.path,viewed:f.viewerViewedState}),this.fileChangeViewedState[f.path]=f.viewerViewedState}),a=o.repository.pullRequest.files.pageInfo.hasNextPage,i=o.repository.pullRequest.files.pageInfo.endCursor}while(a);return n.length&&this._onDidChangeFileViewedState.fire({changed:n}),this.fileChangeViewedState}async markFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.MarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=Sr.VIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:Sr.VIEWED}]})}async unmarkFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.UnmarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=Sr.UNVIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:Sr.UNVIEWED}]})}};let ii=_n;Vt(ii,"ID","PullRequestModel");var sg=Object.defineProperty,Wh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ag extends Th{constructor(e,r,n){super(e);this._folderRepositoryManager=r,this._item=n,Wh(this,"viewType","github:activePullRequest"),Wh(this,"_existingReviewers",[]),this.registerFolderRepositoryListener(),sp(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(this._folderRepositoryManager.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:At.Merged})}))}registerFolderRepositoryListener(){this._disposables.push(this._folderRepositoryManager.onDidChangeActivePullRequest(e=>{if(this._folderRepositoryManager&&this._item){const r=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:r})}}))}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":u.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return to(this._item,this._item._telemetry);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(e)}}async checkoutDefaultBranch(e){try{const r=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.checkoutDefaultBranch(r)}finally{this._replyMessage(e,{})}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){return Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests(),this._folderRepositoryManager.getBranchNameForPullRequest(e)]).then(r=>{var n,i;const[a,o,f,E,S]=r;if(!a)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(!this._view)return;this._item=a,this._view.title=`${a.title} #${e.number.toString()}`;const P=e.equals(this._folderRepositoryManager.activePullRequest),q=o.hasWritePermission,z=o.mergeMethodsAvailability,le=q||this._item.canEdit(),he=u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),fe=Rh(z,he),Pe=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=Qh(E!=null?E:[],f!=null?f:[],a.author);const Oe=a.base&&a.head&&!a.base.repositoryCloneUrl.equals(a.head.repositoryCloneUrl)&&Uc();this._postMessage({command:"pr.initialize",pullrequest:{number:a.number,title:a.title,url:a.html_url,createdAt:a.createdAt,body:a.body,bodyHTML:a.bodyHTML,labels:a.item.labels,author:{login:a.author.login,name:a.author.name,avatarUrl:a.userAvatar,url:a.author.url},state:a.state,isCurrentlyCheckedOut:P,isRemoteBaseDeleted:a.isRemoteBaseDeleted,base:a.base.label,isRemoteHeadDeleted:a.isRemoteHeadDeleted,isLocalHeadDeleted:!S,head:(i=(n=a.head)==null?void 0:n.label)!=null?i:"",canEdit:le,hasWritePermission:q,mergeable:a.item.mergeable,isDraft:a.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:z,defaultMergeMethod:fe,isIssue:!1,isAuthor:Pe.login===a.author.login,reviewers:this._existingReviewers,continueOnGitHub:Oe}})}).catch(r=>{u.window.showErrorMessage(ke(r))})}close(e){u.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(n=>e.user.login===n.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),u.commands.executeCommand("pr.refreshList")},r=>{u.window.showErrorMessage(`Approving pull request failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{u.window.showErrorMessage(`Requesting changes failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}submitReview(e){this._item.submitReview(nn.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{u.window.showErrorMessage(`Submitting review failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const o=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${o}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const o=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!o});const f=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&n.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!f})}if(u.env.remoteName==="codespaces"&&n.push({label:"Suspend Codespace",type:"suspend"}),!n.length){u.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await u.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0}),a=[];if(i){const o=this._item.equals(this._folderRepositoryManager.activePullRequest),f=i.map(async E=>{switch(E.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),a.push(E.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(o){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await u.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.cleanAll");else return;const S=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(S)}return await this._folderRepositoryManager.repository.deleteBranch(r.branch,!0),a.push(E.type);case"remote":return await this._folderRepositoryManager.repository.removeRemote(r.remote),a.push(E.type);case"suspend":return await u.commands.executeCommand("github.codespaces.disconnectSuspend"),a.push(E.type)}});await Promise.all(f),u.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:a})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{u.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{u.window.showErrorMessage(`Unable to set PR ready for review. ${ke(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:n,method:i}=e.args;if(await u.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:At.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,n,i).then(o=>{u.commands.executeCommand("pr.refreshList"),o.merged||u.window.showErrorMessage(`Merging PR failed: ${o.message}`),this._replyMessage(e,{state:o.merged?At.Merged:At.Open})}).catch(o=>{u.window.showErrorMessage(`Unable to merge pull request. ${ke(o)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=Dc(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class og{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}provideTerminalLinks(e,r){var n;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const a=e.line.substring(i),o=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),f=a.match(o);if(f&&f.length===4){const E=f[1],S=f[2],P=f[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(z=>z.remote.owner===E&&z.remote.repositoryName===S)>-1&&((n=this.reviewManager.repository.state.HEAD)==null?void 0:n.name)===P)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:a}]}return[]}handleTerminalLink(e){const r=u.workspace.getConfiguration("githubPullRequests").get("terminalLinksHandler");if(r==="github"){u.env.openExternal(u.Uri.parse(e.url));return}if(r==="vscode"){this.reviewManager.createPullRequest();return}u.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(n=>{n==="Yes"?this.reviewManager.createPullRequest():u.env.openExternal(u.Uri.parse(e.url))})}}var ug=Object.defineProperty,Hr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class lg extends Th{constructor(e,r,n,i){super(e);this._folderRepositoryManager=r,this._pullRequestDefaults=n,Hr(this,"viewType","github:createPullRequest"),Hr(this,"_onDone",new u.EventEmitter),Hr(this,"onDone",this._onDone.event),Hr(this,"_onDidChangeBaseRemote",new u.EventEmitter),Hr(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),Hr(this,"_onDidChangeBaseBranch",new u.EventEmitter),Hr(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),Hr(this,"_onDidChangeCompareRemote",new u.EventEmitter),Hr(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),Hr(this,"_onDidChangeCompareBranch",new u.EventEmitter),Hr(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),Hr(this,"_firstLoad",!0),Hr(this,"_compareBranch"),Hr(this,"_compareRemote"),this._compareBranch=i}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var r,n;e&&((e==null?void 0:e.name)!==this._compareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((n=this._compareBranch.upstream)==null?void 0:n.remote))&&(this._compareBranch=e,this.initializeParams(),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}get compareRemote(){return this._compareRemote}set compareRemote(e){var r,n;e&&(e.owner!==((r=this._compareRemote)==null?void 0:r.owner)||e.repositoryName!==((n=this._compareRemote)==null?void 0:n.repositoryName))&&(this._compareRemote=e,this.initializeParams(),this._onDidChangeCompareRemote.fire(this._compareRemote))}show(e){e&&(this.compareBranch=e),super.show()}async getTotalCommits(){var e,r,n;const i=await this._folderRepositoryManager.getOrigin(this.compareBranch);if((e=this.compareBranch)==null?void 0:e.upstream){const a=this._folderRepositoryManager.findRepo(Vs(this.compareBranch.upstream.remote));if(a){const o=`${a.remote.owner}:${(r=this.compareBranch.name)!=null?r:""}`,f=`${this._pullRequestDefaults.owner}:${this._pullRequestDefaults.base}`,{total_commits:E}=await i.compareCommits(f,o);return E}}else if((n=this.compareBranch)==null?void 0:n.commit){const a=await this._folderRepositoryManager.repository.getBranch(this._pullRequestDefaults.base);if(a.commit)return(await this._folderRepositoryManager.repository.diffBetween(a.commit,this.compareBranch.commit)).length}return 0}async getTitle(){var e,r,n;const i=await this._folderRepositoryManager.getOrigin(this.compareBranch);let a=!1;try{await this.getTotalCommits()>1&&(a=await i.getDefaultBranch()!==((e=this.compareBranch)==null?void 0:e.name))}catch(o){}if(a){const o=(r=this.compareBranch)==null?void 0:r.name;return o?`${o.charAt(0).toUpperCase()}${o.slice(1)}`:""}else return((n=this.compareBranch)==null?void 0:n.name)?Mc(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await u.workspace.fs.readFile(e[0])).toString()}catch(r){C.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(){var e,r;const n=await this.getPullRequestTemplate();if(n){try{if(await this.getTotalCommits()===1&&((e=this.compareBranch)==null?void 0:e.name))return`${Mc(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body}

${n}`}catch(i){}return n}return((r=this.compareBranch)==null?void 0:r.name)?Mc(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body:""}async initializeParams(e=!1){var r,n;if(!this.compareBranch)throw new Oh(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},a=await this._folderRepositoryManager.getOrigin(this.compareBranch),o={owner:a.remote.owner,repositoryName:a.remote.repositoryName},[f,E,S,P]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),q=f.map(le=>({owner:le.owner,repositoryName:le.repositoryName}));let z=E;o.owner!==i.owner&&(z=await this._folderRepositoryManager.listBranches(o.owner,o.repositoryName)),this.compareBranch.name&&!z.includes(this.compareBranch.name)&&(z.push(this.compareBranch.name),z.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:q,defaultBaseRemote:i,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:o,defaultCompareBranch:(r=this.compareBranch.name)!=null?r:"",branchesForRemote:E,branchesForCompare:z,defaultTitle:S,defaultDescription:P,compareBranch:(n=this.compareBranch.name)!=null?n:"",isDraft:!1}})}async changeRemote(e,r){var n;const{owner:i,repositoryName:a}=e.args,o=this._folderRepositoryManager.findRepo(S=>i===S.remote.owner&&a===S.remote.repositoryName);if(!o)throw new Error("No matching GitHub repository found.");const f=await o.getDefaultBranch(),E=await this._folderRepositoryManager.listBranches(i,a);if(!r&&((n=this.compareBranch)==null?void 0:n.name)&&!E.includes(this.compareBranch.name)&&(E.push(this.compareBranch.name),E.sort()),r)this._onDidChangeBaseRemote.fire({owner:i,repositoryName:a}),this._onDidChangeBaseBranch.fire(f);else{const S=this.compareRemote;this.compareRemote={owner:i,repositoryName:a},S&&(this.compareRemote.repositoryName!==S.repositoryName||this.compareRemote.owner!==S.owner)&&(this.compareBranch=await this._folderRepositoryManager.repository.getBranch(f))}return this._replyMessage(e,{branches:E,defaultBranch:r?f:this.compareBranch})}async create(e){var r,n;try{let i,a;if(!((r=this.compareBranch)==null?void 0:r.name)){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===Or.RemoteHead){const S=this.compareBranch.name.indexOf("/");i=this.compareBranch.name.substring(S+1),a=this.compareBranch.name.substring(0,S)}else i=this.compareBranch.name,a=(n=this.compareBranch.upstream)==null?void 0:n.remote;if(!a)if(await u.window.showInformationMessage(`There is no upstream branch for '${i}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"){let P;this._folderRepositoryManager.repository.state.remotes.length===1?P=this._folderRepositoryManager.repository.state.remotes[0].name:this._folderRepositoryManager.repository.state.remotes.length>1&&(P=await u.window.showQuickPick(this._folderRepositoryManager.repository.state.remotes.map(q=>q.name),{placeHolder:"Remote to push to"})),P?await this._folderRepositoryManager.repository.push(P,i,!0):this._throwError(e,"The current repository has no remotes to push to. Please set up a remote and try again."),this._folderRepositoryManager.repository.state.HEAD&&(a=P)}else{this._throwError(e,"No upstream for the compare branch.");return}const o=this._folderRepositoryManager.findRepo(Vs(a));if(!o)throw new Error(`Unable to find GitHub repository matching '${a}'.`);const f=`${o.remote.owner}:${i}`,E=await this._folderRepositoryManager.createPullRequest({...e.args,head:f});E?(await this._replyMessage(e,{}),await vn.associateBranchWithPullRequest(this._folderRepositoryManager.repository,E,i),this._onDone.fire(E)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(i){this._throwError(e,i.message)}}async _onDidReceiveMessage(e){var r;if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":return u.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0),this._replyMessage(e,void 0);case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":return this._onDidChangeBaseBranch.fire(e.args),this._replyMessage(e,void 0);case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":return this.compareBranch=await this._folderRepositoryManager.repository.getBranch((r=e.args.name)!=null?r:e.args),this._replyMessage(e,void 0);default:u.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=Dc(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}var cg=Object.defineProperty,Hc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class dg{constructor(){Hc(this,"fileViewedState",new Map),Hc(this,"_onDidChangeFileDecorations",new u.EventEmitter),Hc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileViewedState(e,r,n,i){this.fileViewedState.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e)}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==si)return;const n=xi(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileViewedState.get(i)===Sr.VIEWED)return{propagate:!1,badge:"\u2713",tooltip:"Viewed"}}}}const Bc=new dg;var hg=Object.defineProperty,Vc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class pg{constructor(){Vc(this,"fileHasComments",new Map),Vc(this,"_onDidChangeFileDecorations",new u.EventEmitter),Vc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,n,i){const a=`${r}:${n}`;this.fileHasComments.get(a)!==i&&(this.fileHasComments.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const n=xi(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u{1F4AC}"}}}}const Kh=new pg;var mg=Object.defineProperty,xu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ir{constructor(){xu(this,"childrenDisposables"),xu(this,"parent"),xu(this,"label"),xu(this,"accessibilityInformation")}getParent(){if(this.parent instanceof Ir)return this.parent}async reveal(e,r){return this.parent.reveal(e||this,r)}refresh(e){return this.parent.refresh(e)}async getChildren(){return[]}dispose(){this.childrenDisposables&&(this.childrenDisposables.forEach(e=>e.dispose()),this.childrenDisposables=[])}}var fg=Object.defineProperty,jt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Yh(t){const e=u.window.activeTextEditor,r={preserveFocus:!0,viewColumn:u.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}async function jc(t,e,r,n,i){let a=await Zs(e,t.repository)||e,o=await Zs(r,t.repository)||r;(a.scheme==="data"||o.scheme==="data")&&(i===Je.ADD&&(a=fo),i===Je.DELETE&&(o=fo));const f=r.path.split("/");return{command:"vscode.diff",arguments:[a,o,`${f[f.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}class Ya extends Ir{constructor(e,r,n,i,a,o,f,E){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=a,this.blobUrl=o,this.filePath=f,this.parentFilePath=E,jt(this,"description"),jt(this,"iconPath"),jt(this,"command"),jt(this,"resourceUri"),jt(this,"contextValue"),jt(this,"childrenDisposables",[]),jt(this,"_viewed");var S;const P=(S=this.pullRequest.fileChangeViewedState[i])!=null?S:Sr.UNVIEWED;this.contextValue=`filechange:${Je[n]}:${P===Sr.VIEWED?"viewed":"unviewed"}`,this.label=L.basename(i),this.description=u.workspace.asRelativePath(L.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=u.ThemeIcon.File,this.resourceUri=_t(u.Uri.parse(this.blobUrl),r.number,i,n),this.updateViewed(P),this.command={command:"pr.openFileOnGitHub",title:"Open File on GitHub",arguments:[this]},this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(q=>{const z=q.changed.find(le=>le.fileName===this.fileName);z&&(this.updateViewed(z.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${Je[this.status]}:${e===Sr.VIEWED?"viewed":"unviewed"}`,Bc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}getTreeItem(){return this}}class Xh extends Ir{constructor(e,r,n,i,a,o,f,E,S,P){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.blobUrl=a,this.filePath=o,this.parentFilePath=f,this.diffHunks=E,this.comments=S,this.sha=P,jt(this,"description"),jt(this,"iconPath"),jt(this,"resourceUri"),jt(this,"parentSha"),jt(this,"contextValue"),jt(this,"command"),jt(this,"opts"),jt(this,"childrenDisposables",[]),jt(this,"_viewed");var q;const z=(q=this.pullRequest.fileChangeViewedState[i])!=null?q:Sr.UNVIEWED;this.contextValue=`filechange:${Je[n]}:${z===Sr.VIEWED?"viewed":"unviewed"}`,this.label=L.basename(i),this.description=u.workspace.asRelativePath(L.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=u.ThemeIcon.File,this.opts={preserveFocus:!0},this.updateShowOptions(),this.resourceUri=_t(u.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status),this.updateViewed(z),this.childrenDisposables.push(this.pullRequest.onDidChangeReviewThreads(le=>{[...le.added,...le.removed].some(he=>he.path===this.fileName)&&this.updateShowOptions()})),this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(le=>{const he=le.changed.find(fe=>fe.fileName===this.fileName);he&&(this.updateViewed(he.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${Je[this.status]}:${e===Sr.VIEWED?"viewed":"unviewed"}`,Bc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}updateShowOptions(){const e=this.pullRequest.reviewThreadsCache,n=(me(e,i=>i.path)[this.fileName]||[]).filter(i=>!i.isOutdated);Kh.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,n.length>0),n.length?(n.sort((i,a)=>i.line-a.line),this.opts.selection=new u.Range(n[0].line,0,n[0].line,0)):delete this.opts.selection}getTreeItem(){return this}openFileCommand(){return Yh(this.filePath)}async openDiff(e){var r;const n=await jc(e,this.parentFilePath,this.filePath,this.opts,this.status);u.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}}class Fu extends Xh{constructor(e,r,n,i,a,o,f,E,S,P,q,z,le,he){super(r,n,i,a,f,E,S,z,le,he);this.folderRepositoryManager=e,this.parent=r,this.pullRequest=n,this.status=i,this.fileName=a,this.previousFileName=o,this.blobUrl=f,this.filePath=E,this.parentFilePath=S,this.isPartial=P,this.patch=q,this.diffHunks=z,this.comments=le,this.sha=he}getTreeItem(){return this}async resolve(){this.command=await jc(this.folderRepositoryManager,this.parentFilePath,this.filePath,void 0,this.status)}}class Ws extends Xh{constructor(e,r,n,i,a,o,f,E,S,P=[],q,z){super(e,n,i,a,o,f,E,S,P,q);this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.status=i,this.fileName=a,this.blobUrl=o,this.filePath=f,this.parentFilePath=E,this.diffHunks=S,this.comments=P,this.sha=q,this.isCurrent=z,jt(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===Je.DELETE||this.status===Je.ADD){const le=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===Je.DELETE?[this.parentFilePath,le,`${this.fileName}`,{preserveFocus:!0}]:[le,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:n,rootPath:i}=di(this.filePath.query),a=`${n}^`,o={path:e,ref:r,commit:a,base:!0,isOutdated:!0,rootPath:i},f=this.filePath.with({query:JSON.stringify(o)});let E=this.filePath;this.isCurrent&&(E=this.pullRequestManager.repository.rootUri.with({path:L.posix.join(o.rootPath,o.path)}));const S={preserveFocus:!0},P=this.pullRequest.reviewThreadsCache,z=(me(P,le=>le.path)[this.fileName]||[]).filter(le=>le.isOutdated).sort((le,he)=>le.line-he.line);return z.length&&(S.selection=new u.Range(z[0].originalLine,0,z[0].originalLine,0)),{command:"vscode.diff",arguments:[f,E,`${this.fileName} from ${(n||"").substr(0,8)}`,S],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():u.workspace.getConfiguration().get("git.openDiffOnClick",!0)?this.command=await jc(this.pullRequestManager,this.parentFilePath,this.filePath,this.opts,this.status):this.command=this.openFileCommand()}}class gg extends Ir{constructor(e,r,n,i,a,o){super();this.parent=e,this.fileName=r,this.previousFileName=n,this.status=i,this.baseBranch=a,this.headBranch=o,jt(this,"description"),jt(this,"iconPath"),jt(this,"resourceUri"),jt(this,"command"),this.label=r,this.iconPath=u.ThemeIcon.File,this.resourceUri=u.Uri.file(r).with({scheme:si,query:JSON.stringify({status:i,fileName:r})});let f=u.Uri.file(r).with({scheme:si,query:JSON.stringify({fileName:r,branch:a})}),E=u.Uri.file(r).with({scheme:si,query:JSON.stringify({fileName:r,branch:o})});switch(i){case Je.ADD:f=u.Uri.file(r).with({scheme:si,query:JSON.stringify({fileName:r,branch:a,isEmpty:!0})});break;case Je.RENAME:f=u.Uri.file(n).with({scheme:si,query:JSON.stringify({fileName:n,branch:a,isEmpty:!0})});break;case Je.DELETE:E=u.Uri.file(r).with({scheme:si,query:JSON.stringify({fileName:r,branch:o,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[f,E,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function zc(t){return t.filter(e=>e instanceof Ws)}var vg=Object.defineProperty,Ks=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const si="githubpr";class yg{constructor(e,r,n,i,a,o,f){this.repository=e,this.baseOwner=r,this.baseBranchName=n,this._compareOwner=i,this.compareBranchName=a,this.compareHasUpstream=o,this.folderRepoManager=f,Ks(this,"_view"),Ks(this,"_onDidChangeTreeData",new u.EventEmitter),Ks(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Ks(this,"_contentProvider"),Ks(this,"_disposables",[]),Ks(this,"_gitHubRepository"),this._view=u.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(E=>E.remote.owner===this._compareOwner),this._disposables.push(this._view)}get view(){return this._view}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async reveal(e,r){return this._view.reveal(e,r)}refresh(){this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const n=await this.repository.getBranch(e);this.compareHasUpstream=!!n.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)u.commands.executeCommand("setContext","github:noUpstream",!1);else return u.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new bg(this._gitHubRepository),this._disposables.push(u.workspace.registerTextDocumentContentProvider(si,this._contentProvider)));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return n.files.length?this._view.message=void 0:this._view.message=`There are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,n.files.map(i=>new gg(this,i.filename,i.previous_filename,ps(i.status),n.merge_base_commit.sha,this.compareBranchName))}catch(n){return C.appendLine(`Comparing changes failed: ${n}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose()),this._contentProvider=void 0}}class bg{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,r){var n;const i=Hu(e);if(!i||i.isEmpty)return"";const{octokit:a,remote:o}=await this.gitHubRepository.ensure(),f=await a.repos.getContent({owner:o.owner,repo:o.repositoryName,path:i.fileName,ref:i.branch}),E=(n=f.data.content)!=null?n:"";return bo.Buffer.from(E,f.data.encoding).toString()}}var _g=Object.defineProperty,Xa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?_g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class wg{constructor(e){this.repository=e,Xa(this,"_disposables",[]),Xa(this,"_createPRViewProvider"),Xa(this,"_treeView"),Xa(this,"_onDidCreate",new u.EventEmitter),Xa(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var n,i;u.commands.executeCommand("setContext","github:createPullRequest",!1),(n=this._createPRViewProvider)==null||n.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(a=>a.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var n;(n=this._treeView)==null||n.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var n;(n=this._treeView)==null||n.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var n;(n=this._treeView)==null||n.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repo))return r;{const n=await e.getOrigin(),i=await e.getMetadata(n.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,r,n){var i;u.commands.executeCommand("setContext","github:createPullRequest",!0);const a=(i=n?await r.repository.getBranch(n):void 0)!=null?i:r.repository.state.HEAD;if(!this._createPRViewProvider){const o=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(a));this._createPRViewProvider=new lg(e,r,o,a);const f=await r.getOrigin(a);this._treeView=new yg(this.repository,o.owner,o.base,f.remote.owner,a.name,!!a.upstream,r),this.registerListeners(!n),this._disposables.push(u.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(a)}}var Eg=Object.defineProperty,Jh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Eg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Zh{constructor(e,r,n,i,a=`${e}:${r}`){this.owner=e,this.name=r,this.description=n,this.remote=i,this.label=a,Jh(this,"detail"),Jh(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}function Ja(t){return t===void 0||t===0?0:t-1}function oy(t,e){for(let r=0;r<t.length;r++){const n=t[r];for(let i=0;i<n.diffLines.length;i++)if(n.diffLines[i].positionInHunk===e)return n.diffLines[i]}}function Qc(t,e){const r=Fi(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.oldLineNumber>e))if(a.oldLineNumber+a.oldLength-1<e)i+=a.newLength-a.oldLength;else return i+=a.newLength-a.oldLength,e+i;n=r.next()}return e+i}function Wc(t,e){const r=Fi(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.newLineNumber>e))if(a.newLineNumber+a.newLength-1<e)i+=a.oldLength-a.newLength;else return i+=a.oldLength-a.newLength,e+i;n=r.next()}return e+i}function ep(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];let a,o;if(e){let f;for(let E=0;E<i.diffLines.length;E++){const S=i.diffLines[E];S.type===pr.Delete?(a!==void 0||(a=Ja(S.oldLineNumber)),f=Ja(S.oldLineNumber)):a!==void 0&&f!==void 0&&(r.push(new u.Range(a,0,f,0)),a=void 0,f=void 0)}a!==void 0&&f!==void 0&&(r.push(new u.Range(a,0,f,0)),a=void 0,f=void 0)}else i.newLineNumber&&(a=Ja(i.newLineNumber),o=Ja(i.newLength),r.push(new u.Range(a,0,a+o,0)))}return r}var kg=Object.defineProperty,qn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?kg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Sg{constructor(e,r,n,i,a){this._reviewManager=e,this._reposManager=r,this._repository=n,this._localFileChanges=i,this._sessionState=a,qn(this,"_localToDispose",[]),qn(this,"_onDidChangeComments",new u.EventEmitter),qn(this,"onDidChangeComments",this._onDidChangeComments.event),qn(this,"_commentHandlerId"),qn(this,"_commentController"),qn(this,"_workspaceFileChangeCommentThreads",{}),qn(this,"_reviewSchemeFileChangeCommentThreads",{}),qn(this,"_obsoleteFileChangeCommentThreads",{}),qn(this,"_visibleNormalTextEditors",[]),qn(this,"_pendingCommentThreadAdds",[]),this._commentController=u.comments.createCommentController(`github-review-${r.activePullRequest.number}`,r.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=kh(),Dr(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=u.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this._reposManager.activePullRequest.validateDraftMode(),await this.initializeCommentThreads(),await this.registerListeners()}createOutdatedCommentThread(e,r){const n=r.comments[0].originalCommitId,i=u.Uri.file(L.join(`commit~${n.substr(0,8)}`,e)),a=Xr(i,e,void 0,n,!0,{base:r.diffSide===Rt.LEFT},this._repository.rootUri),o=new u.Range(new u.Position(r.originalLine-1,0),new u.Position(r.originalLine-1,0));return Ka(a,o,r,this._commentController)}async createWorkspaceCommentThread(e,r,n){let i=n.line;const a=await this._repository.diffWithHEAD(r);a&&(i=Qc(a,n.line));const o=new u.Range(new u.Position(i-1,0),new u.Position(i-1,0));return Ka(e,o,n,this._commentController)}createReviewCommentThread(e,r,n){var i;if(!((i=this._reposManager.activePullRequest)==null?void 0:i.mergeBase))throw new Error("Cannot create review comment thread without an active pull request base.");const a=Xr(e,r,void 0,this._reposManager.activePullRequest.mergeBase,!1,{base:!0},this._repository.rootUri),o=new u.Range(new u.Position(n.line-1,0),new u.Position(n.line-1,0));return Ka(a,o,n,this._commentController)}async initializeCommentThreads(){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return;const e=this._reposManager.activePullRequest.reviewThreadsCache,r=me(e,n=>n.path);Object.keys(r).forEach(n=>{const i=r[n],a=i[0];if(a){const o=L.join(this._repository.rootUri.path,a.path).replace(/\\/g,"/"),f=this._repository.rootUri.with({path:o});let E=[],S=[],P=[];const q=i.map(async z=>{z.isOutdated?P.push(this.createOutdatedCommentThread(n,z)):z.diffSide===Rt.RIGHT?E.push(await this.createWorkspaceCommentThread(f,n,z)):S.push(this.createReviewCommentThread(f,n,z))});Promise.all(q),this._workspaceFileChangeCommentThreads[n]=E,this._reviewSchemeFileChangeCommentThreads[n]=S,this._obsoleteFileChangeCommentThreads[n]=P}})}async registerListeners(){this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads,this._reviewSchemeFileChangeCommentThreads].forEach(r=>{for(const n in r)r[n].forEach(i=>{Lh(i,e),js(i)})})})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangeReviewThreads(e=>{e.added.forEach(async r=>{const{path:n}=r,i=this._pendingCommentThreadAdds.findIndex(async f=>{const E=this.gitRelativeRootPath(f.uri.path);if(E!==r.path)return!1;const S=await this.getContentDiff(f.uri,E);return Wc(S,f.range.start.line)+1===r.line});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(f=>new nr(f,a)),this._pendingCommentThreadAdds.splice(i,1);else{const f=L.join(this._repository.rootUri.path,n).replace(/\\/g,"/"),E=this._repository.rootUri.with({path:f});r.isOutdated?a=this.createOutdatedCommentThread(n,r):r.diffSide===Rt.RIGHT?a=await this.createWorkspaceCommentThread(E,n,r):a=this.createReviewCommentThread(E,n,r)}const o=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Rt.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads;o[n]?o[n].push(a):o[n]=[a]}),e.changed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Rt.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];Au(a,r)}}),e.removed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Rt.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];n[r.path].splice(i,1),a.dispose()}})})),this._localToDispose.push(this._sessionState.onDidChangeCommentsExpandState(e=>{this.updateCommentExpandState(e)}))}updateCommentExpandState(e){if(!this._reposManager.activePullRequest)return;function r(o,f){if(f.size!==0)for(const E of f.keys()){const S=f.get(E),P=o[E];for(const q of P){const z=S.get(q.gitHubThreadId);Au(q,z,e)}}}const n=new Map,i=new Map,a=new Map;for(const o of this._reposManager.activePullRequest.reviewThreadsCache){let f;o.isOutdated?f=n:o.diffSide===Rt.RIGHT?f=a:f=i,f.has(o.path)||f.set(o.path,new Map),f.get(o.path).set(o.id,o)}r(this._obsoleteFileChangeCommentThreads,n),r(this._reviewSchemeFileChangeCommentThreads,i),r(this._workspaceFileChangeCommentThreads,a)}visibleEditorsEqual(e,r){if(e=e.filter(n=>n.document.uri.scheme!=="comment"),r=r.filter(n=>n.document.uri.scheme!=="comment"),e=ye(e,n=>n.document.uri.toString()),r=ye(r,n=>n.document.uri.toString()),e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!r.find(a=>a.document.uri.toString()===e[n].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;const r=u.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}async provideCommentingRanges(e,r){let n=e.uri.query&&e.uri.query!==""?di(e.uri.query):void 0;if(n){const a=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(a)return ep(a.diffHunks,n.base)}const i=u.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const a=this.gitRelativeRootPath(e.uri.path),o=zc(this._localFileChanges).find(E=>E.fileName===a),f=[];if(o){if(o.status===Je.RENAME)return[];const E=await this.getContentDiff(e.uri,o.fileName),S=o.diffHunks;for(let P=0;P<S.length;P++){const q=S[P],z=Qc(E,q.newLineNumber),le=Qc(E,q.newLineNumber+q.newLength-1);z>0&&le>0&&f.push(new u.Range(z-1,0,le-1,0))}}return f}}async getContentDiff(e,r){var n;const i=u.window.visibleTextEditors.find(a=>a.document.uri.toString()===e.toString());if(!((n=this._reposManager.activePullRequest)==null?void 0:n.head))throw new Error("Cannot get content diff without an active pull request head.");if(i&&i.document.isDirty){const a=i.document.getText(),f=(await this._repository.getObjectDetails(this._reposManager.activePullRequest.head.sha,r)).object,E=await this._repository.hashObject(a);return await this._repository.diffBlobs(f,E)}else return await this._repository.diffWith(this._reposManager.activePullRequest.head.sha,r)}findMatchedFileChangeForReviewDiffView(e,r){const n=di(r.query),i=e.filter(a=>{if(a instanceof Ya||a.fileName!==n.path)return!1;if(a.filePath.scheme!=="review"&&a.sha===n.commit)return!0;const o=a.filePath.query?JSON.parse(a.filePath.query):void 0;if(o&&o.commit===n.commit)return!0;const f=a.parentFilePath.query?JSON.parse(a.parentFilePath.query):void 0;return!!(f&&f.commit===n.commit)});if(i&&i.length)return i[0]}gitRelativeRootPath(e){return L.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}getCommentSide(e){return e.uri.scheme==="review"&&di(e.uri.query).base?Rt.LEFT:Rt.RIGHT}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n){const a=e.comments[0];if(a instanceof nr)await this._reposManager.activePullRequest.createCommentReply(r,a._rawComment.graphNodeId,!1);else throw new Error("Cannot reply to temporary comment")}else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e);let f;if(o===Rt.RIGHT){const E=await this.getContentDiff(e.uri,a);f=Wc(E,e.range.start.line)}else f=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,a,f+1,o)}}catch(a){u.window.showErrorMessage(`Starting review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof Wr&&o.id===i&&(o.mode=u.CommentMode.Editing),o))}}async openReview(){await this._reviewManager.openDescription(),en.scrollToReview()}optimisticallyAddComment(e,r,n){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),a=new Wr(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,js(e)}optimisticallyEditComment(e,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new Wr(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof nr&&a.commentId===r.commentId?i:a),i.id}async createOrReplyComment(e,r,n,i){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment without an active pull request.");const a=e.comments.length,o=n?!1:i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,f=this.optimisticallyAddComment(e,r,o);try{if(a){const E=e.comments[0];if(E instanceof nr)await this._reposManager.activePullRequest.createCommentReply(r,E._rawComment.graphNodeId,n);else throw new Error("Cannot reply to temporary comment")}else{const E=this.gitRelativeRootPath(e.uri.path);this._pendingCommentThreadAdds.push(e);const S=this.getCommentSide(e);let P;if(S===Rt.RIGHT){const q=await this.getContentDiff(e.uri,E);P=Wc(q,e.range.start.line)}else P=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,E,P+1,S,n)}n&&await this._reposManager.activePullRequest.submitReview()}catch(E){u.window.showErrorMessage(`Creating comment failed: ${E}`),e.comments=e.comments.map(S=>(S instanceof Wr&&S.id===f&&(S.mode=u.CommentMode.Editing),S))}}async createCommentOnResolve(e,r){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment on resolve without an active pull request.");const n=await this._reposManager.activePullRequest.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.resolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.unresolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async editComment(e,r){if(r instanceof nr){const n=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof u.MarkdownString?r.body.value:r.body)}catch(i){u.window.showErrorMessage(ke(i)),e.comments=e.comments.map(a=>a instanceof Wr&&a.id===n?new nr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");r instanceof nr?await this._reposManager.activePullRequest.deleteReviewComment(r.commentId):e.comments=e.comments.filter(i=>!(i instanceof Wr&&i.id===r.id)),e.comments.length===0?e.dispose():js(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update(this._localFileChanges)}catch(n){throw new Error(ke(n))}}async update(e){await this._reposManager.activePullRequest.validateDraftMode(),this._localFileChanges=e}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r):await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)}catch(n){throw new Error(ke(n))}}dispose(){this._commentController&&this._commentController.dispose(),ho(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var Tg=Object.defineProperty,zt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const tp=class{constructor(t,e,r,n,i,a,o){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=n,this.changesInPrDataProvider=i,this._showPullRequest=a,this._sessionState=o,zt(this,"_localToDispose",[]),zt(this,"_disposables"),zt(this,"_comments",[]),zt(this,"_localFileChanges",[]),zt(this,"_obsoleteFileChanges",[]),zt(this,"_lastCommitSha"),zt(this,"_updateMessageShown",!1),zt(this,"_validateStatusInProgress"),zt(this,"_reviewCommentController"),zt(this,"_statusBarItem"),zt(this,"_prNumber"),zt(this,"_previousRepositoryState"),zt(this,"_webviewViewProvider"),zt(this,"_createPullRequestHelper"),zt(this,"_switchingToReviewMode"),zt(this,"justSwitchedToRevieMode",!1),zt(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Ls(this._repository)},this.registerListeners(),this.updateState(!0),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let n;!e||!r?n=!1:n=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const i=n&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,a=Ls(this._repository),o=this._previousRepositoryState.remotes.length===a.length&&this._previousRepositoryState.remotes.every(f=>a.some(E=>f.equals(E)));(!i||!o)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:a},this.updateState(!0))})),this._disposables.push(u.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(u.window.registerTerminalLinkProvider(new og(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=u.window.createStatusBarItem("github.pullrequest.status",u.StatusBarAlignment.Left),this._statusBarItem.name="GitHub Active Pull Request"),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e;const r=this._repository.state.HEAD;if(r){const n=r.upstream?r.upstream.remote:null;if(n&&(await this._repository.fetch(n,(e=this._repository.state.HEAD)==null?void 0:e.name),!this._context.globalState.get(Sc,!1)&&!this._updateMessageShown&&(this._lastCommitSha&&t.head.sha!==this._lastCommitSha||r.behind!==void 0&&r.behind>0))){this._updateMessageShown=!0;const a="Pull",o="Never show again";await u.window.showInformationMessage("There are updates available for this pull request.",{},a,o)===a?(await u.commands.executeCommand("git.pull"),this._updateMessageShown=!1):o&&await this._context.globalState.update(Sc,!0)}}}async updateState(t=!1,e=!0){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(C.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async r=>await this.validateState(t,e)),this._validateStatusInProgress):(C.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateState(t,e),this._validateStatusInProgress)}async validateState(t,e){if(C.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const r=this._repository.state.HEAD;let n=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!n){C.appendLine(`Review> no matching pull request metadata found for current branch ${r.name}`);const P=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();P&&(vn.associateBranchWithPullRequest(this._repository,P.model,r.name),n=P)}if(!n){C.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${r.name}`),this.clear(!0);return}const i=r.commit!==this._lastCommitSha&&r.ahead===0&&r.behind===0;if(this._prNumber===n.prNumber&&!i){u.commands.executeCommand("pr.refreshList");return}if(!(r.upstream?r.upstream.remote:null)){C.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}C.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${n.prNumber}`),this.clear(!1),this._prNumber=n.prNumber,this._lastCommitSha=void 0;const{owner:o,repositoryName:f}=n;C.appendLine("Review> Resolving pull request");const E=await this._folderRepoManager.resolvePullRequest(o,f,n.prNumber);if(!E||!E.isResolved()){this._prNumber=void 0,C.appendLine("Review> This PR is no longer valid");return}this._folderRepoManager.activePullRequest=E,this._lastCommitSha=E.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(E)),C.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(E),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,E,this._localFileChanges,this._comments,this.justSwitchedToRevieMode),this.justSwitchedToRevieMode=!1,C.appendLine("Review> register comments provider"),await this.registerCommentController();const S=this._context.workspaceState.get(hi);if(this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(E):(this._webviewViewProvider=new ag(this._context.extensionUri,this._folderRepoManager,E),this._context.subscriptions.push(u.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(u.commands.registerCommand("pr.refreshActivePullRequest",P=>{var q;(q=this._webviewViewProvider)==null||q.refresh()}))),this.statusBarItem.text=`$(git-pull-request) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[E]},C.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),u.commands.executeCommand("pr.refreshList"),C.appendLine(`Review> using focus mode = ${S}.`),C.appendLine(`Review> state validation silent = ${t}.`),C.appendLine(`Review> PR show should show = ${this._showPullRequest.shouldShow}.`),(!t||this._showPullRequest.shouldShow)&&S)this._doFocusShow(e);else if(!this._showPullRequest.shouldShow&&S){const P=this._showPullRequest.onChangedShowValue(q=>{C.appendLine(`Review> PR show value changed = ${q}.`),q&&this._doFocusShow(e),P.dispose()});this._localToDispose.push(P)}this._validateStatusInProgress=void 0}_doFocusShow(t){var e;if((e=this._webviewViewProvider)==null||e.show(),t&&this.localFileChanges.length>0){let r;for(const n of this.localFileChanges)if(n.status===Je.MODIFY){r=n;break}r=r!=null?r:this.localFileChanges[0],r.openDiff(this._folderRepoManager)}}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const n=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!n||!n.isResolved()){C.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(n),await this.getPullRequestData(n),await this._reviewCommentController.update(this._localFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,r){const n=[],i=t.mergeBase||t.base.sha,a=t.head.sha;for(let o=0;o<e.length;o++){const f=e[o];let E=[];if(f instanceof pi)E=f.diffHunks;else if(f.status!==Je.RENAME)try{const he=await this._repository.diffBetween(t.base.sha,t.head.sha,f.fileName);E=ra(he)}catch(he){C.appendLine(`Failed to parse patch for outdated comments: ${he}`)}const S=L.join(this._repository.rootUri.path,f.fileName).replace(/\\/g,"/"),P=this._repository.rootUri.with({path:S}),q=f.status===Je.DELETE?Xr(P,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):P,z=Xr(P,f.status===Je.RENAME?f.previousFileName:f.fileName,void 0,f.status===Je.ADD?"":i,!1,{base:!0},this._repository.rootUri),le=new Ws(this.changesInPrDataProvider,this._folderRepoManager,t,f.status,f.fileName,f.blobUrl,q,z,E,r.filter(he=>he.path===f.fileName),a);n.push(le)}return n}async getPullRequestData(t){try{this._comments=await t.getReviewComments(),await t.initializeReviewThreadCache(),await t.getPullRequestFileViewState();const e=this._comments.filter(f=>f.position),r=this._comments.filter(f=>!f.position),n=await t.getFileChangesInfo(),i=t.mergeBase||t.base.sha,a=await ms(n,this._repository,i);this._localFileChanges=await this.getLocalChangeNodes(t,a,e);const o=me(r,f=>f.originalCommitId);this._obsoleteFileChanges=[];for(const f in o){const E=o[f],S=me(E,P=>P.path);for(const P in S){let q=[];try{const fe=await this._repository.diffBetween(t.base.sha,f,P);q=ra(fe)}catch(fe){C.appendLine(`Failed to parse patch for outdated comments: ${fe}`)}const z=S[P],le=u.Uri.file(L.join(`commit~${f.substr(0,8)}`,P)),he=new Ws(this.changesInPrDataProvider,this._folderRepoManager,t,Je.MODIFY,P,void 0,Xr(le,P,void 0,z[0].originalCommitId,!0,{base:!1},this._repository.rootUri),Xr(le,P,void 0,z[0].originalCommitId,!0,{base:!0},this._repository.rootUri),q,z,f);this._obsoleteFileChanges.push(he)}}return Promise.resolve(void 0)}catch(e){C.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new Sg(this,this._folderRepoManager,this._repository,this._localFileChanges,this._sessionState),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){C.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){if(C.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.message==="User aborted")return;if(e.gitErrorCode&&(e.gitErrorCode===kr.LocalChangesOverwritten||e.gitErrorCode===kr.DirtyWorkTree)){u.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}u.window.showErrorMessage(ke(e));return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fulfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),C.appendLine(`Review> switch to Pull Request #${t.number} - done`,tp.ID)}finally{this.switchingToReviewMode=!1,this.justSwitchedToRevieMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._repository.status()}}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const n=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),i=await n.getViewerPermission();if(i===Gr.Read||i===Gr.Triage||i===Gr.Unknown){const o=await this._folderRepoManager.tryOfferToFork(n);if(!o)return;r=this._folderRepoManager.getGitHubRemotes().find(f=>f.remoteName===o)}if(!r)return;const a=r;return new Promise(async o=>{const f=u.window.createInputBox();f.value=t.name,f.ignoreFocusOut=!0,f.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const E=async function(S){try{f.busy=!0,await this._reposManager.getBranch(a,S)?f.validationMessage=`Branch ${S} already exists in ${a.owner}/${a.repositoryName}`:f.validationMessage=void 0}catch(P){f.validationMessage=void 0}f.busy=!1};await E(t.name),f.onDidChangeValue(E.bind(this)),f.onDidAccept(async()=>{f.validationMessage=void 0,f.hide();try{await this._repository.push(a.remoteName,`${t.name}:${f.value}`,!0)}catch(P){throw P.gitErrorCode===kr.PushRejected&&(u.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),o(void 0)),P.gitErrorCode===kr.RemoteConnectionError&&(u.window.showWarningMessage(`Could not read from remote repository '${a.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),o(void 0)),P}const S=await this._repository.getBranch(t.name);(!S||!S.upstream)&&o(void 0),o(S)}),f.show()})}async getRemote(t,e,r){if(!t.length){u.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return Zh.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let n=!1;const i=t.map(o=>{const f=Zh.fromRemote(o);if(r){const{owner:E,name:S}=r;f.picked=f.owner===E&&f.name===S,f.picked&&(n=!0)}return f});!n&&r&&i.unshift(r);const a=await u.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!a)return a}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new wg(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState(!1,!1);const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Xc(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}async openDescription(){const t=this._folderRepoManager.activePullRequest;if(!t)return;const e=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Xc(this._context,this._telemetry,t,e,this._folderRepoManager)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){u.workspace.getConfiguration(Ar).get("focusedMode")&&this._folderRepoManager.activePullRequest?(u.commands.executeCommand("setContext",hi,!0),await this._context.workspaceState.update(hi,!0)):(u.commands.executeCommand("setContext",hi,!1),this._context.workspaceState.update(hi,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],u.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=di(t.query);let n=zc(this._localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r);if(n.length){const i=n[0],a=r===i.sha?pr.Delete:pr.Add;return i.diffHunks.map(f=>f.diffLines.filter(E=>E.type!==a).map(E=>E.text)).reduce((f,E)=>f.concat(...E),[]).join(`
`)}if(n=zc(this._obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r),n.length){const i=n[0],a=r===i.sha?pr.Delete:pr.Add,o=[],f=me(i.comments,E=>String(E.originalPosition));for(const E in f){if(!f[E][0].diffHunks)continue;const S=f[E][0].diffHunks.map(P=>P.diffLines.filter(q=>q.type!==a).map(q=>q.text)).reduce((P,q)=>P.concat(...q),[]);o.push(...S)}return o.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(n=>n.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let is=tp;zt(is,"ID","Review");class Rg{constructor(){zt(this,"_shouldShow",!1),zt(this,"_onChangedShowValue",new u.EventEmitter),zt(this,"onChangedShowValue",this._onChangedShowValue.event)}get shouldShow(){return this._shouldShow}set shouldShow(e){const r=this._shouldShow;this._shouldShow=e,r!==this._shouldShow&&this._onChangedShowValue.fire(this._shouldShow)}}var Cg=Object.defineProperty,Kc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ss extends Ir{constructor(e,r,n,i){super();this.parent=e,this.label=r,this.iconPath=n,this.pullRequestModel=i,Kc(this,"command"),Kc(this,"contextValue"),Kc(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`,this.accessibilityInformation={label:`Pull request page of pull request number ${i.number}`,role:"button"}}getTreeItem(){return this}}var Pg=Object.defineProperty,rp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ng{constructor(){rp(this,"_onDidChange",new u.EventEmitter),rp(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,r){const n=Zt(e);if(n&&n.prNumber){const i=this._prFileChangeContentProviders[n.prNumber];if(i)return await i(e)}return""}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const Ag=new Ng;function np(){return Ag}var Ig=Object.defineProperty,Yc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class as extends Ir{constructor(e,r){super();this.parent=e,this.label=r,Yc(this,"collapsibleState"),Yc(this,"children",[]),Yc(this,"pathToChild",new Map),this.collapsibleState=u.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof as&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof as&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(n=>{n instanceof as?(n.sort(),e.push(n)):r.push(n)}),e.sort((n,i)=>n.label<i.label?-1:1),r.sort((n,i)=>n.label<i.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");e.description="",this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const n=e[0],i=e.slice(1);let a=this.pathToChild.get(n);a||(a=new as(this,n),this.pathToChild.set(n,a),this.children.push(a)),a.addPathRecc(i,r)}getTreeItem(){return this}}var Og=Object.defineProperty,Ys=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ip=class extends Ir{constructor(t,e,r,n){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=n,Ys(this,"_fileChanges"),Ys(this,"_commentController"),Ys(this,"_disposables",[]),Ys(this,"_inMemPRContentProvider"),Ys(this,"_command")}get command(){return this._command}set command(t){this._command=t}async getChildren(){C.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,ip.ID);try{this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(n=>n.dispose()),this.childrenDisposables=[]);const t=new ss(this,"Description",new u.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];await this.pullRequestModel.initializeReviewThreadCache(),await this.pullRequestModel.getPullRequestFileViewState(),this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=np().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this._commentController||await this.resolvePRCommentController(),await this.pullRequestModel.validateDraftMode();const e=[t];if(u.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const n=new as(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?e.push(...n.children):e.push(n)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return C.appendLine(t),[]}}async resolvePRCommentController(){await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentingRangeProvider(this.pullRequestModel.number,this)),this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this.pullRequestModel,this._folderReposManager)),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(e=>{e instanceof Fu&&e.comments.forEach(r=>r.isDraft=t)})}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),r=this.pullRequestModel.mergeBase;return r?(await ms(e,this._folderReposManager.repository,r)).map(i=>{const a=this.pullRequestModel.head.sha,o=i.status===Je.RENAME?i.previousFileName:i.fileName;return i instanceof _o?new Ya(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Bn(u.Uri.file(Vn(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,a,i.fileName,!1,i.status),Bn(u.Uri.file(Vn(this._folderReposManager.repository.rootUri,o)),this.pullRequestModel,i.baseCommit,a,i.fileName,!0,i.status)):(console.log(u.Uri.file(Vn(this._folderReposManager.repository.rootUri,i.fileName))),new Fu(this._folderReposManager,this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Bn(u.Uri.file(Vn(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,a,i.fileName,!1,i.status),Bn(u.Uri.file(Vn(this._folderReposManager.repository.rootUri,o)),this.pullRequestModel,i.baseCommit,a,i.fileName,!0,i.status),i.isPartial,i.patch,i.diffHunks,t.filter(E=>E.path===i.fileName&&E.position!==null)))}):[]}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:n,isDraft:i,html_url:a}=this.pullRequestModel,{login:o}=n,f=t?"\u2713 ":"",E=t?"Current Branch * ":"",S=r.toString(),P=`${f}#${S}: ${i?"[DRAFT] ":""}${e}`,q=`${E}${e} by @${o}`,z=`by @${o}`;return{label:P,id:`${this.parent instanceof Ir?this.parent.label:""}${a}`,tooltip:q,description:z,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new u.ThemeIcon("github"),accessibilityInformation:{label:`${i?"Draft ":""}Pull request number ${S}: ${e} by ${o}`}}}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=Zt(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const n=(await this.getFileChanges()).find(i=>i.fileName===r.fileName);return!n||n instanceof Ya?void 0:ep(n.diffHunks,r.isBase)}}async provideDocumentContent(t){const e=Zt(t);if(!e)return"";const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)return C.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===Je.ADD||!e.isBase&&r.status===Je.DELETE)return"";if(r instanceof Ya||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(n){return C.appendLine(`PR> Fetching file content failed: ${n}`),u.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&u.commands.executeCommand("vscode.open",u.Uri.parse(r.blobUrl))}),""}if(r instanceof Fu)if(r.status===Je.ADD||r.status===Je.DELETE)if(e.isBase){const i=[];for(let a=0;a<r.diffHunks.length;a++)for(let o=0;o<r.diffHunks[a].diffLines.length;o++){const f=r.diffHunks[a].diffLines[o];f.type===pr.Add||(f.type===pr.Delete?i.push(f.text):f.type===pr.Control||i.push(f.text))}return i.join(`
`)}else{const i=[];for(let a=0;a<r.diffHunks.length;a++)for(let o=0;o<r.diffHunks[a].diffLines.length;o++){const f=r.diffHunks[a].diffLines[o];f.type===pr.Add?i.push(f.text):f.type===pr.Delete||f.type===pr.Control||i.push(f.text)}return i.join(`
`)}else{const i=r.status===Je.RENAME?r.previousFileName:r.fileName,a=u.Uri.joinPath(this._folderReposManager.repository.rootUri,i),o=await this._folderReposManager.repository.show(e.baseCommit,a.fsPath);return e.isBase?o:Xu(o,r.patch)}return""}dispose(){super.dispose(),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose()),this._disposables=[]}};let Xs=ip;Ys(Xs,"ID","PRNode");const Lu=new u.EventEmitter,sp=Lu.event;function Za(t,e){if(e)return e instanceof Xs?e.pullRequestModel:e;if(!t.activePullRequest)throw u.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function Xc(t,e,r,n,i){const a=Za(i,r);n==null||n.reveal(n,{select:!0,focus:!0}),await en.createOrShow(t.extensionUri,i,a),e.sendTelemetryEvent("pr.openDescription")}async function eo(t,e,r){var n;if(t.length===1)return t[0];const i=t.map(a=>({label:e(a),itemValue:a}));return(n=await u.window.showQuickPick(i,r))==null?void 0:n.itemValue}async function to(t,e){t instanceof Xs||t instanceof ss?u.commands.executeCommand("vscode.open",u.Uri.parse(t.pullRequestModel.html_url)):u.commands.executeCommand("vscode.open",u.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function Dg(t,e,r,n,i,a,o){t.subscriptions.push(u.commands.registerCommand("pr.openPullRequestOnGitHub",async S=>{if(S)to(S,i);else{const P=r.folderManagers.map(q=>q.activePullRequest).filter(q=>!!q);if(P.length>=1){const q=await eo(P,z=>z.html_url);q&&to(q,i)}}})),t.subscriptions.push(u.commands.registerCommand("review.suggestDiff",async S=>{try{const P=await eo(r.folderManagers,Me=>L.basename(Me.repository.rootUri.fsPath));if(!P||!P.activePullRequest)return;const{indexChanges:q,workingTreeChanges:z}=P.repository.state;if(!q.length)if(z.length)if(await u.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.stageAll");else return;else{u.window.showInformationMessage("There are no changes to suggest.");return}const le=await P.repository.diff(!0);let he="";S&&S.inputBox&&S.inputBox.value&&(he=`${S.inputBox.value}
`,S.inputBox.value="");const fe=`${he}\`\`\`diff
${le}
\`\`\``;await P.activePullRequest.createIssueComment(fe),await u.commands.executeCommand("git.unstageAll");const Pe=L.join(P.repository.rootUri.path,".git",`${P.activePullRequest.number}.diff`),Ce=new TextEncoder,Oe=u.Uri.parse(Pe);await u.workspace.fs.writeFile(Oe,Ce.encode(le)),await P.repository.apply(Pe,!0),await u.workspace.fs.delete(Oe)}catch(P){C.appendLine(`Applying patch failed: ${P}`),u.window.showErrorMessage(`Applying patch failed: ${ke(P)}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.openFileOnGitHub",async S=>{if(!(S instanceof Ya&&!await u.window.showInformationMessage(`${S.fileName} can't be opened locally. Do you want to open it on GitHub?`,"Open"))&&S.blobUrl)return u.commands.executeCommand("vscode.open",u.Uri.parse(S.blobUrl))})),t.subscriptions.push(u.commands.registerCommand("pr.copyCommitHash",S=>{u.env.clipboard.writeText(S.sha)})),t.subscriptions.push(u.commands.registerCommand("pr.openOriginalFile",async S=>{const P=r.getManagerForIssueModel(S.pullRequest);if(P){const q=await Zs(S.parentFilePath,P.repository);u.commands.executeCommand("vscode.open",q||S.parentFilePath)}})),t.subscriptions.push(u.commands.registerCommand("pr.openModifiedFile",S=>{u.commands.executeCommand("vscode.open",S.filePath)})),t.subscriptions.push(u.commands.registerCommand("pr.openDiffView",S=>{const P=r.getManagerForIssueModel(S.pullRequest);!P||S.openDiff(P)})),t.subscriptions.push(u.commands.registerCommand("pr.deleteLocalBranch",async S=>{const P=r.getManagerForIssueModel(S.pullRequestModel);if(!P)return;const q=Za(P,S),z="delete branch (even if not merged)";let le=null;try{await P.deleteLocalPullRequest(q)}catch(he){if(he.gitErrorCode===kr.BranchNotFullyMerged){if(await u.window.showErrorMessage(`The branch '${q.localBranchName}' is not fully merged, are you sure you want to delete it? `,z)!==z)return;try{await P.deleteLocalPullRequest(q,!0)}catch(Pe){le=Pe}}else le=he}le?(i.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await u.window.showErrorMessage(`Deleting local pull request branch failed: ${le}`)):(i.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),u.commands.executeCommand("pr.refreshList"))}));function f(S){if(S){const P=u.Uri.file(S).toString();for(const q of n)if(q.repository.rootUri.toString()===P)return q}return eo(n,P=>L.basename(P.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function E(S){return!!(S==null?void 0:S.rootUri)}t.subscriptions.push(u.commands.registerCommand("pr.create",async S=>{var P,q;E(S)?(P=await f(S.rootUri.fsPath))==null||P.createPullRequest():(q=await f(S==null?void 0:S.repoPath))==null||q.createPullRequest(S==null?void 0:S.compareBranch)})),t.subscriptions.push(u.commands.registerCommand("pr.pick",async S=>{let P;S instanceof Xs||S instanceof ss?P=S.pullRequestModel:P=S;const q=S instanceof ii;return i.sendTelemetryEvent("pr.checkout",{fromDescription:q.toString()}),u.window.withProgress({location:u.ProgressLocation.SourceControl,title:`Switching to Pull Request #${P.number}`},async()=>{var z;await((z=is.getReviewManagerForRepository(n,P.githubRepository))==null?void 0:z.switch(P))})})),t.subscriptions.push(u.commands.registerCommand("pr.exit",async S=>{let P;S instanceof Xs||S instanceof ss?P=S.pullRequestModel:P=S;const q=S instanceof ii;return i.sendTelemetryEvent("pr.exit",{fromDescription:q.toString()}),u.window.withProgress({location:u.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async()=>{const z=await P.githubRepository.getDefaultBranch(),le=r.getManagerForIssueModel(P);le&&le.checkoutDefaultBranch(z)})})),t.subscriptions.push(u.commands.registerCommand("pr.merge",async S=>{const P=r.getManagerForIssueModel(S==null?void 0:S.pullRequestModel);if(!P)return;const q=Za(P,S);return q.base&&q.head&&!q.base.repositoryCloneUrl.equals(q.head.repositoryCloneUrl)&&Uc()?to(q,i):u.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async he=>{let fe;if(he==="Yes")try{return fe=await P.mergePullRequest(q),fe}catch(Pe){return u.window.showErrorMessage(`Unable to merge pull request. ${ke(Pe)}`),fe}})})),t.subscriptions.push(u.commands.registerCommand("pr.readyForReview",async S=>{const P=r.getManagerForIssueModel(S==null?void 0:S.pullRequestModel);if(!P)return;const q=Za(P,S);return u.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async z=>{let le;if(z==="Yes")try{return le=await q.setReadyForReview(),u.commands.executeCommand("pr.refreshList"),le}catch(he){return u.window.showErrorMessage(`Unable to mark pull request as ready to review. ${ke(he)}`),le}})})),t.subscriptions.push(u.commands.registerCommand("pr.close",async(S,P)=>{let q;if(S)q=S instanceof ii?S:S.pullRequestModel;else{const le=r.folderManagers.map(he=>he.activePullRequest).filter(he=>!!he);q=await eo(le,he=>`${he.number}: ${he.title}`,{placeHolder:"Pull request to close"})}if(!q)return;const z=q;return u.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async le=>{if(le==="Yes")try{let he;P&&(he=await z.createIssueComment(P));const fe=await z.close();return u.commands.executeCommand("pr.refreshList"),Lu.fire(fe),he}catch(he){u.window.showErrorMessage(`Unable to close pull request. ${ke(he)}`),Lu.fire()}Lu.fire()})})),t.subscriptions.push(u.commands.registerCommand("pr.openDescription",async S=>{let P;if(S)P=S instanceof ss?S.pullRequestModel:S;else{const le=r.folderManagers.map(he=>he.activePullRequest).filter(he=>!!he);le.length>=1&&(P=await eo(le,he=>he.title))}if(!P){C.appendLine("No pull request found.");return}const q=r.getManagerForIssueModel(P);if(!q)return;let z;if(S instanceof ss)z=S;else{const le=is.getReviewManagerForFolderManager(n,q);if(!le)return;z=le.changesInPrDataProvider.getDescriptionNode(q)}await Xc(t,i,P,z,q)})),t.subscriptions.push(u.commands.registerCommand("pr.refreshDescription",async()=>{en.currentPanel&&en.refresh()})),t.subscriptions.push(u.commands.registerCommand("pr.openDescriptionToTheSide",async S=>{const P=r.getManagerForIssueModel(S.pullRequestModel);if(!P)return;const q=S.pullRequestModel,z=Za(P,q);S.reveal(S,{select:!0,focus:!0}),en.createOrShow(t.extensionUri,P,z,!0),i.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(u.commands.registerCommand("pr.signin",async()=>{await r.authenticate()})),t.subscriptions.push(u.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const S of r.folderManagers)await S.deleteLocalBranchesNRemotes()})),t.subscriptions.push(u.commands.registerCommand("pr.signinAndRefreshList",async()=>{await r.authenticate()&&u.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(u.commands.registerCommand("pr.configureRemotes",async()=>u.commands.executeCommand("workbench.action.openSettings",`@ext:${kn} remotes`))),t.subscriptions.push(u.commands.registerCommand("pr.startReview",async S=>{i.sendTelemetryEvent("pr.startReview");const P=En(S.thread);P&&P.startReview(S.thread,S.text)})),t.subscriptions.push(u.commands.registerCommand("pr.openReview",async S=>{i.sendTelemetryEvent("pr.openReview");const P=En(S.thread);P&&await P.openReview(S.thread)})),t.subscriptions.push(u.commands.registerCommand("pr.resolveReviewThread",async S=>{i.sendTelemetryEvent("pr.resolveReviewThread");const P=En(S.thread);P&&await P.resolveReviewThread(S.thread.value,S.text)})),t.subscriptions.push(u.commands.registerCommand("pr.unresolveReviewThread",async S=>{i.sendTelemetryEvent("pr.unresolveReviewThread");const P=En(S.thread);P&&await P.unresolveReviewThread(S.thread.value,S.text)})),t.subscriptions.push(u.commands.registerCommand("pr.createComment",async S=>{i.sendTelemetryEvent("pr.createComment");const P=En(S.thread);P&&P.createOrReplyComment(S.thread,S.text,!1)})),t.subscriptions.push(u.commands.registerCommand("pr.createSingleComment",async S=>{i.sendTelemetryEvent("pr.createSingleComment");const P=En(S.thread);P&&P.createOrReplyComment(S.thread,S.text,!0)})),t.subscriptions.push(u.commands.registerCommand("pr.editComment",async S=>{i.sendTelemetryEvent("pr.editComment"),S.startEdit()})),t.subscriptions.push(u.commands.registerCommand("pr.cancelEditComment",async S=>{i.sendTelemetryEvent("pr.cancelEditComment"),S.cancelEdit()})),t.subscriptions.push(u.commands.registerCommand("pr.saveComment",async S=>{i.sendTelemetryEvent("pr.saveComment");const P=En(S.parent);P&&await P.editComment(S.parent,S)})),t.subscriptions.push(u.commands.registerCommand("pr.deleteComment",async S=>{if(i.sendTelemetryEvent("pr.deleteComment"),await u.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const q=En(S.parent);q&&await q.deleteComment(S.parent,S)}})),t.subscriptions.push(u.commands.registerCommand("review.openFile",S=>{var P;const q=S instanceof Ws?S.openFileCommand():Yh(S);u.commands.executeCommand(q.command,...(P=q.arguments)!=null?P:[])})),t.subscriptions.push(u.commands.registerCommand("pr.refreshChanges",S=>{n.forEach(P=>{P.updateComments(),en.refresh(),P.changesInPrDataProvider.refresh()})})),t.subscriptions.push(u.commands.registerCommand("pr.setFileListLayoutAsTree",S=>{u.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(u.commands.registerCommand("pr.setFileListLayoutAsFlat",S=>{u.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(u.commands.registerCommand("pr.refreshPullRequest",S=>{var P;const q=r.getManagerForIssueModel(S.pullRequestModel);q&&S.pullRequestModel.equals(q==null?void 0:q.activePullRequest)&&((P=is.getReviewManagerForFolderManager(n,q))==null||P.updateComments()),en.refresh(),o.refresh(S)})),t.subscriptions.push(u.commands.registerCommand("pr.markFileAsViewed",async S=>{try{await S.pullRequest.markFileAsViewed(S.fileName)}catch(P){u.window.showErrorMessage(`Marked file as viewed failed: ${P}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.unmarkFileAsViewed",async S=>{try{await S.pullRequest.unmarkFileAsViewed(S.fileName)}catch(P){u.window.showErrorMessage(`Marked file as not viewed failed: ${P}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.expandAllComments",()=>{e.commentsExpandState=!0})),t.subscriptions.push(u.commands.registerCommand("pr.collapseAllComments",()=>{e.commentsExpandState=!1}))}var Mg=Object.defineProperty,Jc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class xg{constructor(e){Jc(this,"_commentsExpandState"),Jc(this,"_onDidChangeCommentsExpandState",new u.EventEmitter),Jc(this,"onDidChangeCommentsExpandState",this._onDidChangeCommentsExpandState.event);var r;const n=(r=u.workspace.getConfiguration(Ar))==null?void 0:r.get(Nu);this._commentsExpandState=n===xc,e.subscriptions.push(u.workspace.onDidChangeConfiguration(i=>{var a;if(i.affectsConfiguration(`${Ar}.${Nu}`)){const o=(a=u.workspace.getConfiguration(Ar))==null?void 0:a.get(Nu);this.commentsExpandState=o===xc}}))}get commentsExpandState(){return this._commentsExpandState}set commentsExpandState(e){this._commentsExpandState=e,this._onDidChangeCommentsExpandState.fire(this._commentsExpandState)}}var Js=Xe(9035),Fg=Object.defineProperty,ap=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Lg{constructor(e){this.baseReporter=e,ap(this,"sharedProperties",{})}sendTelemetryEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryEvent(e,{...this.sharedProperties,...r},n)}sendTelemetryErrorEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const n={};for(const[i,a]of r)n[i]=a;this.sendTelemetryEvent(e,n)}async dispose(){var e;return(e=this.baseReporter)==null?void 0:e.dispose()}}function qg(){switch(u.env.uriScheme){case"vscode":return Js.aU.Public;case"vscode-insiders":return Js.aU.Insiders;case"vscode-exploration":return Js.aU.Internal;case"code-oss":return Js.aU.Team;default:return Js.aU.Public}}class Ug{constructor(){ap(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function $g(t,e){const r=t.extension.id,n=t.extension.packageJSON.name,i=t.extension.packageJSON.version,a=qg();return n==="vscode-pull-request-github"?(0,Js.X7)(r,i,a,e,t.globalState):new Ug}var Gg=Object.defineProperty,ro=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class uy extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class ly extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class cy extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const dy="No Milestone";class op{constructor(e,r,n,i){this._folderManagers=e,this._credentialStore=r,this._telemetry=n,this._sessionState=i,ro(this,"_subs"),ro(this,"_onDidChangeState",new u.EventEmitter),ro(this,"onDidChangeState",this._onDidChangeState.event),ro(this,"_state",tn.Initializing),this._subs=[],u.commands.executeCommand("setContext",Dh,this._state),this._subs.push(...e.map(a=>a.onDidLoadRepositories(o=>this.state=o)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const r=u.workspace.workspaceFolders;if(r){const n=r.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(n>-1){const i=this._folderManagers.slice(n,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,n),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(n=>n.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const n=this._folderManagers[r];this._folderManagers.splice(r),n.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-L.extname(e.remote.url).length);for(const n of this._folderManagers)if(n.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-L.extname(i.remote.url).length)).includes(r))return n}getManagerForFile(e){for(const r of this._folderManagers){const n=r.repository.rootUri.path,i=e.path.substring(n.length>1?n.length+1:n.length);if(xt(u.Uri.joinPath(r.repository.rootUri,i).path,e.path)===0)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(u.commands.executeCommand("setContext",Dh,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=tn.Initializing}async authenticate(){const e=await this._credentialStore.login(gt.github);let r;return Qs()&&(r=await this._credentialStore.login(gt["github-enterprise"])),!!e||!!r}createGitHubRepository(e,r){return new Hs(e,r,this._telemetry,this._sessionState)}createGitHubRepositoryFromOwnerName(e,r){const n=`https://github.com/${e}/${r}`;return new Hs(new bu(r,n,new Sn(n)),this._credentialStore,this._telemetry,this._sessionState)}dispose(){this._subs.forEach(e=>e.dispose())}}ro(op,"ID","RepositoriesManager");function hy(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var Hg=Object.defineProperty,Un=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Zc{constructor(e){Un(this,"_onDidOpenRepository",new u.EventEmitter),Un(this,"onDidOpenRepository",this._onDidOpenRepository.event),Un(this,"_onDidCloseRepository",new u.EventEmitter),Un(this,"onDidCloseRepository",this._onDidCloseRepository.event),Un(this,"_onDidChangeState",new u.EventEmitter),Un(this,"onDidChangeState",this._onDidChangeState.event),Un(this,"_onDidPublish",new u.EventEmitter),Un(this,"onDidPublish",this._onDidPublish.event),Un(this,"_gitAPI"),Un(this,"_disposables");const r=e.exports;try{this._gitAPI=r.getAPI(1)}catch(n){throw u.window.showErrorMessage("Activating the Pull Requests and Issues extension failed. Please make sure you have git installed."),n}this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(this._gitAPI.onDidOpenRepository(n=>this._onDidOpenRepository.fire(n))),this._disposables.push(this._gitAPI.onDidChangeState(n=>this._onDidChangeState.fire(n))),this._disposables.push(this._gitAPI.onDidPublish(n=>this._onDidPublish.fire(n)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static async createProvider(){const e=u.extensions.getExtension("vscode.git");if(e)return await e.activate(),new Zc(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var Bg=Object.defineProperty,ir=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Vg{constructor(e){this._liveShareAPI=e,ir(this,"_onDidOpenRepository",new u.EventEmitter),ir(this,"onDidOpenRepository",this._onDidOpenRepository.event),ir(this,"_onDidCloseRepository",new u.EventEmitter),ir(this,"onDidCloseRepository",this._onDidCloseRepository.event),ir(this,"_openRepositories",[]),ir(this,"_sharedServiceProxy"),ir(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(ea)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(u.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){u.workspace.workspaceFolders&&u.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const n=new Qg(e,this._sharedServiceProxy),i=new jg,a=new Proxy(n,i);await a.initialize(),this.openRepository(a)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class jg{constructor(){}get(e,r){return r in e?e[r]:function(...n){return e.proxy.request(hs,[r,e.workspaceFolder.uri.toString(),...n])}}}class zg{constructor(e){ir(this,"HEAD"),ir(this,"refs"),ir(this,"remotes"),ir(this,"submodules",[]),ir(this,"rebaseCommit"),ir(this,"mergeChanges",[]),ir(this,"indexChanges",[]),ir(this,"workingTreeChanges",[]),ir(this,"_onDidChange",new u.EventEmitter),ir(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Qg{constructor(e,r){this.workspaceFolder=e,this.proxy=r,ir(this,"rootUri"),ir(this,"state")}async initialize(){const e=await this.proxy.request(hs,[vo,this.workspaceFolder.uri.toString()]);this.state=new zg(e),this.rootUri=u.Uri.parse(e.rootUri),this.proxy.onNotify(yo,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var Wg=Object.defineProperty,up=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Kg{constructor(e,r){this._liveShareAPI=e,this._api=r,up(this,"_sharedService"),up(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(ea)||void 0,this._sharedService&&this._sharedService.onRequest(hs,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],n=e[1],i=u.Uri.parse(n),a=this._liveShareAPI.convertSharedUriToLocal(i),o=this._api.getGitProvider(a);if(!o)return;const f=o.repositories.filter(E=>E.rootUri.toString()===a.toString())[0];if(f){const E=e.slice(2);if(r===vo)return this._disposables.push(f.state.onDidChange(S=>{this._sharedService.notify(yo,{HEAD:f.state.HEAD,remotes:f.state.remotes,refs:f.state.refs})})),{HEAD:f.state.HEAD,remotes:f.state.remotes,refs:f.state.refs,rootUri:i.toString()};if(r==="show"){const S=E[1],P=i.with({path:S}),q=this._liveShareAPI.convertSharedUriToLocal(P);return E[1]=q.fsPath,f[r](...E)}if(f[r])return f[r](...E)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Yg=Object.defineProperty,no=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function Xg(){const t=u.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class Jg{constructor(e){this._api=e,no(this,"_liveShareAPI"),no(this,"_host"),no(this,"_guest"),no(this,"_localDisposables"),no(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await Xg()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new Kg(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new Vg(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function Zg(t){return new Jg(t)}async function ev(t,e){const r=await Zc.createProvider();if(r)return e.registerGitProvider(r),r}var tv=Object.defineProperty,lp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?tv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class rv{constructor(e){this.pullRequestManager=e,lp(this,"onNotifiedEmitter",new u.EventEmitter),lp(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(n=>{this.notifySuggestedAccounts(n)})})}async requestAsync(e,r,n){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const a=new Map;for(const o of this.pullRequestManager.folderManagers){const f=o.getAllAssignableUsers();if(!!f)for(const E of f)a.has(E.login)||a.set(E.login,E)}a.size>0&&this.notifySuggestedAccounts(Array.from(a.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(n){}r&&e.findIndex(n=>n.login===r)!==-1&&this.notifySuggestedUsers(e.filter(n=>n.email).map(n=>({id:n.login,displayName:n.name?n.name:n.login,email:n.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const n=r.hub.currentUser;if(n)return n.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var nv=Object.defineProperty,cp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?nv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class iv{constructor(){cp(this,"_extensionsDisposable"),cp(this,"_subscriptions",[]),this._extensionsDisposable=u.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),u.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||u.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=u.extensions.getExtension("eamodio.gitlens"))!=null?e:u.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let n=0;const i=setInterval(async()=>{r.isActive?(clearInterval(i),this.register(await r.exports)):(n++,n>60&&clearInterval(i))},1e3)}}}var sv=Object.defineProperty,os=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class dp{constructor(e,r,n,i,a){this.issueModel=e,this.manager=r,this.stateManager=n,this.shouldPromptForBranch=a,os(this,"repoChangeDisposable"),os(this,"_branchName"),os(this,"user"),os(this,"repo"),os(this,"_repoDefaults"),os(this,"_onDidChangeCurrentIssueState",new u.EventEmitter),os(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let n=0;n<this.stateManager.gitAPI.repositories.length;n++){const i=this.stateManager.gitAPI.repositories[n];for(let a=0;a<i.state.remotes.length;a++){const o=i.state.remotes[a];if(o.name===(e==null?void 0:e.remoteName)&&((r=o.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return u.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(n=>n.login===r))&&(this.manager.gitHubRepositories.find(n=>n.remote.owner===this.issueModel.remote.owner&&n.remote.repositoryName===this.issueModel.remote.repositoryName)&&await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){u.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return r.message!=="User aborted"&&u.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async ensureBranchTitleConfigMigrated(){var e;const r=u.workspace.getConfiguration(Xt),n=r.inspect(ch);async function i(a,o){await r.update(Rc,a,o),await r.update(ch,void 0,o)}return(n==null?void 0:n.globalValue)&&await i(n.globalValue,u.ConfigurationTarget.Global),(n==null?void 0:n.workspaceValue)&&await i(n.workspaceValue,u.ConfigurationTarget.Workspace),(n==null?void 0:n.workspaceFolderValue)&&await i(n.workspaceFolderValue,u.ConfigurationTarget.WorkspaceFolder),(e=u.workspace.getConfiguration(Xt).get(Rc))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,n=e.match(r);if(n&&n.length>0&&n[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";u.window.showErrorMessage(e,r).then(n=>{n===r&&u.commands.executeCommand("workbench.action.openSettings",`${Xt}.${Rc}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":u.workspace.getConfiguration(Xt).get(dh);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);if(this._branchName=this.shouldPromptForBranch?void 0:r.branch,!this._branchName){const n=await ku(await this.ensureBranchTitleConfigMigrated(),this.issue,void 0,await this.getUser());if(e==="on"){const i=this.validateBranchName(n);if(i)return this.showBranchNameError(i),!1;this._branchName=n}else this._branchName=await u.window.showInputBox({value:n,prompt:"Enter the label for the new branch."})}return this._branchName?(r.branch=this._branchName,await this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)?!0:(this._branchName=void 0,!1)):!1}async getCommitMessage(){const e=u.workspace.getConfiguration(Xt).get(ef);if(typeof e=="string")return ku(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}class hp extends u.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,u.CompletionItemKind.Issue);this.issue=e}}class av{constructor(e,r,n){this.stateManager=e,this.repositoriesManager=r,this.context=n}async provideCompletionItems(e,r,n,i){var a,o,f,E;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&i.triggerKind===u.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new u.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#"))return[];if(i.triggerKind===u.CompletionTriggerKind.TriggerCharacter&&u.workspace.getConfiguration(Xt).get("ignoreCompletionTrigger",[]).find(fe=>fe===e.languageId))return[];if(e.languageId!=="scminput"&&!await Ic(e,r))return[];let S=new u.Range(r,r);r.character-1>=0&&e.getText(new u.Range(r.translate(0,-1),r))==="#"&&(S=new u.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const P=new Map,q=new Date;let z,le;if(e.languageId==="scminput"?le=wh(e.uri):e.uri.scheme==="comment"?le=u.window.visibleTextEditors.length>0?(a=u.workspace.getWorkspaceFolder(u.Uri.file(u.window.visibleTextEditors[0].document.uri.fsPath)))==null?void 0:a.uri:void 0:le=(o=u.workspace.getWorkspaceFolder(e.uri))==null?void 0:o.uri,!le)return[];try{z=await((f=this.repositoriesManager.getManagerForFile(le))==null?void 0:f.getPullRequestDefaults())}catch(fe){}const he=this.stateManager.getIssueCollection(le);for(const fe of he){const Pe=(E=await fe[1])!=null?E:[];if(Pe.length!==0)if(Pe[0]instanceof hr){let Ce=0;for(const Oe of Pe)P.set(Us(Oe),await this.completionItemFromIssue(z,Oe,q,S,e,Ce++))}else for(let Ce=0;Ce<Pe.length;Ce++){const Oe=Pe[Ce];for(const Me of Oe.issues)P.set(Us(Me),await this.completionItemFromIssue(z,Me,q,S,e,Ce,Oe.milestone))}}return[...P.values()]}async completionItemFromIssue(e,r,n,i,a,o,f){var E;const S=new hp(r);if(a.languageId==="markdown")S.insertText=`[${Us(r,e)}](${r.html_url})`;else{const q=u.workspace.getConfiguration(Xt).get("issueCompletionFormatScm");a.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof q=="string"?S.insertText=await ku(q,r,e):S.insertText=`${Us(r,e)}`}S.documentation=r.body,S.range=i,S.detail=f?f.title:(E=r.milestone)==null?void 0:E.title;let P=(n.getTime()-new Date(r.updatedAt).getTime()).toString();return P=new Array(20-P.length).join("0")+P,S.sortText=`${o} ${P}`,S.filterText=`${S.detail} # ${r.number} ${r.title} ${S.documentation}`,S}async resolveCompletionItem(e,r){return e instanceof hp&&(e.documentation=await Nc(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}var ov=Object.defineProperty,io=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ov(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ai="newIssue",uv="NewIssue.md",qu="Assignees:",so="Labels:";function ed(t){const e=JSON.parse(t.query);if(e.origin)return u.Uri.parse(e.origin)}class lv{constructor(){io(this,"content"),io(this,"createTime",0),io(this,"modifiedTime",0),io(this,"_onDidChangeFile",new u.EventEmitter),io(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const n=this.onDidChangeFile(i=>{i.length===0&&i[0].type===u.FileChangeType.Deleted&&n.dispose()});return n}stat(e){var r,n;return{type:u.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(n=(r=this.content)==null?void 0:r.length)!=null?n:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,n={create:!1,overwrite:!1}){const i=this.content;this.content=r,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Deleted}])}rename(e,r,n){}}class cv{constructor(e){this.manager=e}async provideCompletionItems(e,r,n,i){if(!e.lineAt(r.line).text.startsWith(so))return[];const a=ed(e.uri);if(!a)return[];const o=this.manager.getManagerForFile(a);if(!o)return[];const f=await o.getPullRequestDefaults();return(await o.getLabels(void 0,f)).map(S=>{const P=new u.CompletionItem(S.name,u.CompletionItemKind.Color);return P.documentation=`#${S.color}`,P.commitCharacters=[" ",","],P})}}class dv{constructor(e,r,n,i){this.manager=e,this.stateManager=r,this.context=n,this.telemetry=i}async provideHover(e,r,n){if(!await _h(e,r))return;let i=e.getWordRangeAtPosition(r,za);if(i&&i.start.character>0){i=new u.Range(new u.Position(i.start.line,i.start.character-1),i.end);const o=e.getText(i).match(za),f=Cc(o),E=this.manager.getManagerForFile(e.uri);if(!E)return;if(f&&o&&f.issueNumber<=this.stateManager.maxIssueNumber(E.repository.rootUri))return this.createHover(E,o[0],f,i)}else return}async createHover(e,r,n,i){const a=await tf(this.stateManager,e,r,n);if(!!a)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new u.Hover(await Nc(a,this.context,this.manager,n.commentNumber),i)}}var hv=Object.defineProperty,pp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class us extends u.TreeItem{constructor(e,r,n){super(r,n);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class pv{constructor(e,r,n){this.stateManager=e,this.manager=r,this.context=n,pp(this,"_onDidChangeTreeData",new u.EventEmitter),pp(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),n.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let n;return e instanceof us?n=e:e instanceof Bs?n=new us(e.repository.rootUri,L.basename(e.repository.rootUri.fsPath),u.TreeItemCollapsibleState.Expanded):e instanceof hr?(n=new us(void 0,`${e.number}: ${e.title}`,u.TreeItemCollapsibleState.None),n.iconPath=e.isOpen?new u.ThemeIcon("issues",new u.ThemeColor("issues.open")):new u.ThemeIcon("issue-closed",new u.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(n.label=`\u2713 ${n.label}`,n.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?n.contextValue="continueissue":n.contextValue="issue",Km(e)&&(n.contextValue="link"+n.contextValue)):n=new us(e.uri,e.milestone.title,e.issues.length>0?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.None),n}getChildren(e){return e===void 0&&this.manager.state!==tn.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof hr&&(e.tooltip=await Nc(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===tn.NeedsAuthentication?[]:[new us(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const n=Array.from(r.keys()),i=n[0];return n.map(a=>{const o=new us(e.repository.rootUri,a);return o.contextValue="query",o.collapsibleState=a===i?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.Collapsed,o})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof Bs?this.getQueryItems(e):e instanceof us?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof hr?[]:e.issues.map(n=>{const i=Object.assign(n);return i.uri=e.uri,i})}}var mv=Object.defineProperty,fv=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?mv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gv{constructor(e){fv(this,"expression"),e.subscriptions.push(u.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=u.workspace.getConfiguration(Xt).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,n,i){if(this.expression===void 0||n.only&&n.only!==u.CodeActionKind.QuickFix)return[];const a=[];let o=r.start.line;do{const f=e.lineAt(o).text,E=f.substring(0,Jm);if(!E.match(za)){const P=E.search(this.expression);if(P>=0){const q=new u.CodeAction("Create GitHub Issue",u.CodeActionKind.QuickFix),z=E.substring(P).search(/\s/),le=P+(z>0?z:E.match(this.expression)[0].length);q.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:o,line:f,insertIndex:le,range:r}]},a.push(q);break}}o++}while(r.end.line>=o);return a}}var vv=Object.defineProperty,Kr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const yv=["Recovery"],bv="currentIssue",td="issues",mp="ignoreMilestones",rd=[{label:"My Issues",query:"default"}];class py extends null{constructor(){super(...arguments);Kr(this,"uri")}}class _v{constructor(e,r,n){this.gitAPI=e,this.manager=r,this.context=n,Kr(this,"resolvedIssues",new Map),Kr(this,"_singleRepoStates",new Map),Kr(this,"_onRefreshCacheNeeded",new u.EventEmitter),Kr(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),Kr(this,"_onDidChangeIssueData",new u.EventEmitter),Kr(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),Kr(this,"_queries",[]),Kr(this,"_onDidChangeCurrentIssue",new u.EventEmitter),Kr(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),Kr(this,"initializePromise"),Kr(this,"statusBarItem"),Kr(this,"isSettingIssue",!1),r.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return n||(n=new Map,n)}getOrCreateSingleRepoState(e,r){let n=this._singleRepoStates.get(e.path);return n||(r||(r=this.manager.getManagerForFile(e)),n={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,n),n)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===tn.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===tn.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){this.gitAPI.repositories.forEach(e=>{this.context.subscriptions.push(e.state.onDidChange(async()=>{var r;const n=this.getOrCreateSingleRepoState(e.rootUri),i=n.lastHead,a=n.lastBranch,o=e.state.HEAD?e.state.HEAD.commit:void 0;(e.state.HEAD?e.state.HEAD.commit:void 0)!==i&&await this.setIssueData(n.folderManager);const f=(r=e.state.HEAD)==null?void 0:r.name;(i!==o||a!==f)&&(!n.currentIssue||f!==n.currentIssue.branchName)&&(f?n.folderManager&&await this.setCurrentIssueFromBranch(n,f):await this.setCurrentIssue(n,void 0)),n.lastHead=e.state.HEAD?e.state.HEAD.commit:void 0,n.lastBranch=e.state.HEAD?e.state.HEAD.name:void 0}))})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=u.workspace.getConfiguration(Xt).get(qs,rd),this._queries.length===0&&(this._queries=rd),this.context.subscriptions.push(u.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Xt}.${qs}`)?(this._queries=u.workspace.getConfiguration(Xt).get(qs,rd),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${Xt}.${mp}`)&&this._onRefreshCacheNeeded.fire()})),await this.setAllIssueData(),this.registerRepositoryChangeEvent(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const n=this.getOrCreateSingleRepoState(r.repository.rootUri,r);n.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,n);const i=(e=r.repository.state.HEAD)==null?void 0:e.name;!n.currentIssue&&i&&await this.setCurrentIssueFromBranch(n,i)}}cleanIssueState(){const e=this.context.workspaceState.get(td),r=e?JSON.parse(e):{issues:[],branches:[]},n=new Date().valueOf()-30*864e5;for(const i in r.issues)r.issues[i].stateModifiedTime<n&&(r.branches&&r.branches[i]&&delete r.branches[i],delete r.issues[i])}async getUsers(e){var r;await this.initializePromise;const n=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),i=new Map;for(const a in n)n[a].forEach(o=>{i.set(o.login,o)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(e){var r;return(r=this.manager.credentialStore.getCurrentUser(e))==null?void 0:r.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,n;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let a,o;for(const f of this._queries){let E;if(f.query===Zm)E=this.setMilestones(e);else{if(!a)try{a=await e.getPullRequestDefaults()}catch(S){}if(!o){const S=Ls(e.repository).filter(P=>P.authProviderId===gt["github-enterprise"]);o=await this.getCurrentUser(S.length?gt["github-enterprise"]:gt.github)}E=this.setIssues(e,await ku(f.query,void 0,a,o))}i.issueCollection.set(f.label,E)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,i.lastBranch=(n=e.repository.state.HEAD)==null?void 0:n.name}setIssues(e,r){return new Promise(async n=>{const i=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),n(i.items.map(a=>{const o=a;return o.uri=e.repository.rootUri,o}))})}async setCurrentIssueFromBranch(e,r){if(u.workspace.getConfiguration(Xt).get(dh)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(o){return}if(r===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const a=this.getSavedState();for(const o in a.branches)if(o===r){const f=await e.folderManager.resolveIssue(a.branches[o].owner,a.branches[o].repositoryName,a.branches[o].number);f&&await this.setCurrentIssue(e,new dp(f,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const n=new Date,i=u.workspace.getConfiguration(Xt).get(mp,[]),a=await e.getMilestones({fetchNextPage:!1},i.indexOf(Mh)<0);let o;const f=new Map,E=[];for(let S=0;S<a.items.length;S++){const P=a.items[S];P.uri=e.repository.rootUri;const q=a.items[S].milestone;if(P.issues&&P.issues.length<=0||i.indexOf(q.title)>=0)continue;E.push(P);let z=q.dueOn?new Date(q.dueOn):void 0;z||(z=new Date(this.removeDateExcludeStrings(q.title)),isNaN(z.getTime())&&(z=new Date(q.createdAt))),z<n&&(o===void 0||z>o)&&(o=z),f.set(q.id?q.id:q.title,z)}E.sort((S,P)=>{const q=f.get(S.milestone.id?S.milestone.id:S.milestone.title),z=f.get(P.milestone.id?P.milestone.id:P.milestone.title);return o&&q>=o&&z>=o?q<=z?-1:1:q>=z?-1:1}),this._onDidChangeIssueData.fire(),r(E)})}removeDateExcludeStrings(e){return yv.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,n;return(n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?n:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof Bs){const n=this._singleRepoStates.get(e.repository.rootUri.path);if(!n)return;e=n}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(bv,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(n){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=u.window.createStatusBarItem("github.issues.status",u.StatusBarAlignment.Left,0),this.statusBarItem.name="GitHub Active Issue");const n=this.statusBarItem;n.text=`$(issues) Issue ${e.map(i=>Us(i.issue,i.repoDefaults)).join(", ")}`,n.tooltip=e.map(i=>i.issue.title).join(", "),n.command="issue.statusBar",n.show()}getSavedState(){const e=this.context.workspaceState.get(td);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}async setSavedIssueState(e,r){const n=this.getSavedState();return n.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(n.branches||(n.branches=Object.create(null)),n.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(td,JSON.stringify(n))}}class wv{constructor(e,r,n){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,n,i){var a;if(e.languageId!=="scminput"&&e.uri.scheme!==ai&&r.character>0&&i.triggerKind===u.CompletionTriggerKind.Invoke&&e.getText(new u.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(i.triggerKind===u.CompletionTriggerKind.TriggerCharacter&&u.workspace.getConfiguration(Xt).get("ignoreUserCompletionTrigger",[]).find(S=>S===e.languageId))return[];if(e.languageId!=="scminput"&&!await Ic(e,r))return[];let o=new u.Range(r,r);r.character-1>=0&&e.getText(new u.Range(r.translate(0,-1),r))==="@"&&(o=new u.Range(r.translate(0,-1),r));const f=e.uri.scheme===ai?(a=ed(e.uri))!=null?a:e.uri:e.languageId==="scminput"?wh(e.uri):e.uri;if(!f)return[];const E=[];return(await this.stateManager.getUserMap(f)).forEach(S=>{const P=new nf({label:S.login,description:S.name},u.CompletionItemKind.User);P.insertText=`@${S.login}`,P.login=S.login,P.uri=f,P.range=o,P.detail=S.name,P.filterText=`@ ${S.login} ${S.name}`,e.uri.scheme===ai&&(P.commitCharacters=[" ",","]),E.push(P)}),E}async resolveCompletionItem(e,r){const n=this.manager.getManagerForFile(e.uri);if(!n)return e;const i=await n.getPullRequestDefaults(),a=await n.resolveUser(i.owner,i.repo,e.login);return a&&(e.documentation=Pc(i,a),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}class Ev{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,n){if(!await _h(e,r))return;let i=e.getWordRangeAtPosition(r,Tc);if(i&&i.start.character>0){i=new u.Range(new u.Position(i.start.line,i.start.character),i.end);const o=e.getText(i).match(Tc);if(o)return this.createHover(e.uri,o[1],i)}else return}async createHover(e,r,n){try{const i=this.manager.getManagerForFile(e);if(!i)return;const a=await i.getPullRequestDefaults(),o=await i.resolveUser(a.owner,a.repo,r);return o&&o.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new u.Hover(Pc(a,o),n)):void 0}catch(i){return}}}var kv=Object.defineProperty,nd=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?kv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Sv="issueCompletions.enabled",Tv="userCompletions.enabled";class Rv{constructor(e,r,n,i,a){this.gitAPI=e,this.manager=r,this.reviewManagers=n,this.context=i,this.telemetry=a,nd(this,"_stateManager"),nd(this,"createIssueInfo"),nd(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new _v(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(u.workspace.registerFileSystemProvider(ai,new lv)),this.registerCompletionProviders(),this.context.subscriptions.push(u.languages.registerCompletionItemProvider({scheme:ai},new cv(this.manager)," ",",")),this.context.subscriptions.push(u.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new pv(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyGithubPermalink",e=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink(e instanceof u.Uri?e:void 0)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromFile",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),this.createIssueFromFile()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(u.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(u.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(u.commands.registerCommand("issue.goToLinkedCode",async e=>Ym(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(u.languages.registerHoverProvider("*",new dv(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(u.languages.registerHoverProvider("*",new Ev(this.manager,this.telemetry))),this.context.subscriptions.push(u.languages.registerCodeActionsProvider("*",new gv(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:av,trigger:"#",disposable:void 0,configuration:Sv},{provider:wv,trigger:"@",disposable:void 0,configuration:Tv}];for(const r of e)u.workspace.getConfiguration(Xt).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=u.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(u.workspace.onDidChangeConfiguration(r=>{for(const n of e)if(r.affectsConfiguration(`${Xt}.${n.configuration}`)){const i=u.workspace.getConfiguration(Xt).get(n.configuration,!0);!i&&n.disposable?(n.disposable.dispose(),n.disposable=void 0):i&&!n.disposable&&this.context.subscriptions.push(n.disposable=u.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));break}}))}async createIssue(){var e,r;let n=(e=u.window.activeTextEditor)==null?void 0:e.document.uri;if(n||(n=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),n)return this.makeNewIssueFile(n)}async createIssueFromFile(){var e,r,n,i;let a;if(!u.window.activeTextEditor||u.window.activeTextEditor.document.uri.scheme!==ai)return;a=u.window.activeTextEditor.document.getText();const o=a.indexOf(`\r
\r
`),f=a.indexOf(`

`);let E;if(o<0&&f<0)return;o<0?E=f:f<0?E=o:E=Math.min(o,f);const S=a.substring(0,E);let P;if(a=a.substring(E+2).trim(),a.startsWith(qu)){const he=a.split(/\r\n|\n/,1);he.length===1&&(P=he[0].substring(qu.length).split(",").map(fe=>(fe=fe.trim(),fe.startsWith("@")&&(fe=fe.substring(1)),fe)),a=a.substring(he[0].length).trim())}let q;if(a.startsWith(so)){const he=a.split(/\r\n|\n/,1);he.length===1&&(q=he[0].substring(so.length).split(",").map(fe=>fe.trim()).filter(fe=>fe),a=a.substring(he[0].length).trim())}const z=a;if(!S||!z)return;const le=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,S,z,P,q,(n=this.createIssueInfo)==null?void 0:n.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,ed(u.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,le&&await u.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=u.workspace.getConfiguration(Xt),n=r.inspect(qs);let i;if(n==null?void 0:n.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const o=r.get(qs);(n==null?void 0:n.defaultValue)&&JSON.stringify(n==null?void 0:n.defaultValue)===JSON.stringify(o)&&r.update(qs,n.defaultValue,u.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await u.commands.executeCommand(i);const a=u.window.activeTextEditor;if(a){const f=a.document.getText().search(e.labelAsString);if(f>=0){const E=a.document.positionAt(f);a.revealRange(new u.Range(E,E)),a.selection=new u.Selection(E,E)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await u.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),u.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof hr)return u.env.openExternal(u.Uri.parse(e.html_url))}async doStartWorking(e,r,n){let i=e,a=r.githubRepository,o=r.remote;if(!i){if(i=await this.chooseRepo("Choose which repository you want to work on this isssue in."),!i)return;a=await i.getOrigin(),o=a.remote}const f=await i.findUpstreamForItem({githubRepository:a,remote:o});f.needsFork&&await i.tryOfferToFork(a)===void 0||await this._stateManager.setCurrentIssue(i,new dp(r,i,this._stateManager,f.remote,n))}async startWorking(e){e instanceof hr&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof hr&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;let n=this.manager.getManagerForIssueModel(e);!n&&(n=await this.chooseRepo("Choose which repository you want to stop working on this issue in."),!n)||e instanceof hr&&((r=this._stateManager.currentIssue(n.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(n,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,n=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(E){}const a=`$(primitive-square) Stop working on #${e.issue.number}`,o=e.branchName&&i?[r,n,a]:[r,n,a];switch(await u.window.showQuickPick(o,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case n:{const E=is.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(E)return gf(e.manager,E,this._stateManager);break}case a:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),n=await u.window.showQuickPick(r);if(n)return this.statusBarActions(n.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof hr)return u.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof hr)return u.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await u.env.clipboard.readText())}async createTodoIssue(e,r){let n,i,a,o,f,E;if(!e&&u.window.activeTextEditor)n=u.window.activeTextEditor.document,E=n.getText(u.window.activeTextEditor.selection);else if(e)n=e.document,a=e.insertIndex,o=e.lineNumber,i=e.line.substring(a,e.line.length).trim(),E=n.getText(e.range.isEmpty?n.lineAt(e.range.start.line).range:e.range);else return;const S=E.match(Tc);S&&S.length===2&&(await this._stateManager.getUserMap(n.uri)).has(S[1])&&(f=[S[1]]);let P;const q=r||(e==null?void 0:e.document.isUntitled)?r:(await Ac(this.gitAPI,e)).permalink,z=u.window.createInputBox();z.value=i!=null?i:"",z.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",z.title="Create Issue",z.buttons=[{iconPath:new u.ThemeIcon("edit"),tooltip:"Edit Description"}],z.onDidAccept(async()=>{P=z.value,P&&(z.busy=!0,await this.doCreateIssue(n,e,P,q,f,void 0,o,a),z.busy=!1),z.hide()}),z.onDidTriggerButton(async()=>{P=z.value,z.busy=!0,this.createIssueInfo={document:n,newIssue:e,lineNumber:o,insertIndex:a},this.makeNewIssueFile(n.uri,P,q,f),z.busy=!1,z.hide()}),z.show()}async makeNewIssueFile(e,r,n,i){const a=`?{"origin":"${e.toString()}"}`,o=u.Uri.parse(`${ai}:/${uv}${a}`);if(u.window.visibleTextEditors.filter(fe=>fe.document.uri.scheme===ai).length>0)return;await u.workspace.fs.delete(o);const f=`${qu} ${i&&i.length>0?i.map(fe=>"@"+fe).join(", ")+" ":""}`,E=`${so} `,S=`${r!=null?r:"Issue Title"}

${f}
${E}

${n!=null?n:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await u.workspace.fs.writeFile(o,this.stringToUint8Array(S));const P=u.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new u.ThemeColor("issues.newIssueDecoration")}}),q=u.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new u.ThemeColor("issues.newIssueDecoration")}}),z=u.window.onDidChangeActiveTextEditor(fe=>{if((fe==null?void 0:fe.document.uri.scheme)===ai){const Pe=fe.document.lineAt(2);Pe.text.startsWith(qu)&&fe.setDecorations(P,[new u.Range(new u.Position(2,0),new u.Position(2,Pe.text.length))]);const Ce=fe.document.lineAt(3);Ce.text.startsWith(so)&&fe.setDecorations(q,[new u.Range(new u.Position(3,0),new u.Position(3,Ce.text.length))])}}),le=await u.window.showTextDocument(o),he=u.workspace.onDidCloseTextDocument(fe=>{fe===le.document&&(z.dispose(),he.dispose())})}async verifyLabels(e,r){var n;if(!r.labels)return!0;const i=(await e.getLabels(void 0,r)).map(f=>f.name),a=[],o=[];if((n=r.labels)==null||n.forEach(f=>{let E=typeof f=="string"?f:f.name;!E||(i.includes(E)?o.push(E):a.push(E))}),a.length>0){const f="Yes",E="No";switch(await u.window.showInformationMessage(`The following labels don't exist in this repository: ${a.join(", ")}. 
Do you want to create these labels?`,{modal:!0},f,E)){case f:return!0;case E:return r.labels=o,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const i of this.manager.folderManagers)try{const a=await i.getPullRequestDefaults();r.push({label:`${a.owner}/${a.repo}`,repo:i})}catch(a){}if(r.length===0)return;if(r.length===1)return r[0].repo;const n=await u.window.showQuickPick(r,{placeHolder:e});return n==null?void 0:n.repo}async doCreateIssue(e,r,n,i,a,o,f,E,S){let P,q;if(e?q=this.manager.getManagerForFile(e.uri):S&&(q=this.manager.getManagerForFile(S)),q||(q=await this.chooseRepo("Choose where to create the issue.")),!q)return!1;try{P=await q.getPullRequestDefaults()}catch(fe){return u.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const z=i||(r==null?void 0:r.document.isUntitled)?i:(await Ac(this.gitAPI,r)).permalink,le={owner:P.owner,repo:P.repo,title:n,body:z,assignees:a,labels:o};if(!await this.verifyLabels(q,le))return!1;const he=await q.createIssue(le);if(he){if(e!==void 0&&E!==void 0&&f!==void 0){const fe=new u.WorkspaceEdit,Pe=u.workspace.getConfiguration(Xt).get("createInsertFormat","number")==="number"?`#${he.number}`:he.html_url;fe.insert(e.uri,new u.Position(f,E),` ${Pe}`),await u.workspace.applyEdit(fe)}else{const fe="Copy URL",Pe="Open Issue";u.window.showInformationMessage("Issue created",fe,Pe).then(async Ce=>{switch(Ce){case fe:await u.env.clipboard.writeText(he.html_url);break;case Pe:await u.env.openExternal(u.Uri.parse(he.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(e){const r=await Ac(this.gitAPI,void 0,e);return r.error&&u.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${r.error}`),r}async getContextualizedPermalink(e,r){let n;try{n=await u.env.asExternalUri(e)}catch(f){return r}const i=n.scheme==="https"&&/^(vscode|github)\./.test(n.authority)?n.authority:void 0;if(!i)return r;const a=u.Uri.parse(r),o=/^(github)\./.test(n.authority)?a.path:`/github${a.path}`;return a.with({authority:i,path:o}).toString()}async copyPermalink(e){const r=await this.getPermalinkWithError(e);if(r.permalink)return u.env.clipboard.writeText(r.originalFile?await this.getContextualizedPermalink(r.originalFile,r.permalink):r.permalink)}getMarkdownLinkText(){if(!u.window.activeTextEditor)return;let e=u.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new u.Range(e.start,new u.Position(e.start.line+1,0)));const r=u.window.activeTextEditor.document.getText(e);if(r)return r;if(e=u.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return u.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e.permalink&&r)return u.env.clipboard.writeText(`[${r.trim()}](${e.permalink})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return u.env.openExternal(u.Uri.parse(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink))}}var Cv=Object.defineProperty,Pv=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Nv{constructor(){Pv(this,"_disposables"),this._disposables=[],this._disposables.push(u.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==si)return;const n=xi(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status)};const i=Zt(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status)}}letter(e){switch(e){case Je.MODIFY:return"M";case Je.ADD:return"A";case Je.DELETE:return"D";case Je.RENAME:return"R";case Je.UNKNOWN:return"U";case Je.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var Av=Object.defineProperty,Uu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Av(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Iv extends Ir{constructor(e,r,n,i,a,o){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.commit=i,this.comments=a,this.isCurrent=o,Uu(this,"sha"),Uu(this,"collapsibleState"),Uu(this,"iconPath"),Uu(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=u.TreeItemCollapsibleState.Collapsed;let f;try{i.author&&i.author.avatar_url&&(f=u.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(E){}this.iconPath=f,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){var e;const n=((e=await this.pullRequest.getCommitChangedFiles(this.commit))!=null?e:[]).map(i=>{const a=this.comments.filter(S=>S.path===i.filename&&S.originalCommitId===this.commit.sha),o=i.filename,f=u.Uri.parse(L.posix.join(`commit~${this.commit.sha.substr(0,8)}`,o)),E=new Ws(this,this.pullRequestManager,this.pullRequest,ps(i.status),o,void 0,Xr(f,o,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),Xr(f,o,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],a,this.commit.sha,this.isCurrent);return E.useViewChangesCommand(),E});return Promise.resolve(n)}}var Ov=Object.defineProperty,ao=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ov(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Dv extends Ir{constructor(e,r,n,i){super();ao(this,"label","Commits"),ao(this,"collapsibleState"),ao(this,"_folderRepoManager"),ao(this,"_pr"),ao(this,"_comments"),this.parent=e,this._pr=n,this._folderRepoManager=r,this._comments=i,this.collapsibleState=u.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const e=await this._pr.getCommits(),r=e.map((n,i)=>new Iv(this,this._folderRepoManager,this._pr,n,this._comments,i===e.length-1));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var Mv=Object.defineProperty,id=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class xv extends Ir{constructor(e,r){super();this.parent=e,this._fileChanges=r,id(this,"label","Files"),id(this,"collapsibleState"),id(this,"directories",[]),this.collapsibleState=u.TreeItemCollapsibleState.Expanded;const n=new as(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?this.directories=n.children:this.directories=[n]}getTreeItem(){return this}async getChildren(){let e;return u.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var Fv=Object.defineProperty,$u=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Fv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Lv extends ss{constructor(e,r,n,i,a){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=n,this._comments=i,this._localFileChanges=a,$u(this,"_filesCategoryNode"),$u(this,"_commitsCategoryNode"),$u(this,"collapsibleState",u.TreeItemCollapsibleState.Expanded),$u(this,"_disposables",[]),this.label=this._pullRequest.title,this._disposables.push(u.window.onDidChangeActiveTextEditor(o=>{const f=o==null?void 0:o.document.uri.toString();this.revealActiveEditorInTree(f)})),this._disposables.push(this.parent.view.onDidChangeVisibility(o=>{var f;const E=(f=u.window.activeTextEditor)==null?void 0:f.document.uri.toString();this.revealActiveEditorInTree(E)}))}revealActiveEditorInTree(e){if(this.parent.view.visible&&e){const r=this._localFileChanges.find(n=>n.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new xv(this.parent,this._localFileChanges),this._commitsCategoryNode=new Dv(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var qv=Object.defineProperty,oo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class fp extends u.Disposable{constructor(e){super(()=>this.dispose());this._context=e,oo(this,"_onDidChangeTreeData",new u.EventEmitter),oo(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),oo(this,"_disposables",[]),oo(this,"_pullRequestManagerMap",new Map),oo(this,"_view"),this._view=u.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(u.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${Ar}.fileListLayout`)){this._onDidChangeTreeData.fire();const n=u.workspace.getConfiguration(`${Ar}`).get("fileListLayout");await u.commands.executeCommand("setContext","fileListLayout:flat",n==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,n,i,a){const o=new Lv(this,r,e,i,n);this._pullRequestManagerMap.set(e,o),this.updateViewTitle(),await u.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),a&&this._view.reveal(o)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await u.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){this._view.reveal(e,r)}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const n of this._pullRequestManagerMap.values())r.push(n);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof Ws&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}var Uv=Object.defineProperty,Ai=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),oi;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoOpenFolder=6]="NoOpenFolder",t[t.NoMatchingRemotes=7]="NoMatchingRemotes",t[t.ConfigureRemotes=8]="ConfigureRemotes",t[t.Initializing=9]="Initializing"})(oi||(oi={}));class $n extends Ir{constructor(e,r,n){super();switch(Ai(this,"collapsibleState"),Ai(this,"iconPath"),Ai(this,"type"),Ai(this,"command"),this.parent=e,this.type=r,this.collapsibleState=u.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="You have not yet opened a folder.";break;case 7:this.label="No remotes match the current setting.";break;case 8:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 9:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class sd extends Ir{constructor(e,r,n,i,a,o){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=n,this._type=i,this._categoryQuery=o,Ai(this,"collapsibleState"),Ai(this,"prs"),Ai(this,"fetchNextPage",!1),Ai(this,"repositoryPageInformation",new Map),this.prs=[],this.collapsibleState=this._type===Wt.All?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.Collapsed,i){case Wt.All:this.label="All Open";break;case Wt.Query:this.label=a;break;case Wt.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}}async getChildren(){this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(i=>i.dispose()),this.childrenDisposables=[]);let e=!1,r=!1,n=!1;if(this._type===Wt.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){u.window.showErrorMessage(`Fetching local pull requests failed: ${ke(i)}`),n=i instanceof Su}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,r=i.hasUnsearchedRepositories}catch(i){u.window.showErrorMessage(`Fetching pull requests failed: ${ke(i)}`),n=i instanceof Su}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,r=i.hasUnsearchedRepositories,this._type){case Wt.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case Wt.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){u.window.showErrorMessage(`Fetching pull requests failed: ${ke(i)}`),n=i instanceof Su}if(this.prs&&this.prs.length){const i=this.prs.map(a=>new Xs(this,this._folderRepoManager,a,this._type===Wt.LocalPullRequest));return e?i.push(new $n(this,1,this)):r&&i.push(new $n(this,2,this)),this.childrenDisposables=i,i}else{const i=n?3:0,a=[new $n(this,i)];return this.childrenDisposables=a,a}}getTreeItem(){return this}}var $v=Object.defineProperty,gp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const vp="queries";class uo extends Ir{constructor(e,r,n,i){super();this.folderManager=n,this.telemetry=i,gp(this,"collapsibleState"),gp(this,"iconPath"),this.parent=e,this.collapsibleState=u.TreeItemCollapsibleState.Expanded,this.label=L.basename(r.fsPath)}static getQueries(e){return u.workspace.getConfiguration(Ar,e.repository.rootUri).get(vp)||[]}getTreeItem(){return this}async getChildren(){return uo.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,n){const i=uo.getQueries(e).map(a=>new sd(n,e,r,Wt.Query,a.label,a.query));return[new sd(n,e,r,Wt.LocalPullRequest),...i,new sd(n,e,r,Wt.All)]}}var Gv=Object.defineProperty,Ii=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class yp{constructor(e){this._telemetry=e,Ii(this,"_onDidChangeTreeData",new u.EventEmitter),Ii(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Ii(this,"_onDidChange",new u.EventEmitter),Ii(this,"_disposables"),Ii(this,"_childrenDisposables"),Ii(this,"_view"),Ii(this,"_reposManager"),Ii(this,"_initialized",!1),this._disposables=[],this._disposables.push(u.workspace.registerTextDocumentContentProvider("pr",np())),this._disposables.push(u.window.registerFileDecorationProvider(Kh)),this._disposables.push(u.window.registerFileDecorationProvider(Bc)),this._disposables.push(u.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(u.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=u.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(u.commands.registerCommand("pr.configurePRViewlet",async()=>{switch(await u.window.showQuickPick(["Configure Remotes...","Configure Queries..."])){case"Configure Queries...":return u.commands.executeCommand("workbench.action.openSettings",`@ext:${kn} queries`);case"Configure Remotes...":return u.commands.executeCommand("workbench.action.openSettings",`@ext:${kn} remotes`);default:return}})),this._disposables.push(u.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Ar}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}async reveal(e,r){return this._view.reveal(e,r)}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(u.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${Ar}.${vp}`)&&this.refresh()}))}refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async resolveTreeItem(e,r){return r instanceof Fu&&await r.resolve(),r}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===tn.NeedsAuthentication?Promise.resolve([]):u.workspace.getConfiguration(Ar).get(Wa)?Promise.resolve([new $n(this,oi.NoMatchingRemotes),new $n(this,oi.ConfigureRemotes)]):Promise.resolve([new $n(this,oi.NoRemotes)])}async getChildren(e){if(!this._reposManager)return u.workspace.workspaceFolders?Promise.resolve([new $n(this,oi.NoGitRepositories)]):Promise.resolve([new $n(this,oi.NoOpenFolder)]);if(this._reposManager.state===tn.Initializing)return Promise.resolve([new $n(this,oi.Initializing)]);if(this._reposManager.folderManagers.filter(r=>r.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(n=>n.dispose());let r;return this._reposManager.folderManagers.length===1?r=uo.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this):r=this._reposManager.folderManagers.map(n=>new uo(this,n.repository.rootUri,n,this._telemetry)),this._childrenDisposables=r,Promise.resolve(r)}return this._reposManager.folderManagers.filter(r=>r.repository.state.remotes.length>0).length===0?Promise.resolve([new $n(this,oi.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var Hv=Object.defineProperty,bp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Bv{constructor(e){this.gitAPI=e,bp(this,"_onDidChange",new u.EventEmitter),bp(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,r){if(!this._fallback)return"";const{path:n,commit:i,rootPath:a}=di(e.query);if(!n||!i)return"";const o=zh(this.gitAPI,u.Uri.file(a));if(!o)return u.window.showErrorMessage(`We couldn't find an open repository for ${i} locally.`),"";const f=L.join(o.rootUri.fsPath,n).replace(/\\/g,"/");let E;try{if(E=await o.show(i,f),!E)throw new Error}catch(S){if(E=await this._fallback(e),!E)try{await o.getCommit(i)}catch(P){u.window.showErrorMessage(`We couldn't find commit ${i} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return E||""}registerTextDocumentContentFallback(e){this._fallback=e}}var Vv=Object.defineProperty,_p=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class wp{constructor(e,r,n,i,a,o,f){this._context=e,this._reposManager=r,this._reviewManagers=n,this._prsTreeDataProvider=i,this._prFileChangesProvider=a,this._telemetry=o,_p(this,"_disposables"),this._disposables=[];const E=new Bv(f);E.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(u.workspace.registerTextDocumentContentProvider("review",E)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(u.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new fp(this._context);for(const r of this._reviewManagers)r.updateState(!0)}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new yp(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}_p(wp,"ID","Reviews");const jv="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let _r;const Ep="prompts",kp="createPROnPublish";async function Sp(t,e,r,n,i,a,o){t.subscriptions.push(C),C.appendLine("Git repository found, initializing review manager and pr tree view."),u.authentication.onDidChangeSessions(async Ce=>{Ce.provider.id==="github"&&(await P.clearCredentialCache(),z&&z.forEach(Oe=>Oe.updateState(!0)))}),t.subscriptions.push(e.onDidPublish(async Ce=>{if(!Ce.branch||Kd(Ep,kp)===!1)return;const Oe=z.find(mt=>mt.repository.rootUri.toString()===Ce.repository.rootUri.toString());if((Oe==null?void 0:Oe.isCreatingPullRequest)||!S.find(mt=>mt.gitHubRepositories.length>0))return;const Me="Create Pull Request...",Ae="Don't Show Again",Ge=await u.window.showInformationMessage(`Would you like to create a Pull Request for branch '${Ce.branch}'?`,Me,Ae);Ge===Me?Oe==null||Oe.createPullRequest(Ce.branch):Ge===Ae&&Yd(Ep,kp,!1)})),t.subscriptions.push(u.window.registerUriHandler(go)),t.subscriptions.push(new Nv);const f=u.workspace.workspaceFolders;f&&(n=n.sort((Ce,Oe)=>{let Me=f.length,Ae=f.length;for(let Ge=0;Ge<f.length&&(f[Ge].uri.toString()===Ce.rootUri.toString()?Me=Ge:f[Ge].uri.toString()===Oe.rootUri.toString()&&(Ae=Ge),!(Me!==f.length&&Ae!==f.length));Ge++);return Me-Ae}));const E=new xg(t),S=n.map(Ce=>new Bs(t,Ce,_r,e,r,E));t.subscriptions.push(...S);const P=new op(S,r,_r,E);t.subscriptions.push(P),a.then(Ce=>{Ce&&Ce.registerContactServiceProvider("github-pr",new rv(P))});const q=new fp(t);t.subscriptions.push(q);const z=S.map(Ce=>new is(t,Ce.repository,Ce,_r,q,o,E)),le=new wp(t,P,z,i,q,_r,e);t.subscriptions.push(le),e.onDidChangeState(()=>{C.appendLine(`Git initialization state changed: state=${e.state}`),z.forEach(Ce=>Ce.updateState(!0))}),e.onDidOpenRepository(Ce=>{const Oe=Ce.state.onDidChange(()=>{if(C.appendLine(`Repo state for ${Ce.rootUri} changed.`),P.getManagerForFile(Ce.rootUri)){C.appendLine(`Repo ${Ce.rootUri} has already been setup.`);return}const Ae=new Bs(t,Ce,_r,e,r,E);P.insertFolderManager(Ae);const Ge=new is(t,Ae.repository,Ae,_r,q,o,E);z.push(Ge),i.refresh(),Oe.dispose()})}),e.onDidCloseRepository(Ce=>{P.removeRepo(Ce);const Oe=z.findIndex(Me=>Me.repository.rootUri.toString()===Ce.rootUri.toString());if(Oe){const Me=z[Oe];z.splice(Oe),Me.dispose()}i.refresh()}),i.initialize(P),zm(t),Dg(t,E,P,z,_r,r,i);const he=u.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await u.commands.executeCommand("setContext","fileListLayout:flat",he==="flat");const fe=new Rv(e,P,z,t,_r);t.subscriptions.push(fe),await fe.initialize(),t.subscriptions.push(new iv),await u.commands.executeCommand("setContext","github:initialized",!0);const Pe=await $g(t,_r);await Pe.initializePromise,await Pe.isCachedFlightEnabled("githubaa"),_r.sendTelemetryEvent("startup")}async function zv(t){if(kn==="GitHub.vscode-pull-request-github-insiders"&&u.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");const e=new Rg;u.commands.registerCommand("github.api.preloadPullRequest",async a=>{await u.commands.executeCommand("setContext",hi,!0),await u.commands.executeCommand("github:activePullRequest:welcome.focus"),e.shouldShow=a});const r=u.workspace.getConfiguration("git").get("openDiffOnClick",!0);await u.commands.executeCommand("setContext","openDiffOnClick",r),Jr.initialize(t);const n=new li,i=u.extensions.getExtension(kn).packageJSON.version;return _r=new Lg(new(x())(kn,i,jv)),t.subscriptions.push(_r),Qv(t,n,e),n}async function Qv(t,e,r){Fm(t),cs.init(t);const n=new Hm(_r);t.subscriptions.push(n),await n.initialize(gt.github),Qs()&&await n.initialize(gt["github-enterprise"]);const i=await ev(n,e);i&&t.subscriptions.push(i);const a=Zg(e);t.subscriptions.push(a);const o=a.initialize();t.subscriptions.push(e);const f=new yp(_r);t.subscriptions.push(f),C.appendLine("Looking for git repository");const E=e.repositories;C.appendLine(`Found ${E.length} repositories during activation`),E.length>0?await Sp(t,e,n,E,f,o,r):(C.appendLine("Waiting for git repository"),ne(e.onDidOpenRepository)(async S=>{C.appendLine(`Repository ${S.rootUri} opened`),await Sp(t,e,n,[S],f,o,r)}))}async function Wv(){_r&&_r.dispose()}})(),module.exports=Gu})();
